var x3=Object.defineProperty;var I3=Object.getPrototypeOf;var L3=Reflect.get;var H1=i=>{throw TypeError(i)};var R3=(i,e,t)=>e in i?x3(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var De=(i,e,t)=>R3(i,typeof e!="symbol"?e+"":e,t),uc=(i,e,t)=>e.has(i)||H1("Cannot "+t);var O=(i,e,t)=>(uc(i,e,"read from private field"),t?t.call(i):e.get(i)),ge=(i,e,t)=>e.has(i)?H1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),pe=(i,e,t,s)=>(uc(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),Ge=(i,e,t)=>(uc(i,e,"access private method"),t);var el=(i,e,t)=>L3(I3(i),t,e);import{g as Pu,a as Ou,r as k,u as Nu,d as k3,T as w3,b as D3,c as M3,e as P3,j as A,s as ci,f as _o,h as Fu,i as V1,m as en,k as O3,l as qn,P as N3,B as F3,n as ce,o as Gg,I as Ps,p as G1,R as Ao,q as U3,S as $3,t as tl}from"./index-_k_YG1NB.js";import{P as gr,R as B3}from"./index-B4vfSmdh.js";import{T as H3,S as Is}from"./index-BVBUcwEs.js";import{S as V3}from"./right-bg-arrow-BHcf5MX_.js";import{G as Ua}from"./Grid-BzGfZkG4.js";import{S as vr}from"./index-BjN0lCY0.js";import{C as Or}from"./index-BmcmqtlG.js";function G3(i){return Pu("MuiCollapse",i)}Ou("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const K3=i=>{const{orientation:e,classes:t}=i,s={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Fu(s,G3,t)},W3=ci("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[e.root,e[t.orientation],t.state==="entered"&&e.entered,t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&e.hidden]}})(en(({theme:i})=>({height:0,overflow:"hidden",transition:i.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:i.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),q3=ci("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),j3=ci("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),nh=k.forwardRef(function(e,t){const s=Nu({props:e,name:"MuiCollapse"}),{addEndListener:r,children:n,className:a,collapsedSize:o="0px",component:l,easing:d,in:u,onEnter:c,onEntered:h,onEntering:f,onExit:m,onExited:p,onExiting:g,orientation:v="vertical",style:b,timeout:E=k3.standard,TransitionComponent:T=w3,...x}=s,R={...s,orientation:v,collapsedSize:o},I=K3(R),C=D3(),L=M3(),S=k.useRef(null),w=k.useRef(),F=typeof o=="number"?`${o}px`:o,G=v==="horizontal",K=G?"width":"height",V=k.useRef(null),q=P3(t,V),z=X=>be=>{if(X){const Fe=V.current;be===void 0?X(Fe):X(Fe,be)}},$=()=>S.current?S.current[G?"clientWidth":"clientHeight"]:0,re=z((X,be)=>{S.current&&G&&(S.current.style.position="absolute"),X.style[K]=F,c&&c(X,be)}),se=z((X,be)=>{const Fe=$();S.current&&G&&(S.current.style.position="");const{duration:ze,easing:nt}=V1({style:b,timeout:E,easing:d},{mode:"enter"});if(E==="auto"){const Bt=C.transitions.getAutoHeightDuration(Fe);X.style.transitionDuration=`${Bt}ms`,w.current=Bt}else X.style.transitionDuration=typeof ze=="string"?ze:`${ze}ms`;X.style[K]=`${Fe}px`,X.style.transitionTimingFunction=nt,f&&f(X,be)}),W=z((X,be)=>{X.style[K]="auto",h&&h(X,be)}),B=z(X=>{X.style[K]=`${$()}px`,m&&m(X)}),oe=z(p),fe=z(X=>{const be=$(),{duration:Fe,easing:ze}=V1({style:b,timeout:E,easing:d},{mode:"exit"});if(E==="auto"){const nt=C.transitions.getAutoHeightDuration(be);X.style.transitionDuration=`${nt}ms`,w.current=nt}else X.style.transitionDuration=typeof Fe=="string"?Fe:`${Fe}ms`;X.style[K]=F,X.style.transitionTimingFunction=ze,g&&g(X)}),ye=X=>{E==="auto"&&L.start(w.current||0,X),r&&r(V.current,X)};return A.jsx(T,{in:u,onEnter:re,onEntered:W,onEntering:se,onExit:B,onExited:oe,onExiting:fe,addEndListener:ye,nodeRef:V,timeout:E==="auto"?null:E,...x,children:(X,{ownerState:be,...Fe})=>A.jsx(W3,{as:l,className:_o(I.root,a,{entered:I.entered,exited:!u&&F==="0px"&&I.hidden}[X]),style:{[G?"minWidth":"minHeight"]:F,...b},ref:q,ownerState:{...R,state:X},...Fe,children:A.jsx(q3,{ownerState:{...R,state:X},className:I.wrapper,ref:S,children:A.jsx(j3,{ownerState:{...R,state:X},className:I.wrapperInner,children:n})})})})});nh&&(nh.muiSupportAuto=!0);const Kg=k.createContext({});function Y3(i){return Pu("MuiAccordion",i)}const il=Ou("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),Z3=i=>{const{classes:e,square:t,expanded:s,disabled:r,disableGutters:n}=i;return Fu({root:["root",!t&&"rounded",s&&"expanded",r&&"disabled",!n&&"gutters"],heading:["heading"],region:["region"]},Y3,e)},z3=ci(N3,{name:"MuiAccordion",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:t}=i;return[{[`& .${il.region}`]:e.region},e.root,!t.square&&e.rounded,!t.disableGutters&&e.gutters]}})(en(({theme:i})=>{const e={duration:i.transitions.duration.shortest};return{position:"relative",transition:i.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(i.vars||i).palette.divider,transition:i.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${il.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${il.disabled}`]:{backgroundColor:(i.vars||i).palette.action.disabledBackground}}}),en(({theme:i})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(i.vars||i).shape.borderRadius,borderTopRightRadius:(i.vars||i).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(i.vars||i).shape.borderRadius,borderBottomRightRadius:(i.vars||i).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${il.expanded}`]:{margin:"16px 0"}}}]}))),Q3=ci("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),X3=k.forwardRef(function(e,t){const s=Nu({props:e,name:"MuiAccordion"}),{children:r,className:n,defaultExpanded:a=!1,disabled:o=!1,disableGutters:l=!1,expanded:d,onChange:u,square:c=!1,slots:h={},slotProps:f={},TransitionComponent:m,TransitionProps:p,...g}=s,[v,b]=O3({controlled:d,default:a,name:"Accordion",state:"expanded"}),E=k.useCallback($=>{b(!v),u&&u($,!v)},[v,u,b]),[T,...x]=k.Children.toArray(r),R=k.useMemo(()=>({expanded:v,disabled:o,disableGutters:l,toggle:E}),[v,o,l,E]),I={...s,square:c,disabled:o,disableGutters:l,expanded:v},C=Z3(I),L={transition:m,...h},S={transition:p,...f},w={slots:L,slotProps:S},[F,G]=qn("root",{elementType:z3,externalForwardedProps:{...w,...g},className:_o(C.root,n),shouldForwardComponentProp:!0,ownerState:I,ref:t,additionalProps:{square:c}}),[K,V]=qn("heading",{elementType:Q3,externalForwardedProps:w,className:C.heading,ownerState:I}),[q,z]=qn("transition",{elementType:nh,externalForwardedProps:w,ownerState:I});return A.jsxs(F,{...G,children:[A.jsx(K,{...V,children:A.jsx(Kg.Provider,{value:R,children:T})}),A.jsx(q,{in:v,timeout:"auto",...z,children:A.jsx("div",{"aria-labelledby":T.props.id,id:T.props["aria-controls"],role:"region",className:C.region,children:x})})]})});function J3(i){return Pu("MuiAccordionDetails",i)}Ou("MuiAccordionDetails",["root"]);const ey=i=>{const{classes:e}=i;return Fu({root:["root"]},J3,e)},ty=ci("div",{name:"MuiAccordionDetails",slot:"Root"})(en(({theme:i})=>({padding:i.spacing(1,2,2)}))),iy=k.forwardRef(function(e,t){const s=Nu({props:e,name:"MuiAccordionDetails"}),{className:r,...n}=s,a=s,o=ey(a);return A.jsx(ty,{className:_o(o.root,r),ref:t,ownerState:a,...n})});function sy(i){return Pu("MuiAccordionSummary",i)}const Es=Ou("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),ry=i=>{const{classes:e,expanded:t,disabled:s,disableGutters:r}=i;return Fu({root:["root",t&&"expanded",s&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",t&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",t&&"expanded"]},sy,e)},ny=ci(F3,{name:"MuiAccordionSummary",slot:"Root"})(en(({theme:i})=>{const e={duration:i.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:i.spacing(0,2),transition:i.transitions.create(["min-height","background-color"],e),[`&.${Es.focusVisible}`]:{backgroundColor:(i.vars||i).palette.action.focus},[`&.${Es.disabled}`]:{opacity:(i.vars||i).palette.action.disabledOpacity},[`&:hover:not(.${Es.disabled})`]:{cursor:"pointer"},variants:[{props:t=>!t.disableGutters,style:{[`&.${Es.expanded}`]:{minHeight:64}}}]}})),ay=ci("span",{name:"MuiAccordionSummary",slot:"Content"})(en(({theme:i})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:i.transitions.create(["margin"],{duration:i.transitions.duration.shortest}),[`&.${Es.expanded}`]:{margin:"20px 0"}}}]}))),oy=ci("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(en(({theme:i})=>({display:"flex",color:(i.vars||i).palette.action.active,transform:"rotate(0deg)",transition:i.transitions.create("transform",{duration:i.transitions.duration.shortest}),[`&.${Es.expanded}`]:{transform:"rotate(180deg)"}}))),ly=k.forwardRef(function(e,t){const s=Nu({props:e,name:"MuiAccordionSummary"}),{children:r,className:n,expandIcon:a,focusVisibleClassName:o,onClick:l,slots:d,slotProps:u,...c}=s,{disabled:h=!1,disableGutters:f,expanded:m,toggle:p}=k.useContext(Kg),g=S=>{p&&p(S),l&&l(S)},v={...s,expanded:m,disabled:h,disableGutters:f},b=ry(v),E={slots:d,slotProps:u},[T,x]=qn("root",{ref:t,shouldForwardComponentProp:!0,className:_o(b.root,n),elementType:ny,externalForwardedProps:{...E,...c},ownerState:v,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:h,"aria-expanded":m,focusVisibleClassName:_o(b.focusVisible,o)},getSlotProps:S=>({...S,onClick:w=>{var F;(F=S.onClick)==null||F.call(S,w),g(w)}})}),[R,I]=qn("content",{className:b.content,elementType:ay,externalForwardedProps:E,ownerState:v}),[C,L]=qn("expandIconWrapper",{className:b.expandIconWrapper,elementType:oy,externalForwardedProps:E,ownerState:v});return A.jsxs(T,{...x,children:[A.jsx(R,{...I,children:r}),a&&A.jsx(C,{...L,children:a})]})}),Jt=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.17 4.32618C12.177 4.44118 12.177 4.55618 12.177 4.67218C12.177 8.20918 9.494 12.2872 4.588 12.2872V12.2852C3.13824 12.2869 1.71878 11.8703 0.5 11.0852C1.19858 11.1691 1.90686 11.1143 2.58419 10.9238C3.26152 10.7333 3.89456 10.4109 4.447 9.97518C3.89027 9.96409 3.35092 9.77935 2.90431 9.44677C2.4577 9.11419 2.12615 8.65039 1.956 8.12018C2.356 8.19718 2.767 8.18118 3.16 8.07418C2.55528 7.95093 2.01181 7.62231 1.62176 7.14405C1.23172 6.66579 1.01911 6.06733 1.02 5.45018V5.41618C1.391 5.62318 1.806 5.73818 2.23 5.75118C1.66514 5.37118 1.26571 4.79079 1.11255 4.12745C0.959386 3.46412 1.06392 2.76736 1.405 2.17818C2.07333 3.00434 2.90831 3.68035 3.85547 4.16211C4.80263 4.64388 5.84071 4.92058 6.902 4.97418C6.79627 4.51767 6.8119 4.04143 6.94734 3.59283C7.08278 3.14423 7.33331 2.73891 7.674 2.41718C7.92896 2.17631 8.229 1.98818 8.55688 1.86359C8.88476 1.73901 9.23402 1.68042 9.5846 1.6912C9.93519 1.70198 10.2802 1.78191 10.5998 1.9264C10.9194 2.07089 11.2073 2.2771 11.447 2.53318C12.0446 2.41473 12.6175 2.19489 13.141 1.88318C12.941 2.50318 12.525 3.02918 11.968 3.36318C12.4971 3.30013 13.0135 3.15752 13.5 2.94018C13.1426 3.47755 12.6922 3.94689 12.17 4.32618Z",fill:"#A0A3A5"})),ei="/elevanto-ai",dy=[{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})},{iconSrc:`${ei}/assets/profile-mock-1.jpg`,fullName:"Simon Severino",position:"The Sales Booster",text:"helped us eliminate hours of repetitive work every week. Their automations just run—no maintenance needed.",tag:"@elevanto.ai",userName:"@simonseverino",dateTime:"10:16 AM · Aug 4, 2025",socialIcon:A.jsx(Jt,{})}];function cc({fullName:i,iconSrc:e,dateTime:t,userName:s,position:r,socialIcon:n,tag:a,text:o}){return A.jsxs("div",{className:"customer",children:[A.jsxs("div",{className:"customer__personal-info",children:[A.jsx("div",{className:"user-icon",children:A.jsx("img",{src:e,alt:""})}),A.jsxs("div",{className:"personal-info",children:[A.jsxs("div",{className:"info",children:[A.jsxs("p",{className:"full-name",children:[i," | "]}),A.jsx("p",{className:"position",children:r})]}),A.jsx("p",{className:"username",children:s})]}),A.jsx("a",{className:"social-link",children:n})]}),A.jsx("div",{className:"customer__text",children:A.jsx("span",{className:"text",children:A.jsxs("p",{className:"plain-text",children:[A.jsx("span",{className:"mantion",children:a})," "+o]})})}),A.jsx("p",{className:"customer__date",children:t})]})}function uy(){const i=[[],[],[]];return dy.forEach((e,t)=>{if(t<2)i[0].push(e);else{const s=(t-2)%2+1;i[s].push(e)}}),A.jsxs("div",{className:"customers",children:[A.jsx("div",{className:"col col1",children:i[0].map((e,t)=>A.jsx(cc,{...e},`col1-${t}`))}),A.jsx("div",{className:"col col2",children:i[1].map((e,t)=>A.jsx(cc,{...e},`col2-${t}`))}),A.jsx("div",{className:"col col3",children:i[2].map((e,t)=>A.jsx(cc,{...e},`col3-${t}`))})]})}const cy=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M18.1249 7.50009C18.1258 8.43557 17.8934 9.35651 17.4488 10.1795C17.0041 11.0026 16.3612 11.7017 15.5782 12.2137C14.7952 12.7256 13.8969 13.0342 12.9647 13.1115C12.0324 13.1888 11.0955 13.0324 10.239 12.6563L6.17177 17.361C6.16239 17.372 6.15146 17.3837 6.1413 17.3938C5.67241 17.8627 5.03645 18.1262 4.37333 18.1262C3.71022 18.1262 3.07426 17.8627 2.60536 17.3938C2.13647 16.9249 1.87305 16.289 1.87305 15.6259C1.87305 14.9628 2.13647 14.3268 2.60536 13.8579C2.6163 13.8477 2.62724 13.8368 2.63896 13.8274L7.34364 9.76103C6.92213 8.79681 6.77927 7.73377 6.93126 6.69249C7.08325 5.6512 7.52401 4.67335 8.20354 3.86985C8.88308 3.06635 9.77418 2.46936 10.7758 2.14661C11.7774 1.82386 12.8494 1.78825 13.8702 2.04384C13.9754 2.07021 14.072 2.12353 14.1504 2.19853C14.2288 2.27354 14.2863 2.36765 14.3172 2.47162C14.3482 2.57559 14.3516 2.68583 14.3271 2.7915C14.3025 2.89718 14.2509 2.99464 14.1772 3.07431L11.2499 6.25009L11.6921 8.30868L13.7499 8.75009L16.9257 5.81884C17.0053 5.7452 17.1028 5.69357 17.2085 5.66903C17.3142 5.64448 17.4244 5.64786 17.5284 5.67884C17.6323 5.70982 17.7264 5.76732 17.8015 5.84571C17.8765 5.92409 17.9298 6.02064 17.9561 6.12587C18.0683 6.57533 18.125 7.03684 18.1249 7.50009Z",fill:"#791836"})),hy=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M15.625 3.75H10.625V1.25C10.625 1.08424 10.5592 0.925268 10.4419 0.808058C10.3247 0.690848 10.1658 0.625 10 0.625C9.83424 0.625 9.67527 0.690848 9.55806 0.808058C9.44085 0.925268 9.375 1.08424 9.375 1.25V3.75H4.375C3.71196 3.75 3.07607 4.01339 2.60723 4.48223C2.13839 4.95107 1.875 5.58696 1.875 6.25V15C1.875 15.663 2.13839 16.2989 2.60723 16.7678C3.07607 17.2366 3.71196 17.5 4.375 17.5H15.625C16.288 17.5 16.9239 17.2366 17.3928 16.7678C17.8616 16.2989 18.125 15.663 18.125 15V6.25C18.125 5.58696 17.8616 4.95107 17.3928 4.48223C16.9239 4.01339 16.288 3.75 15.625 3.75ZM13.4375 7.5C13.6229 7.5 13.8042 7.55498 13.9583 7.658C14.1125 7.76101 14.2327 7.90743 14.3036 8.07873C14.3746 8.25004 14.3932 8.43854 14.357 8.6204C14.3208 8.80225 14.2315 8.9693 14.1004 9.10041C13.9693 9.23152 13.8023 9.32081 13.6204 9.35699C13.4385 9.39316 13.25 9.37459 13.0787 9.30364C12.9074 9.23268 12.761 9.11252 12.658 8.95835C12.555 8.80418 12.5 8.62292 12.5 8.4375C12.5 8.18886 12.5988 7.9504 12.7746 7.77459C12.9504 7.59877 13.1889 7.5 13.4375 7.5ZM7.5 14.375H6.25C5.91848 14.375 5.60054 14.2433 5.36612 14.0089C5.1317 13.7745 5 13.4565 5 13.125C5 12.7935 5.1317 12.4755 5.36612 12.2411C5.60054 12.0067 5.91848 11.875 6.25 11.875H7.5V14.375ZM6.5625 9.375C6.37708 9.375 6.19582 9.32002 6.04165 9.217C5.88748 9.11399 5.76732 8.96757 5.69636 8.79627C5.62541 8.62496 5.60684 8.43646 5.64301 8.2546C5.67919 8.07275 5.76848 7.9057 5.89959 7.77459C6.0307 7.64348 6.19775 7.55419 6.3796 7.51801C6.56146 7.48184 6.74996 7.50041 6.92127 7.57136C7.09257 7.64232 7.23899 7.76248 7.342 7.91665C7.44502 8.07082 7.5 8.25208 7.5 8.4375C7.5 8.68614 7.40123 8.9246 7.22541 9.10041C7.0496 9.27623 6.81114 9.375 6.5625 9.375ZM11.25 14.375H8.75V11.875H11.25V14.375ZM13.75 14.375H12.5V11.875H13.75C14.0815 11.875 14.3995 12.0067 14.6339 12.2411C14.8683 12.4755 15 12.7935 15 13.125C15 13.4565 14.8683 13.7745 14.6339 14.0089C14.3995 14.2433 14.0815 14.375 13.75 14.375Z",fill:"#791836"})),fy=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M16.875 10.1688C16.8782 10.0563 16.8782 9.94379 16.875 9.83129L18.0407 8.37504C18.1018 8.29858 18.1441 8.20883 18.1642 8.11303C18.1843 8.01722 18.1816 7.91804 18.1563 7.82347C17.9649 7.10531 17.679 6.4157 17.3063 5.77269C17.2574 5.68857 17.1896 5.617 17.1082 5.5637C17.0269 5.5104 16.9342 5.47683 16.8375 5.46566L14.9844 5.25941C14.9073 5.17816 14.8292 5.10004 14.75 5.02504L14.5313 3.16722C14.52 3.07051 14.4863 2.97777 14.4329 2.89639C14.3795 2.815 14.3077 2.74723 14.2235 2.69847C13.5805 2.32601 12.8909 2.0407 12.1727 1.85004C12.0781 1.82477 11.9789 1.82207 11.8831 1.84215C11.7873 1.86224 11.6976 1.90454 11.6211 1.96566L10.1688 3.12504C10.0563 3.12504 9.94379 3.12504 9.83129 3.12504L8.37504 1.96175C8.29858 1.90064 8.20883 1.85833 8.11303 1.83825C8.01722 1.81816 7.91804 1.82086 7.82347 1.84613C7.10531 2.03756 6.4157 2.32338 5.77269 2.69613C5.68857 2.74498 5.617 2.81279 5.5637 2.89417C5.5104 2.97555 5.47683 3.06824 5.46566 3.16488L5.25941 5.02113C5.17816 5.09873 5.10004 5.17686 5.02504 5.2555L3.16722 5.46879C3.07051 5.48004 2.97777 5.51373 2.89639 5.56717C2.815 5.62061 2.74723 5.69233 2.69847 5.7766C2.32609 6.4197 2.04053 7.10929 1.84925 7.82738C1.8241 7.92201 1.82152 8.02122 1.84174 8.11703C1.86196 8.21284 1.90441 8.30255 1.96566 8.37894L3.12504 9.83129C3.12504 9.94379 3.12504 10.0563 3.12504 10.1688L1.96175 11.625C1.90064 11.7015 1.85833 11.7912 1.83825 11.887C1.81816 11.9828 1.82086 12.082 1.84613 12.1766C2.03756 12.8948 2.32338 13.5844 2.69613 14.2274C2.74498 14.3115 2.81279 14.3831 2.89417 14.4364C2.97555 14.4897 3.06824 14.5232 3.16488 14.5344L5.01801 14.7407C5.09561 14.8219 5.17373 14.9 5.25238 14.975L5.46879 16.8329C5.48004 16.9296 5.51373 17.0223 5.56717 17.1037C5.62061 17.1851 5.69233 17.2528 5.7766 17.3016C6.4197 17.674 7.10929 17.9595 7.82738 18.1508C7.92201 18.176 8.02122 18.1786 8.11703 18.1583C8.21284 18.1381 8.30255 18.0957 8.37894 18.0344L9.83129 16.875C9.94379 16.8782 10.0563 16.8782 10.1688 16.875L11.625 18.0407C11.7015 18.1018 11.7912 18.1441 11.887 18.1642C11.9828 18.1843 12.082 18.1816 12.1766 18.1563C12.8949 17.9652 13.5845 17.6794 14.2274 17.3063C14.3115 17.2574 14.3831 17.1896 14.4364 17.1082C14.4897 17.0269 14.5232 16.9342 14.5344 16.8375L14.7407 14.9844C14.8219 14.9073 14.9 14.8292 14.975 14.75L16.8329 14.5313C16.9296 14.52 17.0223 14.4863 17.1037 14.4329C17.1851 14.3795 17.2528 14.3077 17.3016 14.2235C17.674 13.5804 17.9595 12.8908 18.1508 12.1727C18.176 12.0781 18.1786 11.9788 18.1583 11.883C18.1381 11.7872 18.0957 11.6975 18.0344 11.6211L16.875 10.1688ZM10 13.125C9.38197 13.125 8.77778 12.9418 8.26388 12.5984C7.74998 12.255 7.34944 11.7669 7.11291 11.1959C6.87639 10.6249 6.8145 9.99657 6.93508 9.39038C7.05566 8.78419 7.35329 8.22737 7.79033 7.79033C8.22737 7.35329 8.78419 7.05566 9.39038 6.93508C9.99657 6.8145 10.6249 6.87639 11.1959 7.11291C11.7669 7.34944 12.255 7.74998 12.5984 8.26388C12.9418 8.77778 13.125 9.38197 13.125 10C13.125 10.8288 12.7958 11.6237 12.2097 12.2097C11.6237 12.7958 10.8288 13.125 10 13.125Z",fill:"#791836"})),Ol=i=>k.createElement("svg",{width:622,height:572,viewBox:"0 0 622 572",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{width:622,height:572,rx:8,fill:"#EFF0F1"}),k.createElement("g",{filter:"url(#filter0_d_2614_5056)"},k.createElement("rect",{x:284.865,y:259.865,width:52.2692,height:52.2692,rx:3.63462,fill:"#CED1D5",stroke:"#818992",strokeWidth:1.73077}),k.createElement("mask",{id:"mask0_2614_5056",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:285,y:261,width:52,height:51},k.createElement("rect",{x:285.891,y:261.081,width:50.1897,height:50.1777,rx:2.25,fill:"#E1E4ED"})),k.createElement("g",{mask:"url(#mask0_2614_5056)"},k.createElement("line",{x1:320.907,y1:259,x2:320.907,y2:315.304,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:330.253,y1:259,x2:330.253,y2:315.304,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:311.562,y1:259,x2:311.562,y2:315.304,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:292.869,y1:259,x2:292.869,y2:315.304,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:302.215,y1:259,x2:302.215,y2:315.304,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:282.848,y1:277.243,x2:339.152,y2:277.243,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:282.848,y1:267.897,x2:339.152,y2:267.897,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:282.848,y1:286.589,x2:339.152,y2:286.589,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:282.848,y1:305.282,x2:339.152,y2:305.282,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("line",{x1:282.848,y1:295.936,x2:339.152,y2:295.936,stroke:"#B7BBC0",strokeWidth:1.125}),k.createElement("rect",{x:284.846,y:259.984,width:52.1122,height:52.0998,rx:3.375,fill:"#EFF0F1"}),k.createElement("g",{filter:"url(#filter1_d_2614_5056)"},k.createElement("rect",{x:299.456,y:277.212,width:22.925,height:20.2971,fill:"white"}),k.createElement("path",{d:"M298.401 293.12L303.173 287.05C304.527 285.329 307.115 285.272 308.542 286.933L312.737 291.817M309.114 287.6C310.917 285.307 313.428 282.059 313.591 281.848C313.597 281.84 313.603 281.833 313.609 281.826C314.964 280.115 317.544 280.063 318.968 281.72L323.164 286.604M301.877 298.768H320.123C322.042 298.768 323.598 297.212 323.598 295.293V277.047C323.598 275.127 322.042 273.571 320.123 273.571H301.877C299.957 273.571 298.401 275.127 298.401 277.047V295.293C298.401 297.212 299.957 298.768 301.877 298.768Z",fill:"white"}),k.createElement("path",{d:"M298.401 293.12L303.173 287.05C304.527 285.329 307.115 285.272 308.542 286.933L312.737 291.817M309.114 287.6C310.917 285.307 313.428 282.059 313.591 281.848C313.597 281.84 313.603 281.833 313.609 281.826C314.964 280.115 317.544 280.063 318.968 281.72L323.164 286.604M301.877 298.768H320.123C322.042 298.768 323.598 297.212 323.598 295.293V277.047C323.598 275.127 322.042 273.571 320.123 273.571H301.877C299.957 273.571 298.401 275.127 298.401 277.047V295.293C298.401 297.212 299.957 298.768 301.877 298.768Z",stroke:"#818992",strokeWidth:1.38462,strokeLinecap:"round",strokeLinejoin:"round"}),k.createElement("path",{d:"M320.693 298.069H301.726H301.28C300.037 298.069 299.03 297.062 299.03 295.819V294.124C299.03 293.609 299.207 293.11 299.531 292.709L304.166 286.98C305.05 285.888 306.706 285.863 307.622 286.928L312.22 292.279C312.39 292.477 312.658 292.562 312.912 292.497C313.409 292.371 313.599 291.764 313.261 291.378L309.982 287.613L314.52 281.773C315.386 280.658 317.053 280.607 317.986 281.667L322.943 287.3V295.819C322.943 297.062 321.935 298.069 320.693 298.069Z",fill:"#EFF0F1"})))),k.createElement("defs",null,k.createElement("filter",{id:"filter0_d_2614_5056",x:278,y:255,width:66,height:66,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},k.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),k.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),k.createElement("feOffset",{dy:2}),k.createElement("feGaussianBlur",{stdDeviation:3}),k.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),k.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0969792 0 0 0 0 0.127894 0 0 0 0 0.2375 0 0 0 0.14 0"}),k.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2614_5056"}),k.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2614_5056",result:"shape"})),k.createElement("filter",{id:"filter1_d_2614_5056",x:293.709,y:269.879,width:34.5813,height:34.5813,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},k.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),k.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),k.createElement("feOffset",{dy:1}),k.createElement("feGaussianBlur",{stdDeviation:2}),k.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),k.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.0969792 0 0 0 0 0.127894 0 0 0 0 0.2375 0 0 0 0.08 0"}),k.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_2614_5056"}),k.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_2614_5056",result:"shape"})))),K1=[{id:1,icon:A.jsx(cy,{}),previewIcon:A.jsx(Ol,{}),text:"All-in-One Platform",description:"Access CRM, funnels, chat, bookings, and campaigns in one powerful, branded platform built on Go High Level."},{id:2,icon:A.jsx(hy,{}),previewIcon:A.jsx(Ol,{}),text:"AI Assistants (Chat & Voice)",description:"Deploy smart chatbots and voice agents that engage leads, answer questions, and book app"},{id:3,icon:A.jsx(fy,{}),previewIcon:A.jsx(Ol,{}),text:"Custom Automation",description:"Automate your business-critical workflows—from onboarding and task assignment to inv"}];function my(){const[i,e]=k.useState(K1[0]),t=s=>{e(s)};return A.jsxs(Ua,{container:!0,className:"offer-component",children:[A.jsx(Ua,{size:{xs:6,md:5,lg:6},className:"offer-list",children:K1.map((s,r)=>A.jsxs(ce,{className:"offer-component-container",children:[A.jsxs(Gg,{className:"offer-item",onClick:()=>t(s),children:[A.jsx("div",{className:"offer-item__icon",children:s.icon}),A.jsx("div",{className:"offer-item__text",children:s.text}),A.jsx("p",{className:"offer-item__description",children:s.description}),A.jsxs("div",{className:"offer-item__more",children:[A.jsx("div",{className:"title",children:"Learn more"}),A.jsx("div",{className:"icon",children:A.jsx(V3,{})})]})]}),A.jsx(Ua,{size:{xs:10,md:10,lg:6},className:"offer-item-icon",children:s.previewIcon})]},r))}),A.jsx(Ps,{condition:!!i,children:A.jsx(Ua,{size:{xs:6,md:7,lg:6},className:"offer-icon",children:A.jsx(Ol,{})})})]})}const W1=({children:i})=>A.jsx("div",{className:"tag",children:i}),q1=i=>k.createElement("svg",{width:90,height:23,viewBox:"0 0 90 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.70752 5.12852L10.3808 0.106445L20.158 5.12852L10.3808 10.1632L0.70752 5.12852ZM58.779 7.56717V7.44587C58.779 5.79329 59.7511 5.2633 61.3885 5.38069V2.35901C57.466 2.11988 55.6069 4.08506 55.6069 7.44587V7.56717H53.833V10.5893H55.6069V19.7369H58.779V10.5893H62.4289V19.7369H65.601V10.5893H68.2105V7.56717H65.601V7.44587C65.601 5.79329 66.5562 5.2633 68.2105 5.38069V2.35901C64.288 2.11988 62.4289 4.08506 62.4289 7.44587V7.56717H58.779ZM36.6068 10.8762C37.6129 10.0762 38.2268 8.93279 38.2268 7.46326C38.2268 4.61505 35.9073 2.6677 32.9908 2.6677H26.2196V19.7021H33.5364C36.5212 19.7021 38.9089 17.6891 38.9089 14.7718C38.875 13.011 37.9881 11.6627 36.6068 10.8762ZM33.0077 5.82416C34.0995 5.82416 34.8499 6.62806 34.8499 7.70238C34.8499 8.78019 34.0651 9.58017 33.0077 9.58017H29.6139V5.82416H33.0077ZM33.5195 16.5805H29.6139V12.5671H33.5195C34.6795 12.5671 35.5151 13.4192 35.5151 14.5627C35.5151 15.724 34.6795 16.5805 33.5195 16.5805ZM48.8013 7.54978V14.1196C48.8013 16.237 47.6418 17.1413 46.0897 17.1413C44.6566 17.1413 43.6506 16.2892 43.6506 14.6322V7.54978H40.478V15.024C40.478 18.2674 42.508 20.063 45.1345 20.063C46.7888 20.063 48.0679 19.4456 48.7844 18.3543V19.7195H51.9565V7.54978H48.8013ZM81.3603 14.9235H72.0826C72.5431 16.5283 73.873 17.2109 75.5278 17.2109C76.7725 17.2109 77.7621 16.6974 78.2908 15.9979L80.849 17.45C79.7064 19.1061 77.8643 20.063 75.4934 20.063C71.3661 20.063 68.7566 17.2631 68.7566 13.6284C68.7566 9.98929 71.3831 7.18891 75.2547 7.18891C78.8877 7.18891 81.4803 10.0415 81.4803 13.6284C81.4803 14.1023 81.429 14.5153 81.3603 14.9235ZM75.2547 10.0415C73.5496 10.0415 72.3891 10.9458 72.0309 12.4975H78.3077C77.9151 10.7415 76.5851 10.0415 75.2547 10.0415ZM86.068 9.64974V7.54978H82.8959V19.7195H86.068V13.8979C86.068 11.3367 88.1493 10.6067 89.8031 10.8106V7.31109C88.2514 7.31109 86.6993 7.99368 86.068 9.64974ZM10.3808 18.7761L3.78137 15.1892L0.70752 16.8544L10.3808 22.1064L20.158 16.8544L17.0494 15.1892L10.3808 18.7761ZM3.78137 9.53278L10.3808 12.7845L17.0494 9.53278L20.158 11.0501L10.3808 15.8196L0.70752 11.0501L3.78137 9.53278Z",fill:"#5A5F63"})),j1=i=>k.createElement("svg",{width:108,height:22,viewBox:"0 0 108 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.8014 4.55629L6.61321 8.50613L12.8014 12.456L6.61321 16.4058L0.425049 12.4231L6.61321 8.47322L0.425049 4.55629L6.61321 0.606445L12.8014 4.55629ZM6.58029 17.6566L12.7684 13.7068L18.9566 17.6566L12.7684 21.6064L6.58029 17.6566ZM12.8014 12.4231L18.9895 8.47322L12.8014 4.55629L18.9566 0.606445L25.1448 4.55629L18.9566 8.50613L25.1448 12.456L18.9566 16.4058L12.8014 12.4231Z",fill:"#5A5F63"}),k.createElement("path",{d:"M29.9824 4.55671H34.9856C38.1784 4.55671 40.8117 6.39997 40.8117 10.6131V11.5019C40.8117 15.7479 38.343 17.657 35.0844 17.657H29.9824V4.55671ZM32.7803 6.92662V15.2542H34.9198C36.7301 15.2542 37.948 14.0693 37.948 11.436V10.7448C37.948 8.11157 36.6643 6.92662 34.821 6.92662H32.7803ZM42.2929 7.05828H44.5312L44.8932 9.52693C45.3212 7.84825 46.4074 6.95953 48.3823 6.95953H49.0735V9.79025H47.9215C45.6503 9.79025 45.0907 10.5802 45.0907 12.8185V17.6899H42.3258V7.05828H42.2929ZM49.6331 12.5881V12.2918C49.6331 8.73696 51.9043 6.79495 54.9984 6.79495C58.1583 6.79495 60.3636 8.73696 60.3636 12.2918V12.5881C60.3636 16.0771 58.2241 17.9533 54.9984 17.9533C51.5751 17.9203 49.6331 16.0771 49.6331 12.5881ZM57.5329 12.5551V12.2918C57.5329 10.3169 56.5454 9.13194 54.9655 9.13194C53.4184 9.13194 52.398 10.2182 52.398 12.2918V12.5551C52.398 14.4642 53.3855 15.5504 54.9655 15.5504C56.5454 15.5175 57.5329 14.4642 57.5329 12.5551ZM61.8119 7.05828H64.116L64.3794 9.06611C64.9389 7.71659 66.1239 6.79495 67.8684 6.79495C70.5675 6.79495 72.345 8.73696 72.345 12.3247V12.621C72.345 16.11 70.37 17.9533 67.8684 17.9533C66.1897 17.9533 65.0377 17.1962 64.4781 15.9783V21.3435H61.779L61.8119 7.05828ZM69.5471 12.5551V12.3247C69.5471 10.2182 68.4609 9.16486 67.0126 9.16486C65.4656 9.16486 64.4452 10.3498 64.4452 12.3247V12.5222C64.4452 14.3984 65.4327 15.5834 66.9797 15.5834C68.5597 15.5504 69.5471 14.5301 69.5471 12.5551ZM76.4265 15.715L76.1961 17.657H73.8262V3.50342H76.5253V8.93445C77.1177 7.55201 78.3027 6.79495 79.9814 6.79495C82.5159 6.82787 84.3921 8.57238 84.3921 12.0943V12.4235C84.3921 15.9454 82.6147 17.9533 79.9156 17.9533C78.1381 17.9203 76.9861 17.0975 76.4265 15.715ZM81.5614 12.4235V12.1602C81.5614 10.2182 80.5081 9.13194 79.0269 9.13194C77.5127 9.13194 76.4594 10.3498 76.4594 12.1931V12.4235C76.4594 14.3984 77.4798 15.5504 78.9939 15.5504C80.6068 15.5504 81.5614 14.5301 81.5614 12.4235ZM85.5771 12.5881V12.2918C85.5771 8.73696 87.8483 6.79495 90.9424 6.79495C94.1023 6.79495 96.3076 8.73696 96.3076 12.2918V12.5881C96.3076 16.0771 94.1352 17.9533 90.9424 17.9533C87.5191 17.9203 85.5771 16.0771 85.5771 12.5881ZM93.5098 12.5551V12.2918C93.5098 10.3169 92.5223 9.13194 90.9424 9.13194C89.3953 9.13194 88.3749 10.2182 88.3749 12.2918V12.5551C88.3749 14.4642 89.3624 15.5504 90.9424 15.5504C92.5223 15.5175 93.5098 14.4642 93.5098 12.5551ZM99.9283 12.1602L96.2089 7.05828H99.4017L101.541 10.2511L103.714 7.05828H106.874L103.088 12.1272L107.071 17.657H103.944L101.508 14.1351L99.1384 17.657H95.8797L99.9283 12.1602Z",fill:"#5A5F63"})),py=i=>k.createElement("svg",{width:103,height:23,viewBox:"0 0 103 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M25.4402 18.7754V2.45557H35.3988V5.61424H29.2131V10.0013H35.3988V13.1161H29.2131V18.7754H25.4402Z",fill:"#5A5F63"}),k.createElement("path",{d:"M37.8989 18.7761V7.54528H41.4524V9.87042C41.6279 9.08075 42.0228 8.42269 42.5931 7.98399C43.1634 7.54528 43.8215 7.32593 44.5234 7.32593C44.8744 7.32593 45.2253 7.3698 45.4447 7.41367V10.7478C45.006 10.704 44.655 10.6601 44.3918 10.6601C42.4176 10.6601 41.4524 11.9323 41.4524 14.3891V18.7323H37.8989V18.7761Z",fill:"#5A5F63"}),k.createElement("path",{d:"M51.5882 19.0396C49.965 19.0396 48.6489 18.4693 47.7276 17.3725C46.7624 16.2758 46.3237 14.828 46.3237 13.1171C46.3237 11.4061 46.8063 10.0023 47.7715 8.86166C48.7366 7.7649 50.0527 7.19458 51.6321 7.19458C52.4217 7.19458 53.1237 7.37006 53.7379 7.72103C54.3521 8.07199 54.8346 8.5107 55.1417 9.12488V7.50167H58.6953V18.7325H55.1417V17.1532C54.8346 17.7235 54.3521 18.1622 53.694 18.5132C53.0798 18.908 52.3779 19.0396 51.5882 19.0396ZM52.5972 16.1003C53.4308 16.1003 54.1327 15.8371 54.5714 15.2668C55.0101 14.6964 55.2733 13.9945 55.2733 13.161C55.2733 12.3274 55.054 11.6255 54.5714 11.0552C54.0888 10.4849 53.4308 10.2216 52.5972 10.2216C51.8076 10.2216 51.1495 10.4849 50.6669 11.0552C50.1843 11.5816 49.9211 12.3274 49.9211 13.161C49.9211 14.0384 50.1843 14.7403 50.6669 15.3106C51.1495 15.8371 51.8076 16.1003 52.5972 16.1003Z",fill:"#5A5F63"}),k.createElement("path",{d:"M61.6335 18.776V7.54513H65.1871V9.16834C65.4503 8.59802 65.8451 8.11545 66.4155 7.76448C66.9858 7.41352 67.6438 7.23804 68.3896 7.23804C70.1445 7.23804 71.329 7.93997 71.8993 9.29995C72.2064 8.68576 72.689 8.15932 73.3031 7.80835C73.9612 7.41352 74.6631 7.23804 75.4528 7.23804C78.1289 7.23804 79.445 8.7735 79.445 11.8006V18.776H75.8476V12.4586C75.8476 10.967 75.2773 10.2651 74.1806 10.2651C72.9083 10.2651 72.2941 11.1864 72.2941 13.0289V18.8199H68.7845V12.4148C68.7845 10.967 68.2141 10.2212 67.1174 10.2212C66.5032 10.2212 66.0206 10.4406 65.7135 10.8354C65.4064 11.2303 65.2309 11.9761 65.2309 12.9851V18.776H61.6335Z",fill:"#5A5F63"}),k.createElement("path",{d:"M93.3963 12.5464C93.3963 13.0289 93.3524 13.5115 93.3085 14.1257H85.017C85.0608 14.8715 85.2802 15.4418 85.7628 15.8367C86.2454 16.2315 86.8595 16.4508 87.6492 16.4508C88.746 16.4508 89.4479 16.0999 89.755 15.398H93.2647C93.0892 16.4947 92.475 17.416 91.466 18.0741C90.4131 18.776 89.1847 19.1269 87.6931 19.1269C85.7628 19.1269 84.2712 18.6005 83.1744 17.5476C82.0776 16.4947 81.5073 15.047 81.5073 13.1606C81.5073 11.318 82.0776 9.87027 83.1744 8.81738C84.2712 7.76448 85.7628 7.23804 87.5615 7.23804C89.3163 7.23804 90.7202 7.72061 91.8169 8.72963C92.826 9.69479 93.3963 10.967 93.3963 12.5464ZM84.9731 11.8883H89.8427C89.8427 11.1425 89.6234 10.5722 89.2286 10.1774C88.8337 9.78253 88.2634 9.56317 87.4737 9.56317C86.7279 9.56317 86.1137 9.78253 85.675 10.2212C85.2363 10.6599 85.017 11.2303 84.9731 11.8883Z",fill:"#5A5F63"}),k.createElement("path",{d:"M95.4141 18.7761V7.54528H98.9676V9.87042C99.1431 9.08075 99.5379 8.42269 100.108 7.98399C100.679 7.54528 101.337 7.32593 102.039 7.32593C102.39 7.32593 102.74 7.3698 102.96 7.41367V10.7478C102.521 10.704 102.17 10.6601 101.907 10.6601C99.9327 10.6601 98.9676 11.9323 98.9676 14.3891V18.7323H95.4141V18.7761Z",fill:"#5A5F63"}),k.createElement("path",{d:"M15.4402 0.106445V7.43978H8.1068L0.773438 0.106445H15.4402ZM0.773438 7.43978H8.1068L15.4402 14.7731H8.1068V22.1064L0.773438 14.7731V7.43978Z",fill:"#5A5F63"})),gy=i=>k.createElement("svg",{width:83,height:23,viewBox:"0 0 83 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M55.0503 0.106445H51.6023V19.3908C54.7359 19.4986 57.8563 19.6567 60.9641 19.8639V16.4664C58.9982 16.3353 57.0271 16.2241 55.0503 16.1321V0.106445ZM82.4531 0.108396H78.6653L76.1686 5.89542L73.9256 0.108396H70.1946L74.2039 10.449L69.8273 20.5935C71.0381 20.7116 72.2454 20.8376 73.4516 20.9707L75.9971 15.0724L78.5179 21.5745C79.8307 21.7433 81.1402 21.9194 82.4474 22.106L82.4531 22.1037L77.9612 10.5189L82.4531 0.108396ZM39.7659 19.2223L43.2142 19.2215V11.3772H47.8885V7.97965H43.2142V3.53668H49.3919V0.108569H39.7659V19.2223ZM26.8894 3.53645H30.4984V19.4243C31.6458 19.3809 32.7955 19.3452 33.9465 19.3151V3.53645H37.5553V0.108396H26.8894V3.53645ZM15.1009 20.4117C18.279 20.1229 21.4717 19.8849 24.679 19.7002V16.3023C22.6298 16.4207 20.5864 16.5609 18.549 16.7212V11.5774C19.8859 11.5641 21.6462 11.5233 23.2056 11.5427V8.14485C21.9598 8.14181 19.9574 8.16224 18.549 8.18025V3.53668H24.679V0.108569H15.1009V20.4117ZM8.33693 12.5571L3.84593 0.108396H0.568848V22.1064C1.71603 21.9431 2.86539 21.7868 4.01699 21.6368V9.67431L8.01026 21.1456C9.26623 21 10.5244 20.862 11.7851 20.7323V0.108396H8.33693V12.5571ZM63.8068 20.0685C64.9579 20.1566 66.1073 20.2511 67.2555 20.3532V0.108396H63.8068V20.0685Z",fill:"#5A5F63"})),vy=i=>k.createElement("svg",{width:92,height:27,viewBox:"0 0 92 27",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M10.0611 4.50732V11.8055H3.35615V4.50732H0.175049V21.9292H3.35701V14.8678H10.0602V21.9292H13.2431V4.50732H10.0611ZM23.4279 16.2981C23.4279 16.9964 23.1505 17.6661 22.6568 18.1599C22.163 18.6537 21.4933 18.9311 20.795 18.9311C20.0967 18.9311 19.4269 18.6537 18.9332 18.1599C18.4394 17.6661 18.162 16.9964 18.162 16.2981V8.83544H15.1436V16.2981C15.1436 17.7955 15.7385 19.2315 16.7972 20.2902C17.856 21.349 19.292 21.9438 20.7894 21.9438C22.2867 21.9438 23.7227 21.349 24.7815 20.2902C25.8403 19.2315 26.4351 17.7955 26.4351 16.2981V8.83544H23.4279V16.2981ZM45.793 9.60445C45.793 8.07419 46.8048 7.58937 47.9131 7.58937C48.807 7.58937 49.9868 8.26967 50.7593 9.09465L52.7356 6.76439C51.7487 5.42961 49.7474 4.50732 48.1086 4.50732C44.8337 4.50732 42.4655 6.4251 42.4655 9.60445C42.4655 15.5033 49.6751 13.6312 49.6751 16.9328C49.6751 17.9507 48.6865 18.8497 47.5549 18.8497C45.7697 18.8497 45.191 17.9774 44.3712 17.0542L42.177 19.3354C43.5807 21.0577 45.3116 21.9326 47.3844 21.9326C50.4957 21.9326 52.9983 19.9916 52.9983 16.9569C52.9983 10.4088 45.7878 12.4436 45.7878 9.60445M90.3956 19.1459C88.6122 19.1459 88.1049 18.3744 88.1049 17.1929V11.9614H90.8779V9.3108H88.1049V5.81368L85.0444 7.18721V17.843C85.0444 20.5686 86.9252 21.9421 89.5035 21.9421C89.9082 21.949 90.313 21.9163 90.7108 21.8456L91.4574 19.0969C91.1207 19.1201 90.734 19.1434 90.3956 19.1434M34.9175 8.92242C33.4225 8.92242 32.3788 9.35644 31.3695 10.3459V4.61152H28.3469V15.2407C28.3469 19.2191 31.2231 21.9455 34.4559 21.9455C38.0417 21.9455 41.1961 19.1709 41.1961 15.4353C41.1961 11.7461 38.2932 8.925 34.9175 8.925M34.8985 18.9031C34.448 18.9031 34.002 18.8144 33.5858 18.642C33.1696 18.4696 32.7914 18.2169 32.4729 17.8984C32.1543 17.5798 31.9016 17.2017 31.7292 16.7855C31.5568 16.3693 31.4681 15.9232 31.4681 15.4727C31.4681 15.0222 31.5568 14.5762 31.7292 14.16C31.9016 13.7438 32.1543 13.3656 32.4729 13.0471C32.7914 12.7285 33.1696 12.4759 33.5858 12.3035C34.002 12.1311 34.448 12.0424 34.8985 12.0424C35.8083 12.0424 36.6809 12.4038 37.3242 13.0471C37.9675 13.6904 38.3289 14.5629 38.3289 15.4727C38.3289 16.3825 37.9675 17.2551 37.3242 17.8984C36.6809 18.5417 35.8083 18.9031 34.8985 18.9031ZM67.7447 15.2768C67.7447 11.5343 64.5972 8.76655 61.0044 8.76655C57.7725 8.76655 54.8954 11.4921 54.8954 15.4714V26.1066H57.918V20.3645C58.9256 21.3522 59.971 21.7879 61.4643 21.7879C64.84 21.7879 67.7438 18.9668 67.7438 15.2768M64.8822 15.2389C64.8822 16.1487 64.5208 17.0213 63.8774 17.6646C63.2341 18.3079 62.3616 18.6693 61.4518 18.6693C60.542 18.6693 59.6694 18.3079 59.0261 17.6646C58.3828 17.0213 58.0214 16.1487 58.0214 15.2389C58.0214 14.3291 58.3828 13.4566 59.0261 12.8133C59.6694 12.17 60.542 11.8086 61.4518 11.8086C62.3616 11.8086 63.2341 12.17 63.8774 12.8133C64.5208 13.4566 64.8822 14.3291 64.8822 15.2389Z",fill:"#5A5F63"}),k.createElement("path",{d:"M77.4809 8.50434V5.46708C77.8823 5.2795 78.2221 4.98177 78.4608 4.60857C78.6996 4.23536 78.8274 3.80202 78.8295 3.35899V3.28924C78.8295 1.99752 77.7823 0.950368 76.4906 0.950368H76.4208C75.8005 0.950368 75.2056 1.19678 74.767 1.63541C74.3283 2.07403 74.0819 2.66893 74.0819 3.28924V3.35899C74.084 3.80202 74.2118 4.23536 74.4505 4.60857C74.6893 4.98177 75.0291 5.2795 75.4305 5.46708V8.50434C74.2769 8.68097 73.1905 9.15926 72.2812 9.89079L63.9513 3.40291C64.0107 3.18849 64.0417 2.96803 64.0452 2.74672C64.0462 2.22547 63.8926 1.71563 63.6038 1.28169C63.315 0.84774 62.9041 0.509187 62.4228 0.308848C61.9416 0.10851 61.4118 0.055388 60.9004 0.156201C60.389 0.257014 59.9189 0.507233 59.5498 0.875209C59.1806 1.24318 58.9288 1.71238 58.8263 2.22346C58.7239 2.73453 58.7752 3.26452 58.974 3.74638C59.1728 4.22825 59.51 4.64034 59.943 4.93053C60.376 5.22072 60.8853 5.37598 61.4066 5.37666C61.8626 5.37451 62.3101 5.25277 62.7043 5.02359L70.9068 11.4064C70.17 12.5196 69.7856 13.8289 69.8037 15.1638C69.8218 16.4986 70.2416 17.797 71.0085 18.8898L68.5137 21.3854C68.312 21.3209 68.1019 21.2866 67.8902 21.2838C67.4623 21.2841 67.0442 21.4113 66.6886 21.6492C66.333 21.8871 66.0558 22.2251 65.8923 22.6205C65.7287 23.0158 65.686 23.4508 65.7695 23.8704C65.8531 24.29 66.0592 24.6755 66.3617 24.978C66.6643 25.2806 67.0497 25.4867 67.4693 25.5702C67.889 25.6538 68.3239 25.6111 68.7193 25.4475C69.1147 25.2839 69.4527 25.0068 69.6906 24.6512C69.9285 24.2956 70.0557 23.8774 70.056 23.4495C70.0532 23.2378 70.019 23.0277 69.9544 22.8261L72.4225 20.3572C73.2273 20.9768 74.1633 21.4039 75.1587 21.6059C76.1541 21.8079 77.1825 21.7794 78.1652 21.5225C79.1479 21.2657 80.0587 20.7873 80.828 20.124C81.5972 19.4608 82.2044 18.6303 82.6031 17.6961C83.0018 16.7619 83.1814 15.7489 83.128 14.7346C83.0747 13.7203 82.7899 12.7317 82.2955 11.8444C81.8011 10.9572 81.1102 10.1949 80.2756 9.61596C79.4411 9.03701 78.4851 8.65676 77.4809 8.50434ZM76.4578 18.4936C76.0017 18.5062 75.5477 18.4272 75.1226 18.2613C74.6975 18.0954 74.31 17.846 73.983 17.5278C73.6559 17.2097 73.3959 16.8292 73.2184 16.4088C73.0409 15.9884 72.9495 15.5368 72.9495 15.0805C72.9495 14.6242 73.0409 14.1725 73.2184 13.7522C73.3959 13.3318 73.6559 12.9513 73.983 12.6331C74.31 12.3149 74.6975 12.0655 75.1226 11.8997C75.5477 11.7338 76.0017 11.6548 76.4578 11.6673C77.3419 11.6983 78.1794 12.0711 78.794 12.7073C79.4086 13.3435 79.7524 14.1934 79.7528 15.078C79.7533 15.9625 79.4104 16.8128 78.7964 17.4496C78.1824 18.0864 77.3453 18.4601 76.4613 18.4919",fill:"#5A5F63"})),Ey=i=>k.createElement("svg",{width:71,height:30,viewBox:"0 0 71 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M70.4266 15.5904C70.4266 10.6345 68.026 6.72393 63.4377 6.72393C58.8301 6.72393 56.0423 10.6345 56.0423 15.5517C56.0423 21.3788 59.3335 24.3214 64.0573 24.3214C66.3611 24.3214 68.1034 23.7987 69.4199 23.0631V19.1912C68.1034 19.8494 66.5934 20.256 64.6768 20.256C62.7989 20.256 61.1339 19.5978 60.921 17.3134H70.3879C70.3879 17.0617 70.4266 16.055 70.4266 15.5904ZM60.8629 13.7513C60.8629 11.5637 62.1987 10.6538 63.4184 10.6538C64.5993 10.6538 65.8577 11.5637 65.8577 13.7513H60.8629ZM48.5694 6.72393C46.6722 6.72393 45.4525 7.61446 44.7749 8.23395L44.5232 7.03368H40.2641V29.6064L45.104 28.5804L45.1234 23.1018C45.8203 23.6051 46.8464 24.3214 48.5501 24.3214C52.0155 24.3214 55.1711 21.5337 55.1711 15.3968C55.1518 9.78268 51.9574 6.72393 48.5694 6.72393ZM47.4078 20.0624C46.2656 20.0624 45.588 19.6558 45.1234 19.1525L45.104 11.9703C45.6074 11.4088 46.3043 11.0217 47.4078 11.0217C49.1696 11.0217 50.3893 12.9963 50.3893 15.5323C50.3893 18.1265 49.1889 20.0624 47.4078 20.0624ZM33.6043 5.58175L38.4636 4.53635V0.606445L33.6043 1.63248V5.58175ZM33.6043 7.05304H38.4636V23.9923H33.6043V7.05304ZM28.3966 8.48562L28.0868 7.05304H23.9051V23.9923H28.745V12.5123C29.8873 11.0217 31.8232 11.2927 32.4234 11.5056V7.05304C31.8039 6.82073 29.5388 6.39483 28.3966 8.48562ZM18.7167 2.85211L13.9929 3.85878L13.9735 19.3655C13.9735 22.2306 16.1225 24.3408 18.9877 24.3408C20.5752 24.3408 21.7368 24.0504 22.3757 23.7019V19.772C21.7562 20.0237 18.6973 20.9142 18.6973 18.049V11.1765H22.3757V7.05304H18.6973L18.7167 2.85211ZM5.62947 11.9703C5.62947 11.2153 6.24898 10.9249 7.27505 10.9249C8.74639 10.9249 10.6049 11.3701 12.0763 12.1639V7.61446C10.4694 6.9756 8.88191 6.72393 7.27505 6.72393C3.34501 6.72393 0.731445 8.776 0.731445 12.2026C0.731445 17.5457 8.08816 16.6939 8.08816 18.9976C8.08816 19.8882 7.31377 20.1785 6.22962 20.1785C4.62276 20.1785 2.57062 19.5203 0.944402 18.6298V23.2373C2.74486 24.0117 4.56468 24.3408 6.22962 24.3408C10.2565 24.3408 13.0249 22.3468 13.0249 18.8815C13.0055 13.1125 5.62947 14.1385 5.62947 11.9703Z",fill:"#5A5F63"})),sl=[q1,j1,py,gy,vy,Ey,q1,j1];function yy(){const i=[...sl,...sl],e=[...sl,...sl].reverse();return A.jsxs("div",{className:"tags",children:[A.jsx(G1.div,{style:{display:"inline-block"},animate:{x:["0%","-50%"]},transition:{duration:15,ease:"linear",repeat:1/0},children:A.jsx("div",{className:"tags__list",children:i.map((t,s)=>A.jsx(W1,{children:A.jsx(t,{})},s))})}),A.jsx(G1.div,{style:{display:"inline-block"},animate:{x:["-50%","0%"]},transition:{duration:15,ease:"linear",repeat:1/0},children:A.jsx("div",{className:"tags__list",children:e.map((t,s)=>A.jsx(W1,{children:A.jsx(t,{})},s))})})]})}const by=i=>k.createElement("svg",{width:24,height:25,viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9196 8.8501L6 14.7652L7.41439 16.1801L11.9186 11.6789L16.4178 16.1801L17.8322 14.7662L11.9196 8.8501Z",fill:"#151719"})),Ty=ci(i=>A.jsx(X3,{disableGutters:!0,elevation:0,square:!0,...i}))(({theme:i})=>({border:`1px solid ${i.palette.divider}`,"&:not(:last-child)":{borderBottom:0},"&::before":{display:"none"}})),_y=ci(i=>A.jsx(ly,{expandIcon:A.jsx(by,{}),...i}))(({theme:i})=>({backgroundColor:"white",fontFamily:"TT Hoves Pro Trial, sans-serif",border:"none",flexDirection:"row",borderTop:"1px solid #EAEBEC",[`& .${Es.expandIconWrapper}.${Es.expanded}`]:{transform:"rotate(90deg)"},[`& .${Es.content}`]:{marginLeft:i.spacing(1)},...i.applyStyles("dark",{backgroundColor:"rgba(255, 255, 255, .05)"}),"> .MuiTypography-root":{fontFamily:"TT Hoves Pro Trial, sans-serif"}})),Ay=ci(iy)(({theme:i})=>({padding:i.spacing(2)}));function Sy({data:i}){const[e,t]=k.useState(i?i[0].id:0),s=r=>{t(r)};return i&&i.length>0?A.jsx("div",{className:"accordions",children:i.map((r,n)=>A.jsxs(Ty,{className:"accordion",expanded:e===r.id,onChange:()=>s(r.id),children:[A.jsx(_y,{"aria-controls":`panel${r.id}d-content`,id:`panel${r.id}d-header`,children:A.jsx(H3,{component:"span",sx:a=>({color:a.palette.primary.main,fontSize:"20px",lineHeight:"28px",fontWeight:600}),children:r.question})}),A.jsx(Ay,{children:A.jsx("p",{className:"details",children:r.answer})})]},n))}):A.jsx(A.Fragment,{})}const Cy=i=>k.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M16.148 5.46029L7.14804 14.4603C7.0958 14.5126 7.03376 14.5541 6.96547 14.5824C6.89719 14.6107 6.82399 14.6253 6.75007 14.6253C6.67615 14.6253 6.60295 14.6107 6.53466 14.5824C6.46638 14.5541 6.40434 14.5126 6.3521 14.4603L2.4146 10.5228C2.30905 10.4172 2.24976 10.2741 2.24976 10.1248C2.24976 9.97556 2.30905 9.8324 2.4146 9.72686C2.52015 9.62131 2.6633 9.56201 2.81257 9.56201C2.96184 9.56201 3.10499 9.62131 3.21054 9.72686L6.75007 13.2671L15.3521 4.66436C15.4576 4.55881 15.6008 4.49951 15.7501 4.49951C15.8993 4.49951 16.0425 4.55881 16.148 4.66436C16.2536 4.7699 16.3129 4.91306 16.3129 5.06232C16.3129 5.21159 16.2536 5.35475 16.148 5.46029Z",fill:"#DC2C62"})),xy=[{question:"What exactly is included in the Elevanto One plan?",id:1,answer:"Elevanto One includes everything you need to automate your customer communication and business operations. You get a fully customized AI voice assistant (for answering and making calls), a custom AI chatbot (for your website, WhatsApp, or SMS), a full-feature CRM, appointment booking system, invoicing tools, lead nurturing automations, and full onboarding and support."},{question:"What does the setup fee cover?",id:2,answer:"The one-time setup fee covers the full development of your custom AI voice and chatbot flows. This includes strategy sessions, scripting, building your call/chat logic, integrations, and testing — tailored to your business model, services, and customer journey. The fee varies based on complexity and is quoted after a discovery call."},{question:"Will the AI sound robotic or unnatural?",id:3,answer:"No. We use advanced AI voice technology that sounds highly natural and human-like. Your AI assistant is trained with your business language, terminology, and tone of voice, making interactions smooth and professional for your customers."},{question:"Can I customize how the AI responds?",id:4,answer:"Yes. Both the voice and chat AI agents are fully customizable. We work with you to script and design responses that match your brand, handle objections, book appointments, and route leads — exactly like a real team member would."},{question:"What types of businesses is Elevanto best suited for?",id:5,answer:"Elevanto is perfect for service-based businesses like contractors, medical clinics, real estate teams, wellness providers, auto shops, and any business that relies on customer calls, bookings, and follow-ups. If you`re losing leads or spending too much time on admin tasks, Elevanto will save you time and increase revenue."},{question:"Can Elevanto integrate with my existing tools or calendar?",id:6,answer:"Yes. Elevanto integrates with Google Calendar, Outlook, Stripe, Zoom, and many CRMs or third-party tools via native integrations or Zapier. We handle the setup during onboarding to make sure everything works seamlessly."},{question:"What happens if the AI can’t answer a question?",id:7,answer:"If the AI encounters a question it can’t answer, it will automatically route the call or chat to your team, leave a voicemail, or send a follow-up message — depending on how we configure it for your business. You`ll never lose a lead due to a missed or failed interaction."},{question:"Is there a contract or can I cancel anytime?",id:8,answer:"We offer month-to-month flexibility. There’s no long-term contract required — cancel anytime. We believe in earning your business every month with real results and value."}];function Iy(){return A.jsx("div",{className:"main-question",children:A.jsx(Sy,{data:xy})})}var Ly=Object.create,Wg=Object.defineProperty,Ry=Object.getOwnPropertyDescriptor,ky=Object.getOwnPropertyNames,wy=Object.getPrototypeOf,Dy=Object.prototype.hasOwnProperty,qg=function(i,e){return function(){return i&&(e=i(i=0)),e}},$t=function(i,e){return function(){return e||i((e={exports:{}}).exports,e),e.exports}},My=function(i,e,t,s){if(e&&typeof e=="object"||typeof e=="function")for(var r=ky(e),n=0,a=r.length,o;n<a;n++)o=r[n],!Dy.call(i,o)&&o!==t&&Wg(i,o,{get:(function(l){return e[l]}).bind(null,o),enumerable:!(s=Ry(e,o))||s.enumerable});return i},zt=function(i,e,t){return t=i!=null?Ly(wy(i)):{},My(!i||!i.__esModule?Wg(t,"default",{value:i,enumerable:!0}):t,i)},xi=$t(function(i,e){var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t={},e.exports=t});function rn(i,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](i):rn(i,e)}var nn=qg(function(){nn()});function jg(i){"@swc/helpers - typeof";return i&&typeof Symbol<"u"&&i.constructor===Symbol?"symbol":typeof i}var Yg=qg(function(){}),Zg=$t(function(i,e){var t=Array.prototype.slice;e.exports=s;function s(r,n){for(("length"in r)||(r=[r]),r=t.call(r);r.length;){var a=r.shift(),o=n(a);if(o)return o;a.childNodes&&a.childNodes.length&&(r=t.call(a.childNodes).concat(r))}}}),Py=$t(function(i,e){nn(),e.exports=t;function t(s,r){if(!rn(this,t))return new t(s,r);this.data=s,this.nodeValue=s,this.length=s.length,this.ownerDocument=r||null}t.prototype.nodeType=8,t.prototype.nodeName="#comment",t.prototype.toString=function(){return"[object Comment]"}}),Oy=$t(function(i,e){nn(),e.exports=t;function t(s,r){if(!rn(this,t))return new t(s);this.data=s||"",this.length=this.data.length,this.ownerDocument=r||null}t.prototype.type="DOMTextNode",t.prototype.nodeType=3,t.prototype.nodeName="#text",t.prototype.toString=function(){return this.data},t.prototype.replaceData=function(s,r,n){var a=this.data,o=a.substring(0,s),l=a.substring(s+r,a.length);this.data=o+n+l,this.length=this.data.length}}),zg=$t(function(i,e){e.exports=t;function t(s){var r=this,n=s.type;s.target||(s.target=r),r.listeners||(r.listeners={});var a=r.listeners[n];if(a)return a.forEach(function(o){s.currentTarget=r,typeof o=="function"?o(s):o.handleEvent(s)});r.parentNode&&r.parentNode.dispatchEvent(s)}}),Qg=$t(function(i,e){e.exports=t;function t(s,r){var n=this;n.listeners||(n.listeners={}),n.listeners[s]||(n.listeners[s]=[]),n.listeners[s].indexOf(r)===-1&&n.listeners[s].push(r)}}),Xg=$t(function(i,e){e.exports=t;function t(s,r){var n=this;if(n.listeners&&n.listeners[s]){var a=n.listeners[s],o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}),Ny=$t(function(i,e){Yg(),e.exports=s;var t=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function s(h){switch(h.nodeType){case 3:return u(h.data);case 8:return"<!--"+h.data+"-->";default:return r(h)}}function r(h){var f=[],m=h.tagName;return h.namespaceURI==="http://www.w3.org/1999/xhtml"&&(m=m.toLowerCase()),f.push("<"+m+d(h)+o(h)),t.indexOf(m)>-1?f.push(" />"):(f.push(">"),h.childNodes.length?f.push.apply(f,h.childNodes.map(s)):h.textContent||h.innerText?f.push(u(h.textContent||h.innerText)):h.innerHTML&&f.push(h.innerHTML),f.push("</"+m+">")),f.join("")}function n(h,f){var m=jg(h[f]);return f==="style"&&Object.keys(h.style).length>0?!0:h.hasOwnProperty(f)&&(m==="string"||m==="boolean"||m==="number")&&f!=="nodeName"&&f!=="className"&&f!=="tagName"&&f!=="textContent"&&f!=="innerText"&&f!=="namespaceURI"&&f!=="innerHTML"}function a(h){if(typeof h=="string")return h;var f="";return Object.keys(h).forEach(function(m){var p=h[m];m=m.replace(/[A-Z]/g,function(g){return"-"+g.toLowerCase()}),f+=m+":"+p+";"}),f}function o(h){var f=h.dataset,m=[];for(var p in f)m.push({name:"data-"+p,value:f[p]});return m.length?l(m):""}function l(h){var f=[];return h.forEach(function(m){var p=m.name,g=m.value;p==="style"&&(g=a(g)),f.push(p+'="'+c(g)+'"')}),f.length?" "+f.join(" "):""}function d(h){var f=[];for(var m in h)n(h,m)&&f.push({name:m,value:h[m]});for(var p in h._attributes)for(var g in h._attributes[p]){var v=h._attributes[p][g],b=(v.prefix?v.prefix+":":"")+g;f.push({name:b,value:v.value})}return h.className&&f.push({name:"class",value:h.className}),f.length?l(f):""}function u(h){var f="";return typeof h=="string"?f=h:h&&(f=h.toString()),f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function c(h){return u(h).replace(/"/g,"&quot;")}}),Jg=$t(function(i,e){nn();var t=Zg(),s=zg(),r=Qg(),n=Xg(),a=Ny(),o="http://www.w3.org/1999/xhtml";e.exports=l;function l(d,u,c){if(!rn(this,l))return new l(d);var h=c===void 0?o:c||null;this.tagName=h===o?String(d).toUpperCase():d,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=u||null,this.namespaceURI=h,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(d){return d.parentNode&&d.parentNode.removeChild(d),this.childNodes.push(d),d.parentNode=this,d},l.prototype.replaceChild=function(d,u){d.parentNode&&d.parentNode.removeChild(d);var c=this.childNodes.indexOf(u);return u.parentNode=null,this.childNodes[c]=d,d.parentNode=this,u},l.prototype.removeChild=function(d){var u=this.childNodes.indexOf(d);return this.childNodes.splice(u,1),d.parentNode=null,d},l.prototype.insertBefore=function(d,u){d.parentNode&&d.parentNode.removeChild(d);var c=u==null?-1:this.childNodes.indexOf(u);return c>-1?this.childNodes.splice(c,0,d):this.childNodes.push(d),d.parentNode=this,d},l.prototype.setAttributeNS=function(d,u,c){var h=null,f=u,m=u.indexOf(":");if(m>-1&&(h=u.substr(0,m),f=u.substr(m+1)),this.tagName==="INPUT"&&u==="type")this.type=c;else{var p=this._attributes[d]||(this._attributes[d]={});p[f]={value:c,prefix:h}}},l.prototype.getAttributeNS=function(d,u){var c=this._attributes[d],h=c&&c[u]&&c[u].value;return this.tagName==="INPUT"&&u==="type"?this.type:typeof h!="string"?null:h},l.prototype.removeAttributeNS=function(d,u){var c=this._attributes[d];c&&delete c[u]},l.prototype.hasAttributeNS=function(d,u){var c=this._attributes[d];return!!c&&u in c},l.prototype.setAttribute=function(d,u){return this.setAttributeNS(null,d,u)},l.prototype.getAttribute=function(d){return this.getAttributeNS(null,d)},l.prototype.removeAttribute=function(d){return this.removeAttributeNS(null,d)},l.prototype.hasAttribute=function(d){return this.hasAttributeNS(null,d)},l.prototype.removeEventListener=n,l.prototype.addEventListener=r,l.prototype.dispatchEvent=s,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(d){var u=d.split(" "),c=[];return t(this,function(h){if(h.nodeType===1){var f=h.className||"",m=f.split(" ");u.every(function(p){return m.indexOf(p)!==-1})&&c.push(h)}}),c},l.prototype.getElementsByTagName=function(d){d=d.toLowerCase();var u=[];return t(this.childNodes,function(c){c.nodeType===1&&(d==="*"||c.tagName.toLowerCase()===d)&&u.push(c)}),u},l.prototype.contains=function(d){return t(this,function(u){return d===u})||!1}}),Fy=$t(function(i,e){nn();var t=Jg();e.exports=s;function s(r){if(!rn(this,s))return new s;this.childNodes=[],this.parentNode=null,this.ownerDocument=r||null}s.prototype.type="DocumentFragment",s.prototype.nodeType=11,s.prototype.nodeName="#document-fragment",s.prototype.appendChild=t.prototype.appendChild,s.prototype.replaceChild=t.prototype.replaceChild,s.prototype.removeChild=t.prototype.removeChild,s.prototype.toString=function(){return this.childNodes.map(function(r){return String(r)}).join("")}}),Uy=$t(function(i,e){e.exports=t;function t(s){}t.prototype.initEvent=function(s,r,n){this.type=s,this.bubbles=r,this.cancelable=n},t.prototype.preventDefault=function(){}}),$y=$t(function(i,e){nn();var t=Zg(),s=Py(),r=Oy(),n=Jg(),a=Fy(),o=Uy(),l=zg(),d=Qg(),u=Xg();e.exports=c;function c(){if(!rn(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var h=c.prototype;h.createTextNode=function(f){return new r(f,this)},h.createElementNS=function(f,m){var p=f===null?null:String(f);return new n(m,this,p)},h.createElement=function(f){return new n(f,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(f){return new o(f)},h.createComment=function(f){return new s(f,this)},h.getElementById=function(f){f=String(f);var m=t(this.childNodes,function(p){if(String(p.id)===f)return p});return m||null},h.getElementsByClassName=n.prototype.getElementsByClassName,h.getElementsByTagName=n.prototype.getElementsByTagName,h.contains=n.prototype.contains,h.removeEventListener=u,h.addEventListener=d,h.dispatchEvent=l}),By=$t(function(i,e){var t=$y();e.exports=new t}),ev=$t(function(i,e){var t=typeof global<"u"?global:typeof window<"u"?window:{},s=By(),r;typeof document<"u"?r=document:(r=t["__GLOBAL_DOCUMENT_CACHE@4"],r||(r=t["__GLOBAL_DOCUMENT_CACHE@4"]=s)),e.exports=r});function Hy(i){if(Array.isArray(i))return i}function Vy(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var s=[],r=!0,n=!1,a,o;try{for(t=t.call(i);!(r=(a=t.next()).done)&&(s.push(a.value),!(e&&s.length===e));r=!0);}catch(l){n=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(n)throw o}}return s}}function Gy(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ah(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=i[t];return s}function tv(i,e){if(i){if(typeof i=="string")return ah(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ah(i,e)}}function _s(i,e){return Hy(i)||Vy(i,e)||tv(i,e)||Gy()}var lo=zt(xi()),Y1=zt(xi()),Ky=zt(xi()),Wy={now:function(){var i=Ky.default.performance,e=i&&i.timing,t=e&&e.navigationStart,s=typeof t=="number"&&typeof i.now=="function"?t+i.now():Date.now();return Math.round(s)}},pt=Wy,So=function(){var i,e,t;if(typeof((i=Y1.default.crypto)===null||i===void 0?void 0:i.getRandomValues)=="function"){t=new Uint8Array(32),Y1.default.crypto.getRandomValues(t);for(var s=0;s<32;s++)t[s]=t[s]%16}else{t=[];for(var r=0;r<32;r++)t[r]=Math.random()*16|0}var n=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var d=l==="x"?t[n]:t[n]&3|8;return n++,d.toString(16)});var a=pt.now(),o=a==null?void 0:a.toString(16).substring(3);return o?e.substring(0,28)+o:e},iv=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},pi=function(i){if(i&&typeof i.nodeName<"u")return i.muxId||(i.muxId=iv()),i.muxId;var e;try{e=document.querySelector(i)}catch{}return e&&!e.muxId&&(e.muxId=i),(e==null?void 0:e.muxId)||i},Qd=function(i){var e;i&&typeof i.nodeName<"u"?(e=i,i=pi(e)):e=document.querySelector(i);var t=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,i,t]};function qy(i){if(Array.isArray(i))return ah(i)}function jy(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Yy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(i){return qy(i)||jy(i)||tv(i)||Yy()}var Nr={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},Zy=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t,s,r,n,a,o=[console,i],l=(t=console.trace).bind.apply(t,gi(o)),d=(s=console.info).bind.apply(s,gi(o)),u=(r=console.debug).bind.apply(r,gi(o)),c=(n=console.warn).bind.apply(n,gi(o)),h=(a=console.error).bind.apply(a,gi(o)),f=e;return{trace:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];if(!(f>Nr.TRACE))return l.apply(void 0,gi(p))},debug:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];if(!(f>Nr.DEBUG))return u.apply(void 0,gi(p))},info:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];if(!(f>Nr.INFO))return d.apply(void 0,gi(p))},warn:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];if(!(f>Nr.WARN))return c.apply(void 0,gi(p))},error:function(){for(var m=arguments.length,p=new Array(m),g=0;g<m;g++)p[g]=arguments[g];if(!(f>Nr.ERROR))return h.apply(void 0,gi(p))},get level(){return f},set level(m){m!==this.level&&(f=m??e)}}},He=Zy("[mux]"),hc=zt(xi());function oh(){var i=hc.default.doNotTrack||hc.default.navigator&&hc.default.navigator.doNotTrack;return i==="1"}function ue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}nn();function Tt(i,e){if(!rn(i,e))throw new TypeError("Cannot call a class as a function")}function zy(i,e){for(var t=0;t<e.length;t++){var s=e[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function ss(i,e,t){return e&&zy(i.prototype,e),i}function j(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function da(i){return da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},da(i)}function Qy(i,e){for(;!Object.prototype.hasOwnProperty.call(i,e)&&(i=da(i),i!==null););return i}function Nl(i,e,t){return typeof Reflect<"u"&&Reflect.get?Nl=Reflect.get:Nl=function(s,r,n){var a=Qy(s,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(n||s):o.value}},Nl(i,e,t||i)}function lh(i,e){return lh=Object.setPrototypeOf||function(t,s){return t.__proto__=s,t},lh(i,e)}function Xy(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&lh(i,e)}function Jy(i,e){if(i==null)return{};var t={},s=Object.keys(i),r,n;for(n=0;n<s.length;n++)r=s[n],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function eb(i,e){if(i==null)return{};var t=Jy(i,e),s,r;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(t[s]=i[s])}return t}function tb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}Yg();function ib(i,e){return e&&(jg(e)==="object"||typeof e=="function")?e:ue(i)}function sb(i){var e=tb();return function(){var t=da(i),s;if(e){var r=da(this).constructor;s=Reflect.construct(t,arguments,r)}else s=t.apply(this,arguments);return ib(this,s)}}var Ai=function(i){return Co(i)[0]},Co=function(i){if(typeof i!="string"||i==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=i.match(e)||[],s=t[4],r;return s&&(r=(s.match(/[^\.]+\.[^\.]+$/)||[])[0]),[s,r]},fc=zt(xi()),rb={exists:function(){var i=fc.default.performance,e=i&&i.timing;return e!==void 0},domContentLoadedEventEnd:function(){var i=fc.default.performance,e=i&&i.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var i=fc.default.performance,e=i&&i.timing;return e&&e.navigationStart}},Xd=rb;function ft(i,e,t){t=t===void 0?1:t,i[e]=i[e]||0,i[e]+=t}function Jd(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),s.forEach(function(r){j(i,r,t[r])})}return i}function nb(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);t.push.apply(t,s)}return t}function Jf(i,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):nb(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))}),i}var ab=["x-cdn","content-type"],sv=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],ob=ab.concat(sv);function e0(i){i=i||"";var e={},t=i.trim().split(/[\r\n]+/);return t.forEach(function(s){if(s){var r=s.split(": "),n=r.shift();n&&(ob.indexOf(n.toLowerCase())>=0||n.toLowerCase().indexOf("x-litix-")===0)&&(e[n]=r.join(": "))}}),e}function eu(i){if(i){var e=sv.find(function(t){return i[t]!==void 0});return e?i[e]:void 0}}var lb=function(i){var e={};for(var t in i){var s=i[t],r=s["DATA-ID"].search("io.litix.data.");if(r!==-1){var n=s["DATA-ID"].replace("io.litix.data.","");e[n]=s.VALUE}}return e},rv=lb,rl=function(i){if(!i)return{};var e=Xd.navigationStart(),t=i.loading,s=t?t.start:i.trequest,r=t?t.first:i.tfirst,n=t?t.end:i.tload;return{bytesLoaded:i.total,requestStart:Math.round(e+s),responseStart:Math.round(e+r),responseEnd:Math.round(e+n)}},Sa=function(i){if(!(!i||typeof i.getAllResponseHeaders!="function"))return e0(i.getAllResponseHeaders())},db=function(i,e,t){var s=arguments.length>4?arguments[4]:void 0,r=i.log,n=i.utils.secondsToMs,a=function(g){var v=parseInt(s.version),b;return v===1&&g.programDateTime!==null&&(b=g.programDateTime),v===0&&g.pdt!==null&&(b=g.pdt),b};if(!Xd.exists()){r.warn("performance timing not supported. Not tracking HLS.js.");return}var o=function(g,v){return i.emit(e,g,v)},l=function(g,v){var b=v.levels,E=v.audioTracks,T=v.url,x=v.stats,R=v.networkDetails,I=v.sessionData,C={},L={};b.forEach(function(V,q){C[q]={width:V.width,height:V.height,bitrate:V.bitrate,attrs:V.attrs}}),E.forEach(function(V,q){L[q]={name:V.name,language:V.lang,bitrate:V.bitrate}});var S=rl(x),w=S.bytesLoaded,F=S.requestStart,G=S.responseStart,K=S.responseEnd;o("requestcompleted",Jf(Jd({},rv(I)),{request_event_type:g,request_bytes_loaded:w,request_start:F,request_response_start:G,request_response_end:K,request_type:"manifest",request_hostname:Ai(T),request_response_headers:Sa(R),request_rendition_lists:{media:C,audio:L,video:{}}}))};t.on(s.Events.MANIFEST_LOADED,l);var d=function(g,v){var b=v.details,E=v.level,T=v.networkDetails,x=v.stats,R=rl(x),I=R.bytesLoaded,C=R.requestStart,L=R.responseStart,S=R.responseEnd,w=b.fragments[b.fragments.length-1],F=a(w)+n(w.duration);o("requestcompleted",{request_event_type:g,request_bytes_loaded:I,request_start:C,request_response_start:L,request_response_end:S,request_current_level:E,request_type:"manifest",request_hostname:Ai(b.url),request_response_headers:Sa(T),video_holdback:b.holdBack&&n(b.holdBack),video_part_holdback:b.partHoldBack&&n(b.partHoldBack),video_part_target_duration:b.partTarget&&n(b.partTarget),video_target_duration:b.targetduration&&n(b.targetduration),video_source_is_live:b.live,player_manifest_newest_program_time:isNaN(F)?void 0:F})};t.on(s.Events.LEVEL_LOADED,d);var u=function(g,v){var b=v.details,E=v.networkDetails,T=v.stats,x=rl(T),R=x.bytesLoaded,I=x.requestStart,C=x.responseStart,L=x.responseEnd;o("requestcompleted",{request_event_type:g,request_bytes_loaded:R,request_start:I,request_response_start:C,request_response_end:L,request_type:"manifest",request_hostname:Ai(b.url),request_response_headers:Sa(E)})};t.on(s.Events.AUDIO_TRACK_LOADED,u);var c=function(g,v){var b=v.stats,E=v.networkDetails,T=v.frag;b=b||T.stats;var x=rl(b),R=x.bytesLoaded,I=x.requestStart,C=x.responseStart,L=x.responseEnd,S=E?Sa(E):void 0,w={request_event_type:g,request_bytes_loaded:R,request_start:I,request_response_start:C,request_response_end:L,request_hostname:E?Ai(E.responseURL):void 0,request_id:S?eu(S):void 0,request_response_headers:S,request_media_duration:T.duration,request_url:E==null?void 0:E.responseURL};T.type==="main"?(w.request_type="media",w.request_current_level=T.level,w.request_video_width=(t.levels[T.level]||{}).width,w.request_video_height=(t.levels[T.level]||{}).height,w.request_labeled_bitrate=(t.levels[T.level]||{}).bitrate):w.request_type=T.type,o("requestcompleted",w)};t.on(s.Events.FRAG_LOADED,c);var h=function(g,v){var b=v.frag,E=b.start,T=a(b),x={currentFragmentPDT:T,currentFragmentStart:n(E)};o("fragmentchange",x)};t.on(s.Events.FRAG_CHANGED,h);var f=function(g,v){var b=v.type,E=v.details,T=v.response,x=v.fatal,R=v.frag,I=v.networkDetails,C=(R==null?void 0:R.url)||v.url||"",L=I?Sa(I):void 0;if((E===s.ErrorDetails.MANIFEST_LOAD_ERROR||E===s.ErrorDetails.MANIFEST_LOAD_TIMEOUT||E===s.ErrorDetails.FRAG_LOAD_ERROR||E===s.ErrorDetails.FRAG_LOAD_TIMEOUT||E===s.ErrorDetails.LEVEL_LOAD_ERROR||E===s.ErrorDetails.LEVEL_LOAD_TIMEOUT||E===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||E===s.ErrorDetails.SUBTITLE_LOAD_ERROR||E===s.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||E===s.ErrorDetails.KEY_LOAD_ERROR||E===s.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:E,request_url:C,request_hostname:Ai(C),request_id:L?eu(L):void 0,request_type:E===s.ErrorDetails.FRAG_LOAD_ERROR||E===s.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":E===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":E===s.ErrorDetails.SUBTITLE_LOAD_ERROR||E===s.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":E===s.ErrorDetails.KEY_LOAD_ERROR||E===s.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:T==null?void 0:T.code,request_error_text:T==null?void 0:T.text}),x){var S,w="".concat(C?"url: ".concat(C,`
`):"")+"".concat(T&&(T.code||T.text)?"response: ".concat(T.code,", ").concat(T.text,`
`):"")+"".concat(v.reason?"failure reason: ".concat(v.reason,`
`):"")+"".concat(v.level?"level: ".concat(v.level,`
`):"")+"".concat(v.parent?"parent stream controller: ".concat(v.parent,`
`):"")+"".concat(v.buffer?"buffer length: ".concat(v.buffer,`
`):"")+"".concat(v.error?"error: ".concat(v.error,`
`):"")+"".concat(v.event?"event: ".concat(v.event,`
`):"")+"".concat(v.err?"error message: ".concat((S=v.err)===null||S===void 0?void 0:S.message,`
`):"");o("error",{player_error_code:b,player_error_message:E,player_error_context:w})}};t.on(s.Events.ERROR,f);var m=function(g,v){var b=v.frag,E=b&&b._url||"";o("requestcanceled",{request_event_type:g,request_url:E,request_type:"media",request_hostname:Ai(E)})};t.on(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var p=function(g,v){var b=v.level,E=t.levels[b];if(E&&E.attrs&&E.attrs.BANDWIDTH){var T=E.attrs.BANDWIDTH,x,R=parseFloat(E.attrs["FRAME-RATE"]);isNaN(R)||(x=R),T?o("renditionchange",{video_source_fps:x,video_source_bitrate:T,video_source_width:E.width,video_source_height:E.height,video_source_rendition_name:E.name,video_source_codec:E==null?void 0:E.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(s.Events.LEVEL_SWITCHED,p),t._stopMuxMonitor=function(){t.off(s.Events.MANIFEST_LOADED,l),t.off(s.Events.LEVEL_LOADED,d),t.off(s.Events.AUDIO_TRACK_LOADED,u),t.off(s.Events.FRAG_LOADED,c),t.off(s.Events.FRAG_CHANGED,h),t.off(s.Events.ERROR,f),t.off(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),t.off(s.Events.LEVEL_SWITCHED,p),t.off(s.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(s.Events.DESTROYING,t._stopMuxMonitor)},ub=function(i){i&&typeof i._stopMuxMonitor=="function"&&i._stopMuxMonitor()},Z1=function(i,e){if(!i||!i.requestEndDate)return{};var t=Ai(i.url),s=i.url,r=i.bytesLoaded,n=new Date(i.requestStartDate).getTime(),a=new Date(i.firstByteDate).getTime(),o=new Date(i.requestEndDate).getTime(),l=isNaN(i.duration)?0:i.duration,d=typeof e.getMetricsFor=="function"?e.getMetricsFor(i.mediaType).HttpList:e.getDashMetrics().getHttpRequests(i.mediaType),u;d.length>0&&(u=e0(d[d.length-1]._responseHeaders||""));var c=u?eu(u):void 0;return{requestStart:n,requestResponseStart:a,requestResponseEnd:o,requestBytesLoaded:r,requestResponseHeaders:u,requestMediaDuration:l,requestHostname:t,requestUrl:s,requestId:c}},cb=function(i,e){var t=e.getQualityFor(i),s=e.getCurrentTrackFor(i).bitrateList;return s?{currentLevel:t,renditionWidth:s[t].width||null,renditionHeight:s[t].height||null,renditionBitrate:s[t].bandwidth}:{}},hb=function(i){var e;return(e=i.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},fb=function(i){try{var e,t,s=(t=i.getVersion)===null||t===void 0||(e=t.call(i))===null||e===void 0?void 0:e.split(".").map(function(r){return parseInt(r)})[0];return s}catch{return!1}},mb=function(i,e,t){var s=i.log;if(!t||!t.on){s.warn("Invalid dash.js player reference. Monitoring blocked.");return}var r=fb(t),n=function(b,E){return i.emit(e,b,E)},a=function(b){var E=b.type,T=b.data,x=(T||{}).url;n("requestcompleted",{request_event_type:E,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:Ai(x),request_url:x})};t.on("manifestLoaded",a);var o={},l=function(b){if(typeof b.getRequests!="function")return null;var E=b.getRequests({state:"executed"});return E.length===0?null:E[E.length-1]},d=function(b){var E=b.type,T=b.fragmentModel,x=b.chunk,R=l(T);u({type:E,request:R,chunk:x})},u=function(b){var E=b.type,T=b.chunk,x=b.request,R=(T||{}).mediaInfo,I=R||{},C=I.type,L=I.bitrateList;L=L||[];var S={};L.forEach(function(se,W){S[W]={},S[W].width=se.width,S[W].height=se.height,S[W].bitrate=se.bandwidth,S[W].attrs={}}),C==="video"?o.video=S:C==="audio"?o.audio=S:o.media=S;var w=Z1(x,t),F=w.requestStart,G=w.requestResponseStart,K=w.requestResponseEnd,V=w.requestResponseHeaders,q=w.requestMediaDuration,z=w.requestHostname,$=w.requestUrl,re=w.requestId;n("requestcompleted",{request_event_type:E,request_start:F,request_response_start:G,request_response_end:K,request_bytes_loaded:-1,request_type:C+"_init",request_response_headers:V,request_hostname:z,request_id:re,request_url:$,request_media_duration:q,request_rendition_lists:o})};r>=4?t.on("initFragmentLoaded",u):t.on("initFragmentLoaded",d);var c=function(b){var E=b.type,T=b.fragmentModel,x=b.chunk,R=l(T);h({type:E,request:R,chunk:x})},h=function(b){var E=b.type,T=b.chunk,x=b.request,R=T||{},I=R.mediaInfo,C=R.start,L=I||{},S=L.type,w=Z1(x,t),F=w.requestStart,G=w.requestResponseStart,K=w.requestResponseEnd,V=w.requestBytesLoaded,q=w.requestResponseHeaders,z=w.requestMediaDuration,$=w.requestHostname,re=w.requestUrl,se=w.requestId,W=cb(S,t),B=W.currentLevel,oe=W.renditionWidth,fe=W.renditionHeight,ye=W.renditionBitrate;n("requestcompleted",{request_event_type:E,request_start:F,request_response_start:G,request_response_end:K,request_bytes_loaded:V,request_type:S,request_response_headers:q,request_hostname:$,request_id:se,request_url:re,request_media_start_time:C,request_media_duration:z,request_current_level:B,request_labeled_bitrate:ye,request_video_width:oe,request_video_height:fe})};r>=4?t.on("mediaFragmentLoaded",h):t.on("mediaFragmentLoaded",c);var f={video:void 0,audio:void 0,totalBitrate:void 0},m=function(){if(f.video&&typeof f.video.bitrate=="number"){if(!(f.video.width&&f.video.height)){s.warn("have bitrate info for video but missing width/height");return}var b=f.video.bitrate;if(f.audio&&typeof f.audio.bitrate=="number"&&(b+=f.audio.bitrate),b!==f.totalBitrate)return f.totalBitrate=b,{video_source_bitrate:b,video_source_height:f.video.height,video_source_width:f.video.width,video_source_codec:hb(f.video.codec)}}},p=function(b,E,T){if(typeof b.newQuality!="number"){s.warn("missing evt.newQuality in qualityChangeRendered event",b);return}var x=b.mediaType;if(x==="audio"||x==="video"){var R=t.getBitrateInfoListFor(x).find(function(C){var L=C.qualityIndex;return L===b.newQuality});if(!(R&&typeof R.bitrate=="number")){s.warn("missing bitrate info for ".concat(x));return}f[x]=Jf(Jd({},R),{codec:t.getCurrentTrackFor(x).codec});var I=m();I&&n("renditionchange",I)}};t.on("qualityChangeRendered",p);var g=function(b){var E=b.request,T=b.mediaType;E=E||{},n("requestcanceled",{request_event_type:E.type+"_"+E.action,request_url:E.url,request_type:T,request_hostname:Ai(E.url)})};t.on("fragmentLoadingAbandoned",g);var v=function(b){var E=b.error,T,x,R=(E==null||(T=E.data)===null||T===void 0?void 0:T.request)||{},I=(E==null||(x=E.data)===null||x===void 0?void 0:x.response)||{};(E==null?void 0:E.code)===27&&n("requestfailed",{request_error:R.type+"_"+R.action,request_url:R.url,request_hostname:Ai(R.url),request_type:R.mediaType,request_error_code:I.status,request_error_text:I.statusText});var C="".concat(R!=null&&R.url?"url: ".concat(R.url,`
`):"")+"".concat(I!=null&&I.status||I!=null&&I.statusText?"response: ".concat(I==null?void 0:I.status,", ").concat(I==null?void 0:I.statusText,`
`):"");n("error",{player_error_code:E==null?void 0:E.code,player_error_message:E==null?void 0:E.message,player_error_context:C})};t.on("error",v),t._stopMuxMonitor=function(){t.off("manifestLoaded",a),t.off("initFragmentLoaded",u),t.off("mediaFragmentLoaded",h),t.off("qualityChangeRendered",p),t.off("error",v),t.off("fragmentLoadingAbandoned",g),delete t._stopMuxMonitor}},pb=function(i){i&&typeof i._stopMuxMonitor=="function"&&i._stopMuxMonitor()},z1=0,gb=function(){function i(){Tt(this,i),j(this,"_listeners",void 0)}return ss(i,[{key:"on",value:function(e,t,s){return t._eventEmitterGuid=t._eventEmitterGuid||++z1,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],s&&(t=t.bind(s)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var s=this._listeners&&this._listeners[e];s&&s.forEach(function(r,n){r._eventEmitterGuid===t._eventEmitterGuid&&s.splice(n,1)})}},{key:"one",value:function(e,t,s){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++z1;var n=function(){r.off(e,n),t.apply(s||this,arguments)};n._eventEmitterGuid=t._eventEmitterGuid,this.on(e,n)}},{key:"emit",value:function(e,t){var s=this;if(this._listeners){t=t||{};var r=this._listeners["before"+e]||[],n=this._listeners["before*"]||[],a=this._listeners[e]||[],o=this._listeners["after"+e]||[],l=function(d,u){d=d.slice(),d.forEach(function(c){c.call(s,{type:e},u)})};l(r,t),l(n,t),l(a,t),l(o,t)}}}]),i}(),vb=gb,mc=zt(xi()),Eb=function(){function i(e){var t=this;Tt(this,i),j(this,"_playbackHeartbeatInterval",void 0),j(this,"_playheadShouldBeProgressing",void 0),j(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(s,r){t._playbackHeartbeatInterval!==null&&(mc.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),t._playbackHeartbeatInterval=null)})}return ss(i,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=mc.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(mc.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),i}(),yb=Eb,bb=function i(e){var t=this;Tt(this,i),j(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(s,r){try{var n=e.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});n&&(e.data.player_error_code=n.player_error_code||r.player_error_code,e.data.player_error_message=n.player_error_message||r.player_error_message,e.data.player_error_context=n.player_error_context||r.player_error_context,e.data.player_error_severity=n.player_error_severity||r.player_error_severity,e.data.player_error_business_exception=n.player_error_business_exception||r.player_error_business_exception,t.viewErrored=!0)}catch(a){e.mux.log.warn("Exception in error translator callback.",a),t.viewErrored=!0}}),e.on("aftererror",function(){var s,r,n,a,o;(s=e.data)===null||s===void 0||delete s.player_error_code,(r=e.data)===null||r===void 0||delete r.player_error_message,(n=e.data)===null||n===void 0||delete n.player_error_context,(a=e.data)===null||a===void 0||delete a.player_error_severity,(o=e.data)===null||o===void 0||delete o.player_error_business_exception})},Tb=bb,_b=function(){function i(e){Tt(this,i),j(this,"_watchTimeTrackerLastCheckedTime",void 0),j(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return ss(i,[{key:"_updateWatchTime",value:function(e,t){var s=t.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=s),ft(this.pm.data,"view_watch_time",s-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=s}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),i}(),Ab=_b,Sb=function(){function i(e){var t=this;Tt(this,i),j(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),j(this,"_lastTime",void 0),j(this,"_isAdPlaying",void 0),j(this,"_callbackUpdatePlaybackTime",void 0),j(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=pt.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var s=this._startPlaybackTimeTracking.bind(this);e.on("playing",s),e.on("adplaying",s),e.on("seeked",s);var r=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",r),e.on("seeking",r),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=pt.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return ss(i,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=pt.now(),s=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?s=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(s=t-this._lastTime),s>0&&s<=1e3&&ft(this.pm.data,"view_content_playback_time",s),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),i}(),Cb=Sb,xb=function(){function i(e){Tt(this,i),j(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return ss(i,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var s=this,r=function(){s.pm.currentFragmentPDT&&s.pm.currentFragmentStart&&(s.pm.data.player_program_time=s.pm.currentFragmentPDT+s.pm.data.player_playhead_time-s.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var n=this.pm.getPlayheadTime();typeof n<"u"&&(this.pm.data.player_playhead_time=n,r(),this._updateMaxPlayheadPosition())}}}]),i}(),Ib=xb,Q1=5*60*1e3,Lb=function i(e){if(Tt(this,i),!e.disableRebufferTracking){var t,s=function(n,a){r(a),t=void 0},r=function(n){if(t){var a=n.viewer_time-t;ft(e.data,"view_rebuffer_duration",a),t=n.viewer_time,e.data.view_rebuffer_duration>Q1&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(Q1,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(n,a){return r(a)}),e.on("rebufferstart",function(n,a){t||(ft(e.data,"view_rebuffer_count",1),t=a.viewer_time,e.one("rebufferend",s))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",s)})}},Rb=Lb,kb=function(){function i(e){var t=this;Tt(this,i),j(this,"_lastCheckedTime",void 0),j(this,"_lastPlayheadTime",void 0),j(this,"_lastPlayheadTimeUpdatedTime",void 0),j(this,"_rebuffering",void 0),j(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:pt.now()})}))}return ss(i,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,t);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(t.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,t,!0);return}var s=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&s>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(this._lastCheckedTime===null)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&r>0&&n-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+n-r}))}s?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),i}(),wb=kb,Db=function(){function i(e){var t=this;Tt(this,i),j(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var s=e.data,r=s.view_id;if(!s.view_program_changed){var n=function(a,o){var l=o.viewer_time;(a.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||a.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||t._inPrerollPosition()))&&t.calculateTimeToFirstFrame(l||pt.now(),r)};e.one("playing",n),e.one("adplaying",n),e.one("viewend",function(){e.off("playing",n),e.off("adplaying",n)})}})}return ss(i,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.pm.pageLoadInitTime&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.pm.pageLoadInitTime))}}]),i}(),Mb=Db,Pb=function i(e){var t=this;Tt(this,i),j(this,"_lastPlayerHeight",void 0),j(this,"_lastPlayerWidth",void 0),j(this,"_lastPlayheadPosition",void 0),j(this,"_lastSourceHeight",void 0),j(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var s=["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"],r=["playing","hb","renditionchange","orientationchange"];s.forEach(function(n){e.on(n,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var a=e.data.player_playhead_time-t._lastPlayheadPosition;if(a<0){t._lastPlayheadPosition=-1;return}var o=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),l=Math.max(0,o-1),d=Math.max(0,1-o);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,l),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,d),ft(e.data,"view_total_content_playback_time",a),ft(e.data,"view_total_upscaling",l*a),ft(e.data,"view_total_downscaling",d*a)}t._lastPlayheadPosition=-1})}),r.forEach(function(n){e.on(n,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},Ob=Pb,Nb=2e3,Fb=function i(e){var t=this;Tt(this,i),j(this,"isSeeking",void 0),this.isSeeking=!1;var s=-1,r=function(){var n=pt.now(),a=(e.data.viewer_time||n)-(s||n);ft(e.data,"view_seek_duration",a),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,a),t.isSeeking=!1,s=-1};e.on("seeking",function(n,a){if(Object.assign(e.data,a),t.isSeeking&&a.viewer_time-s<=Nb){s=a.viewer_time;return}t.isSeeking&&r(),t.isSeeking=!0,s=a.viewer_time,ft(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){r()}),e.on("viewend",function(){t.isSeeking&&(r(),e.send("seeked")),t.isSeeking=!1,s=-1})},Ub=Fb,X1=function(i,e){i.push(e),i.sort(function(t,s){return t.viewer_time-s.viewer_time})},$b=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Bb=function(){function i(e){var t=this;Tt(this,i),j(this,"_adHasPlayed",void 0),j(this,"_adRequests",void 0),j(this,"_adResponses",void 0),j(this,"_currentAdRequestNumber",void 0),j(this,"_currentAdResponseNumber",void 0),j(this,"_prerollPlayTime",void 0),j(this,"_wouldBeNewAdPlay",void 0),j(this,"isAdBreak",void 0),j(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),$b.forEach(function(r){return e.on(r,t._updateAdData.bind(t))});var s=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",s),e.on("playing",s),e.on("viewend",s),e.on("adrequest",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},n),X1(t._adRequests,n),ft(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||ft(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},n),X1(t._adResponses,n);var a=t.findAdRequest(n.ad_request_id);a&&ft(e.data,"view_ad_request_time",Math.max(0,n.viewer_time-a.viewer_time))}),e.on("adplay",function(r,n){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,ft(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,n.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-e.data.view_start)),t._prerollPlayTime=n.viewer_time)}),e.on("adplaying",function(r,n){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof t._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=n.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=n.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(r,n){t._wouldBeNewAdPlay||ft(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(r,n){t._wouldBeNewAdPlay||ft(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return ss(i,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var s=_s(Co(t.ad_tag_url),2),r=s[0],n=s[1];this.pm.data.view_preroll_ad_tag_domain=n,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=_s(Co(t.ad_asset_url),2),o=a[0],l=a[1];this.pm.data.view_preroll_ad_asset_domain=l,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=t==null?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=t==null?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=t==null?void 0:t.ad_creative_id,this.pm.data.ad_id=t==null?void 0:t.ad_id,this.pm.data.ad_universal_id=t==null?void 0:t.ad_universal_id}}]),i}(),Hb=Bb,J1=zt(xi()),Vb=function i(e){Tt(this,i);var t,s,r=function(){e.disableRebufferTracking||(ft(e.data,"view_waiting_rebuffer_count",1),t=pt.now(),s=J1.default.setInterval(function(){if(t){var d=pt.now();ft(e.data,"view_waiting_rebuffer_duration",d-t),t=d}},250))},n=function(){e.disableRebufferTracking||t&&(ft(e.data,"view_waiting_rebuffer_duration",pt.now()-t),t=!1,J1.default.clearInterval(s))},a=!1,o=function(){a=!0},l=function(){a=!1,n()};e.on("waiting",function(){a&&r()}),e.on("playing",function(){n(),o()}),e.on("pause",l),e.on("seeking",l)},Gb=Vb,Kb=function i(e){var t=this;Tt(this,i),j(this,"lastWallClockTime",void 0);var s=function(){t.lastWallClockTime=pt.now(),e.on("before*",r)},r=function(n){var a=pt.now(),o=t.lastWallClockTime;t.lastWallClockTime=a,a-o>3e4&&(e.emit("devicesleep",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:a}),Object.assign(e.data,{viewer_time:a}),e.send("devicewake"))};e.one("playbackheartbeat",s),e.on("playbackheartbeatend",function(){e.off("before*",r),e.one("playbackheartbeat",s)})},Wb=Kb,pc=zt(xi()),nv=function(i){return i()}(function(){var i=function(){for(var t=0,s={};t<arguments.length;t++){var r=arguments[t];for(var n in r)s[n]=r[n]}return s};function e(t){function s(r,n,a){var o;if(typeof document<"u"){if(arguments.length>1){if(a=i({path:"/"},s.defaults,a),typeof a.expires=="number"){var l=new Date;l.setMilliseconds(l.getMilliseconds()+a.expires*864e5),a.expires=l}try{o=JSON.stringify(n),/^[\{\[]/.test(o)&&(n=o)}catch{}return t.write?n=t.write(n,r):n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),r=r.replace(/[\(\)]/g,escape),document.cookie=[r,"=",n,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}r||(o={});for(var d=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,c=0;c<d.length;c++){var h=d[c].split("="),f=h.slice(1).join("=");f.charAt(0)==='"'&&(f=f.slice(1,-1));try{var m=h[0].replace(u,decodeURIComponent);if(f=t.read?t.read(f,m):t(f,m)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch{}if(r===m){o=f;break}r||(o[m]=f)}catch{}}return o}}return s.set=s,s.get=function(r){return s.call(s,r)},s.getJSON=function(){return s.apply({json:!0},[].slice.call(arguments))},s.defaults={},s.remove=function(r,n){s(r,"",i(n,{expires:-1}))},s.withConverter=e,s}return e(function(){})}),av="muxData",qb=function(i){return Object.entries(i).map(function(e){var t=_s(e,2),s=t[0],r=t[1];return"".concat(s,"=").concat(r)}).join("&")},jb=function(i){return i.split("&").reduce(function(e,t){var s=_s(t.split("="),2),r=s[0],n=s[1],a=+n,o=n&&a==n?a:n;return e[r]=o,e},{})},ov=function(){var i;try{i=jb(nv.get(av)||"")}catch{i={}}return i},lv=function(i){try{nv.set(av,qb(i),{expires:365})}catch{}},Yb=function(){var i=ov();return i.mux_viewer_id=i.mux_viewer_id||So(),i.msn=i.msn||Math.random(),lv(i),{mux_viewer_id:i.mux_viewer_id,mux_sample_number:i.msn}},Zb=function(){var i=ov(),e=pt.now();return i.session_start&&(i.sst=i.session_start,delete i.session_start),i.session_id&&(i.sid=i.session_id,delete i.session_id),i.session_expires&&(i.sex=i.session_expires,delete i.session_expires),(!i.sex||i.sex<e)&&(i.sid=So(),i.sst=e),i.sex=e+25*60*1e3,lv(i),{session_id:i.sid,session_start:i.sst,session_expires:i.sex}};function zb(i,e){var t=e.beaconCollectionDomain,s=e.beaconDomain;if(t)return"https://"+t;i=i||"inferred";var r=s||"litix.io";return i.match(/^[a-z0-9]+$/)?"https://"+i+"."+r:"https://img.litix.io/a.gif"}var Qb=zt(xi()),dv=function(){var i;switch(uv()){case"cellular":i="cellular";break;case"ethernet":i="wired";break;case"wifi":i="wifi";break;case void 0:break;default:i="other"}return i},uv=function(){var i=Qb.default.navigator,e=i&&(i.connection||i.mozConnection||i.webkitConnection);return e&&e.type};dv.getConnectionFromAPI=uv;var Xb=dv,Jb={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},e4=cv(Jb),t4={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cm:"cmcd",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",pv:"previous",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},em=cv(t4);function cv(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function dh(i){var e={},t={};return Object.keys(i).forEach(function(s){var r=!1;if(i.hasOwnProperty(s)&&i[s]!==void 0){var n=s.split("_"),a=n[0],o=e4[a];o||(He.info("Data key word `"+n[0]+"` not expected in "+s),o=a+"_"),n.splice(1).forEach(function(l){l==="url"&&(r=!0),em[l]?o+=em[l]:Number.isInteger(Number(l))?o+=l:(He.info("Data key word `"+l+"` not expected in "+s),o+="_"+l+"_")}),r?t[o]=i[s]:e[o]=i[s]}}),Object.assign(e,t)}var Ur=zt(xi()),i4=zt(ev()),s4={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},r4=56*1024,n4=["hb","requestcompleted","requestfailed","requestcanceled"],a4="https://img.litix.io",Ss=function(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=i||a4,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},s4,e)};Ss.prototype.queueEvent=function(i,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||i==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};Ss.prototype.flushEvents=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(i&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};Ss.prototype.destroy=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,i?this._clearBeaconQueue():this.flushEvents(),Ur.default.clearTimeout(this._sendTimeout)};Ss.prototype._clearBeaconQueue=function(){var i=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(i);i>0&&Object.assign(e[e.length-1],dh({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);hv(this._beaconUrl,t,!0,function(){})};Ss.prototype._sendBeaconQueue=function(){var i=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),s=pt.now();hv(this._beaconUrl,t,!1,function(r,n){n?(i._eventQueue=e.concat(i._eventQueue),i._failureCount+=1,He.info("Error sending beacon: "+n)):i._failureCount=0,i._roundTripTime=pt.now()-s,i._postInFlight=!1,i._resendAfterPost&&(i._resendAfterPost=!1,i._eventQueue.length>0&&i._sendBeaconQueue())})};Ss.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var i=Math.pow(2,this._failureCount-1);return i=i*Math.random(),(1+i)*this._options.baseTimeBetweenBeacons};Ss.prototype._startBeaconSending=function(){var i=this;Ur.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=Ur.default.setTimeout(function(){i._eventQueue.length&&i._sendBeaconQueue(),i._startBeaconSending()},this._getNextBeaconTime()))};Ss.prototype._createPayload=function(i){var e=this,t={transmission_timestamp:Math.round(pt.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var s,r,n,a=function(){s=JSON.stringify({metadata:t,events:r||i}),n=s.length/1024},o=function(){return n<=e._options.maxPayloadKBSize};return a(),o()||(He.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),r=i.filter(function(l){return n4.indexOf(l.e)===-1}),a()),o()||(He.info("Payload size still too big ("+n+" kb). Cropping fields.."),r.forEach(function(l){for(var d in l){var u=l[d],c=50*1024;typeof u=="string"&&u.length>c&&(l[d]=u.substring(0,c))}}),a()),s};var o4=typeof i4.default.exitPictureInPicture=="function"?function(i){return i.length<=r4}:function(i){return!1},hv=function(i,e,t,s){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(i,e)){s();return}if(Ur.default.fetch){Ur.default.fetch(i,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:o4(e)}).then(function(n){return s(null,n.ok?null:"Error")}).catch(function(n){return s(null,n)});return}if(Ur.default.XMLHttpRequest){var r=new Ur.default.XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4)return s(null,r.status!==200?"error":void 0)},r.open("POST",i),r.setRequestHeader("Content-Type","text/plain"),r.send(e);return}s()},l4=Ss,d4=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],u4=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],c4=["ad_id","ad_creative_id","ad_universal_id"],h4=["viewstart","error","ended","viewend"],f4=10*60*1e3,m4=function(){function i(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Tt(this,i);var r,n,a,o,l,d,u,c,h,f,m,p;j(this,"mux",void 0),j(this,"envKey",void 0),j(this,"options",void 0),j(this,"eventQueue",void 0),j(this,"sampleRate",void 0),j(this,"disableCookies",void 0),j(this,"respectDoNotTrack",void 0),j(this,"previousBeaconData",void 0),j(this,"lastEventTime",void 0),j(this,"rateLimited",void 0),j(this,"pageLevelData",void 0),j(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=s,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new l4(zb(this.envKey,this.options));var g;this.sampleRate=(g=this.options.sampleRate)!==null&&g!==void 0?g:1;var v;this.disableCookies=(v=this.options.disableCookies)!==null&&v!==void 0?v:!1;var b;this.respectDoNotTrack=(b=this.options.respectDoNotTrack)!==null&&b!==void 0?b:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(r=this.options.platform)===null||r===void 0?void 0:r.name,viewer_application_version:(n=this.options.platform)===null||n===void 0?void 0:n.version,viewer_application_engine:(a=this.options.platform)===null||a===void 0?void 0:a.layout,viewer_device_name:(o=this.options.platform)===null||o===void 0?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:(l=this.options.platform)===null||l===void 0?void 0:l.manufacturer,viewer_os_family:(u=this.options.platform)===null||u===void 0||(d=u.os)===null||d===void 0?void 0:d.family,viewer_os_architecture:(h=this.options.platform)===null||h===void 0||(c=h.os)===null||c===void 0?void 0:c.architecture,viewer_os_version:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.version,viewer_connection_type:Xb(),page_url:pc.default===null||pc.default===void 0||(p=pc.default.location)===null||p===void 0?void 0:p.href},this.viewerData=this.disableCookies?{}:Yb()}return ss(i,[{key:"send",value:function(e,t){if(!(!e||!(t!=null&&t.view_id))){if(this.respectDoNotTrack&&oh())return He.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||typeof t!="object")return He.error("A data object was expected in send() but was not provided");var s=this.disableCookies?{}:Zb(),r=Jf(Jd({},this.pageLevelData,t,s,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var n,a=((n=r.mux_sample_number)!==null&&n!==void 0?n:0)>=this.sampleRate,o=this._deduplicateBeaconData(e,r),l=dh(o);if(this.lastEventTime=this.mux.utils.now(),a)return He.info("Not sending event due to sample rate restriction",e,r,l);if(this.envKey||He.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,l),!this.rateLimited){if(He.info("Sending event",e,r,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):h4.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",l=dh(r),this.eventQueue.queueEvent(r.event,l),He.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var s=this,r={},n=t.view_id;if(n==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=f4)r=Jd({},t),n&&(this.previousBeaconData=r),n&&e==="viewend"&&(this.previousBeaconData=null);else{var a=e.indexOf("request")===0;Object.entries(t).forEach(function(o){var l=_s(o,2),d=l[0],u=l[1];s.previousBeaconData&&(u!==s.previousBeaconData[d]||d4.indexOf(d)>-1||s.objectHasChanged(a,d,u,s.previousBeaconData[d])||s.eventRequiresKey(e,d))&&(r[d]=u,s.previousBeaconData[d]=u)})}return r}},{key:"objectHasChanged",value:function(e,t,s,r){return!e||t.indexOf("request_")!==0?!1:t==="request_response_headers"||typeof s!="object"||typeof r!="object"?!0:Object.keys(s||{}).length!==Object.keys(r||{}).length}},{key:"eventRequiresKey",value:function(e,t){return!!(e==="renditionchange"&&t.indexOf("video_source_")===0||c4.includes(t)&&u4.includes(e))}}]),i}(),p4=function i(e){Tt(this,i);var t=0,s=0,r=0,n=0,a=0,o=0,l=0,d=function(h,f){var m=f.request_start,p=f.request_response_start,g=f.request_response_end,v=f.request_bytes_loaded;n++;var b,E;if(p?(b=p-(m??0),E=(g??0)-p):E=(g??0)-(m??0),E>0&&v&&v>0){var T=v/E*8e3;a++,s+=v,r+=E,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,T),e.data.view_average_request_throughput=s/r*8e3,e.data.view_request_count=n,b>0&&(t+=b,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,b),e.data.view_average_request_latency=t/a)}},u=function(h,f){n++,o++,e.data.view_request_count=n,e.data.view_request_failed_count=o},c=function(h,f){n++,l++,e.data.view_request_count=n,e.data.view_request_canceled_count=l};e.on("requestcompleted",d),e.on("requestfailed",u),e.on("requestcanceled",c)},g4=p4,v4=60*60*1e3,E4=function i(e){var t=this;Tt(this,i),j(this,"_lastEventTime",void 0),e.on("before*",function(s,r){var n=r.viewer_time,a=pt.now(),o=t._lastEventTime;if(t._lastEventTime=a,o&&a-o>v4){var l=Object.keys(e.data).reduce(function(u,c){return c.indexOf("video_")===0?Object.assign(u,j({},c,e.data[c])):u},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var d=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:n},l)),e.playbackHeartbeat._playheadShouldBeProgressing=d,e.playbackHeartbeat._playheadShouldBeProgressing&&s.type!=="play"&&s.type!=="adbreakstart"&&(e.emit("play",{viewer_time:n}),s.type!=="playing"&&e.emit("playing",{viewer_time:n}))}})},y4=E4,b4=function i(e){Tt(this,i);var t=function(o){var l=T4(o),d=_4(o);if(l!=null&&!tm(l,n)&&a<=d){n=l,a=d;var u={video_cdn:l};e.emit("cdnchange",u)}},s=null,r=null,n=null,a=0;e.on("viewinit",function(){s=null,r=null,n=null,a=0}),e.on("beforecdnchange",function(o,l){var d=l==null?void 0:l.video_cdn;d&&(typeof l.video_previous_cdn>"u"||l.video_previous_cdn===null)&&(tm(d,r)?l.video_previous_cdn=s??void 0:(l.video_previous_cdn=r??void 0,s=r,r=d))}),e.on("requestcompleted",function(o,l){t(l)})};function tm(i,e){return(i==null?void 0:i.toLowerCase())===(e==null?void 0:e.toLowerCase())}function T4(i){var e;return i!=null&&i.request_type&&(i.request_type==="media"||i.request_type==="video")&&!((e=i.request_response_headers)===null||e===void 0)&&e["x-cdn"]?i.request_response_headers["x-cdn"]:i!=null&&i.video_cdn?i.video_cdn:null}function _4(i){return i!=null&&i.request_start?i.request_start:i!=null&&i.viewer_time?i.viewer_time:Date.now()}var A4=b4,S4=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange","cdnchange"],C4=new Set(["requestcompleted","requestfailed","requestcanceled"]),x4=function(i){Xy(t,i);var e=sb(t);function t(s,r,n){Tt(this,t);var a;a=e.call(this),j(ue(a),"pageLoadEndTime",void 0),j(ue(a),"pageLoadInitTime",void 0),j(ue(a),"_destroyed",void 0),j(ue(a),"_heartBeatTimeout",void 0),j(ue(a),"adTracker",void 0),j(ue(a),"dashjs",void 0),j(ue(a),"data",void 0),j(ue(a),"disablePlayheadRebufferTracking",void 0),j(ue(a),"disableRebufferTracking",void 0),j(ue(a),"errorTracker",void 0),j(ue(a),"errorTranslator",void 0),j(ue(a),"emitTranslator",void 0),j(ue(a),"getAdData",void 0),j(ue(a),"getPlayheadTime",void 0),j(ue(a),"getStateData",void 0),j(ue(a),"stateDataTranslator",void 0),j(ue(a),"hlsjs",void 0),j(ue(a),"id",void 0),j(ue(a),"longResumeTracker",void 0),j(ue(a),"minimumRebufferDuration",void 0),j(ue(a),"mux",void 0),j(ue(a),"playbackEventDispatcher",void 0),j(ue(a),"playbackHeartbeat",void 0),j(ue(a),"playbackHeartbeatTime",void 0),j(ue(a),"playheadTime",void 0),j(ue(a),"seekingTracker",void 0),j(ue(a),"sustainedRebufferThreshold",void 0),j(ue(a),"watchTimeTracker",void 0),j(ue(a),"currentFragmentPDT",void 0),j(ue(a),"currentFragmentStart",void 0),a.pageLoadInitTime=Xd.navigationStart(),a.pageLoadEndTime=Xd.domContentLoadedEventEnd();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(h){return h},emitTranslator:function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return f},stateDataTranslator:function(h){return h}};a.mux=s,a.id=r,n!=null&&n.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),n=Object.assign(o,n),n.data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),He.level=n.debug?Nr.DEBUG:Nr.WARN,a.getPlayheadTime=n.getPlayheadTime,a.getStateData=n.getStateData||function(){return{}},a.getAdData=n.getAdData||function(){},a.minimumRebufferDuration=n.minimumRebufferDuration,a.sustainedRebufferThreshold=n.sustainedRebufferThreshold,a.playbackHeartbeatTime=n.playbackHeartbeatTime,a.disableRebufferTracking=n.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=n.disablePlayheadRebufferTracking,a.errorTranslator=n.errorTranslator,a.emitTranslator=n.emitTranslator,a.stateDataTranslator=n.stateDataTranslator,a.playbackEventDispatcher=new m4(s,n.data.env_key,n),a.data={player_instance_id:So(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconCollectionDomain||n.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1;var l=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(ue(a));if(a.on("viewinit",function(h,f){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,f),this._initializeViewData(),this.one("play",l),this.one("adbreakstart",l)}),a.on("videochange",function(h,f){this._resetView(f)}),a.on("programchange",function(h,f){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(f,{view_program_changed:!0})),l(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(h,f){this.currentFragmentPDT=f.currentFragmentPDT,this.currentFragmentStart=f.currentFragmentStart}),a.on("destroy",a.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var d=function(){var h=typeof a.data.view_start<"u";a.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",h&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",d,!1);var u=function(h){h.persisted||a.destroy()};window.addEventListener("pagehide",u,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",d),window.removeEventListener("pagehide",u)})}a.on("playerready",function(h,f){Object.assign(this.data,f)}),S4.forEach(function(h){a.on(h,function(f,m){h.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,m),this._sanitizeData()}),a.on("after"+h,function(){(h!=="error"||this.errorTracker.viewErrored)&&this.send(h)})}),a.on("viewend",function(h,f){Object.assign(a.data,f)});var c=function(h){var f=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=f-this.data.player_init_time),this.pageLoadInitTime=this.data.page_load_init_time||this.pageLoadInitTime,this.pageLoadEndTime=this.data.page_load_end_time||this.pageLoadEndTime,!this.mux.PLAYER_TRACKED&&this.pageLoadInitTime&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.pageLoadEndTime)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.pageLoadEndTime||1/0)-this.pageLoadInitTime)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return a.one("playerready",c),a.longResumeTracker=new y4(ue(a)),a.errorTracker=new Tb(ue(a)),new Wb(ue(a)),a.seekingTracker=new Ub(ue(a)),a.playheadTime=new Ib(ue(a)),a.playbackHeartbeat=new yb(ue(a)),new Ob(ue(a)),a.watchTimeTracker=new Ab(ue(a)),new Cb(ue(a)),a.adTracker=new Hb(ue(a)),new wb(ue(a)),new Rb(ue(a)),new Mb(ue(a)),new Gb(ue(a)),new g4(ue(a)),new A4(ue(a)),n.hlsjs&&a.addHLSJS(n),n.dashjs&&a.addDashJS(n),a.emit("viewinit",n.data),a}return ss(t,[{key:"emit",value:function(s,r){var n,a=Object.assign({viewer_time:this.mux.utils.now()},r),o=[s,a];if(this.emitTranslator)try{o=this.emitTranslator(s,a)}catch(l){this.mux.log.warn("Exception in emit translator callback.",l)}o!=null&&o.length&&(n=Nl(da(t.prototype),"emit",this)).call.apply(n,[this].concat(gi(o)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(s){if(this.data.view_id){var r=Object.assign({},this.data),n=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(r.video_source_is_live===void 0&&(r.player_source_duration===1/0||r.video_source_duration===1/0?r.video_source_is_live=!0:(r.player_source_duration>0||r.video_source_duration>0)&&(r.video_source_is_live=!1)),r.video_source_is_live||n.forEach(function(d){r[d]=void 0}),r.video_source_url=r.video_source_url||r.player_source_url,r.video_source_url){var a=_s(Co(r.video_source_url),2),o=a[0],l=a[1];r.video_source_domain=l,r.video_source_hostname=o}delete r.ad_request_id,this.playbackEventDispatcher.send(s,r),this.data.view_sequence_number++,this.data.player_sequence_number++,C4.has(s)||this._restartHeartBeat(),s==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(s){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",s)}},{key:"_updateStateData",value:function(){var s,r=this.getStateData();if(typeof this.stateDataTranslator=="function")try{r=this.stateDataTranslator(r)}catch(a){this.mux.log.warn("Exception in stateDataTranslator translator callback.",a)}if(!((s=this.data)===null||s===void 0)&&s.video_cdn&&r!=null&&r.video_cdn){r.video_cdn;var n=eb(r,["video_cdn"]);r=n}Object.assign(this.data,r),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var s=this,r=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];r.forEach(function(a){var o=parseInt(s.data[a],10);s.data[a]=isNaN(o)?void 0:o});var n=["player_source_url","video_source_url"];n.forEach(function(a){if(s.data[a]){var o=s.data[a].toLowerCase();(o.indexOf("data:")===0||o.indexOf("blob:")===0)&&(s.data[a]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var s=this;Object.keys(this.data).forEach(function(r){r.indexOf("video_")===0&&delete s.data[r]})}},{key:"_resetViewData",value:function(){var s=this;Object.keys(this.data).forEach(function(r){r.indexOf("view_")===0&&delete s.data[r]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var s=this,r=this.data.view_id=So(),n=function(){r===s.data.view_id&&ft(s.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()}},{key:"_restartHeartBeat",value:function(){var s=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){s.data.player_is_paused||s.emit("hb")},1e4)}},{key:"addHLSJS",value:function(s){if(!s.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=s.hlsjs,db(this.mux,this.id,s.hlsjs,{},s.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(ub(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(s){if(!s.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=s.dashjs,mb(this.mux,this.id,s.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(pb(this.dashjs),this.dashjs=void 0)}}]),t}(vb),I4=x4,Ca=zt(ev());function L4(){return Ca.default&&!!(Ca.default.fullscreenElement||Ca.default.webkitFullscreenElement||Ca.default.mozFullScreenElement||Ca.default.msFullscreenElement)}var R4=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],k4={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function w4(i,e,t){var s=_s(Qd(e),3),r=s[0],n=s[1],a=s[2],o=i.log,l=i.utils.getComputedStyle,d=i.utils.secondsToMs,u={automaticErrorTracking:!0};if(r){if(a!=="video"&&a!=="audio")return o.error("The element of `"+n+"` was not a media element.")}else return o.error("No element was found with the `"+n+"` query selector.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners"));var c={getPlayheadTime:function(){return d(r.currentTime)},getStateData:function(){var f,m,p,g=((f=(m=this).getPlayheadTime)===null||f===void 0?void 0:f.call(m))||d(r.currentTime),v=this.hlsjs&&this.hlsjs.url,b=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),E={player_is_paused:r.paused,player_width:parseInt(l(r,"width")),player_height:parseInt(l(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:L4(),video_poster_url:r.poster,video_source_url:v||b||r.currentSrc,video_source_duration:d(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:r==null||(p=r.getVideoPlaybackQuality)===null||p===void 0?void 0:p.call(r).droppedVideoFrames};if(r.getStartDate&&g>0){var T=r.getStartDate();if(T&&typeof T.getTime=="function"&&T.getTime()){var x=T.getTime();if(E.player_program_time=x+g,r.seekable.length>0){var R=x+r.seekable.end(r.seekable.length-1);E.player_live_edge_program_time=R}}}return E}};t=Object.assign(u,t,c),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:i.VERSION},t.data),r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(f,m){i.emit(n,f,m)},r.mux.updateData=function(f){r.mux.emit("hb",f)};var h=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach(function(f){r.removeEventListener(f,r.mux.listeners[f],!1)}),delete r.mux.listeners,r.mux.destroy=h,r.mux.swapElement=h,r.mux.emit=h,r.mux.addHLSJS=h,r.mux.addDashJS=h,r.mux.removeHLSJS=h,r.mux.removeDashJS=h,r.mux.updateData=h,r.mux.setEmitTranslator=h,r.mux.setStateDataTranslator=h,r.mux.setGetPlayheadTime=h,r.mux.deleted=!0,i.emit(n,"destroy")},r.mux.swapElement=function(f){var m=_s(Qd(f),3),p=m[0],g=m[1],v=m[2];if(p){if(v!=="video"&&v!=="audio")return i.log.error("The element of `"+g+"` was not a media element.")}else return i.log.error("No element was found with the `"+g+"` query selector.");p.muxId=r.muxId,delete r.muxId,p.mux=p.mux||{},p.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(p.mux.listeners).forEach(function(b){r.removeEventListener(b,p.mux.listeners[b],!1),p.addEventListener(b,p.mux.listeners[b],!1)}),p.mux.swapElement=r.mux.swapElement,p.mux.destroy=r.mux.destroy,delete r.mux,r=p},r.mux.addHLSJS=function(f){i.addHLSJS(n,f)},r.mux.addDashJS=function(f){i.addDashJS(n,f)},r.mux.removeHLSJS=function(){i.removeHLSJS(n)},r.mux.removeDashJS=function(){i.removeDashJS(n)},r.mux.setEmitTranslator=function(f){i.setEmitTranslator(n,f)},r.mux.setStateDataTranslator=function(f){i.setStateDataTranslator(n,f)},r.mux.setGetPlayheadTime=function(f){f||(f=t.getPlayheadTime),i.setGetPlayheadTime(n,f)},i.init(n,t),i.emit(n,"playerready"),r.paused||(i.emit(n,"play"),r.readyState>2&&i.emit(n,"playing")),r.mux.listeners={},R4.forEach(function(f){f==="error"&&!t.automaticErrorTracking||(r.mux.listeners[f]=function(){var m={};if(f==="error"){if(!r.error||r.error.code===1)return;m.player_error_code=r.error.code,m.player_error_message=k4[r.error.code]||r.error.message}i.emit(n,f,m)},r.addEventListener(f,r.mux.listeners[f],!1))})}function D4(i,e,t,s){var r=s;if(i&&typeof i[e]=="function")try{r=i[e].apply(i,t)}catch(n){He.info("safeCall error",n)}return r}var uo=zt(xi()),yn;uo.default&&uo.default.WeakMap&&(yn=new WeakMap);function M4(i,e){if(!i||!e||!uo.default||typeof uo.default.getComputedStyle!="function")return"";var t;return yn&&yn.has(i)&&(t=yn.get(i)),t||(t=uo.default.getComputedStyle(i,null),yn&&yn.set(i,t)),t.getPropertyValue(e)}function P4(i){return Math.floor(i*1e3)}var Er={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Uu=function(i){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(i),this.manifest};Uu.prototype.process=function(i){var e;for(this.buffer+=i,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Uu.prototype.processLine=function(i){var e=i.indexOf(":"),t=U4(i,e),s=t[0],r=t.length===2?t0(t[1]):void 0;if(s[0]!=="#")this.currentUri.uri=s,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(s){case Er.TARGET_DURATION:{if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break}case Er.PART_INF:{gc(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case Er.SERVER_CONTROL:{gc(this.manifest,t),this.setHoldBack();break}case Er.INF:{r===0?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break}case Er.PROGRAM_DATE_TIME:{var n=r,a=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=a;break}case Er.VERSION:{gc(this.manifest,t);break}case Er.SESSION_DATA:{var o=$4(t[1]),l=rv(o);Object.assign(this.manifest.sessionData,l)}}};Uu.prototype.setHoldBack=function(){var i=this.manifest,e=i.serverControl,t=i.targetDuration,s=i.partTargetDuration;if(e){var r="holdBack",n="partHoldBack",a=t&&t*3,o=s&&s*2;t&&!e.hasOwnProperty(r)&&(e[r]=a),a&&e[r]<a&&(e[r]=a),s&&!e.hasOwnProperty(n)&&(e[n]=s*3),s&&e[n]<o&&(e[n]=o)}};var gc=function(i,e){var t=fv(e[0].replace("#EXT-X-","")),s;F4(e[1])?(s={},s=Object.assign(N4(e[1]),s)):s=t0(e[1]),i[t]=s},fv=function(i){return i.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},t0=function(i){if(i.toLowerCase()==="yes"||i.toLowerCase()==="no")return i.toLowerCase()==="yes";var e=i.indexOf(":")!==-1?i:parseFloat(i);return isNaN(e)?i:e},O4=function(i){var e={},t=i.split("=");if(t.length>1){var s=fv(t[0]);e[s]=t0(t[1])}return e},N4=function(i){for(var e=i.split(","),t={},s=0;e.length>s;s++){var r=e[s],n=O4(r);t=Object.assign(n,t)}return t},F4=function(i){return i.indexOf("=")>-1},U4=function(i,e){return e===-1?[i]:[i.substring(0,e),i.substring(e+1)]},$4=function(i){var e={};if(i){var t=i.search(","),s=i.slice(0,t),r=i.slice(t+1),n=[s,r];return n.forEach(function(a,o){for(var l=a.replace(/['"]+/g,"").split("="),d=0;d<l.length;d++)l[d]==="DATA-ID"&&(e["DATA-ID"]=l[1-d]),l[d]==="VALUE"&&(e.VALUE=l[1-d])}),{data:e}}},B4=Uu,H4={safeCall:D4,safeIncrement:ft,getComputedStyle:M4,secondsToMs:P4,assign:Object.assign,headersStringToObject:e0,cdnHeadersToRequestId:eu,extractHostnameAndDomain:Co,extractHostname:Ai,manifestParser:B4,generateShortID:iv,generateUUID:So,now:pt.now,findMediaElement:Qd},V4=H4,G4={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},K4=G4,W4="mux-embed",q4="5.11.0",j4="2.1",lt={},dr=function(i){var e=arguments;typeof i=="string"?dr.hasOwnProperty(i)?lo.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),dr[i].apply(null,e)},0):He.warn("`"+i+"` is an unknown task"):typeof i=="function"?lo.default.setTimeout(function(){i(dr)},0):He.warn("`"+i+"` is invalid.")},Y4={loaded:pt.now(),NAME:W4,VERSION:q4,API_VERSION:j4,PLAYER_TRACKED:!1,monitor:function(i,e){return w4(dr,i,e)},destroyMonitor:function(i){var e=_s(Qd(i),1),t=e[0];t&&t.mux&&typeof t.mux.destroy=="function"?t.mux.destroy():He.error("A video element monitor for `"+i+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(i,e){var t=pi(i);lt[t]?lt[t].addHLSJS(e):He.error("A monitor for `"+t+"` has not been initialized.")},addDashJS:function(i,e){var t=pi(i);lt[t]?lt[t].addDashJS(e):He.error("A monitor for `"+t+"` has not been initialized.")},removeHLSJS:function(i){var e=pi(i);lt[e]?lt[e].removeHLSJS():He.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(i){var e=pi(i);lt[e]?lt[e].removeDashJS():He.error("A monitor for `"+e+"` has not been initialized.")},init:function(i,e){oh()&&e&&e.respectDoNotTrack&&He.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var t=pi(i);lt[t]=new I4(dr,t,e)},emit:function(i,e,t){var s=pi(i);lt[s]?(lt[s].emit(e,t),e==="destroy"&&delete lt[s]):He.error("A monitor for `"+s+"` has not been initialized.")},updateData:function(i,e){var t=pi(i);lt[t]?lt[t].emit("hb",e):He.error("A monitor for `"+t+"` has not been initialized.")},setEmitTranslator:function(i,e){var t=pi(i);lt[t]?lt[t].emitTranslator=e:He.error("A monitor for `"+t+"` has not been initialized.")},setStateDataTranslator:function(i,e){var t=pi(i);lt[t]?lt[t].stateDataTranslator=e:He.error("A monitor for `"+t+"` has not been initialized.")},setGetPlayheadTime:function(i,e){var t=pi(i);lt[t]?lt[t].getPlayheadTime=e:He.error("A monitor for `"+t+"` has not been initialized.")},checkDoNotTrack:oh,log:He,utils:V4,events:K4,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(dr,Y4);typeof lo.default<"u"&&typeof lo.default.addEventListener=="function"&&lo.default.addEventListener("pagehide",function(i){i.persisted||(dr.WINDOW_UNLOADING=!0)},!1);var i0=dr;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/const Y=Number.isFinite||function(i){return typeof i=="number"&&isFinite(i)},Z4=Number.isSafeInteger||function(i){return typeof i=="number"&&Math.abs(i)<=z4},z4=Number.MAX_SAFE_INTEGER||9007199254740991;let ne=function(i){return i.NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",i}({}),P=function(i){return i.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",i.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",i.KEY_SYSTEM_NO_SESSION="keySystemNoSession",i.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",i.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",i.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",i.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",i.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",i.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",i.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",i.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",i.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",i.MANIFEST_LOAD_ERROR="manifestLoadError",i.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",i.MANIFEST_PARSING_ERROR="manifestParsingError",i.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",i.LEVEL_EMPTY_ERROR="levelEmptyError",i.LEVEL_LOAD_ERROR="levelLoadError",i.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",i.LEVEL_PARSING_ERROR="levelParsingError",i.LEVEL_SWITCH_ERROR="levelSwitchError",i.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",i.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",i.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",i.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",i.FRAG_LOAD_ERROR="fragLoadError",i.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",i.FRAG_DECRYPT_ERROR="fragDecryptError",i.FRAG_PARSING_ERROR="fragParsingError",i.FRAG_GAP="fragGap",i.REMUX_ALLOC_ERROR="remuxAllocError",i.KEY_LOAD_ERROR="keyLoadError",i.KEY_LOAD_TIMEOUT="keyLoadTimeOut",i.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",i.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",i.BUFFER_APPEND_ERROR="bufferAppendError",i.BUFFER_APPENDING_ERROR="bufferAppendingError",i.BUFFER_STALLED_ERROR="bufferStalledError",i.BUFFER_FULL_ERROR="bufferFullError",i.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",i.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",i.ASSET_LIST_LOAD_ERROR="assetListLoadError",i.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",i.ASSET_LIST_PARSING_ERROR="assetListParsingError",i.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",i.INTERNAL_EXCEPTION="internalException",i.INTERNAL_ABORTED="aborted",i.ATTACH_MEDIA_ERROR="attachMediaError",i.UNKNOWN="unknown",i}({}),y=function(i){return i.MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.MEDIA_ENDED="hlsMediaEnded",i.STALL_RESOLVED="hlsStallResolved",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFERED_TO_END="hlsBufferedToEnd",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached",i.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",i.ASSET_LIST_LOADING="hlsAssetListLoading",i.ASSET_LIST_LOADED="hlsAssetListLoaded",i.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",i.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",i.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",i.INTERSTITIAL_STARTED="hlsInterstitialStarted",i.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",i.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",i.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",i.INTERSTITIAL_ENDED="hlsInterstitialEnded",i.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",i.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",i.EVENT_CUE_ENTER="hlsEventCueEnter",i}({});var _e={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},te={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class dn{constructor(e,t=0,s=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=s}sample(e,t){const s=Math.pow(this.alpha_,e);this.estimate_=t*(1-s)+s*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Q4{constructor(e,t,s,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=s,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new dn(e),this.fast_=new dn(t),this.defaultTTFB_=r,this.ttfb_=new dn(e)}update(e,t){const{slow_:s,fast_:r,ttfb_:n}=this;s.halfLife!==e&&(this.slow_=new dn(e,s.getEstimate(),s.getTotalWeight())),r.halfLife!==t&&(this.fast_=new dn(t,r.getEstimate(),r.getTotalWeight())),n.halfLife!==e&&(this.ttfb_=new dn(e,n.getEstimate(),n.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const s=8*t,r=e/1e3,n=s/r;this.fast_.sample(r,n),this.slow_.sample(r,n)}sampleTTFB(e){const t=e/1e3,s=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(s,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function X4(i,e,t){return(e=eT(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Ne(){return Ne=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)({}).hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Ne.apply(null,arguments)}function im(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,s)}return t}function Ue(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?im(Object(t),!0).forEach(function(s){X4(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):im(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function J4(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function eT(i){var e=J4(i,"string");return typeof e=="symbol"?e:e+""}class Ii{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const s=`[${e}]:`;this.trace=Gs,this.debug=t.debug.bind(null,s),this.log=t.log.bind(null,s),this.warn=t.warn.bind(null,s),this.info=t.info.bind(null,s),this.error=t.error.bind(null,s)}}const Gs=function(){},tT={trace:Gs,debug:Gs,log:Gs,warn:Gs,info:Gs,error:Gs};function uh(){return Ne({},tT)}function iT(i,e){const t=self.console[i];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${i}] >`):Gs}function sm(i,e,t){return e[i]?e[i].bind(e):iT(i,t)}const ch=uh();function sT(i,e,t){const s=uh();if(typeof console=="object"&&i===!0||typeof i=="object"){const r=["debug","log","info","warn","error"];r.forEach(n=>{s[n]=sm(n,i,t)});try{s.log(`Debug logs enabled for "${e}" in hls.js version 1.6.7`)}catch{return uh()}r.forEach(n=>{ch[n]=sm(n,i)})}else Ne(ch,s);return s}const ke=ch;function cr(i=!0){return typeof self>"u"?void 0:(i||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function rT(i){return typeof self<"u"&&i===self.ManagedMediaSource}function mv(i,e){const t=Object.keys(i),s=Object.keys(e),r=t.length,n=s.length;return!r||!n||r===n&&!t.some(a=>s.indexOf(a)===-1)}function Zt(i,e=!1){if(typeof TextDecoder<"u"){const d=new TextDecoder("utf-8").decode(i);if(e){const u=d.indexOf("\0");return u!==-1?d.substring(0,u):d}return d.replace(/\0/g,"")}const t=i.length;let s,r,n,a="",o=0;for(;o<t;){if(s=i[o++],s===0&&e)return a;if(s===0||s===3)continue;switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:r=i[o++],a+=String.fromCharCode((s&31)<<6|r&63);break;case 14:r=i[o++],n=i[o++],a+=String.fromCharCode((s&15)<<12|(r&63)<<6|(n&63)<<0);break}}return a}const Fr={hexDump:function(i){let e="";for(let t=0;t<i.length;t++){let s=i[t].toString(16);s.length<2&&(s="0"+s),e+=s}return e}};function pv(i){return Uint8Array.from(i.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function nT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vc={exports:{}},rm;function aT(){return rm||(rm=1,function(i,e){(function(t){var s=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,d,u){if(u=u||{},l=l.trim(),d=d.trim(),!d){if(!u.alwaysNormalize)return l;var c=o.parseURL(l);if(!c)throw new Error("Error trying to parse base URL.");return c.path=o.normalizePath(c.path),o.buildURLFromParts(c)}var h=o.parseURL(d);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):d;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=r.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var p={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(p.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)p.path=f.path,h.params||(p.params=f.params,h.query||(p.query=f.query));else{var g=f.path,v=g.substring(0,g.lastIndexOf("/")+1)+h.path;p.path=o.normalizePath(v)}return p.path===null&&(p.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(p)},parseURL:function(l){var d=s.exec(l);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(n,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};i.exports=o})()}(vc)),vc.exports}var s0=aT();class r0{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Ve={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class gv{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,lT(this,"stats")}setByteRange(e,t){const s=e.split("@",2);let r;s.length===1?r=(t==null?void 0:t.byteRangeEndOffset)||0:r=parseInt(s[1]),this._byteRange=[r,parseInt(s[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Ve.AUDIO]:null,[Ve.VIDEO]:null,[Ve.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new r0),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=s0.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Ve.AUDIO]=null,e[Ve.VIDEO]=null,e[Ve.AUDIOVIDEO]=null}}function mt(i){return i.sn!=="initSegment"}class Ec extends gv{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange){const e=this.byteRange[0],t=this.byteRange[1];if(Y(e)&&Y(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const s=Object.keys(this.levelkeys);if(s.length===1)return this._decryptdata=this.levelkeys[s[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Y(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),s=t.length;if(s>1||s===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Y(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return mt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,s,r,n,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:s,startDTS:r,endDTS:n,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,s),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,n)}}let oT=class extends gv{constructor(e,t,s,r,n){super(s),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,n),n&&(this.fragOffset=n.fragOffset+n.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function vv(i,e){const t=Object.getPrototypeOf(i);if(t){const s=Object.getOwnPropertyDescriptor(t,e);return s||vv(t,e)}}function lT(i,e){const t=vv(i,e);t&&(t.enumerable=!0,Object.defineProperty(i,e,t))}const nm=Math.pow(2,32)-1,dT=[].push,Ev={video:1,audio:2,id3:3,text:4};function xt(i){return String.fromCharCode.apply(null,i)}function yv(i,e){const t=i[e]<<8|i[e+1];return t<0?65536+t:t}function he(i,e){const t=bv(i,e);return t<0?4294967296+t:t}function am(i,e){let t=he(i,e);return t*=Math.pow(2,32),t+=he(i,e+4),t}function bv(i,e){return i[e]<<24|i[e+1]<<16|i[e+2]<<8|i[e+3]}function uT(i){const e=i.byteLength;for(let t=0;t<e;){const s=he(i,t);if(s>8&&i[t+4]===109&&i[t+5]===111&&i[t+6]===111&&i[t+7]===102)return!0;t=s>1?t+s:e}return!1}function Ee(i,e){const t=[];if(!e.length)return t;const s=i.byteLength;for(let r=0;r<s;){const n=he(i,r),a=xt(i.subarray(r+4,r+8)),o=n>1?r+n:s;if(a===e[0])if(e.length===1)t.push(i.subarray(r+8,o));else{const l=Ee(i.subarray(r+8,o),e.slice(1));l.length&&dT.apply(t,l)}r=o}return t}function cT(i){const e=[],t=i[0];let s=8;const r=he(i,s);s+=4;let n=0,a=0;t===0?(n=he(i,s),a=he(i,s+4),s+=8):(n=am(i,s),a=am(i,s+8),s+=16),s+=2;let o=i.length+a;const l=yv(i,s);s+=2;for(let d=0;d<l;d++){let u=s;const c=he(i,u);u+=4;const h=c&2147483647;if((c&2147483648)>>>31===1)return ke.warn("SIDX has hierarchical references (not supported)"),null;const m=he(i,u);u+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/r,start:o,end:o+h-1}}),o+=h,u+=4,s=u}return{earliestPresentationTime:n,timescale:r,version:t,referencesCount:l,references:e}}function Tv(i){const e=[],t=Ee(i,["moov","trak"]);for(let r=0;r<t.length;r++){const n=t[r],a=Ee(n,["tkhd"])[0];if(a){let o=a[0];const l=he(a,o===0?12:20),d=Ee(n,["mdia","mdhd"])[0];if(d){o=d[0];const u=he(d,o===0?12:20),c=Ee(n,["mdia","hdlr"])[0];if(c){const h=xt(c.subarray(8,12)),f={soun:Ve.AUDIO,vide:Ve.VIDEO}[h],m=Ee(n,["mdia","minf","stbl","stsd"])[0],p=hT(m);f?(e[l]={timescale:u,type:f,stsd:p},e[f]=Ue({timescale:u,id:l},p)):e[l]={timescale:u,type:h,stsd:p}}}}}return Ee(i,["moov","mvex","trex"]).forEach(r=>{const n=he(r,4),a=e[n];a&&(a.default={duration:he(r,12),flags:he(r,20)})}),e}function hT(i){const e=i.subarray(8),t=e.subarray(86),s=xt(e.subarray(4,8));let r=s,n;const a=s==="enca"||s==="encv";if(a){const d=Ee(e,[s])[0].subarray(s==="enca"?28:78);Ee(d,["sinf"]).forEach(c=>{const h=Ee(c,["schm"])[0];if(h){const f=xt(h.subarray(4,8));if(f==="cbcs"||f==="cenc"){const m=Ee(c,["frma"])[0];m&&(r=xt(m))}}})}const o=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const l=Ee(t,["avcC"])[0];l&&l.length>3&&(r+="."+al(l[1])+al(l[2])+al(l[3]),n=nl(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=Ee(e,[s])[0],d=Ee(l.subarray(28),["esds"])[0];if(d&&d.length>7){let u=4;if(d[u++]!==3)break;u=yc(d,u),u+=2;const c=d[u++];if(c&128&&(u+=2),c&64&&(u+=d[u++]),d[u++]!==4)break;u=yc(d,u);const h=d[u++];if(h===64)r+="."+al(h);else break;if(u+=12,d[u++]!==5)break;u=yc(d,u);const f=d[u++];let m=(f&248)>>3;m===31&&(m+=1+((f&7)<<3)+((d[u]&224)>>5)),r+="."+m}break}case"hvc1":case"hev1":{const l=Ee(t,["hvcC"])[0];if(l&&l.length>12){const d=l[1],u=["","A","B","C"][d>>6],c=d&31,h=he(l,2),f=(d&32)>>5?"H":"L",m=l[12],p=l.subarray(6,12);r+="."+u+c,r+="."+fT(h).toString(16).toUpperCase(),r+="."+f+m;let g="";for(let v=p.length;v--;){const b=p[v];(b||g)&&(g="."+b.toString(16).toUpperCase()+g)}r+=g}n=nl(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=nl(r,t)||r;break}case"vp09":{const l=Ee(t,["vpcC"])[0];if(l&&l.length>6){const d=l[4],u=l[5],c=l[6]>>4&15;r+="."+Ki(d)+"."+Ki(u)+"."+Ki(c)}break}case"av01":{const l=Ee(t,["av1C"])[0];if(l&&l.length>2){const d=l[1]>>>5,u=l[1]&31,c=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,f=(l[2]&32)>>5,m=d===2&&h?f?12:10:h?10:8,p=(l[2]&16)>>4,g=(l[2]&8)>>3,v=(l[2]&4)>>2,b=l[2]&3;r+="."+d+"."+Ki(u)+c+"."+Ki(m)+"."+p+"."+g+v+b+"."+Ki(1)+"."+Ki(1)+"."+Ki(1)+"."+0,n=nl("dav1",t)}break}}return{codec:r,encrypted:a,supplemental:n}}function nl(i,e){const t=Ee(e,["dvvC"]),s=t.length?t[0]:Ee(e,["dvcC"])[0];if(s){const r=s[2]>>1&127,n=s[2]<<5&32|s[3]>>3&31;return i+"."+Ki(r)+"."+Ki(n)}}function fT(i){let e=0;for(let t=0;t<32;t++)e|=(i>>t&1)<<31-t;return e>>>0}function yc(i,e){const t=e+5;for(;i[e++]&128&&e<t;);return e}function al(i){return("0"+i.toString(16).toUpperCase()).slice(-2)}function Ki(i){return(i<10?"0":"")+i}function mT(i,e){if(!i||!e)return i;const t=e.keyId;return t&&e.isCommonEncryption&&Ee(i,["moov","trak"]).forEach(r=>{const a=Ee(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=Ee(a,["enca"]);const l=o.length>0;l||(o=Ee(a,["encv"])),o.forEach(d=>{const u=l?d.subarray(28):d.subarray(78);Ee(u,["sinf"]).forEach(h=>{const f=pT(h);if(f){const m=f.subarray(8,24);m.some(p=>p!==0)||(ke.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Fr.hexDump(m)} -> ${Fr.hexDump(t)}`),f.set(t,8))}})})}),i}function pT(i){const e=Ee(i,["schm"])[0];if(e){const t=xt(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return Ee(i,["schi","tenc"])[0]}return null}function gT(i,e,t){const s={},r=Ee(i,["moof","traf"]);for(let n=0;n<r.length;n++){const a=r[n],o=Ee(a,["tfhd"])[0],l=he(o,4),d=e[l];if(!d)continue;const u=s[l]||(s[l]={start:NaN,duration:0,sampleCount:0,timescale:d.timescale,type:d.type}),c=Ee(a,["tfdt"])[0];if(c){const E=c[0];let T=he(c,4);E===1&&(T===nm?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(T*=nm+1,T+=he(c,8))),Y(T)&&(!Y(u.start)||T<u.start)&&(u.start=T)}const h=d.default,f=he(o,0)|(h==null?void 0:h.flags);let m=(h==null?void 0:h.duration)||0;f&8&&(f&2?m=he(o,12):m=he(o,8));const p=Ee(a,["trun"]);let g=u.start||0,v=0,b=m;for(let E=0;E<p.length;E++){const T=p[E],x=he(T,4),R=u.sampleCount;u.sampleCount+=x;const I=T[3]&1,C=T[3]&4,L=T[2]&1,S=T[2]&2,w=T[2]&4,F=T[2]&8;let G=8,K=x;for(I&&(G+=4),C&&x&&(!(T[G+1]&1)&&u.keyFrameIndex===void 0&&(u.keyFrameIndex=R),G+=4,L?(b=he(T,G),G+=4):b=m,S&&(G+=4),F&&(G+=4),g+=b,v+=b,K--);K--;)L?(b=he(T,G),G+=4):b=m,S&&(G+=4),w&&(T[G+1]&1||u.keyFrameIndex===void 0&&(u.keyFrameIndex=u.sampleCount-(K+1),u.keyFrameStart=g),G+=4),F&&(G+=4),g+=b,v+=b;!v&&m&&(v+=m*x)}u.duration+=v}if(!Object.keys(s).some(n=>s[n].duration)){let n=1/0,a=0;const o=Ee(i,["sidx"]);for(let l=0;l<o.length;l++){const d=cT(o[l]);if(d!=null&&d.references){n=Math.min(n,d.earliestPresentationTime/d.timescale);const u=d.references.reduce((c,h)=>c+h.info.duration||0,0);a=Math.max(a,u+d.earliestPresentationTime/d.timescale)}}a&&Y(a)&&Object.keys(s).forEach(l=>{s[l].duration||(s[l].duration=a*s[l].timescale-s[l].start)})}return s}function vT(i){const e={valid:null,remainder:null},t=Ee(i,["moof"]);if(t.length<2)return e.remainder=i,e;const s=t[t.length-1];return e.valid=i.slice(0,s.byteOffset-8),e.remainder=i.slice(s.byteOffset-8),e}function ui(i,e){const t=new Uint8Array(i.length+e.length);return t.set(i),t.set(e,i.length),t}function om(i,e){const t=[],s=e.samples,r=e.timescale,n=e.id;let a=!1;return Ee(s,["moof"]).map(l=>{const d=l.byteOffset-8;Ee(l,["traf"]).map(c=>{const h=Ee(c,["tfdt"]).map(f=>{const m=f[0];let p=he(f,4);return m===1&&(p*=Math.pow(2,32),p+=he(f,8)),p/r})[0];return h!==void 0&&(i=h),Ee(c,["tfhd"]).map(f=>{const m=he(f,4),p=he(f,0)&16777215,g=(p&1)!==0,v=(p&2)!==0,b=(p&8)!==0;let E=0;const T=(p&16)!==0;let x=0;const R=(p&32)!==0;let I=8;m===n&&(g&&(I+=8),v&&(I+=4),b&&(E=he(f,I),I+=4),T&&(x=he(f,I),I+=4),R&&(I+=4),e.type==="video"&&(a=$u(e.codec)),Ee(c,["trun"]).map(C=>{const L=C[0],S=he(C,0)&16777215,w=(S&1)!==0;let F=0;const G=(S&4)!==0,K=(S&256)!==0;let V=0;const q=(S&512)!==0;let z=0;const $=(S&1024)!==0,re=(S&2048)!==0;let se=0;const W=he(C,4);let B=8;w&&(F=he(C,B),B+=4),G&&(B+=4);let oe=F+d;for(let fe=0;fe<W;fe++){if(K?(V=he(C,B),B+=4):V=E,q?(z=he(C,B),B+=4):z=x,$&&(B+=4),re&&(L===0?se=he(C,B):se=bv(C,B),B+=4),e.type===Ve.VIDEO){let ye=0;for(;ye<z;){const X=he(s,oe);if(oe+=4,ET(a,s[oe])){const be=s.subarray(oe,oe+X);n0(be,a?2:1,i+se/r,t)}oe+=X,ye+=X+4}}i+=V/r}}))})})}),t}function $u(i){if(!i)return!1;const e=i.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function ET(i,e){if(i){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function n0(i,e,t,s){const r=_v(i);let n=0;n+=e;let a=0,o=0,l=0;for(;n<r.length;){a=0;do{if(n>=r.length)break;l=r[n++],a+=l}while(l===255);o=0;do{if(n>=r.length)break;l=r[n++],o+=l}while(l===255);const d=r.length-n;let u=n;if(o<d)n+=o;else if(o>d){ke.error(`Malformed SEI payload. ${o} is too small, only ${d} bytes left to parse.`);break}if(a===4){if(r[u++]===181){const h=yv(r,u);if(u+=2,h===49){const f=he(r,u);if(u+=4,f===1195456820){const m=r[u++];if(m===3){const p=r[u++],g=31&p,v=64&p,b=v?2+g*3:0,E=new Uint8Array(b);if(v){E[0]=p;for(let T=1;T<b;T++)E[T]=r[u++]}s.push({type:m,payloadType:a,pts:t,bytes:E})}}}}}else if(a===5&&o>16){const c=[];for(let m=0;m<16;m++){const p=r[u++].toString(16);c.push(p.length==1?"0"+p:p),(m===3||m===5||m===7||m===9)&&c.push("-")}const h=o-16,f=new Uint8Array(h);for(let m=0;m<h;m++)f[m]=r[u++];s.push({payloadType:a,pts:t,uuid:c.join(""),userData:Zt(f),userDataBytes:f})}}}function _v(i){const e=i.byteLength,t=[];let s=1;for(;s<e-2;)i[s]===0&&i[s+1]===0&&i[s+2]===3?(t.push(s+2),s+=2):s++;if(t.length===0)return i;const r=e-t.length,n=new Uint8Array(r);let a=0;for(s=0;s<r;a++,s++)a===t[0]&&(a++,t.shift()),n[s]=i[a];return n}function yT(i){const e=i[0];let t="",s="",r=0,n=0,a=0,o=0,l=0,d=0;if(e===0){for(;xt(i.subarray(d,d+1))!=="\0";)t+=xt(i.subarray(d,d+1)),d+=1;for(t+=xt(i.subarray(d,d+1)),d+=1;xt(i.subarray(d,d+1))!=="\0";)s+=xt(i.subarray(d,d+1)),d+=1;s+=xt(i.subarray(d,d+1)),d+=1,r=he(i,12),n=he(i,16),o=he(i,20),l=he(i,24),d=28}else if(e===1){d+=4,r=he(i,d),d+=4;const c=he(i,d);d+=4;const h=he(i,d);for(d+=4,a=2**32*c+h,Z4(a)||(a=Number.MAX_SAFE_INTEGER,ke.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=he(i,d),d+=4,l=he(i,d),d+=4;xt(i.subarray(d,d+1))!=="\0";)t+=xt(i.subarray(d,d+1)),d+=1;for(t+=xt(i.subarray(d,d+1)),d+=1;xt(i.subarray(d,d+1))!=="\0";)s+=xt(i.subarray(d,d+1)),d+=1;s+=xt(i.subarray(d,d+1)),d+=1}const u=i.subarray(d,i.byteLength);return{schemeIdUri:t,value:s,timeScale:r,presentationTime:a,presentationTimeDelta:n,eventDuration:o,id:l,payload:u}}function bT(i,...e){const t=e.length;let s=8,r=t;for(;r--;)s+=e[r].byteLength;const n=new Uint8Array(s);for(n[0]=s>>24&255,n[1]=s>>16&255,n[2]=s>>8&255,n[3]=s&255,n.set(i,4),r=0,s=8;r<t;r++)n.set(e[r],s),s+=e[r].byteLength;return n}function TT(i,e,t){if(i.byteLength!==16)throw new RangeError("Invalid system id");let s,r;s=0,r=new Uint8Array;let n;s>0?(n=new Uint8Array(4),e.length>0&&new DataView(n.buffer).setUint32(0,e.length,!1)):n=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),bT([112,115,115,104],new Uint8Array([s,0,0,0]),i,n,r,a,t||new Uint8Array)}const Av=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),ua={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function a0(i,e){const t=ua[e];return!!t&&!!t[i.slice(0,4)]}function hh(i,e,t=!0){return!i.split(",").some(s=>!o0(s,e,t))}function o0(i,e,t=!0){var s;const r=cr(t);return(s=r==null?void 0:r.isTypeSupported(xo(i,e)))!=null?s:!1}function xo(i,e){return`${e}/mp4;codecs=${i}`}function lm(i){if(i){const e=i.substring(0,4);return ua.video[e]}return 2}function tu(i){const e=Av();return i.split(",").reduce((t,s)=>{const n=e&&$u(s)?9:ua.video[s];return n?(n*2+t)/(t?3:2):(ua.audio[s]+t)/(t?2:1)},0)}const bc={};function _T(i,e=!0){if(bc[i])return bc[i];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[i];for(let r=0;r<t.length;r++){var s;if(o0(t[r],"audio",e))return bc[i]=t[r],t[r];if(t[r]==="mp3"&&(s=cr(e))!=null&&s.isTypeSupported("audio/mpeg"))return""}return i}const AT=/flac|opus|mp4a\.40\.34/i;function iu(i,e=!0){return i.replace(AT,t=>_T(t.toLowerCase(),e))}function ST(i,e){const t=[];if(i){const s=i.split(",");for(let r=0;r<s.length;r++)a0(s[r],"video")||t.push(s[r])}return e&&t.push(e),t.join(",")}function Fl(i,e){if(i&&(i.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(i)!==-1)&&(dm(i,"audio")||dm(i,"video")))return i;if(e){const t=e.split(",");if(t.length>1){if(i){for(let s=t.length;s--;)if(t[s].substring(0,4)===i.substring(0,4))return t[s]}return t[0]}}return e||i}function dm(i,e){return a0(i,e)&&o0(i,e)}function CT(i){const e=i.split(",");for(let t=0;t<e.length;t++){const s=e[t].split(".");s.length>2&&s[0]==="avc1"&&(e[t]=`avc1.${parseInt(s[1]).toString(16)}${("000"+parseInt(s[2]).toString(16)).slice(-4)}`)}return e.join(",")}function xT(i){if(i.startsWith("av01.")){const e=i.split("."),t=["0","111","01","01","01","0"];for(let s=e.length;s>4&&s<10;s++)e[s]=t[s-4];return e.join(".")}return i}function um(i){const e=cr(i)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function fh(i){return i.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Sv={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Cv(i,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:i}}function IT(i,e,t,s,r,n){const a=i.videoCodec,o=i.audioCodec?i.audioGroups:null,l=n==null?void 0:n.audioCodec,d=n==null?void 0:n.channels,u=d?parseInt(d):l?1/0:2;let c=null;if(o!=null&&o.length)try{o.length===1&&o[0]?c=e.groups[o[0]].channels:c=o.reduce((h,f)=>{if(f){const m=e.groups[f];if(!m)throw new Error(`Audio track group ${f} not found`);Object.keys(m.channels).forEach(p=>{h[p]=(h[p]||0)+m.channels[p]})}return h},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(h=>$u(h))||i.width>1920&&i.height>1088||i.height>1920&&i.width>1088||i.frameRate>Math.max(s,30)||i.videoRange!=="SDR"&&i.videoRange!==t||i.bitrate>Math.max(r,8e6))||!!c&&Y(u)&&Object.keys(c).some(h=>parseInt(h)>u)}function xv(i,e,t,s={}){const r=i.videoCodec;if(!r&&!i.audioCodec||!t)return Promise.resolve(Sv);const n=[],a=LT(i),o=a.length,l=RT(i,e,o>0),d=l.length;for(let u=o||1*d||1;u--;){const c={type:"media-source"};if(o&&(c.video=a[u%o]),d){c.audio=l[u%d];const h=c.audio.bitrate;c.video&&h&&(c.video.bitrate-=h)}n.push(c)}if(r){const u=navigator.userAgent;if(r.split(",").some(c=>$u(c))&&Av())return Promise.resolve(Cv(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${u})`),n))}return Promise.all(n.map(u=>{const c=wT(u);return s[c]||(s[c]=t.decodingInfo(u))})).then(u=>({supported:!u.some(c=>!c.supported),configurations:n,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:n,decodingInfoResults:[],error:u}))}function LT(i){var e;const t=(e=i.videoCodec)==null?void 0:e.split(","),s=Iv(i),r=i.width||640,n=i.height||480,a=i.frameRate||30,o=i.videoRange.toLowerCase();return t?t.map(l=>{const d={contentType:xo(xT(l),"video"),width:r,height:n,bitrate:s,framerate:a};return o!=="sdr"&&(d.transferFunction=o),d}):[]}function RT(i,e,t){var s;const r=(s=i.audioCodec)==null?void 0:s.split(","),n=Iv(i);return r&&i.audioGroups?i.audioGroups.reduce((a,o)=>{var l;const d=o?(l=e.groups[o])==null?void 0:l.tracks:null;return d?d.reduce((u,c)=>{if(c.groupId===o){const h=parseFloat(c.channels||"");r.forEach(f=>{const m={contentType:xo(f,"audio"),bitrate:t?kT(f,n):n};h&&(m.channels=""+h),u.push(m)})}return u},a):a},[]):[]}function kT(i,e){if(e<=1)return 1;let t=128e3;return i==="ec-3"?t=768e3:i==="ac-3"&&(t=64e4),Math.min(e/2,t)}function Iv(i){return Math.ceil(Math.max(i.bitrate*.9,i.averageBitrate)/1e3)*1e3||1}function wT(i){let e="";const{audio:t,video:s}=i;if(s){const r=fh(s.contentType);e+=`${r}_r${s.height}x${s.width}f${Math.ceil(s.framerate)}${s.transferFunction||"sd"}_${Math.ceil(s.bitrate/1e5)}`}if(t){const r=fh(t.contentType);e+=`${s?"_":""}${r}_c${t.channels}`}return e}const mh=["NONE","TYPE-0","TYPE-1",null];function DT(i){return mh.indexOf(i)>-1}const su=["SDR","PQ","HLG"];function MT(i){return!!i&&su.indexOf(i)>-1}var Ul={No:"",Yes:"YES",v2:"v2"};function cm(i){const{canSkipUntil:e,canSkipDateRanges:t,age:s}=i,r=s<e/2;return e&&r?t?Ul.v2:Ul.Yes:Ul.No}class hm{constructor(e,t,s){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=s}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Io{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(s=>!!s).map(s=>s.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const s=(t=e.supplemental)==null?void 0:t.videoCodec;s&&s!==e.videoCodec&&(this.codecSet+=`,${s.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return fm(this._audioGroups,e)}hasSubtitleGroup(e){return fm(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let s=this._audioGroups;s||(s=this._audioGroups=[]),s.indexOf(t)===-1&&s.push(t)}else if(e==="text"){let s=this._subtitleGroups;s||(s=this._subtitleGroups=[]),s.indexOf(t)===-1&&s.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function fm(i,e){return!e||!i?!1:i.indexOf(e)!==-1}function PT(){if(typeof matchMedia=="function"){const i=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(i.media!==e.media)return i.matches===!0}return!1}function OT(i,e){let t=!1,s=[];if(i&&(t=i!=="SDR",s=[i]),e){s=e.allowedVideoRanges||su.slice(0);const r=s.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:r&&PT(),t||(s=["SDR"])}return{preferHDR:t,allowedVideoRanges:s}}const NT=i=>{const e=new WeakSet;return(t,s)=>{if(i&&(s=i(t,s)),typeof s=="object"&&s!==null){if(e.has(s))return;e.add(s)}return s}},Xe=(i,e)=>JSON.stringify(i,NT(e));function FT(i,e,t,s,r){const n=Object.keys(i),a=s==null?void 0:s.channels,o=s==null?void 0:s.audioCodec,l=r==null?void 0:r.videoCodec,d=a&&parseInt(a)===2;let u=!1,c=!1,h=1/0,f=1/0,m=1/0,p=1/0,g=0,v=[];const{preferHDR:b,allowedVideoRanges:E}=OT(e,r);for(let C=n.length;C--;){const L=i[n[C]];u||(u=L.channels[2]>0),h=Math.min(h,L.minHeight),f=Math.min(f,L.minFramerate),m=Math.min(m,L.minBitrate),E.filter(w=>L.videoRanges[w]>0).length>0&&(c=!0)}h=Y(h)?h:0,f=Y(f)?f:0;const T=Math.max(1080,h),x=Math.max(30,f);m=Y(m)?m:t,t=Math.max(m,t),c||(e=void 0);const R=n.length>1;return{codecSet:n.reduce((C,L)=>{const S=i[L];if(L===C)return C;if(v=c?E.filter(w=>S.videoRanges[w]>0):[],R){if(S.minBitrate>t)return Ri(L,`min bitrate of ${S.minBitrate} > current estimate of ${t}`),C;if(!S.hasDefaultAudio)return Ri(L,"no renditions with default or auto-select sound found"),C;if(o&&L.indexOf(o.substring(0,4))%5!==0)return Ri(L,`audio codec preference "${o}" not found`),C;if(a&&!d){if(!S.channels[a])return Ri(L,`no renditions with ${a} channel sound found (channels options: ${Object.keys(S.channels)})`),C}else if((!o||d)&&u&&S.channels[2]===0)return Ri(L,"no renditions with stereo sound found"),C;if(S.minHeight>T)return Ri(L,`min resolution of ${S.minHeight} > maximum of ${T}`),C;if(S.minFramerate>x)return Ri(L,`min framerate of ${S.minFramerate} > maximum of ${x}`),C;if(!v.some(w=>S.videoRanges[w]>0))return Ri(L,`no variants with VIDEO-RANGE of ${Xe(v)} found`),C;if(l&&L.indexOf(l.substring(0,4))%5!==0)return Ri(L,`video codec preference "${l}" not found`),C;if(S.maxScore<g)return Ri(L,`max score of ${S.maxScore} < selected max of ${g}`),C}return C&&(tu(L)>=tu(C)||S.fragmentError>i[C].fragmentError)?C:(p=S.minIndex,g=S.maxScore,L)},void 0),videoRanges:v,preferHDR:b,minFramerate:f,minBitrate:m,minIndex:p}}function Ri(i,e){ke.log(`[abr] start candidates with "${i}" ignored because ${e}`)}function Lv(i){return i.reduce((e,t)=>{let s=e.groups[t.groupId];s||(s=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),s.tracks.push(t);const r=t.channels||"2";return s.channels[r]=(s.channels[r]||0)+1,s.hasDefault=s.hasDefault||t.default,s.hasAutoSelect=s.hasAutoSelect||t.autoselect,s.hasDefault&&(e.hasDefaultAudio=!0),s.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function UT(i,e,t,s){return i.slice(t,s+1).reduce((r,n,a)=>{if(!n.codecSet)return r;const o=n.audioGroups;let l=r[n.codecSet];l||(r[n.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,n.bitrate);const d=Math.min(n.height,n.width);return l.minHeight=Math.min(l.minHeight,d),l.minFramerate=Math.min(l.minFramerate,n.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,n.score),l.fragmentError+=n.fragmentError,l.videoRanges[n.videoRange]=(l.videoRanges[n.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const c=e.groups[u];c&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?c.hasDefault:c.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(c.channels).forEach(h=>{l.channels[h]=(l.channels[h]||0)+c.channels[h]}))}),r},{})}function mm(i){if(!i)return i;const{lang:e,assocLang:t,characteristics:s,channels:r,audioCodec:n}=i;return{lang:e,assocLang:t,characteristics:s,channels:r,audioCodec:n}}function Zi(i,e,t){if("attrs"in i){const s=e.indexOf(i);if(s!==-1)return s}for(let s=0;s<e.length;s++){const r=e[s];if(jr(i,r,t))return s}return-1}function jr(i,e,t){const{groupId:s,name:r,lang:n,assocLang:a,default:o}=i,l=i.forced;return(s===void 0||e.groupId===s)&&(r===void 0||e.name===r)&&(n===void 0||$T(n,e.lang))&&(n===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in i)||BT(i.characteristics||"",e.characteristics))&&(t===void 0||t(i,e))}function $T(i,e="--"){return i.length===e.length?i===e:i.startsWith(e)||e.startsWith(i)}function BT(i,e=""){const t=i.split(","),s=e.split(",");return t.length===s.length&&!t.some(r=>s.indexOf(r)===-1)}function Ar(i,e){const{audioCodec:t,channels:s}=i;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(s===void 0||s===(e.channels||"2"))}function HT(i,e,t,s,r){const n=e[s],o=e.reduce((h,f,m)=>{const p=f.uri;return(h[p]||(h[p]=[])).push(m),h},{})[n.uri];o.length>1&&(s=Math.max.apply(Math,o));const l=n.videoRange,d=n.frameRate,u=n.codecSet.substring(0,4),c=pm(e,s,h=>{if(h.videoRange!==l||h.frameRate!==d||h.codecSet.substring(0,4)!==u)return!1;const f=h.audioGroups,m=t.filter(p=>!f||f.indexOf(p.groupId)!==-1);return Zi(i,m,r)>-1});return c>-1?c:pm(e,s,h=>{const f=h.audioGroups,m=t.filter(p=>!f||f.indexOf(p.groupId)!==-1);return Zi(i,m,r)>-1})}function pm(i,e,t){for(let s=e;s>-1;s--)if(t(i[s]))return s;for(let s=e+1;s<i.length;s++)if(t(i[s]))return s;return-1}function ru(i,e){var t;return!!i&&i!==((t=e.loadLevelObj)==null?void 0:t.uri)}class VT extends Ii{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var s;const{fragCurrent:r,partCurrent:n,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!r||!l)return;const d=performance.now(),u=n?n.stats:r.stats,c=n?n.duration:r.duration,h=d-u.loading.start,f=a.minAutoLevel,m=r.level,p=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||m<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const g=p>-1&&p!==m,v=!!t||g;if(!v&&(l.paused||!l.playbackRate||!l.readyState))return;const b=a.mainForwardBufferInfo;if(!v&&b===null)return;const E=this.bwEstimator.getEstimateTTFB(),T=Math.abs(l.playbackRate);if(h<=Math.max(E,1e3*(c/(T*2))))return;const x=b?b.len/T:0,R=u.loading.first?u.loading.first-u.loading.start:-1,I=u.loaded&&R>-1,C=this.getBwEstimate(),L=a.levels,S=L[m],w=Math.max(u.loaded,Math.round(c*(r.bitrate||S.averageBitrate)/8));let F=I?h-R:h;F<1&&I&&(F=Math.min(h,u.loaded*8/C));const G=I?u.loaded*1e3/F:0,K=E/1e3,V=G?(w-u.loaded)/G:w*8/C+K;if(V<=x)return;const q=G?G*8:C,z=((s=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:s.live)===!0,$=this.hls.config.abrBandWidthUpFactor;let re=Number.POSITIVE_INFINITY,se;for(se=m-1;se>f;se--){const fe=L[se].maxBitrate,ye=!L[se].details||z;if(re=this.getTimeToLoadFrag(K,q,c*fe,ye),re<Math.min(x,c+K))break}if(re>=V||re>c*10)return;I?this.bwEstimator.sample(h-Math.min(E,R),u.loaded):this.bwEstimator.sampleTTFB(h);const W=L[se].maxBitrate;this.getBwEstimate()*$>W&&this.resetEstimator(W);const B=this.findBestLevel(W,f,se,0,x,1,1);B>-1&&(se=B),this.warn(`Fragment ${r.sn}${n?" part "+n.index:""} of level ${m} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${x.toFixed(3)} s
      Estimated load time for current fragment: ${V.toFixed(3)} s
      Estimated load time for down switch fragment: ${re.toFixed(3)} s
      TTFB estimate: ${R|0} ms
      Current BW estimate: ${Y(C)?C|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${se} @ ${W|0} bps`),a.nextLoadLevel=a.nextAutoLevel=se,this.clearTimer();const oe=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===se&&se>0){const fe=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${se>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${fe.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,se>f){let ye=this.findBestLevel(this.hls.levels[f].bitrate,f,se,0,fe,1,1);ye===-1&&(ye=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ye,this.resetEstimator(this.hls.levels[ye].bitrate)}}};g||V>re*2?oe():this.timer=self.setInterval(oe,re*1e3),a.trigger(y.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:n,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Q4(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.FRAG_LOADING,this.onFragLoading,this),e.on(y.FRAG_LOADED,this.onFragLoaded,this),e.on(y.FRAG_BUFFERED,this.onFragBuffered,this),e.on(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(y.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(y.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.FRAG_LOADING,this.onFragLoading,this),e.off(y.FRAG_LOADED,this.onFragLoaded,this),e.off(y.FRAG_BUFFERED,this.onFragBuffered,this),e.off(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(y.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(y.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(y.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const s=t.frag;if(!this.ignoreFragment(s)){if(!s.bitrateTest){var r;this.fragCurrent=s,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case P.BUFFER_ADD_CODEC_ERROR:case P.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case P.FRAG_LOAD_TIMEOUT:{const s=t.frag,{fragCurrent:r,partCurrent:n}=this;if(s&&r&&s.sn===r.sn&&s.level===r.level){const a=performance.now(),o=n?n.stats:s.stats,l=a-o.loading.start,d=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&d>-1){const c=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(c,d),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,s,r){const n=e+s/t,a=r?e+this.lastLevelLoadSec:0;return n+a}onLevelLoaded(e,t){const s=this.hls.config,{loading:r}=t.stats,n=r.end-r.first;Y(n)&&(this.lastLevelLoadSec=n/1e3),t.details.live?this.bwEstimator.update(s.abrEwmaSlowLive,s.abrEwmaFastLive):this.bwEstimator.update(s.abrEwmaSlowVoD,s.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:s}){const r=s?s.stats:t.stats;if(t.type===te.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const n=s?s.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+r.loaded,l=(a.loaded?a.loaded.duration:0)+n;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const n={stats:r,frag:t,part:s,id:t.type};this.onFragBuffered(y.FRAG_BUFFERED,n),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:s,part:r}=t,n=r!=null&&r.stats.loaded?r.stats:s.stats;if(n.aborted||this.ignoreFragment(s))return;const a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.getBwEstimate(),s.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==te.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,s=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,n=this.findBestLevel(s,t,e,0,r,1,1);if(n>-1)return n;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,s=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!s||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const n=s&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,n)&&a[e].loadError<=a[n].loadError)return e}return this._nextAutoLevel=n,this.nextAutoLevelKey=this.getAutoLevelKey(),n}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:s}=this;if(s.levels.length<=1)return s.loadLevel;const{maxAutoLevel:r,config:n,minAutoLevel:a}=s,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),d=this.getStarvationDelay();let u=n.abrBandWidthFactor,c=n.abrBandWidthUpFactor;if(d){const g=this.findBestLevel(l,a,r,d,0,u,c);if(g>=0)return this.rebufferNotice=-1,g}let h=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay;if(!d){const g=this.bitrateTestDelay;g&&(h=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-g,this.info(`bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=c=1)}const f=this.findBestLevel(l,a,r,d,h,u,c);if(this.rebufferNotice!==f&&(this.rebufferNotice=f,this.info(`${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`)),f>-1)return f;const m=s.levels[a],p=s.loadLevelObj;return p&&(m==null?void 0:m.bitrate)<p.bitrate?a:s.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const s=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/s}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,s,r,n,a,o){var l;const d=r+n,u=this.lastLoadedFragLevel,c=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:m,allAudioTracks:p,loadLevel:g,config:v}=this.hls;if(m.length===1)return 0;const b=m[c],E=!!((l=this.hls.latestLevelDetails)!=null&&l.live),T=g===-1||u===-1;let x,R="SDR",I=(b==null?void 0:b.frameRate)||0;const{audioPreference:C,videoPreference:L}=v,S=this.audioTracksByGroup||(this.audioTracksByGroup=Lv(p));let w=-1;if(T){if(this.firstSelection!==-1)return this.firstSelection;const z=this.codecTiers||(this.codecTiers=UT(m,S,t,s)),$=FT(z,R,e,C,L),{codecSet:re,videoRanges:se,minFramerate:W,minBitrate:B,minIndex:oe,preferHDR:fe}=$;w=oe,x=re,R=fe?se[se.length-1]:se[0],I=W,e=Math.max(e,B),this.log(`picked start tier ${Xe($)}`)}else x=b==null?void 0:b.codecSet,R=b==null?void 0:b.videoRange;const F=f?f.duration:h?h.duration:0,G=this.bwEstimator.getEstimateTTFB()/1e3,K=[];for(let z=s;z>=t;z--){var V,q;const $=m[z],re=z>c;if(!$)continue;if(v.useMediaCapabilities&&!$.supportedResult&&!$.supportedPromise){const X=navigator.mediaCapabilities;typeof(X==null?void 0:X.decodingInfo)=="function"&&IT($,S,R,I,e,C)?($.supportedPromise=xv($,S,X,this.supportedCache),$.supportedPromise.then(be=>{if(!this.hls)return;$.supportedResult=be;const Fe=this.hls.levels,ze=Fe.indexOf($);be.error?this.warn(`MediaCapabilities decodingInfo error: "${be.error}" for level ${ze} ${Xe(be)}`):be.supported?be.decodingInfoResults.some(nt=>nt.smooth===!1||nt.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${ze} not smooth or powerEfficient: ${Xe(be)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ze} ${Xe(be)}`),ze>-1&&Fe.length>1&&(this.log(`Removing unsupported level ${ze}`),this.hls.removeLevel(ze),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):$.supportedResult=Sv}if((x&&$.codecSet!==x||R&&$.videoRange!==R||re&&I>$.frameRate||!re&&I>0&&I<$.frameRate||(V=$.supportedResult)!=null&&(q=V.decodingInfoResults)!=null&&q.some(X=>X.smooth===!1))&&(!T||z!==w)){K.push(z);continue}const se=$.details,W=(f?se==null?void 0:se.partTarget:se==null?void 0:se.averagetargetduration)||F;let B;re?B=o*e:B=a*e;const oe=F&&r>=F*2&&n===0?$.averageBitrate:$.maxBitrate,fe=this.getTimeToLoadFrag(G,B,oe*W,se===void 0);if(B>=oe&&(z===u||$.loadError===0&&$.fragmentError===0)&&(fe<=G||!Y(fe)||E&&!this.bitrateTestDelay||fe<d)){const X=this.forcedAutoLevel;return z!==g&&(X===-1||X!==g)&&(K.length&&this.trace(`Skipped level(s) ${K.join(",")} of ${s} max with CODECS and VIDEO-RANGE:"${m[K[0]].codecs}" ${m[K[0]].videoRange}; not compatible with "${x}" ${R}`),this.info(`switch candidate:${c}->${z} adjustedbw(${Math.round(B)})-bitrate=${Math.round(B-oe)} ttfb:${G.toFixed(1)} avgDuration:${W.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${fe.toFixed(1)} firstSelection:${T} codecSet:${$.codecSet} videoRange:${$.videoRange} hls.loadLevel:${g}`)),T&&(this.firstSelection=z),z}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:s}=this.hls;return Math.min(Math.max(e,s),t)}}const Rv={search:function(i,e){let t=0,s=i.length-1,r=null,n=null;for(;t<=s;){r=(t+s)/2|0,n=i[r];const a=e(n);if(a>0)t=r+1;else if(a<0)s=r-1;else return n}return null}};function GT(i,e,t){if(e===null||!Array.isArray(i)||!i.length||!Y(e))return null;const s=i[0].programDateTime;if(e<(s||0))return null;const r=i[i.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let n=0;n<i.length;++n){const a=i[n];if(WT(e,t,a))return a}return null}function tn(i,e,t=0,s=0,r=.005){let n=null;if(i){n=e[1+i.sn-e[0].sn]||null;const o=i.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),n&&i.level!==n.level&&n.end<=i.end&&(n=e[2+i.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(n=e[0]);if(n&&((!i||i.level===n.level)&&gm(t,s,n)===0||KT(n,i,Math.min(r,s))))return n;const a=Rv.search(e,gm.bind(null,t,s));return a&&(a!==i||!n)?a:n}function KT(i,e,t){if(e&&e.start===0&&e.level<i.level&&(e.endPTS||0)>0){const s=e.tagList.reduce((r,n)=>(n[0]==="INF"&&(r+=parseFloat(n[1])),r),t);return i.start<=s}return!1}function gm(i=0,e=0,t){if(t.start<=i&&t.start+t.duration>i)return 0;const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-s<=i?1:t.start-s>i&&t.start?-1:0}function WT(i,e,t){const s=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-s>i}function kv(i,e,t){if(i&&i.startCC<=e&&i.endCC>=e){let s=i.fragments;const{fragmentHint:r}=i;r&&(s=s.concat(r));let n;return Rv.search(s,a=>a.cc<e?1:a.cc>e?-1:(n=a,a.end<=t?1:a.start>t?-1:0)),n||null}return null}function nu(i){switch(i.details){case P.FRAG_LOAD_TIMEOUT:case P.KEY_LOAD_TIMEOUT:case P.LEVEL_LOAD_TIMEOUT:case P.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function vm(i,e){const t=nu(e);return i.default[`${t?"timeout":"error"}Retry`]}function l0(i,e){const t=i.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*i.retryDelayMs,i.maxRetryDelayMs)}function Em(i){return Ue(Ue({},i),{errorRetry:null,timeoutRetry:null})}function au(i,e,t,s){if(!i)return!1;const r=s==null?void 0:s.code,n=e<i.maxNumRetry&&(qT(r)||!!t);return i.shouldRetry?i.shouldRetry(i,e,t,s,n):n}function qT(i){return i===0&&navigator.onLine===!1||!!i&&(i<400||i>499)}var Mt={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},bi={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class jT extends Ii{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(y.ERROR,this.onError,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(y.ERROR,this.onError,this),e.off(y.ERROR,this.onErrorOut,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===te.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var s;if(t.fatal)return;const r=this.hls,n=t.context;switch(t.details){case P.FRAG_LOAD_ERROR:case P.FRAG_LOAD_TIMEOUT:case P.KEY_LOAD_ERROR:case P.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case P.FRAG_PARSING_ERROR:if((s=t.frag)!=null&&s.gap){t.errorAction=Lo();return}case P.FRAG_GAP:case P.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Mt.SendAlternateToPenaltyBox;return}case P.LEVEL_EMPTY_ERROR:case P.LEVEL_PARSING_ERROR:{var a,o;const d=t.parent===te.MAIN?t.level:r.loadLevel;t.details===P.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(o=a.levelDetails)!=null&&o.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,d):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,d))}return;case P.LEVEL_LOAD_ERROR:case P.LEVEL_LOAD_TIMEOUT:typeof(n==null?void 0:n.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,n.level));return;case P.AUDIO_TRACK_LOAD_ERROR:case P.AUDIO_TRACK_LOAD_TIMEOUT:case P.SUBTITLE_LOAD_ERROR:case P.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){const d=r.loadLevelObj;if(d&&(n.type===_e.AUDIO_TRACK&&d.hasAudioGroup(n.groupId)||n.type===_e.SUBTITLE_TRACK&&d.hasSubtitleGroup(n.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=Mt.SendAlternateToPenaltyBox,t.errorAction.flags=bi.MoveAllAlternatesMatchingHost;return}}return;case P.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const d=r.loadLevelObj,u=d==null?void 0:d.attrs["HDCP-LEVEL"];u?t.errorAction={action:Mt.SendAlternateToPenaltyBox,flags:bi.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case P.BUFFER_ADD_CODEC_ERROR:case P.REMUX_ALLOC_ERROR:case P.BUFFER_APPEND_ERROR:if(!t.errorAction){var l;t.errorAction=this.getLevelSwitchAction(t,(l=t.level)!=null?l:r.loadLevel)}return;case P.INTERNAL_EXCEPTION:case P.BUFFER_APPENDING_ERROR:case P.BUFFER_FULL_ERROR:case P.LEVEL_SWITCH_ERROR:case P.BUFFER_STALLED_ERROR:case P.BUFFER_SEEK_OVER_HOLE:case P.BUFFER_NUDGE_ON_STALL:t.errorAction=Lo();return}t.type===ne.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const s=this.hls,r=vm(s.config.playlistLoadPolicy,e),n=this.playlistError++;if(au(r,n,nu(e),e.response))return{action:Mt.RetryRequest,flags:bi.None,retryConfig:r,retryCount:n};const o=this.getLevelSwitchAction(e,t);return r&&(o.retryConfig=r,o.retryCount=n),o}getFragRetryOrSwitchAction(e){const t=this.hls,s=this.getVariantLevelIndex(e.frag),r=t.levels[s],{fragLoadPolicy:n,keyLoadPolicy:a}=t.config,o=vm(e.details.startsWith("key")?a:n,e),l=t.levels.reduce((u,c)=>u+c.fragmentError,0);if(r&&(e.details!==P.FRAG_GAP&&r.fragmentError++,au(o,l,nu(e),e.response)))return{action:Mt.RetryRequest,flags:bi.None,retryConfig:o,retryCount:l};const d=this.getLevelSwitchAction(e,s);return o&&(d.retryConfig=o,d.retryCount=l),d}getLevelSwitchAction(e,t){const s=this.hls;t==null&&(t=s.loadLevel);const r=this.hls.levels[t];if(r){var n,a;const d=e.details;r.loadError++,d===P.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:c,loadLevel:h,minAutoLevel:f,maxAutoLevel:m}=s;!s.autoLevelEnabled&&!s.config.preserveManualLevelOnError&&(s.loadLevel=-1);const p=(n=e.frag)==null?void 0:n.type,v=(p===te.AUDIO&&d===P.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===P.BUFFER_ADD_CODEC_ERROR||d===P.BUFFER_APPEND_ERROR))&&c.some(({audioCodec:R})=>r.audioCodec!==R),E=e.sourceBufferName==="video"&&(d===P.BUFFER_ADD_CODEC_ERROR||d===P.BUFFER_APPEND_ERROR)&&c.some(({codecSet:R,audioCodec:I})=>r.codecSet!==R&&r.audioCodec===I),{type:T,groupId:x}=(a=e.context)!=null?a:{};for(let R=c.length;R--;){const I=(R+h)%c.length;if(I!==h&&I>=f&&I<=m&&c[I].loadError===0){var o,l;const C=c[I];if(d===P.FRAG_GAP&&p===te.MAIN&&e.frag){const L=c[I].details;if(L){const S=tn(e.frag,L.fragments,e.frag.start);if(S!=null&&S.gap)continue}}else{if(T===_e.AUDIO_TRACK&&C.hasAudioGroup(x)||T===_e.SUBTITLE_TRACK&&C.hasSubtitleGroup(x))continue;if(p===te.AUDIO&&(o=r.audioGroups)!=null&&o.some(L=>C.hasAudioGroup(L))||p===te.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(L=>C.hasSubtitleGroup(L))||v&&r.audioCodec===C.audioCodec||!v&&r.audioCodec!==C.audioCodec||E&&r.codecSet===C.codecSet)continue}u=I;break}}if(u>-1&&s.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Mt.SendAlternateToPenaltyBox,flags:bi.None,nextAutoLevel:u}}return{action:Mt.SendAlternateToPenaltyBox,flags:bi.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var s;switch((s=t.errorAction)==null?void 0:s.action){case Mt.DoNothing:break;case Mt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==P.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,s=e.errorAction;if(!s)return;const{flags:r,hdcpLevel:n,nextAutoLevel:a}=s;switch(r){case bi.None:this.switchLevel(e,a);break;case bi.MoveAllAlternatesMatchingHDCP:n&&(t.maxHdcpLevel=mh[mh.indexOf(n)-1],s.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}s.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===P.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const s=fh(e.mimeType),r=this.hls.levels;for(let n=r.length;n--;)r[n][`${e.sourceBufferName}Codec`]===s&&this.hls.removeLevel(n)}}}function Lo(i){const e={action:Mt.DoNothing,flags:bi.None};return i&&(e.resolved=!0),e}var yt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class YT{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.BUFFER_APPENDED,this.onBufferAppended,this),e.on(y.FRAG_BUFFERED,this.onFragBuffered,this),e.on(y.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.BUFFER_APPENDED,this.onBufferAppended,this),e.off(y.FRAG_BUFFERED,this.onFragBuffered,this),e.off(y.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const s=this.activePartLists[t];if(s)for(let r=s.length;r--;){const n=s[r];if(!n)break;const a=n.end;if(n.start<=e&&a!==null&&e<=a)return n}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,s){const{fragments:r}=this,n=Object.keys(r);for(let a=n.length;a--;){const o=r[n[a]];if((o==null?void 0:o.body.type)===t&&(!s||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,s,r,n){this.timeRanges&&(this.timeRanges[e]=t);const a=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||n)){l.body.type===s&&this.removeFragment(l.body);return}const d=l.range[e];if(d){if(d.time.length===0){this.removeFragment(l.body);return}d.time.some(u=>{const c=!this.isTimeBuffered(u.startPTS,u.endPTS,t);return c&&this.removeFragment(l.body),c})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const s=e.frag,r=un(s),n=this.fragments[r];if(!n||n.buffered&&s.gap)return;const a=!s.relurl;Object.keys(t).forEach(o=>{const l=s.elementaryStreams[o];if(!l)return;const d=t[o],u=a||l.partial===!0;n.range[o]=this.getBufferedTimes(s,e.part,u,d)}),n.loaded=null,Object.keys(n.range).length?(n.buffered=!0,(n.body.endList=s.endList||n.body.endList)&&(this.endListFragments[n.body.type]=n),ol(n)||this.removeParts(s.sn-1,s.type)):this.removeFragment(n.body)}removeParts(e,t){const s=this.activePartLists[t];s&&(this.activePartLists[t]=ym(s,r=>r.fragment.sn>=e))}fragBuffered(e,t){const s=un(e);let r=this.fragments[s];!r&&t&&(r=this.fragments[s]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,s,r){const n={time:[],partial:s},a=e.start,o=e.end,l=e.minEndPTS||o,d=e.maxStartPTS||a;for(let u=0;u<r.length;u++){const c=r.start(u)-this.bufferPadding,h=r.end(u)+this.bufferPadding;if(d>=c&&l<=h){n.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(o,r.end(u))});break}else if(a<h&&o>c){const f=Math.max(a,r.start(u)),m=Math.min(o,r.end(u));m>f&&(n.partial=!0,n.time.push({startPTS:f,endPTS:m}))}else if(o<=c)break}return n}getPartialFragment(e){let t=null,s,r,n,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(d=>{const u=l[d];u&&ol(u)&&(r=u.body.start-o,n=u.body.end+o,e>=r&&e<=n&&(s=Math.min(e-r,n-e),a<=s&&(t=u.body,a=s)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||ol(t))}getState(e){const t=un(e),s=this.fragments[t];return s?s.buffered?ol(s)?yt.PARTIAL:yt.OK:yt.APPENDING:yt.NOT_LOADED}isTimeBuffered(e,t,s){let r,n;for(let a=0;a<s.length;a++){if(r=s.start(a)-this.bufferPadding,n=s.end(a)+this.bufferPadding,e>=r&&t<=n)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const s=t.frag,r=t.part?null:t,n=un(s);this.fragments[n]={body:s,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:s,part:r,timeRanges:n,type:a}=t;if(s.sn==="initSegment")return;const o=s.type;if(r){let d=this.activePartLists[o];d||(this.activePartLists[o]=d=[]),d.push(r)}this.timeRanges=n;const l=n[a];this.detectEvictedFragments(a,l,o,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=un(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,s=Object.keys(t);if(!e)return s.length>0;for(let r=s.length;r--;){const n=t[s[r]];if((n==null?void 0:n.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,s,r,n){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==s||r&&!l.gap||l.start<t&&l.end>e&&(o.buffered||n)&&this.removeFragment(l)})}removeFragment(e){const t=un(e);e.clearElementaryStreamInfo();const s=this.activePartLists[e.type];if(s){const r=e.sn;this.activePartLists[e.type]=ym(s,n=>n.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e,t;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const s=(e=this.hls)==null||(t=e.latestLevelDetails)==null?void 0:t.partList;s&&s.forEach(r=>r.clearElementaryStreamInfo())}}function ol(i){var e,t,s;return i.buffered&&(i.body.gap||((e=i.range.video)==null?void 0:e.partial)||((t=i.range.audio)==null?void 0:t.partial)||((s=i.range.audiovideo)==null?void 0:s.partial))}function un(i){return`${i.type}_${i.level}_${i.sn}`}function ym(i,e){return i.filter(t=>{const s=e(t);return s||t.clearElementaryStreamInfo(),s})}var hr={cbc:0,ctr:1};class ZT{constructor(e,t,s){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=s}decrypt(e,t){switch(this.aesMode){case hr.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case hr.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function zT(i){const e=i.byteLength,t=e&&new DataView(i.buffer).getUint8(e-1);return t?i.slice(0,e-t):i}class QT{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),s=new Uint32Array(4);for(let r=0;r<4;r++)s[r]=t.getUint32(r*4);return s}initTable(){const e=this.sBox,t=this.invSBox,s=this.subMix,r=s[0],n=s[1],a=s[2],o=s[3],l=this.invSubMix,d=l[0],u=l[1],c=l[2],h=l[3],f=new Uint32Array(256);let m=0,p=0,g=0;for(g=0;g<256;g++)g<128?f[g]=g<<1:f[g]=g<<1^283;for(g=0;g<256;g++){let v=p^p<<1^p<<2^p<<3^p<<4;v=v>>>8^v&255^99,e[m]=v,t[v]=m;const b=f[m],E=f[b],T=f[E];let x=f[v]*257^v*16843008;r[m]=x<<24|x>>>8,n[m]=x<<16|x>>>16,a[m]=x<<8|x>>>24,o[m]=x,x=T*16843009^E*65537^b*257^m*16843008,d[v]=x<<24|x>>>8,u[v]=x<<16|x>>>16,c[v]=x<<8|x>>>24,h[v]=x,m?(m=b^f[f[f[T^b]]],p^=f[f[p]]):m=p=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let s=!0,r=0;for(;r<t.length&&s;)s=t[r]===this.key[r],r++;if(s)return;this.key=t;const n=this.keySize=t.length;if(n!==4&&n!==6&&n!==8)throw new Error("Invalid aes key size="+n);const a=this.ksRows=(n+6+1)*4;let o,l;const d=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),c=this.sBox,h=this.rcon,f=this.invSubMix,m=f[0],p=f[1],g=f[2],v=f[3];let b,E;for(o=0;o<a;o++){if(o<n){b=d[o]=t[o];continue}E=b,o%n===0?(E=E<<8|E>>>24,E=c[E>>>24]<<24|c[E>>>16&255]<<16|c[E>>>8&255]<<8|c[E&255],E^=h[o/n|0]<<24):n>6&&o%n===4&&(E=c[E>>>24]<<24|c[E>>>16&255]<<16|c[E>>>8&255]<<8|c[E&255]),d[o]=b=(d[o-n]^E)>>>0}for(l=0;l<a;l++)o=a-l,l&3?E=d[o]:E=d[o-4],l<4||o<=4?u[l]=E:u[l]=m[c[E>>>24]]^p[c[E>>>16&255]]^g[c[E>>>8&255]]^v[c[E&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,s){const r=this.keySize+6,n=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],d=o[1],u=o[2],c=o[3],h=this.uint8ArrayToUint32Array_(s);let f=h[0],m=h[1],p=h[2],g=h[3];const v=new Int32Array(e),b=new Int32Array(v.length);let E,T,x,R,I,C,L,S,w,F,G,K,V,q;const z=this.networkToHostOrderSwap;for(;t<v.length;){for(w=z(v[t]),F=z(v[t+1]),G=z(v[t+2]),K=z(v[t+3]),I=w^n[0],C=K^n[1],L=G^n[2],S=F^n[3],V=4,q=1;q<r;q++)E=l[I>>>24]^d[C>>16&255]^u[L>>8&255]^c[S&255]^n[V],T=l[C>>>24]^d[L>>16&255]^u[S>>8&255]^c[I&255]^n[V+1],x=l[L>>>24]^d[S>>16&255]^u[I>>8&255]^c[C&255]^n[V+2],R=l[S>>>24]^d[I>>16&255]^u[C>>8&255]^c[L&255]^n[V+3],I=E,C=T,L=x,S=R,V=V+4;E=a[I>>>24]<<24^a[C>>16&255]<<16^a[L>>8&255]<<8^a[S&255]^n[V],T=a[C>>>24]<<24^a[L>>16&255]<<16^a[S>>8&255]<<8^a[I&255]^n[V+1],x=a[L>>>24]<<24^a[S>>16&255]<<16^a[I>>8&255]<<8^a[C&255]^n[V+2],R=a[S>>>24]<<24^a[I>>16&255]<<16^a[C>>8&255]<<8^a[L&255]^n[V+3],b[t]=z(E^f),b[t+1]=z(R^m),b[t+2]=z(x^p),b[t+3]=z(T^g),f=w,m=F,p=G,g=K,t=t+4}return b.buffer}}class XT{constructor(e,t,s){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=s}expandKey(){const e=JT(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function JT(i){switch(i){case hr.cbc:return"AES-CBC";case hr.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${i}`)}}const e8=16;class d0{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const s=self.crypto;s&&(this.subtle=s.subtle||s.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const s=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?zT(s):s}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,s,r){return this.useSoftware?new Promise((n,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,s,r);const l=this.flush();l?n(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,s,r)}softwareDecrypt(e,t,s,r){const{currentIV:n,currentResult:a,remainderData:o}=this;if(r!==hr.cbc||t.byteLength!==16)return ke.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=ui(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;n&&(s=n);let d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new QT),d.expandKey(t);const u=a;return this.currentResult=d.decrypt(l.buffer,0,s),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,s,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,s,r));this.key=t,this.fastAesKey=new XT(this.subtle,t,r)}return this.fastAesKey.expandKey().then(n=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new ZT(this.subtle,new Uint8Array(s),r).decrypt(e.buffer,n)):Promise.reject(new Error("web crypto not initialized"))).catch(n=>(ke.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${n.name}: ${n.message}`),this.onWebCryptoError(e,t,s,r)))}onWebCryptoError(e,t,s,r){const n=this.enableSoftwareAES;if(n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,s,r);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(n?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const s=e.length-e.length%e8;return s!==e.length&&(t=e.slice(0,s),this.remainderData=e.slice(s)),t}logOnce(e){this.logEnabled&&(ke.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const bm=Math.pow(2,17);class t8{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const s=e.url;if(!s)return Promise.reject(new hs({type:ne.NETWORK_ERROR,details:P.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${s?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,n=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(_m(e));return}else e.gap=!1;const d=this.loader=n?new n(r):new a(r),u=Tm(e);e.loader=d;const c=Em(r.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:bm};e.stats=d.stats;const f={onSuccess:(m,p,g,v)=>{this.resetLoader(e,d);let b=m.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(b.slice(0,16)),b=b.slice(16)),o({frag:e,part:null,payload:b,networkDetails:v})},onError:(m,p,g,v)=>{this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ue({url:s,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:g,stats:v}))},onAbort:(m,p,g)=>{this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:m}))},onTimeout:(m,p,g)=>{this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:m}))}};t&&(f.onProgress=(m,p,g,v)=>t({frag:e,part:null,payload:g,networkDetails:v})),d.load(u,h,f)})}loadPart(e,t,s){this.abort();const r=this.config,n=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(_m(e,t));return}const d=this.loader=n?new n(r):new a(r),u=Tm(e,t);e.loader=d;const c=Em(r.fragLoadPolicy.default),h={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:bm};t.stats=d.stats,d.load(u,h,{onSuccess:(f,m,p,g)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const v={frag:e,part:t,payload:f.data,networkDetails:g};s(v),o(v)},onError:(f,m,p,g)=>{this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Ue({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:p,stats:g}))},onAbort:(f,m,p)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:p,stats:f}))},onTimeout:(f,m,p)=>{this.resetLoader(e,d),l(new hs({type:ne.NETWORK_ERROR,details:P.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:p,stats:f}))}})})}updateStatsFromPart(e,t){const s=e.stats,r=t.stats,n=r.total;if(s.loaded+=r.loaded,n){const l=Math.round(e.duration/t.duration),d=Math.min(Math.round(s.loaded/n),l),c=(l-d)*Math.round(s.loaded/d);s.total=s.loaded+c}else s.total=Math.max(s.loaded,s.total);const a=s.loading,o=r.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Tm(i,e=null){const t=e||i,s={frag:i,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,n=t.byteRangeEndOffset;if(Y(r)&&Y(n)){var a;let o=r,l=n;if(i.sn==="initSegment"&&i8((a=i.decryptdata)==null?void 0:a.method)){const d=n-r;d%16&&(l=n+(16-d%16)),r!==0&&(s.resetIV=!0,o=r-16)}s.rangeStart=o,s.rangeEnd=l}return s}function _m(i,e){const t=new Error(`GAP ${i.gap?"tag":"attribute"} found`),s={type:ne.MEDIA_ERROR,details:P.FRAG_GAP,fatal:!1,frag:i,error:t,networkDetails:null};return e&&(s.part=e),(e||i).stats.aborted=!0,new hs(s)}function i8(i){return i==="AES-128"||i==="AES-256"}class hs extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class wv extends Ii{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class u0{constructor(e,t,s,r=0,n=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=ll(),this.buffering={audio:ll(),video:ll(),audiovideo:ll()},this.level=e,this.sn=t,this.id=s,this.size=r,this.part=n,this.partial=a}}function ll(){return{start:0,executeStart:0,executeEnd:0,end:0}}const Am={length:0,start:()=>0,end:()=>0};class me{static isBuffered(e,t){if(e){const s=me.getBuffered(e);for(let r=s.length;r--;)if(t>=s.start(r)&&t<=s.end(r))return!0}return!1}static bufferedRanges(e){if(e){const t=me.getBuffered(e);return me.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let s=0;s<e.length;s++)t.push({start:e.start(s),end:e.end(s)});return t}static bufferInfo(e,t,s){if(e){const r=me.bufferedRanges(e);if(r.length)return me.bufferedInfo(r,t,s)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,s){t=Math.max(0,t),e.length>1&&e.sort((u,c)=>u.start-c.start||c.end-u.end);let r=-1,n=[];if(s)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(r=u);const c=n.length;if(c){const h=n[c-1].end;e[u].start-h<s?e[u].end>h&&(n[c-1].end=e[u].end):n.push(e[u])}else n.push(e[u])}else n=e;let a=0,o,l=t,d=t;for(let u=0;u<n.length;u++){const c=n[u].start,h=n[u].end;if(r===-1&&t>=c&&t<=h&&(r=u),t+s>=c&&t<h)l=c,d=h,a=d-t;else if(t+s<c){o=c;break}}return{len:a,start:l||0,end:d||0,nextStart:o,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||Am}catch(t){return ke.log("failed to get media.buffered",t),Am}}}const Dv=/\{\$([a-zA-Z0-9-_]+)\}/g;function Sm(i){return Dv.test(i)}function ph(i,e){if(i.variableList!==null||i.hasVariableRefs){const t=i.variableList;return e.replace(Dv,s=>{const r=s.substring(2,s.length-1),n=t==null?void 0:t[r];return n===void 0?(i.playlistParsingError||(i.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),s):n})}return e}function Cm(i,e,t){let s=i.variableList;s||(i.variableList=s={});let r,n;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(r))n=a.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(a){i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=e.NAME,n=e.VALUE;r in s?i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):s[r]=n||""}function s8(i,e,t){const s=e.IMPORT;if(t&&s in t){let r=i.variableList;r||(i.variableList=r={}),r[s]=t[s]}else i.playlistParsingError||(i.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${s}"`))}const r8=/^(\d+)x(\d+)$/,xm=/(.+?)=(".*?"|.*?)(?:,|$)/g;class tt{constructor(e,t){typeof e=="string"&&(e=tt.parseAttrList(e,t)),Ne(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const s=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)s[r]=parseInt(t.slice(r*2,r*2+2),16);return s}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const s=this[e];return s?parseFloat(s):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const s=this[e];return(s?s.split(/[ ,]+/):[]).reduce((r,n)=>(r[n.toLowerCase()]=!0,r),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=r8.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let s;const r={},n='"';for(xm.lastIndex=0;(s=xm.exec(e))!==null;){const a=s[1].trim();let o=s[2];const l=o.indexOf(n)===0&&o.lastIndexOf(n)===o.length-1;let d=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":d=!0}if(t&&(l||d))o=ph(t,o);else if(!d&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":ke.warn(`${e}: attribute ${a} is missing quotes`)}r[a]=o}return r}}const n8="com.apple.hls.interstitial";function a8(i){return i!=="ID"&&i!=="CLASS"&&i!=="CUE"&&i!=="START-DATE"&&i!=="DURATION"&&i!=="END-DATE"&&i!=="END-ON-NEXT"}function o8(i){return i==="SCTE35-OUT"||i==="SCTE35-IN"||i==="SCTE35-CMD"}class Mv{constructor(e,t,s=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(r=t==null?void 0:t.tagOrder)!=null?r:s,t){const n=t.attr;for(const a in n)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==n[a]){ke.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Ne(new tt({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Y(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(ke.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Y(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===n8}get isValid(){return!!this.id&&!this._badValueForSameId&&Y(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const l8=10;class d8{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,s=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!s||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&s>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?Y(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||l8}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let s=e.length;s--;)if(e[s].index>t)return e[s].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function jn(i){return i==="AES-128"||i==="AES-256"||i==="AES-256-CTR"}function c0(i){switch(i){case"AES-128":case"AES-256":return hr.cbc;case"AES-256-CTR":return hr.ctr;default:throw new Error(`invalid full segment method ${i}`)}}function Pv(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0))}function gh(i){return Uint8Array.from(unescape(encodeURIComponent(i)),e=>e.charCodeAt(0))}function u8(i){const e=gh(i).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function c8(i){const e=function(s,r,n){const a=s[r];s[r]=s[n],s[n]=a};e(i,0,3),e(i,1,2),e(i,4,5),e(i,6,7)}function h8(i){const e=i.split(":");let t=null;if(e[0]==="data"&&e.length===2){const s=e[1].split(";"),r=s[s.length-1].split(",");if(r.length===2){const n=r[0]==="base64",a=r[1];n?(s.splice(-1,1),t=Pv(a)):t=u8(a)}}return t}const ou=typeof self<"u"?self:void 0;var ot={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Ut={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function vh(i){switch(i){case Ut.FAIRPLAY:return ot.FAIRPLAY;case Ut.PLAYREADY:return ot.PLAYREADY;case Ut.WIDEVINE:return ot.WIDEVINE;case Ut.CLEARKEY:return ot.CLEARKEY}}function Im(i){switch(i){case ot.FAIRPLAY:return Ut.FAIRPLAY;case ot.PLAYREADY:return Ut.PLAYREADY;case ot.WIDEVINE:return Ut.WIDEVINE;case ot.CLEARKEY:return Ut.CLEARKEY}}function $l(i){const{drmSystems:e,widevineLicenseUrl:t}=i,s=e?[ot.FAIRPLAY,ot.WIDEVINE,ot.PLAYREADY,ot.CLEARKEY].filter(r=>!!e[r]):[];return!s[ot.WIDEVINE]&&t&&s.push(ot.WIDEVINE),s}const Ov=function(i){return ou!=null&&(i=ou.navigator)!=null&&i.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function f8(i,e,t,s){let r;switch(i){case ot.FAIRPLAY:r=["cenc","sinf"];break;case ot.WIDEVINE:case ot.PLAYREADY:r=["cenc"];break;case ot.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${i}`)}return m8(r,e,t,s)}function m8(i,e,t,s){return[{initDataTypes:i,persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",sessionTypes:s.sessionTypes||[s.sessionType||"temporary"],audioCapabilities:e.map(n=>({contentType:`audio/mp4; codecs=${n}`,robustness:s.audioRobustness||"",encryptionScheme:s.audioEncryptionScheme||null})),videoCapabilities:t.map(n=>({contentType:`video/mp4; codecs=${n}`,robustness:s.videoRobustness||"",encryptionScheme:s.videoEncryptionScheme||null}))}]}function p8(i){var e;return i.sessionType==="persistent-license"||!!((e=i.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function g8(i){const e=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),s=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(s,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=Pv(o).subarray(0,16);return c8(l),l}}return null}let dl={};class Bu{static clearKeyUriToKeyIdMap(){dl={}}constructor(e,t,s,r=[1],n=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=s,this.keyFormatVersions=r,this.iv=n,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!jn(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(pv(a)))}matches(e){var t,s;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((t=e.iv)==null?void 0:t.join(","))===((s=this.iv)==null?void 0:s.join(","))}isSupported(){if(this.method){if(jn(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Ut.FAIRPLAY:case Ut.WIDEVINE:case Ut.PLAYREADY:case Ut.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(jn(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(ke.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const s=v8(e);return new Bu(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.pssh&&this.keyId)return this;const t=h8(this.uri);if(t)switch(this.keyFormat){case Ut.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const s=t.length-22;this.keyId=t.subarray(s,s+16)}break;case Ut.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=TT(s,null,t),this.keyId=g8(t);break}default:{let s=t.subarray(0,16);if(s.length!==16){const r=new Uint8Array(16);r.set(s,16-s.length),s=r}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s=dl[this.uri];if(!s){const r=Object.keys(dl).length%Number.MAX_SAFE_INTEGER;s=new Uint8Array(16),new DataView(s.buffer,12,4).setUint32(0,r),dl[this.uri]=s}this.keyId=s}return this}}function v8(i){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=i>>8*(15-t)&255;return e}const Lm=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Rm=/#EXT-X-MEDIA:(.*)/g,E8=/^#EXT(?:INF|-X-TARGETDURATION):/m,Tc=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),y8=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class zi{static findGroup(e,t){for(let s=0;s<e.length;s++){const r=e[s];if(r.id===t)return r}}static resolve(e,t){return s0.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return E8.test(e)}static parseMasterPlaylist(e,t){const s=Sm(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:s},n=[];Lm.lastIndex=0;let a;for(;(a=Lm.exec(e))!=null;)if(a[1]){var o;const d=new tt(a[1],r),u=ph(r,a[2]),c={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:zi.resolve(u,t)},h=d.decimalResolution("RESOLUTION");h&&(c.width=h.width,c.height=h.height),Dm(d.CODECS,c);const f=d["SUPPLEMENTAL-CODECS"];f&&(c.supplemental={},Dm(f,c.supplemental)),(o=c.unknownCodecs)!=null&&o.length||n.push(c),r.levels.push(c)}else if(a[3]){const d=a[3],u=a[4];switch(d){case"SESSION-DATA":{const c=new tt(u,r),h=c["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=c);break}case"SESSION-KEY":{const c=km(u,t,r);c.encrypted&&c.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(c)):ke.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const c=new tt(u,r);Cm(r,c,t)}break}case"CONTENT-STEERING":{const c=new tt(u,r);r.contentSteering={uri:zi.resolve(c["SERVER-URI"],t),pathwayId:c["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=wm(u);break}}}const l=n.length>0&&n.length<r.levels.length;return r.levels=l?n:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,s){let r;const n={},a=s.levels,o={AUDIO:a.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:a.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(Rm.lastIndex=0;(r=Rm.exec(e))!==null;){const d=new tt(r[1],s),u=d.TYPE;if(u){const c=o[u],h=n[u]||[];n[u]=h;const f=d.LANGUAGE,m=d["ASSOC-LANGUAGE"],p=d.CHANNELS,g=d.CHARACTERISTICS,v=d["INSTREAM-ID"],b={attrs:d,bitrate:0,id:l++,groupId:d["GROUP-ID"]||"",name:d.NAME||f||"",type:u,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:f,url:d.URI?zi.resolve(d.URI,t):""};if(m&&(b.assocLang=m),p&&(b.channels=p),g&&(b.characteristics=g),v&&(b.instreamId=v),c!=null&&c.length){const E=zi.findGroup(c,b.groupId)||c[0];Mm(b,E,"audioCodec"),Mm(b,E,"textCodec")}h.push(b)}}return n}static parseLevelPlaylist(e,t,s,r,n,a){var o;const l={url:t},d=new d8(t),u=d.fragments,c=[];let h=null,f=0,m=0,p=0,g=0,v=0,b=null,E=new Ec(r,l),T,x,R,I=-1,C=!1,L=null,S;if(Tc.lastIndex=0,d.m3u8=e,d.hasVariableRefs=Sm(e),((o=Tc.exec(e))==null?void 0:o[0])!=="#EXTM3U")return d.playlistParsingError=new Error("Missing format identifier #EXTM3U"),d;for(;(T=Tc.exec(e))!==null;){C&&(C=!1,E=new Ec(r,l),E.playlistOffset=p,E.start=p,E.sn=f,E.cc=g,v&&(E.bitrate=v),E.level=s,h&&(E.initSegment=h,h.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),L&&(E.setByteRange(L),L=null)));const K=T[1];if(K){E.duration=parseFloat(K);const V=(" "+T[2]).slice(1);E.title=V||null,E.tagList.push(V?["INF",K,V]:["INF",K])}else if(T[3]){if(Y(E.duration)){E.playlistOffset=p,E.start=p,R&&Om(E,R,d),E.sn=f,E.level=s,E.cc=g,u.push(E);const V=(" "+T[3]).slice(1);E.relurl=ph(d,V),Eh(E,b,c),b=E,p+=E.duration,f++,m=0,C=!0}}else{if(T=T[0].match(y8),!T){ke.warn("No matches on slow regex match for level playlist!");continue}for(x=1;x<T.length&&T[x]===void 0;x++);const V=(" "+T[x]).slice(1),q=(" "+T[x+1]).slice(1),z=T[x+2]?(" "+T[x+2]).slice(1):null;switch(V){case"BYTERANGE":b?E.setByteRange(q,b):E.setByteRange(q);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=q,E.tagList.push(["PROGRAM-DATE-TIME",q]),I===-1&&(I=u.length);break;case"PLAYLIST-TYPE":d.type&&ns(d,V,T),d.type=q.toUpperCase();break;case"MEDIA-SEQUENCE":d.startSN!==0?ns(d,V,T):u.length>0&&Nm(d,V,T),f=d.startSN=parseInt(q);break;case"SKIP":{d.skippedSegments&&ns(d,V,T);const $=new tt(q,d),re=$.decimalInteger("SKIPPED-SEGMENTS");if(Y(re)){d.skippedSegments+=re;for(let W=re;W--;)u.push(null);f+=re}const se=$.enumeratedString("RECENTLY-REMOVED-DATERANGES");se&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(se.split("	")));break}case"TARGETDURATION":d.targetduration!==0&&ns(d,V,T),d.targetduration=Math.max(parseInt(q),1);break;case"VERSION":d.version!==null&&ns(d,V,T),d.version=parseInt(q);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":d.live||ns(d,V,T),d.live=!1;break;case"#":(q||z)&&E.tagList.push(z?[q,z]:[q]);break;case"DISCONTINUITY":g++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([V]);break;case"BITRATE":E.tagList.push([V,q]),v=parseInt(q)*1e3,Y(v)?E.bitrate=v:v=0;break;case"DATERANGE":{const $=new tt(q,d),re=new Mv($,d.dateRanges[$.ID],d.dateRangeTagCount);d.dateRangeTagCount++,re.isValid||d.skippedSegments?d.dateRanges[re.id]=re:ke.warn(`Ignoring invalid DATERANGE tag: "${q}"`),E.tagList.push(["EXT-X-DATERANGE",q]);break}case"DEFINE":{{const $=new tt(q,d);"IMPORT"in $?s8(d,$,a):Cm(d,$,t)}break}case"DISCONTINUITY-SEQUENCE":d.startCC!==0?ns(d,V,T):u.length>0&&Nm(d,V,T),d.startCC=g=parseInt(q);break;case"KEY":{const $=km(q,t,d);if($.isSupported()){if($.method==="NONE"){R=void 0;break}R||(R={});const re=R[$.keyFormat];re!=null&&re.matches($)||(re&&(R=Ne({},R)),R[$.keyFormat]=$)}else ke.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${q}"`);break}case"START":d.startTimeOffset=wm(q);break;case"MAP":{const $=new tt(q,d);if(E.duration){const re=new Ec(r,l);Pm(re,$,s,R),h=re,E.initSegment=h,h.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime)}else{const re=E.byteRangeEndOffset;if(re){const se=E.byteRangeStartOffset;L=`${re-se}@${se}`}else L=null;Pm(E,$,s,R),h=E,C=!0}h.cc=g;break}case"SERVER-CONTROL":{S&&ns(d,V,T),S=new tt(q),d.canBlockReload=S.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=S.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&S.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=S.optionalFloat("PART-HOLD-BACK",0),d.holdBack=S.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{d.partTarget&&ns(d,V,T);const $=new tt(q);d.partTarget=$.decimalFloatingPoint("PART-TARGET");break}case"PART":{let $=d.partList;$||($=d.partList=[]);const re=m>0?$[$.length-1]:void 0,se=m++,W=new tt(q,d),B=new oT(W,E,l,se,re);$.push(B),E.duration+=B.duration;break}case"PRELOAD-HINT":{const $=new tt(q,d);d.preloadHint=$;break}case"RENDITION-REPORT":{const $=new tt(q,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push($);break}default:ke.warn(`line parsed but not handled: ${T}`);break}}}b&&!b.relurl?(u.pop(),p-=b.duration,d.partList&&(d.fragmentHint=b)):d.partList&&(Eh(E,b,c),E.cc=g,d.fragmentHint=E,R&&Om(E,R,d)),d.targetduration||(d.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const w=u.length,F=u[0],G=u[w-1];if(p+=d.skippedSegments*d.targetduration,p>0&&w&&G){d.averagetargetduration=p/w;const K=G.sn;d.endSN=K!=="initSegment"?K:0,d.live||(G.endList=!0),F&&d.startCC===void 0&&(d.startCC=F.cc),I>0&&(T8(u,I),F&&c.unshift(F))}else d.endSN=0,d.startCC=0;return d.fragmentHint&&(p+=d.fragmentHint.duration),d.totalduration=p,c.length&&d.dateRangeTagCount&&F&&Nv(c,d),d.endCC=g,d}}function Nv(i,e){const t=i.length;if(!t)return;const s=i[t-1],r=e.live?1/0:e.totalduration,n=Object.keys(e.dateRanges);for(let a=n.length;a--;){const o=e.dateRanges[n[a]],l=o.startDate.getTime();o.tagAnchor=s.ref;for(let d=t;d--;){const u=b8(e,l,i,d,r);if(u!==-1){o.tagAnchor=e.fragments[u].ref;break}}}}function b8(i,e,t,s,r){const n=t[s];if(n){const o=n.programDateTime;if(e>=o||s===0){var a;const l=(((a=t[s+1])==null?void 0:a.start)||r)-n.start;if(e<=o+l*1e3){const d=t[s].sn-i.startSN,u=i.fragments;if(u.length>t.length){const h=(t[s+1]||u[u.length-1]).sn-i.startSN;for(let f=h;f>d;f--){const m=u[f].programDateTime;if(e>=m&&e<m+u[f].duration*1e3)return f}}return d}}}return-1}function km(i,e,t){var s,r;const n=new tt(i,t),a=(s=n.METHOD)!=null?s:"",o=n.URI,l=n.hexadecimalInteger("IV"),d=n.KEYFORMATVERSIONS,u=(r=n.KEYFORMAT)!=null?r:"identity";o&&n.IV&&!l&&ke.error(`Invalid IV: ${n.IV}`);const c=o?zi.resolve(o,e):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new Bu(a,c,u,h,l,n.KEYID)}function wm(i){const t=new tt(i).decimalFloatingPoint("TIME-OFFSET");return Y(t)?t:null}function Dm(i,e){let t=(i||"").split(/[ ,]+/).filter(s=>s);["video","audio","text"].forEach(s=>{const r=t.filter(n=>a0(n,s));r.length&&(e[`${s}Codec`]=r.map(n=>n.split("/")[0]).join(","),t=t.filter(n=>r.indexOf(n)===-1))}),e.unknownCodecs=t}function Mm(i,e,t){const s=e[t];s&&(i[t]=s)}function T8(i,e){let t=i[e];for(let s=e;s--;){const r=i[s];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function Eh(i,e,t){i.rawProgramDateTime?t.push(i):e!=null&&e.programDateTime&&(i.programDateTime=e.endProgramDateTime)}function Pm(i,e,t,s){i.relurl=e.URI,e.BYTERANGE&&i.setByteRange(e.BYTERANGE),i.level=t,i.sn="initSegment",s&&(i.levelkeys=s),i.initSegment=null}function Om(i,e,t){i.levelkeys=e;const{encryptedFragments:s}=t;(!s.length||s[s.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&s.push(i)}function ns(i,e,t){i.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function Nm(i,e,t){i.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function _c(i,e){const t=e.startPTS;if(Y(t)){let s=0,r;e.sn>i.sn?(s=t-i.start,r=i):(s=i.start-t,r=e),r.duration!==s&&r.setDuration(s)}else e.sn>i.sn?i.cc===e.cc&&i.minEndPTS?e.setStart(i.start+(i.minEndPTS-i.start)):e.setStart(i.start+i.duration):e.setStart(Math.max(i.start-e.duration,0))}function Fv(i,e,t,s,r,n){s-t<=0&&(ke.warn("Fragment should have a positive duration",e),s=t+e.duration,n=r+e.duration);let o=t,l=s;const d=e.startPTS,u=e.endPTS;if(Y(d)){const g=Math.abs(d-t);Y(e.deltaPTS)?e.deltaPTS=Math.max(g,e.deltaPTS):e.deltaPTS=g,o=Math.max(t,d),t=Math.min(t,d),r=Math.min(r,e.startDTS),l=Math.min(s,u),s=Math.max(s,u),n=Math.max(n,e.endDTS)}const c=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(s-e.start),e.startPTS=t,e.maxStartPTS=o,e.startDTS=r,e.endPTS=s,e.minEndPTS=l,e.endDTS=n;const h=e.sn;if(!i||h<i.startSN||h>i.endSN)return 0;let f;const m=h-i.startSN,p=i.fragments;for(p[m]=e,f=m;f>0;f--)_c(p[f],p[f-1]);for(f=m;f<p.length-1;f++)_c(p[f],p[f+1]);return i.fragmentHint&&_c(p[p.length-1],i.fragmentHint),i.PTSKnown=i.alignedSliding=!0,c}function _8(i,e){if(i===e)return;let t=null;const s=i.fragments;for(let d=s.length-1;d>=0;d--){const u=s[d].initSegment;if(u){t=u;break}}i.fragmentHint&&delete i.fragmentHint.endPTS;let r;C8(i,e,(d,u,c,h)=>{if((!e.startCC||e.skippedSegments)&&u.cc!==d.cc){const f=d.cc-u.cc;for(let m=c;m<h.length;m++)h[m].cc+=f;e.endCC=h[h.length-1].cc}Y(d.startPTS)&&Y(d.endPTS)&&(u.setStart(u.startPTS=d.startPTS),u.startDTS=d.startDTS,u.maxStartPTS=d.maxStartPTS,u.endPTS=d.endPTS,u.endDTS=d.endDTS,u.minEndPTS=d.minEndPTS,u.setDuration(d.endPTS-d.startPTS),u.duration&&(r=u),e.PTSKnown=e.alignedSliding=!0),d.hasStreams&&(u.elementaryStreams=d.elementaryStreams),u.loader=d.loader,d.hasStats&&(u.stats=d.stats),d.initSegment&&(u.initSegment=d.initSegment,t=d.initSegment)});const n=e.fragments,a=e.fragmentHint?n.concat(e.fragmentHint):n;if(t&&a.forEach(d=>{var u;d&&(!d.initSegment||d.initSegment.relurl===((u=t)==null?void 0:u.relurl))&&(d.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=n.some(d=>!d),e.deltaUpdateFailed){ke.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let d=e.skippedSegments;d--;)n.shift();e.startSN=n[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=A8(i.dateRanges,e));const d=i.fragments.filter(u=>u.rawProgramDateTime);if(i.hasProgramDateTime&&!e.hasProgramDateTime)for(let u=1;u<a.length;u++)a[u].programDateTime===null&&Eh(a[u],a[u-1],d);Nv(d,e)}e.endCC=n[n.length-1].cc}if(!e.startCC){var o;const d=Bv(i,e.startSN-1);e.startCC=(o=d==null?void 0:d.cc)!=null?o:n[0].cc}S8(i.partList,e.partList,(d,u)=>{u.elementaryStreams=d.elementaryStreams,u.stats=d.stats}),r?Fv(e,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):Uv(i,e),n.length&&(e.totalduration=e.edge-n[0].start),e.driftStartTime=i.driftStartTime,e.driftStart=i.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const d=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=d),e.driftEndTime=l,e.driftEnd=d}else e.driftEndTime=i.driftEndTime,e.driftEnd=i.driftEnd,e.advancedDateTime=i.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=i.requestScheduled)}function A8(i,e){const{dateRanges:t,recentlyRemovedDateranges:s}=e,r=Ne({},i);s&&s.forEach(o=>{delete r[o]});const a=Object.keys(r).length;return a&&Object.keys(t).forEach(o=>{const l=r[o],d=new Mv(t[o].attr,l);d.isValid?(r[o]=d,l||(d.tagOrder+=a)):ke.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Xe(t[o].attr)}"`)}),r}function S8(i,e,t){if(i&&e){let s=0;for(let r=0,n=i.length;r<=n;r++){const a=i[r],o=e[r+s];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):s--}}}function C8(i,e,t){const s=e.skippedSegments,r=Math.max(i.startSN,e.startSN)-e.startSN,n=(i.fragmentHint?1:0)+(s?e.endSN:Math.min(i.endSN,e.endSN))-e.startSN,a=e.startSN-i.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=i.fragmentHint?i.fragments.concat(i.fragmentHint):i.fragments;for(let d=r;d<=n;d++){const u=l[a+d];let c=o[d];if(s&&!c&&u&&(c=e.fragments[d]=u),u&&c){if(t(u,c,d,o),u.url&&u.url!==c.url){e.playlistParsingError=Fm(`media sequence mismatch ${c.sn}:`,i,e,u,c);return}else if(u.cc!==c.cc){e.playlistParsingError=Fm(`discontinuity sequence mismatch (${u.cc}!=${c.cc})`,i,e,u,c);return}}}}function Fm(i,e,t,s,r){return new Error(`${i} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function Uv(i,e,t=!0){const s=e.startSN+e.skippedSegments-i.startSN,r=i.fragments,n=s>=0;let a=0;if(n&&s<r.length)a=r[s].start;else if(n&&e.startSN===i.endSN+1)a=i.fragmentEnd;else if(n&&t)a=i.fragmentStart+s*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=i.fragmentStart;else return;yh(e,a)}function yh(i,e){if(e){const t=i.fragments;for(let s=i.skippedSegments;s<t.length;s++)t[s].addStart(e);i.fragmentHint&&i.fragmentHint.addStart(e)}}function $v(i,e=1/0){let t=1e3*i.targetduration;if(i.updated){const s=i.fragments;if(s.length&&t*4>e){const n=s[s.length-1].duration*1e3;n<t&&(t=n)}}else t/=2;return Math.round(t)}function Bv(i,e,t){if(!i)return null;let s=i.fragments[e-i.startSN];return s||(s=i.fragmentHint,s&&s.sn===e)?s:e<i.startSN&&t&&t.sn===e?t:null}function Um(i,e,t){return i?Hv(i.partList,e,t):null}function Hv(i,e,t){if(i)for(let s=i.length;s--;){const r=i[s];if(r.index===t&&r.fragment.sn===e)return r}return null}function Vv(i){i.forEach((e,t)=>{var s;(s=e.details)==null||s.fragments.forEach(r=>{r.level=t,r.initSegment&&(r.initSegment.level=t)})})}function co(i,e){for(let s=0,r=i.length;s<r;s++){var t;if(((t=i[s])==null?void 0:t.cc)===e)return i[s]}return null}function x8(i,e){return!!(i&&e.startCC<i.endCC&&e.endCC>i.startCC)}function $m(i,e){if(i){const t=i.start+e;i.start=i.startPTS=t,i.endPTS=t+i.duration}}function Gv(i,e){const t=e.fragments;for(let s=0,r=t.length;s<r;s++)$m(t[s],i);e.fragmentHint&&$m(e.fragmentHint,i),e.alignedSliding=!0}function I8(i,e){i&&(Kv(e,i),!e.alignedSliding&&i&&lu(e,i),!e.alignedSliding&&i&&!e.skippedSegments&&Uv(i,e,!1))}function Kv(i,e){if(!x8(e,i))return;const t=Math.min(e.endCC,i.endCC),s=co(e.fragments,t),r=co(i.fragments,t);if(!s||!r)return;ke.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const n=s.start-r.start;Gv(n,i)}function lu(i,e){if(!i.hasProgramDateTime||!e.hasProgramDateTime)return;const t=i.fragments,s=e.fragments;if(!t.length||!s.length)return;let r,n;const a=Math.min(e.endCC,i.endCC);e.startCC<a&&i.startCC<a&&(r=co(s,a),n=co(t,a)),(!r||!n)&&(r=s[Math.floor(s.length/2)],n=co(t,r.cc)||t[Math.floor(t.length/2)]);const o=r.programDateTime,l=n.programDateTime;if(!o||!l)return;const d=(l-o)/1e3-(n.start-r.start);Gv(d,i)}const L8={toString:function(i){let e="";const t=i.length;for(let s=0;s<t;s++)e+=`[${i.start(s).toFixed(3)}-${i.end(s).toFixed(3)}]`;return e}},U={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class h0 extends wv{constructor(e,t,s,r,n){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=U.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:d,state:u}=this,c=l?l.currentTime:0,h=me.bufferInfo(d||l,c,a.maxBufferHole),f=!h.len;if(this.log(`Media seeking to ${Y(c)?c.toFixed(3):c}, state: ${u}, ${f?"out of":"in"} buffer`),this.state===U.ENDED)this.resetLoadingState();else if(o){const m=a.maxFragLookUpTolerance,p=o.start-m,g=o.start+o.duration+m;if(f||g<h.start||p>h.end){const v=c>g;(c<p||v)&&(v&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(c,1/0,this.playlistType,!0);const m=this.lastCurrentTime;if(c>m&&(this.lastCurrentTime=c),!this.loadingParts){const p=Math.max(h.end,c),g=this.shouldLoadParts(this.getLevelDetails(),p);g&&(this.log(`LL-Part loading ON after seeking to ${c.toFixed(2)} with buffer @${p.toFixed(2)}`),this.loadingParts=g)}}this.hls.hasEnoughToStart||(this.log(`Setting ${f?"startPosition":"nextLoadPosition"} to ${c} for seek without enough to start`),this.nextLoadPosition=c,f&&(this.startPosition=c)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=n,this.hls=e,this.fragmentLoader=new t8(e.config),this.keyLoader=s,this.fragmentTracker=t,this.config=e.config,this.decrypter=new d0(e.config)}registerListeners(){const{hls:e}=this;e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(y.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===U.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=U.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const s=e.end||0,r=this.config.timelineOffset||0;if(s<=r)return!1;const n=e.buffered;this.config.maxBufferHole&&n&&n.length>1&&(e=me.bufferedInfo(n,e.start,0));const a=e.nextStart;if(a&&a>r&&a<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const u=l[l.length-1];return me.isBuffered(this.media,u.start+u.duration/2)}const d=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(d)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const s=this.media=this.mediaBuffer=t.media;s.removeEventListener("seeking",this.onMediaSeeking),s.removeEventListener("ended",this.onMediaEnded),s.addEventListener("seeking",this.onMediaSeeking),s.addEventListener("ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===U.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const s=!!t.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!s&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,s){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=U.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,s){this.startFragRequested=!0,this._loadFragForPlayback(e,t,s)}_loadFragForPlayback(e,t,s){const r=n=>{const a=n.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${n.part?" part: "+n.part.index:""} of ${this.fragInfo(a,!1,n.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(n)};this._doFragLoad(e,t,s,r).then(n=>{if(!n)return;const a=this.state,o=n.frag;if(this.fragContextChanged(o)){(a===U.FRAG_LOADING||!this.fragCurrent&&a===U.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=U.IDLE);return}"payload"in n&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(y.FRAG_LOADED,n)),this._handleFragmentLoadComplete(n)}).catch(n=>{this.state===U.STOPPED||this.state===U.ERROR||(this.warn(`Frag error: ${(n==null?void 0:n.message)||n}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:s}=this;if(s.getState(e)===yt.APPENDING){const n=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,n),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&s.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?s.removeAllFragments():s.hasParts(e.type)&&(s.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),s.getState(e)===yt.PARTIAL&&s.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,s=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:s};this.hls.trigger(y.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(s=>{const r=s==null?void 0:s.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return s}).then(s=>{const{hls:r}=this,{frag:n,payload:a}=s,o=n.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&jn(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,c0(o.method)).catch(d=>{throw r.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:n}),d}).then(d=>{const u=self.performance.now();return r.trigger(y.FRAG_DECRYPTED,{frag:n,payload:d,stats:{tstart:l,tdecrypt:u}}),s.payload=d,this.completeInitSegmentLoad(s)})}return this.completeInitSegmentLoad(s)}).catch(s=>{this.state===U.STOPPED||this.state===U.ERROR||(this.warn(s),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const s=e.frag.stats;this.state!==U.STOPPED&&(this.state=U.IDLE),e.frag.data=new Uint8Array(e.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const s=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${s?L8.toString(me.getBuffered(s)):"(detached)"})`),mt(e)){var r;if(e.type!==te.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=U.IDLE;return}}const n=(r=this.levels)==null?void 0:r[e.level];n!=null&&n.fragmentError&&(this.log(`Resetting level fragment error count of ${n.fragmentError} on frag buffered`),n.fragmentError=0)}this.state=U.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:s,part:r,partsLoaded:n}=e,a=!n||n.length===0||n.some(l=>!l),o=new u0(s.level,s.sn,s.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,s=null,r){var n;this.fragCurrent=e;const a=t==null?void 0:t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;e.encrypted&&!((n=e.decryptdata)!=null&&n.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=U.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(c=>{if(!this.fragContextChanged(c.frag))return this.hls.trigger(y.KEY_LOADED,c),this.state===U.KEY_LOADING&&(this.state=U.IDLE),c}),this.hls.trigger(y.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(mt(e)&&(!l||e.sn!==l.sn)){const c=this.shouldLoadParts(t.details,e.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=c)}if(s=Math.max(e.start,s||0),this.loadingParts&&mt(e)){const c=a.partList;if(c&&r){s>e.end&&a.fragmentHint&&(e=a.fragmentHint);const h=this.getNextPart(c,e,s);if(h>-1){const f=c[h];e=this.fragCurrent=f.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${f.index} (${h}/${c.length-1}) of ${this.fragInfo(e,!1,f)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(s.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=U.FRAG_LOADING;let m;return o?m=o.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,t,r)).catch(p=>this.handleFragLoadError(p)):m=this.doFragPartsLoad(e,f,t,r).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(y.FRAG_LOADING,{frag:e,part:f,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(c,s))return Promise.resolve(null)}}if(mt(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${s.toFixed(2)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${a?"["+a.startSN+"-"+a.endSN+"]":""}, target: ${parseFloat(s.toFixed(3))}`),Y(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=U.FRAG_LOADING;const d=this.config.progressive;let u;return d&&o?u=o.then(c=>!c||this.fragContextChanged(c==null?void 0:c.frag)?null:this.fragmentLoader.load(e,r)).catch(c=>this.handleFragLoadError(c)):u=Promise.all([this.fragmentLoader.load(e,d?r:void 0),o]).then(([c])=>(!d&&c&&r&&r(c),c)).catch(c=>this.handleFragLoadError(c)),this.hls.trigger(y.FRAG_LOADING,{frag:e,targetBufferTime:s}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,s,r){return new Promise((n,a)=>{var o;const l=[],d=(o=s.details)==null?void 0:o.partList,u=c=>{this.fragmentLoader.loadPart(e,c,r).then(h=>{l[c.index]=h;const f=h.part;this.hls.trigger(y.FRAG_LOADED,h);const m=Um(s.details,e.sn,c.index+1)||Hv(d,e.sn,c.index+1);if(m)u(m);else return n({frag:e,part:f,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===P.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(y.ERROR,t)}else this.hls.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==U.PARSING){!this.fragCurrent&&this.state!==U.STOPPED&&this.state!==U.ERROR&&(this.state=U.IDLE);return}const{frag:s,part:r,level:n}=t,a=self.performance.now();s.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const o=this.getLevelDetails(),d=o&&s.sn>o.endSN||this.shouldLoadParts(o,s.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} after parsing segment ending @${s.end.toFixed(2)}`),this.loadingParts=d),this.updateLevelTiming(s,r,n,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var s;const n=e.partList[0],a=n.end+(((s=e.fragmentHint)==null?void 0:s.duration)||0);if(t>=a){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>n.start-n.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:s}=this,{level:r,sn:n,part:a}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${n} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const o=t[r],l=o.details,d=a>-1?Um(l,n,a):null,u=d?d.fragment:Bv(l,n,s);return u?(s&&s!==u&&(u.stats=s.stats),{frag:u,part:d,level:o}):null}bufferFragmentData(e,t,s,r,n){var a;if(!e||this.state!==U.PARSING)return;const{data1:o,data2:l}=e;let d=o;if(o&&l&&(d=ui(o,l)),!((a=d)!=null&&a.length))return;const u=this.initPTS[t.cc],c=u?-u.baseTime/u.timescale:void 0,h={type:e.type,frag:t,part:s,chunkMeta:r,offset:c,parent:t.type,data:d};if(this.hls.trigger(y.BUFFER_APPENDING,h),e.dropped&&e.independent&&!s){if(n)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!me.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const s=t.currentTime,r=me.bufferInfo(t,s,0),n=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,n*.25),o=Math.max(Math.min(e.start-a,r.end-a),s+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var s;const r=this.getLoadPosition();if(!Y(r))return null;const a=this.lastCurrentTime>r||(s=this.media)!=null&&s.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,a)}getFwdBufferInfoAtPos(e,t,s,r){const n=me.bufferInfo(e,t,r);if(n.len===0&&n.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,s);if(a&&(n.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(n.nextStart,a.end)-t,r);return me.bufferInfo(e,t,o)}}return n}getMaxBufferLength(e){const{config:t}=this;let s;return e?s=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):s=t.maxBufferLength,Math.min(s,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const s=this.config,r=Math.max(Math.min(e-t,s.maxBufferLength),t),n=Math.max(e-t*3,s.maxMaxBufferLength/2,r);return n>=r?(s.maxMaxBufferLength=n,this.warn(`Reduce max buffer length to ${n}s`),!0):!1}getAppendedFrag(e,t=te.MAIN){var s;const r=(s=this.fragmentTracker)==null?void 0:s.getAppendedFrag(e,t);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,t){const s=t.fragments,r=s.length;if(!r)return null;const{config:n}=this,a=s[0].start,o=n.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const c=n.initialLiveManifestSize;if(r<c)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${c})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var d;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);const h=this.hls.startPosition,f=this.hls.liveSyncPosition,m=l?(h!==-1&&h>=a?h:f)||l.start:e;this.log(`Setting startPosition to ${m} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${f} frag.start: ${(d=l)==null?void 0:d.start}`),this.startPosition=this.nextLoadPosition=m}}else e<=a&&(l=s[0]);if(!l){const c=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,c,t)}let u=this.filterReplacedPrimary(l,t);if(!u&&l){const c=l.sn-t.startSN;u=this.filterReplacedPrimary(s[c+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const s=this.fragmentTracker.getState(e);return(s===yt.OK||s===yt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,s,r,n){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&s.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,s.nextStart,r,0);if(o!==null&&s.len+o.len>=n){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(Bm(this.hls.config)){var e,t;if((e=this.hls.interstitialsManager)==null||(t=e.playingItem)==null?void 0:t.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(Bm(this.hls.config)&&e.type!==te.SUBTITLE){const s=this.hls.interstitialsManager,r=s==null?void 0:s.bufferingItem;if(r){const a=r.event;if(a){if(a.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&(t==null?void 0:t.live)===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const n=s==null?void 0:s.playerQueue;if(n)for(let a=n.length;a--;){const o=n[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,s){let r=-1,n=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const d=e[o];if(a=a&&!d.independent,r>-1&&s<d.start)break;const u=d.loaded;u?r=-1:(n||d.independent||a)&&d.fragment===t&&(r=o),n=u}return r}loadedEndOfParts(e,t){const s=e[e.length-1];return s&&t>s.start&&s.loaded}getInitialLiveFragment(e){const t=e.fragments,s=this.fragPrevious;let r=null;if(s){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${s.programDateTime}`),r=GT(t,s.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const n=s.sn+1;if(n>=e.startSN&&n<=e.endSN){const a=t[n-e.startSN];s.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=kv(e,s.cc,s.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const n=this.hls.liveSyncPosition;n!==null&&(r=this.getFragmentAtPosition(n,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,s){const{config:r}=this;let{fragPrevious:n}=this,{fragments:a,endSN:o}=s;const{fragmentHint:l}=s,{maxFragLookUpTolerance:d}=r,u=s.partList,c=!!(this.loadingParts&&u!=null&&u.length&&l);c&&l&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let h;if(e<t){var f;const p=e<this.lastCurrentTime||e>t-d||(f=this.media)!=null&&f.paused||!this.startFragRequested?0:d;h=tn(n,a,e,p)}else h=a[a.length-1];if(h){const m=h.sn-s.startSN,p=this.fragmentTracker.getState(h);if((p===yt.OK||p===yt.PARTIAL&&h.gap)&&(n=h),n&&h.sn===n.sn&&(!c||u[0].fragment.sn>h.sn||!s.live&&!c)&&n&&h.level===n.level){const v=a[m+1];h.sn<o&&this.fragmentTracker.getState(v)!==yt.OK?h=v:h=null}}return h}alignPlaylists(e,t,s){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const n=e.fragmentStart,a=!t,o=e.alignedSliding&&Y(n);if(a||!o&&!n){I8(s,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),l}return n}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let s=this.startPosition;s<t&&(s=-1);const r=this.timelineOffset;if(s===-1){const n=this.startTimeOffset!==null,a=n?this.startTimeOffset:e.startTimeOffset;a!==null&&Y(a)?(s=t+a,a<0&&(s+=e.edge),s=Math.min(Math.max(t,s),t+e.totalduration),this.log(`Setting startPosition to ${s} for start time offset ${a} found in ${n?"multivariant":"media"} playlist`),this.startPosition=s):e.live?(s=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${s}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=s=0),this.lastCurrentTime=s+r}this.nextLoadPosition=s+r}getLoadPosition(){var e;const{media:t}=this;let s=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?s=t.currentTime:this.nextLoadPosition>=0&&(s=this.nextLoadPosition),s}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&mt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==U.FRAG_LOADING_WAITING_RETRY)&&(this.state=U.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const m=this.getCurrentContext(t.chunkMeta);m&&(t.frag=m.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var r;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(r=this.fragCurrent)==null?void 0:r.url}`);return}const n=t.details===P.FRAG_GAP;n&&this.fragmentTracker.fragBuffered(s,!0);const a=t.errorAction,{action:o,flags:l,retryCount:d=0,retryConfig:u}=a||{},c=!!a&&!!u,h=c&&o===Mt.RetryRequest,f=c&&!a.resolved&&l===bi.MoveAllAlternatesMatchingHost;if(!h&&f&&mt(s)&&!s.endList)this.resetFragmentErrors(e),this.treatAsGap(s),a.resolved=!0;else if((h||f)&&d<u.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const m=l0(u,d);this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${d+1}/${u.maxNumRetry} in ${m}ms`),a.resolved=!0,this.retryDate=self.performance.now()+m,this.state=U.FRAG_LOADING_WAITING_RETRY}else if(u&&a)if(this.resetFragmentErrors(e),d<u.maxNumRetry)!n&&o!==Mt.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${d})`);return}else o===Mt.SendAlternateToPenaltyBox?this.state=U.WAITING_LEVEL:this.state=U.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===U.PARSING||this.state===U.PARSED){const t=e.frag,s=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,s),n=r&&r.len>.5;n&&this.reduceMaxBufferLength(r.len,(t==null?void 0:t.duration)||10);const a=!n;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${s} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===te.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==U.STOPPED&&(this.state=U.IDLE)}afterBufferFlushed(e,t,s){if(!e)return;const r=me.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,s),this.state===U.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==U.STOPPED&&(this.state=U.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,s,r){const n=s.details;if(!n){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,d)=>{const u=e.elementaryStreams[d];if(u){const c=u.endPTS-u.startPTS;if(c<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${c})`),l||!1;const h=r?0:Fv(n,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(y.LEVEL_PTS_UPDATED,{details:n,level:s,drift:h,type:d,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)){var o;if(s.fragmentError===0&&this.treatAsGap(e,s),((o=this.transmuxer)==null?void 0:o.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${s.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=U.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(y.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===te.MAIN?"level":"track"}fragInfo(e,t=!0,s){var r,n;return`${this.playlistLabel()} ${e.level} (${s?"part":"frag"}:[${((r=t&&!s?e.startPTS:(s||e).start)!=null?r:NaN).toFixed(3)}-${((n=t&&!s?e.endPTS:(s||e).end)!=null?n:NaN).toFixed(3)}]${s&&e.type==="main"?"INDEPENDENT="+(s.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Bm(i){return!!i.interstitialsController&&i.enableInterstitialPlayback!==!1}class Wv{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let s;if(e.length)e.length===1?s=e[0]:s=R8(e,t);else return new Uint8Array(0);return this.reset(),s}reset(){this.chunks.length=0,this.dataLength=0}}function R8(i,e){const t=new Uint8Array(e);let s=0;for(let r=0;r<i.length;r++){const n=i[r];t.set(n,s),s+=n.length}return t}var Ac={exports:{}},Hm;function k8(){return Hm||(Hm=1,function(i){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function r(l,d,u){this.fn=l,this.context=d,this.once=u||!1}function n(l,d,u,c,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,c||l,h),m=t?t+d:d;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,d){--l._eventsCount===0?l._events=new s:delete l._events[d]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,c;if(this._eventsCount===0)return d;for(c in u=this._events)e.call(u,c)&&d.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=t?t+d:d,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var h=0,f=c.length,m=new Array(f);h<f;h++)m[h]=c[h].fn;return m},o.prototype.listenerCount=function(d){var u=t?t+d:d,c=this._events[u];return c?c.fn?1:c.length:0},o.prototype.emit=function(d,u,c,h,f,m){var p=t?t+d:d;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,b,E;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,c),!0;case 4:return g.fn.call(g.context,u,c,h),!0;case 5:return g.fn.call(g.context,u,c,h,f),!0;case 6:return g.fn.call(g.context,u,c,h,f,m),!0}for(E=1,b=new Array(v-1);E<v;E++)b[E-1]=arguments[E];g.fn.apply(g.context,b)}else{var T=g.length,x;for(E=0;E<T;E++)switch(g[E].once&&this.removeListener(d,g[E].fn,void 0,!0),v){case 1:g[E].fn.call(g[E].context);break;case 2:g[E].fn.call(g[E].context,u);break;case 3:g[E].fn.call(g[E].context,u,c);break;case 4:g[E].fn.call(g[E].context,u,c,h);break;default:if(!b)for(x=1,b=new Array(v-1);x<v;x++)b[x-1]=arguments[x];g[E].fn.apply(g[E].context,b)}}return!0},o.prototype.on=function(d,u,c){return n(this,d,u,c,!1)},o.prototype.once=function(d,u,c){return n(this,d,u,c,!0)},o.prototype.removeListener=function(d,u,c,h){var f=t?t+d:d;if(!this._events[f])return this;if(!u)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!c||m.context===c)&&a(this,f);else{for(var p=0,g=[],v=m.length;p<v;p++)(m[p].fn!==u||h&&!m[p].once||c&&m[p].context!==c)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=t?t+d:d,this._events[u]&&a(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,i.exports=o}(Ac)),Ac.exports}var w8=k8(),f0=nT(w8);const Ro="1.6.7",ca={};function D8(){return typeof __HLS_WORKER_BUNDLE__=="function"}function M8(){const i=ca[Ro];if(i)return i.clientCount++,i;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),r={worker:new self.Worker(t),objectURL:t,clientCount:1};return ca[Ro]=r,r}function P8(i){const e=ca[i];if(e)return e.clientCount++,e;const t=new self.URL(i,self.location.href).href,r={worker:new self.Worker(t),scriptURL:t,clientCount:1};return ca[i]=r,r}function O8(i){const e=ca[i||Ro];if(e&&e.clientCount--===1){const{worker:s,objectURL:r}=e;delete ca[i||Ro],r&&self.URL.revokeObjectURL(r),s.terminate()}}function qv(i,e){return e+10<=i.length&&i[e]===51&&i[e+1]===68&&i[e+2]===73&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128}function m0(i,e){return e+10<=i.length&&i[e]===73&&i[e+1]===68&&i[e+2]===51&&i[e+3]<255&&i[e+4]<255&&i[e+6]<128&&i[e+7]<128&&i[e+8]<128&&i[e+9]<128}function Hu(i,e){let t=0;return t=(i[e]&127)<<21,t|=(i[e+1]&127)<<14,t|=(i[e+2]&127)<<7,t|=i[e+3]&127,t}function ko(i,e){const t=e;let s=0;for(;m0(i,e);){s+=10;const r=Hu(i,e+6);s+=r,qv(i,e+10)&&(s+=10),e+=s}if(s>0)return i.subarray(t,t+s)}function N8(i,e,t,s){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=e[t+2],a=n>>2&15;if(a>12){const f=new Error(`invalid ADTS sampling index:${a}`);i.emit(y.ERROR,y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}const o=(n>>6&3)+1,l=e[t+3]>>6&3|(n&1)<<2,d="mp4a.40."+o,u=r[a];let c=a;(o===5||o===29)&&(c-=3);const h=[o<<3|(c&14)>>1,(c&1)<<7|l<<3];return ke.log(`manifest codec:${s}, parsed codec:${d}, channels:${l}, rate:${u} (ADTS object type:${o} sampling index:${a})`),{config:h,samplerate:u,channelCount:l,codec:d,parsedCodec:d,manifestCodec:s}}function jv(i,e){return i[e]===255&&(i[e+1]&246)===240}function Yv(i,e){return i[e+1]&1?7:9}function p0(i,e){return(i[e+3]&3)<<11|i[e+4]<<3|(i[e+5]&224)>>>5}function F8(i,e){return e+5<i.length}function du(i,e){return e+1<i.length&&jv(i,e)}function U8(i,e){return F8(i,e)&&jv(i,e)&&p0(i,e)<=i.length-e}function $8(i,e){if(du(i,e)){const t=Yv(i,e);if(e+t>=i.length)return!1;const s=p0(i,e);if(s<=t)return!1;const r=e+s;return r===i.length||du(i,r)}return!1}function Zv(i,e,t,s,r){if(!i.samplerate){const n=N8(e,t,s,r);if(!n)return;Ne(i,n)}}function zv(i){return 1024*9e4/i}function B8(i,e){const t=Yv(i,e);if(e+t<=i.length){const s=p0(i,e)-t;if(s>0)return{headerLength:t,frameLength:s}}}function Qv(i,e,t,s,r){const n=zv(i.samplerate),a=s+r*n,o=B8(e,t);let l;if(o){const{frameLength:c,headerLength:h}=o,f=h+c,m=Math.max(0,t+f-e.length);m?(l=new Uint8Array(f-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+f);const p={unit:l,pts:a};return m||i.samples.push(p),{sample:p,length:f,missing:m}}const d=e.length-t;return l=new Uint8Array(d),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:d,missing:-1}}function H8(i,e){return m0(i,e)&&Hu(i,e+6)+10<=i.length-e}function V8(i){return i instanceof ArrayBuffer?i:i.byteOffset==0&&i.byteLength==i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer}function Sc(i,e=0,t=1/0){return G8(i,e,t,Uint8Array)}function G8(i,e,t,s){const r=K8(i);let n=1;"BYTES_PER_ELEMENT"in s&&(n=s.BYTES_PER_ELEMENT);const a=W8(i)?i.byteOffset:0,o=(a+i.byteLength)/n,l=(a+e)/n,d=Math.floor(Math.max(0,Math.min(l,o))),u=Math.floor(Math.min(d+Math.max(t,0),o));return new s(r,d,u-d)}function K8(i){return i instanceof ArrayBuffer?i:i.buffer}function W8(i){return i&&i.buffer instanceof ArrayBuffer&&i.byteLength!==void 0&&i.byteOffset!==void 0}function q8(i){const e={key:i.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(i.size<2)return;if(i.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const s=i.data.subarray(1).indexOf(0);if(s===-1)return;const r=Zt(Sc(i.data,1,s)),n=i.data[2+s],a=i.data.subarray(3+s).indexOf(0);if(a===-1)return;const o=Zt(Sc(i.data,3+s,a));let l;return r==="-->"?l=Zt(Sc(i.data,4+s+a)):l=V8(i.data.subarray(4+s+a)),e.mimeType=r,e.pictureType=n,e.description=o,e.data=l,e}function j8(i){if(i.size<2)return;const e=Zt(i.data,!0),t=new Uint8Array(i.data.subarray(e.length+1));return{key:i.type,info:e,data:t.buffer}}function Y8(i){if(i.size<2)return;if(i.type==="TXXX"){let t=1;const s=Zt(i.data.subarray(t),!0);t+=s.length+1;const r=Zt(i.data.subarray(t));return{key:i.type,info:s,data:r}}const e=Zt(i.data.subarray(1));return{key:i.type,info:"",data:e}}function Z8(i){if(i.type==="WXXX"){if(i.size<2)return;let t=1;const s=Zt(i.data.subarray(t),!0);t+=s.length+1;const r=Zt(i.data.subarray(t));return{key:i.type,info:s,data:r}}const e=Zt(i.data);return{key:i.type,info:"",data:e}}function z8(i){return i.type==="PRIV"?j8(i):i.type[0]==="W"?Z8(i):i.type==="APIC"?q8(i):Y8(i)}function Q8(i){const e=String.fromCharCode(i[0],i[1],i[2],i[3]),t=Hu(i,4),s=10;return{type:e,size:t,data:i.subarray(s,s+t)}}const ul=10,X8=10;function Xv(i){let e=0;const t=[];for(;m0(i,e);){const s=Hu(i,e+6);i[e+5]>>6&1&&(e+=ul),e+=ul;const r=e+s;for(;e+X8<r;){const n=Q8(i.subarray(e)),a=z8(n);a&&t.push(a),e+=n.size+ul}qv(i,e)&&(e+=ul)}return t}function Jv(i){return i&&i.key==="PRIV"&&i.info==="com.apple.streaming.transportStreamTimestamp"}function J8(i){if(i.data.byteLength===8){const e=new Uint8Array(i.data),t=e[3]&1;let s=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return s/=45,t&&(s+=4772185884e-2),Math.round(s)}}function g0(i){const e=Xv(i);for(let t=0;t<e.length;t++){const s=e[t];if(Jv(s))return J8(s)}}let Yt=function(i){return i.audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3",i.misbklv="urn:misb:KLV:bin:1910.1",i}({});function Wi(i="",e=9e4){return{type:i,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class v0{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,s,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,s){}demux(e,t){this.cachedData&&(e=ui(this.cachedData,e),this.cachedData=null);let s=ko(e,0),r=s?s.length:0,n;const a=this._audioTrack,o=this._id3Track,l=s?g0(s):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&Y(l))&&(this.basePTS=e6(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),s&&s.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Yt.audioId3,duration:Number.POSITIVE_INFINITY});r<d;){if(this.canParse(e,r)){const u=this.appendFrame(a,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,n=r):r=d}else H8(e,r)?(s=ko(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:s,type:Yt.audioId3,duration:Number.POSITIVE_INFINITY}),r+=s.length,n=r):r++;if(r===d&&n!==d){const u=e.slice(n);this.cachedData?this.cachedData=ui(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:Wi(),id3Track:o,textTrack:Wi()}}demuxSampleAes(e,t,s){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Wi(),id3Track:this._id3Track,textTrack:Wi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const e6=(i,e,t)=>{if(Y(i))return i*90;const s=t?t.baseTime*9e4/t.timescale:0;return e*9e4+s};let cl=null;const t6=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],i6=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s6=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],r6=[0,1,1,4];function e2(i,e,t,s,r){if(t+24>e.length)return;const n=t2(e,t);if(n&&t+n.frameLength<=e.length){const a=n.samplesPerFrame*9e4/n.sampleRate,o=s+r*a,l={unit:e.subarray(t,t+n.frameLength),pts:o,dts:o};return i.config=[],i.channelCount=n.channelCount,i.samplerate=n.sampleRate,i.samples.push(l),{sample:l,length:n.frameLength,missing:0}}}function t2(i,e){const t=i[e+1]>>3&3,s=i[e+1]>>1&3,r=i[e+2]>>4&15,n=i[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&n!==3){const a=i[e+2]>>1&1,o=i[e+3]>>6,l=t===3?3-s:s===3?3:4,d=t6[l*14+r-1]*1e3,c=i6[(t===3?0:t===2?1:2)*3+n],h=o===3?1:2,f=s6[t][s],m=r6[s],p=f*8*m,g=Math.floor(f*d/c+a)*m;if(cl===null){const E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);cl=E?parseInt(E[1]):0}return!!cl&&cl<=87&&s===2&&d>=224e3&&o===0&&(i[e+3]=i[e+3]|128),{sampleRate:c,channelCount:h,frameLength:g,samplesPerFrame:p}}}function E0(i,e){return i[e]===255&&(i[e+1]&224)===224&&(i[e+1]&6)!==0}function i2(i,e){return e+1<i.length&&E0(i,e)}function n6(i,e){return E0(i,e)&&4<=i.length-e}function s2(i,e){if(e+1<i.length&&E0(i,e)){const s=t2(i,e);let r=4;s!=null&&s.frameLength&&(r=s.frameLength);const n=e+r;return n===i.length||i2(i,n)}return!1}class a6 extends v0{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,s,r){super.resetInitSegment(e,t,s,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const s=ko(e,0);let r=(s==null?void 0:s.length)||0;if(s2(e,r))return!1;for(let n=e.length;r<n;r++)if($8(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return U8(e,t)}appendFrame(e,t,s){Zv(e,this.observer,t,s,e.manifestCodec);const r=Qv(e,t,s,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const r2=(i,e)=>{let t=0,s=5;e+=s;const r=new Uint32Array(1),n=new Uint32Array(1),a=new Uint8Array(1);for(;s>0;){a[0]=i[e];const o=Math.min(s,8),l=8-o;n[0]=4278190080>>>24+l<<l,r[0]=(a[0]&n[0])>>l,t=t?t<<o|r[0]:r[0],e+=1,s-=o}return t};class o6 extends v0{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,s,r){super.resetInitSegment(e,t,s,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,s){const r=n2(e,t,s,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=ko(e,0);if(!t)return!1;const s=t.length;return e[s]===11&&e[s+1]===119&&g0(t)!==void 0&&r2(e,s)<16}}function n2(i,e,t,s,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const n=e[t+4]>>6;if(n>=3)return-1;const o=[48e3,44100,32e3][n],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+n]*2;if(t+u>e.length)return-1;const c=e[t+6]>>5;let h=0;c===2?h+=2:(c&1&&c!==1&&(h+=2),c&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,p=[2,1,2,3,3,4,4,5][c]+f,g=e[t+5]>>3,v=e[t+5]&7,b=new Uint8Array([n<<6|g<<1|v>>2,(v&3)<<6|c<<3|f<<2|l>>4,l<<4&224]),E=1536/o*9e4,T=s+r*E,x=e.subarray(t,t+u);return i.config=b,i.channelCount=p,i.samplerate=o,i.samples.push({unit:x,pts:T}),u}class l6 extends v0{resetInitSegment(e,t,s,r){super.resetInitSegment(e,t,s,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=ko(e,0);let s=(t==null?void 0:t.length)||0;if(t&&e[s]===11&&e[s+1]===119&&g0(t)!==void 0&&r2(e,s)<=16)return!1;for(let r=e.length;s<r;s++)if(s2(e,s))return ke.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return n6(e,t)}appendFrame(e,t,s){if(this.basePTS!==null)return e2(e,t,s,this.basePTS,this.frameIndex)}}const d6=/\/emsg[-/]ID3/i;class u6{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,s,r){const n=this.videoTrack=Wi("video",1),a=this.audioTrack=Wi("audio",1),o=this.txtTrack=Wi("text",1);if(this.id3Track=Wi("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Tv(e);if(l.video){const{id:d,timescale:u,codec:c,supplemental:h}=l.video;n.id=d,n.timescale=o.timescale=u,n.codec=c,n.supplemental=h}if(l.audio){const{id:d,timescale:u,codec:c}=l.audio;a.id=d,a.timescale=u,a.codec=c}o.id=Ev.text,n.sampleDuration=0,n.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return uT(e)}demux(e,t){this.timeOffset=t;let s=e;const r=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(s=ui(this.remainderData,e));const o=vT(s);this.remainderData=o.remainder,r.samples=o.valid||new Uint8Array}else r.samples=s;const a=this.extractID3Track(r,t);return n.samples=om(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,s=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return s.samples=om(e,t),{videoTrack:t,audioTrack:Wi(),id3Track:r,textTrack:Wi()}}extractID3Track(e,t){const s=this.id3Track;if(e.samples.length){const r=Ee(e.samples,["emsg"]);r&&r.forEach(n=>{const a=yT(n);if(d6.test(a.schemeIdUri)){const o=Vm(a,t);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const d=a.payload;s.samples.push({data:d,len:d.byteLength,dts:o,pts:o,type:Yt.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=Vm(a,t);s.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Yt.misbklv,duration:Number.POSITIVE_INFINITY})}})}return s}demuxSampleAes(e,t,s){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Vm(i,e){return Y(i.presentationTime)?i.presentationTime/i.timeScale:e+i.presentationTimeDelta/i.timeScale}class c6{constructor(e,t,s){this.keyData=void 0,this.decrypter=void 0,this.keyData=s,this.decrypter=new d0(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,hr.cbc)}decryptAacSample(e,t,s){const r=e[t].unit;if(r.length<=16)return;const n=r.subarray(16,r.length-r.length%16),a=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,s)})}decryptAacSamples(e,t,s){for(;;t++){if(t>=e.length){s();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,s),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,s=new Int8Array(t);let r=0;for(let n=32;n<e.length-16;n+=160,r+=16)s.set(e.subarray(n,n+16),r);return s}getAvcDecryptedUnit(e,t){const s=new Uint8Array(t);let r=0;for(let n=32;n<e.length-16;n+=160,r+=16)e.set(s.subarray(r,r+16),n);return e}decryptAvcSample(e,t,s,r,n){const a=_v(n.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{n.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,s+1,r)})}decryptAvcSamples(e,t,s,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,s=0){if(t>=e.length){r();return}const n=e[t].units;for(;!(s>=n.length);s++){const a=n[s];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,s,r,a),!this.decrypter.isSync()))return}}}}class a2{constructor(){this.VideoSample=null}createVideoSample(e,t,s){return{key:e,frame:!1,pts:t,dts:s,units:[],length:0}}getLastNalUnit(e){var t;let s=this.VideoSample,r;if((!s||s.units.length===0)&&(s=e[e.length-1]),(t=s)!=null&&t.units){const n=s.units;r=n[n.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const s=t.samples,r=s.length;if(r){const n=s[r-1];e.pts=n.pts,e.dts=n.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,s){const r=t.byteLength;let n=e.naluState||0;const a=n,o=[];let l=0,d,u,c,h=-1,f=0;for(n===-1&&(h=0,f=this.getNALuType(t,0),n=0,l=1);l<r;){if(d=t[l++],!n){n=d?0:1;continue}if(n===1){n=d?0:2;continue}if(!d)n=3;else if(d===1){if(u=l-n-1,h>=0){const m={data:t.subarray(h,u),type:f};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(a&&l<=4-a&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-a)),u>0&&(m.data=ui(m.data,t.subarray(0,u)),m.state=0))}l<r?(c=this.getNALuType(t,l),h=l,f=c,n=0):n=-1}else n=0}if(h>=0&&n>=0){const m={data:t.subarray(h,r),type:f,state:n};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=ui(m.data,t))}return e.naluState=n,o}}class ho{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,s=e.byteLength-t,r=new Uint8Array(4),n=Math.min(4,t);if(n===0)throw new Error("no bytes available");r.set(e.subarray(s,s+n)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=n*8,this.bytesAvailable-=n}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const s=this.word>>>32-t;if(e>32&&ke.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?s<<t|this.readBits(t):s}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Gm extends a2{parsePES(e,t,s,r){const n=this.parseNALu(e,s.data,r);let a=this.VideoSample,o,l=!1;s.data=null,a&&n.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts)),n.forEach(d=>{var u,c;switch(d.type){case 1:{let p=!1;o=!0;const g=d.data;if(l&&g.length>4){const v=this.readSliceType(g);(v===2||v===4||v===7||v===9)&&(p=!0)}if(p){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts)),a.frame=!0,a.key=p;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,n0(d.data,1,s.pts,t.samples);break}case 7:{var f,m;o=!0,l=!0;const p=d.data,g=this.readSPS(p);if(!e.sps||e.width!==g.width||e.height!==g.height||((f=e.pixelRatio)==null?void 0:f[0])!==g.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[p];const v=p.subarray(1,4);let b="avc1.";for(let E=0;E<3;E++){let T=v[E].toString(16);T.length<2&&(T="0"+T),b+=T}e.codec=b}break}case 8:o=!0,e.pps=[d.data];break;case 9:o=!0,e.audFound=!0,(c=a)!=null&&c.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(d)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new ho(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let s=8,r=8,n;for(let a=0;a<e;a++)r!==0&&(n=t.readEG(),r=(s+n+256)%256),s=r===0?s:r}readSPS(e){const t=new ho(e);let s=0,r=0,n=0,a=0,o,l,d;const u=t.readUByte.bind(t),c=t.readBits.bind(t),h=t.readUEG.bind(t),f=t.readBoolean.bind(t),m=t.skipBits.bind(t),p=t.skipEG.bind(t),g=t.skipUEG.bind(t),v=this.skipScalingList.bind(this);u();const b=u();if(c(5),m(3),u(),g(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const C=h();if(C===3&&m(1),g(),g(),m(1),f())for(l=C!==3?8:12,d=0;d<l;d++)f()&&(d<6?v(16,t):v(64,t))}g();const E=h();if(E===0)h();else if(E===1)for(m(1),p(),p(),o=h(),d=0;d<o;d++)p();g(),m(1);const T=h(),x=h(),R=c(1);R===0&&m(1),m(1),f()&&(s=h(),r=h(),n=h(),a=h());let I=[1,1];if(f()&&f())switch(u()){case 1:I=[1,1];break;case 2:I=[12,11];break;case 3:I=[10,11];break;case 4:I=[16,11];break;case 5:I=[40,33];break;case 6:I=[24,11];break;case 7:I=[20,11];break;case 8:I=[32,11];break;case 9:I=[80,33];break;case 10:I=[18,11];break;case 11:I=[15,11];break;case 12:I=[64,33];break;case 13:I=[160,99];break;case 14:I=[4,3];break;case 15:I=[3,2];break;case 16:I=[2,1];break;case 255:{I=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((T+1)*16-s*2-r*2),height:(2-R)*(x+1)*16-(R?2:4)*(n+a),pixelRatio:I}}}class Km extends a2{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,s,r){const n=this.parseNALu(e,s.data,r);let a=this.VideoSample,o,l=!1;s.data=null,a&&n.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts)),n.forEach(d=>{var u,c;switch(d.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,n0(d.data,2,s.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Ne(e.params,this.readVPS(d.data)),this.initVPS=d.data),e.vps=[d.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],d.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const f=this.readSPS(d.data);e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.codec=f.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const m in f.params)e.params[m]=f.params[m]}this.pushParameterSet(e.sps,d.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,s.pts,s.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const f=this.readPPS(d.data);for(const m in f)e.params[m]=f[m]}this.pushParameterSet(e.pps,d.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(c=a)!=null&&c.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,s.pts,s.dts));break;default:o=!1;break}a&&o&&a.units.push(d)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,s){(s&&s[0]===this.initVPS||!s&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let s=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(t[s]=e[r],s++);return new Uint8Array(t.buffer,0,s)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new ho(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const s=t.readBits(3),r=t.readBoolean();return{numTemporalLayers:s+1,temporalIdNested:r}}readSPS(e){const t=new ho(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const s=t.readBits(3);t.readBoolean();const r=t.readBits(2),n=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),l=t.readUByte(),d=t.readUByte(),u=t.readUByte(),c=t.readUByte(),h=t.readUByte(),f=t.readUByte(),m=t.readUByte(),p=t.readUByte(),g=t.readUByte(),v=t.readUByte(),b=[],E=[];for(let Se=0;Se<s;Se++)b.push(t.readBoolean()),E.push(t.readBoolean());if(s>0)for(let Se=s;Se<8;Se++)t.readBits(2);for(let Se=0;Se<s;Se++)b[Se]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),E[Se]&&t.readUByte();t.readUEG();const T=t.readUEG();T==3&&t.skipBits(1);const x=t.readUEG(),R=t.readUEG(),I=t.readBoolean();let C=0,L=0,S=0,w=0;I&&(C+=t.readUEG(),L+=t.readUEG(),S+=t.readUEG(),w+=t.readUEG());const F=t.readUEG(),G=t.readUEG(),K=t.readUEG(),V=t.readBoolean();for(let Se=V?0:s;Se<=s;Se++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let gt=0;gt<4;gt++)for(let Pt=0;Pt<(gt===3?2:6);Pt++)if(!t.readBoolean())t.readUEG();else{const Xt=Math.min(64,1<<4+(gt<<1));gt>1&&t.readEG();for(let Ce=0;Ce<Xt;Ce++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const $=t.readUEG();let re=0;for(let Se=0;Se<$;Se++){let gt=!1;if(Se!==0&&(gt=t.readBoolean()),gt){Se===$&&t.readUEG(),t.readBoolean(),t.readUEG();let Pt=0;for(let Li=0;Li<=re;Li++){const Xt=t.readBoolean();let Ce=!1;Xt||(Ce=t.readBoolean()),(Xt||Ce)&&Pt++}re=Pt}else{const Pt=t.readUEG(),Li=t.readUEG();re=Pt+Li;for(let Xt=0;Xt<Pt;Xt++)t.readUEG(),t.readBoolean();for(let Xt=0;Xt<Li;Xt++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Se=t.readUEG();for(let gt=0;gt<Se;gt++){for(let Pt=0;Pt<K+4;Pt++)t.readBits(1);t.readBits(1)}}let W=0,B=1,oe=1,fe=!0,ye=1,X=0;t.readBoolean(),t.readBoolean();let be=!1;if(t.readBoolean()){if(t.readBoolean()){const Ht=t.readUByte(),zo=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ln=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ht>0&&Ht<16?(B=zo[Ht-1],oe=ln[Ht-1]):Ht===255&&(B=t.readBits(16),oe=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),be=t.readBoolean(),be&&(C+=t.readUEG(),L+=t.readUEG(),S+=t.readUEG(),w+=t.readUEG()),t.readBoolean()&&(ye=t.readBits(32),X=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const ln=t.readBoolean(),Qo=t.readBoolean();let pr=!1;(ln||Qo)&&(pr=t.readBoolean(),pr&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),pr&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Xo=0;Xo<=s;Xo++){fe=t.readBoolean();const dc=fe||t.readBoolean();let Jo=!1;dc?t.readEG():Jo=t.readBoolean();const kt=Jo?1:t.readUEG()+1;if(ln)for(let Je=0;Je<kt;Je++)t.readUEG(),t.readUEG(),pr&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(Qo)for(let Je=0;Je<kt;Je++)t.readUEG(),t.readUEG(),pr&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),W=t.readUEG())}let ze=x,nt=R;if(I||be){let Se=1,gt=1;T===1?Se=gt=2:T==2&&(Se=2),ze=x-Se*L-Se*C,nt=R-gt*w-gt*S}const Bt=r?["A","B","C"][r]:"",xs=o<<24|l<<16|d<<8|u;let an=0;for(let Se=0;Se<32;Se++)an=(an|(xs>>Se&1)<<31-Se)>>>0;let on=an.toString(16);return a===1&&on==="2"&&(on="6"),{codecString:`hvc1.${Bt}${a}.${on}.${n?"H":"L"}${v}.B0`,params:{general_tier_flag:n,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[o,l,d,u],general_constraint_indicator_flags:[c,h,f,m,p,g],general_level_idc:v,bit_depth:F+8,bit_depth_luma_minus8:F,bit_depth_chroma_minus8:G,min_spatial_segmentation_idc:W,chroma_format_idc:T,frame_rate:{fixed:fe,fps:X/ye}},width:ze,height:nt,pixelRatio:[B,oe]}}readPPS(e){const t=new ho(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),n=t.readBoolean();let a=1;return n&&r?a=0:n?a=3:r&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const _t=188;class Ks{constructor(e,t,s,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=s,this.logger=r,this.videoParser=null}static probe(e,t){const s=Ks.syncOffset(e);return s>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${s}`),s!==-1}static syncOffset(e){const t=e.length;let s=Math.min(_t*5,t-_t)+1,r=0;for(;r<s;){let n=!1,a=-1,o=0;for(let l=r;l<t;l+=_t)if(e[l]===71&&(t-l===_t||e[l+_t]===71)){if(o++,a===-1&&(a=l,a!==0&&(s=Math.min(a+_t*99,e.length-_t)+1)),n||(n=bh(e,l)===0),n&&o>1&&(a===0&&o>2||l+_t>s))return a}else{if(o)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Ev[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,s,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ks.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=Ks.createTrack("audio",r),this._id3Track=Ks.createTrack("id3"),this._txtTrack=Ks.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:s}=this;e&&(e.pesData=null),t&&(t.pesData=null),s&&(s.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,s=!1,r=!1){s||(this.sampleAes=null);let n;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,d=this._txtTrack;let u=a.pid,c=a.pesData,h=o.pid,f=l.pid,m=o.pesData,p=l.pesData,g=null,v=this.pmtParsed,b=this._pmtId,E=e.length;if(this.remainderData&&(e=ui(this.remainderData,e),E=e.length,this.remainderData=null),E<_t&&!r)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:d};const T=Math.max(0,Ks.syncOffset(e));E-=(E-T)%_t,E<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let x=0;for(let I=T;I<E;I+=_t)if(e[I]===71){const C=!!(e[I+1]&64),L=bh(e,I),S=(e[I+3]&48)>>4;let w;if(S>1){if(w=I+5+e[I+4],w===I+_t)continue}else w=I+4;switch(L){case u:if(C){if(c&&(n=cn(c,this.logger))){if(this.videoParser===null)switch(a.segmentCodec){case"avc":this.videoParser=new Gm;break;case"hevc":this.videoParser=new Km;break}this.videoParser!==null&&this.videoParser.parsePES(a,d,n,!1)}c={data:[],size:0}}c&&(c.data.push(e.subarray(w,I+_t)),c.size+=I+_t-w);break;case h:if(C){if(m&&(n=cn(m,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,n);break;case"mp3":this.parseMPEGPES(o,n);break;case"ac3":this.parseAC3PES(o,n);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(w,I+_t)),m.size+=I+_t-w);break;case f:C&&(p&&(n=cn(p,this.logger))&&this.parseID3PES(l,n),p={data:[],size:0}),p&&(p.data.push(e.subarray(w,I+_t)),p.size+=I+_t-w);break;case 0:C&&(w+=e[w]+1),b=this._pmtId=h6(e,w);break;case b:{C&&(w+=e[w]+1);const F=f6(e,w,this.typeSupported,s,this.observer,this.logger);u=F.videoPid,u>0&&(a.pid=u,a.segmentCodec=F.segmentVideoCodec),h=F.audioPid,h>0&&(o.pid=h,o.segmentCodec=F.segmentAudioCodec),f=F.id3Pid,f>0&&(l.pid=f),g!==null&&!v&&(this.logger.warn(`MPEG-TS PMT found at ${I} after unknown PID '${g}'. Backtracking to sync byte @${T} to parse all TS packets.`),g=null,I=T-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=L;break}}else x++;x>0&&Th(this.observer,new Error(`Found ${x} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=c,o.pesData=m,l.pesData=p;const R={audioTrack:o,videoTrack:a,id3Track:l,textTrack:d};return r&&this.extractRemainingSamples(R),R}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:s,id3Track:r,textTrack:n}=e,a=s.pesData,o=t.pesData,l=r.pesData;let d;if(a&&(d=cn(a,this.logger))){if(this.videoParser===null)switch(s.segmentCodec){case"avc":this.videoParser=new Gm;break;case"hevc":this.videoParser=new Km;break}this.videoParser!==null&&(this.videoParser.parsePES(s,n,d,!0),s.pesData=null)}else s.pesData=a;if(o&&(d=cn(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(d=cn(l,this.logger))?(this.parseID3PES(r,d),r.pesData=null):r.pesData=l}demuxSampleAes(e,t,s){const r=this.demux(e,s,!0,!this.config.progressive),n=this.sampleAes=new c6(this.observer,this.config,t);return this.decrypt(r,n)}decrypt(e,t){return new Promise(s=>{const{audioTrack:r,videoTrack:n}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{n.samples?t.decryptAvcSamples(n.samples,0,0,()=>{s(e)}):s(e)}):n.samples&&t.decryptAvcSamples(n.samples,0,0,()=>{s(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let s=0;const r=this.aacOverFlow;let n=t.data;if(r){this.aacOverFlow=null;const c=r.missing,h=r.sample.unit.byteLength;if(c===-1)n=ui(r.sample.unit,n);else{const f=h-c;r.sample.unit.set(n.subarray(0,c),f),e.samples.push(r.sample),s=r.missing}}let a,o;for(a=s,o=n.length;a<o-1&&!du(n,a);a++);if(a!==s){let c;const h=a<o-1;if(h?c=`AAC PES did not start with ADTS header,offset:${a}`:c="No ADTS header found in AAC PES",Th(this.observer,new Error(c),h,this.logger),!h)return}Zv(e,this.observer,n,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(r){const c=zv(e.samplerate);l=r.sample.pts+c}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,u;for(;a<o;)if(u=Qv(e,n,a,l,d),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(d++;a<o-1&&!du(n,a);a++);}parseMPEGPES(e,t){const s=t.data,r=s.length;let n=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(i2(s,a)){const l=e2(e,s,a,o,n);if(l)a+=l.length,n++;else break}else a++}parseAC3PES(e,t){{const s=t.data,r=t.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const n=s.length;let a=0,o=0,l;for(;o<n&&(l=n2(e,s,o,r,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const s=Ne({},t,{type:this._videoTrack?Yt.emsg:Yt.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(s)}}function bh(i,e){return((i[e+1]&31)<<8)+i[e+2]}function h6(i,e){return(i[e+10]&31)<<8|i[e+11]}function f6(i,e,t,s,r,n){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(i[e+1]&15)<<8|i[e+2],l=e+3+o-4,d=(i[e+10]&15)<<8|i[e+11];for(e+=12+d;e<l;){const u=bh(i,e),c=(i[e+3]&15)<<8|i[e+4];switch(i[e]){case 207:if(!s){Cc("ADTS AAC",n);break}case 15:a.audioPid===-1&&(a.audioPid=u);break;case 21:a.id3Pid===-1&&(a.id3Pid=u);break;case 219:if(!s){Cc("H.264",n);break}case 27:a.videoPid===-1&&(a.videoPid=u);break;case 3:case 4:!t.mpeg&&!t.mp3?n.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="mp3");break;case 193:if(!s){Cc("AC-3",n);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="ac3"):n.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&c>0){let h=e+5,f=c;for(;f>2;){switch(i[h]){case 106:t.ac3!==!0?n.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=u,a.segmentAudioCodec="ac3");break}const p=i[h+1]+2;h+=p,f-=p}}break;case 194:case 135:return Th(r,new Error("Unsupported EC-3 in M2TS found"),void 0,n),a;case 36:a.videoPid===-1&&(a.videoPid=u,a.segmentVideoCodec="hevc",n.log("HEVC in M2TS found"));break}e+=c+5}return a}function Th(i,e,t,s){s.warn(`parsing error: ${e.message}`),i.emit(y.ERROR,y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Cc(i,e){e.log(`${i} with AES-128-CBC encryption found in unencrypted stream`)}function cn(i,e){let t=0,s,r,n,a,o;const l=i.data;if(!i||i.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=ui(l[0],l[1]),l.splice(1,1);if(s=l[0],(s[0]<<16)+(s[1]<<8)+s[2]===1){if(r=(s[4]<<8)+s[5],r&&r>i.size-6)return null;const u=s[7];u&192&&(a=(s[9]&14)*536870912+(s[10]&255)*4194304+(s[11]&254)*16384+(s[12]&255)*128+(s[13]&254)/2,u&64?(o=(s[14]&14)*536870912+(s[15]&255)*4194304+(s[16]&254)*16384+(s[17]&255)*128+(s[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),n=s[8];let c=n+9;if(i.size<=c)return null;i.size-=c;const h=new Uint8Array(i.size);for(let f=0,m=l.length;f<m;f++){s=l[f];let p=s.byteLength;if(c)if(c>p){c-=p;continue}else s=s.subarray(c),p-=c,c=0;h.set(s,t),t+=p}return r&&(r-=n+3),{data:h,pts:a,dts:o,len:r}}return null}class m6{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ls=Math.pow(2,32)-1;class D{static init(){D.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in D.types)D.types.hasOwnProperty(e)&&(D.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);D.HDLR_TYPES={video:t,audio:s};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);D.STTS=D.STSC=D.STCO=n,D.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),D.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),D.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),D.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);D.FTYP=D.box(D.types.ftyp,a,l,a,o),D.DINF=D.box(D.types.dinf,D.box(D.types.dref,r))}static box(e,...t){let s=8,r=t.length;const n=r;for(;r--;)s+=t[r].byteLength;const a=new Uint8Array(s);for(a[0]=s>>24&255,a[1]=s>>16&255,a[2]=s>>8&255,a[3]=s&255,a.set(e,4),r=0,s=8;r<n;r++)a.set(t[r],s),s+=t[r].byteLength;return a}static hdlr(e){return D.box(D.types.hdlr,D.HDLR_TYPES[e])}static mdat(e){return D.box(D.types.mdat,e)}static mdhd(e,t){t*=e;const s=Math.floor(t/(Ls+1)),r=Math.floor(t%(Ls+1));return D.box(D.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return D.box(D.types.mdia,D.mdhd(e.timescale||0,e.duration||0),D.hdlr(e.type),D.minf(e))}static mfhd(e){return D.box(D.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?D.box(D.types.minf,D.box(D.types.smhd,D.SMHD),D.DINF,D.stbl(e)):D.box(D.types.minf,D.box(D.types.vmhd,D.VMHD),D.DINF,D.stbl(e))}static moof(e,t,s){return D.box(D.types.moof,D.mfhd(e),D.traf(s,t))}static moov(e){let t=e.length;const s=[];for(;t--;)s[t]=D.trak(e[t]);return D.box.apply(null,[D.types.moov,D.mvhd(e[0].timescale||0,e[0].duration||0)].concat(s).concat(D.mvex(e)))}static mvex(e){let t=e.length;const s=[];for(;t--;)s[t]=D.trex(e[t]);return D.box.apply(null,[D.types.mvex,...s])}static mvhd(e,t){t*=e;const s=Math.floor(t/(Ls+1)),r=Math.floor(t%(Ls+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24,s>>16&255,s>>8&255,s&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return D.box(D.types.mvhd,n)}static sdtp(e){const t=e.samples||[],s=new Uint8Array(4+t.length);let r,n;for(r=0;r<t.length;r++)n=t[r].flags,s[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return D.box(D.types.sdtp,s)}static stbl(e){return D.box(D.types.stbl,D.stsd(e),D.box(D.types.stts,D.STTS),D.box(D.types.stsc,D.STSC),D.box(D.types.stsz,D.STSZ),D.box(D.types.stco,D.STCO))}static avc1(e){let t=[],s=[],r,n,a;for(r=0;r<e.sps.length;r++)n=e.sps[r],a=n.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(n));for(r=0;r<e.pps.length;r++)n=e.pps[r],a=n.byteLength,s.push(a>>>8&255),s.push(a&255),s=s.concat(Array.prototype.slice.call(n));const o=D.box(D.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(s))),l=e.width,d=e.height,u=e.pixelRatio[0],c=e.pixelRatio[1];return D.box(D.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,D.box(D.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),D.box(D.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,c>>24,c>>16&255,c>>8&255,c&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return D.box(D.types.mp4a,D.audioStsd(e),D.box(D.types.esds,D.esds(e)))}static mp3(e){return D.box(D.types[".mp3"],D.audioStsd(e))}static ac3(e){return D.box(D.types["ac-3"],D.audioStsd(e),D.box(D.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return D.box(D.types.stsd,D.STSD,D.mp4a(e));if(t==="ac3"&&e.config)return D.box(D.types.stsd,D.STSD,D.ac3(e));if(t==="mp3"&&e.codec==="mp3")return D.box(D.types.stsd,D.STSD,D.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return D.box(D.types.stsd,D.STSD,D.avc1(e));if(t==="hevc"&&e.vps)return D.box(D.types.stsd,D.STSD,D.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,s=(e.duration||0)*(e.timescale||0),r=e.width||0,n=e.height||0,a=Math.floor(s/(Ls+1)),o=Math.floor(s%(Ls+1));return D.box(D.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,n>>8&255,n&255,0,0]))}static traf(e,t){const s=D.sdtp(e),r=e.id,n=Math.floor(t/(Ls+1)),a=Math.floor(t%(Ls+1));return D.box(D.types.traf,D.box(D.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),D.box(D.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,a>>24,a>>16&255,a>>8&255,a&255])),D.trun(e,s.length+16+20+8+16+8+8),s)}static trak(e){return e.duration=e.duration||4294967295,D.box(D.types.trak,D.tkhd(e),D.mdia(e))}static trex(e){const t=e.id;return D.box(D.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const s=e.samples||[],r=s.length,n=12+16*r,a=new Uint8Array(n);let o,l,d,u,c,h;for(t+=8+n,a.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<r;o++)l=s[o],d=l.duration,u=l.size,c=l.flags,h=l.cts,a.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,c.isLeading<<2|c.dependsOn,c.isDependedOn<<6|c.hasRedundancy<<4|c.paddingValue<<1|c.isNonSync,c.degradPrio&61440,c.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return D.box(D.types.trun,a)}static initSegment(e){D.types||D.init();const t=D.moov(e);return ui(D.FTYP,t)}static hvc1(e){const t=e.params,s=[e.vps,e.sps,e.pps],r=4,n=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),r-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),s.length]);let a=n.length;for(let m=0;m<s.length;m+=1){a+=3;for(let p=0;p<s[m].length;p+=1)a+=2+s[m][p].length}const o=new Uint8Array(a);o.set(n,0),a=n.length;const l=s.length-1;for(let m=0;m<s.length;m+=1){o.set(new Uint8Array([32+m|(m===l?128:0),0,s[m].length]),a),a+=3;for(let p=0;p<s[m].length;p+=1)o.set(new Uint8Array([s[m][p].length>>8,s[m][p].length&255]),a),a+=2,o.set(s[m][p],a),a+=s[m][p].length}const d=D.box(D.types.hvcC,o),u=e.width,c=e.height,h=e.pixelRatio[0],f=e.pixelRatio[1];return D.box(D.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,D.box(D.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),D.box(D.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,f>>24,f>>16&255,f>>8&255,f&255])))}}D.types=void 0;D.HDLR_TYPES=void 0;D.STTS=void 0;D.STSC=void 0;D.STCO=void 0;D.STSZ=void 0;D.VMHD=void 0;D.SMHD=void 0;D.STSD=void 0;D.FTYP=void 0;D.DINF=void 0;const o2=9e4;function y0(i,e,t=1,s=!1){const r=i*e*t;return s?Math.round(r):r}function p6(i,e,t=1,s=!1){return y0(i,e,1/t,s)}function xa(i,e=!1){return y0(i,1e3,1/o2,e)}function g6(i,e=1){return y0(i,o2,1/e)}const v6=10*1e3,E6=1024,y6=1152,b6=1536;let hn=null,xc=null;function Wm(i,e,t,s){return{duration:e,size:t,cts:s,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:i?2:1,isNonSync:i?0:1}}}class Bl extends Ii{constructor(e,t,s,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=s,this.ISGenerated=!1,hn===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);hn=a?parseInt(a[1]):0}if(xc===null){const n=navigator.userAgent.match(/Safari\/(\d+)/i);xc=n?parseInt(n[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const s=e[0].pts,r=e.reduce((n,a)=>{let o=a.pts,l=o-n;return l<-4294967296&&(t=!0,o=ni(o,s),l=o-n),l>0?n:o},s);return t&&this.debug("PTS rollover detected"),r}remux(e,t,s,r,n,a,o,l){let d,u,c,h,f,m,p=n,g=n;const v=e.pid>-1,b=t.pid>-1,E=t.samples.length,T=e.samples.length>0,x=o&&E>0||E>1;if((!v||T)&&(!b||x)||this.ISGenerated||o){if(this.ISGenerated){var I,C,L,S;const K=this.videoTrackConfig;(K&&(t.width!==K.width||t.height!==K.height||((I=t.pixelRatio)==null?void 0:I[0])!==((C=K.pixelRatio)==null?void 0:C[0])||((L=t.pixelRatio)==null?void 0:L[1])!==((S=K.pixelRatio)==null?void 0:S[1]))||!K&&x||this.nextAudioTs===null&&T)&&this.resetInitSegment()}this.ISGenerated||(c=this.generateIS(e,t,n,a));const w=this.isVideoContiguous;let F=-1,G;if(x&&(F=T6(t.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,F>0){this.warn(`Dropped ${F} out of ${E} video samples due to a missing keyframe`);const K=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(F),t.dropped+=F,g+=(t.samples[0].pts-K)/t.inputTimeScale,G=g}else F===-1&&(this.warn(`No keyframe found out of ${E} video samples`),m=!1);if(this.ISGenerated){if(T&&x){const K=this.getVideoStartPts(t.samples),q=(ni(e.samples[0].pts,K)-K)/t.inputTimeScale;p+=Math.max(0,q),g+=Math.max(0,-q)}if(T){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),c=this.generateIS(e,t,n,a)),u=this.remuxAudio(e,p,this.isAudioContiguous,a,b||x||l===te.AUDIO?g:void 0),x){const K=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),c=this.generateIS(e,t,n,a)),d=this.remuxVideo(t,g,w,K)}}else x&&(d=this.remuxVideo(t,g,w,0));d&&(d.firstKeyFrame=F,d.independent=F!==-1,d.firstKeyFramePTS=G)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(s.samples.length&&(f=l2(s,n,this._initPTS,this._initDTS)),r.samples.length&&(h=d2(r,n,this._initPTS))),{audio:u,video:d,initSegment:c,independent:m,text:h,id3:f}}generateIS(e,t,s,r){const n=e.samples,a=t.samples,o=this.typeSupported,l={},d=this._initPTS;let u=!d||r,c="audio/mp4",h,f,m,p;if(u&&(h=f=1/0),e.config&&n.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(c="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:c,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):D.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.id,m=e.inputTimeScale,!d||m!==d.timescale?h=f=n[0].pts-Math.round(m*s):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:D.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(p=t.id,m=t.inputTimeScale,!d||m!==d.timescale){const g=this.getVideoStartPts(a),v=Math.round(m*s);f=Math.min(f,ni(a[0].dts,g)-v),h=Math.min(h,g-v)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:m},this._initDTS={baseTime:f,timescale:m}):h=m=void 0,{tracks:l,initPTS:h,timescale:m,trackId:p}}remuxVideo(e,t,s,r){const n=e.inputTimeScale,a=e.samples,o=[],l=a.length,d=this._initPTS,u=d.baseTime*n/d.timescale;let c=this.nextVideoTs,h=8,f=this.videoSampleDuration,m,p,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=!1;if(!s||c===null){const W=u+t*n,B=a[0].pts-ni(a[0].dts,a[0].pts);hn&&c!==null&&Math.abs(W-B-(c+u))<15e3?s=!0:c=W-B-u}const E=c+u;for(let W=0;W<l;W++){const B=a[W];B.pts=ni(B.pts,E),B.dts=ni(B.dts,E),B.dts<a[W>0?W-1:W].dts&&(b=!0)}b&&a.sort(function(W,B){const oe=W.dts-B.dts,fe=W.pts-B.pts;return oe||fe}),m=a[0].dts,p=a[a.length-1].dts;const T=p-m,x=T?Math.round(T/(l-1)):f||e.inputTimeScale/30;if(s){const W=m-E,B=W>x,oe=W<-1;if((B||oe)&&(B?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xa(W,!0)} ms (${W}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xa(-W,!0)} ms (${W}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!oe||E>=a[0].pts||hn)){m=E;const fe=a[0].pts-W;if(B)a[0].dts=m,a[0].pts=fe;else{let ye=!0;for(let X=0;X<a.length&&!(a[X].dts>fe&&ye);X++){const be=a[X].pts;if(a[X].dts-=W,a[X].pts-=W,X<a.length-1){const Fe=a[X+1].pts,ze=a[X].pts,nt=Fe<=ze,Bt=Fe<=be;ye=nt==Bt}}}this.log(`Video: Initial PTS/DTS adjusted: ${xa(fe,!0)}/${xa(m,!0)}, delta: ${xa(W,!0)} ms`)}}m=Math.max(0,m);let R=0,I=0,C=m;for(let W=0;W<l;W++){const B=a[W],oe=B.units,fe=oe.length;let ye=0;for(let X=0;X<fe;X++)ye+=oe[X].data.length;I+=ye,R+=fe,B.length=ye,B.dts<C?(B.dts=C,C+=x/4|0||1):C=B.dts,g=Math.min(B.pts,g),v=Math.max(B.pts,v)}p=a[l-1].dts;const L=I+4*R+8;let S;try{S=new Uint8Array(L)}catch(W){this.observer.emit(y.ERROR,y.ERROR,{type:ne.MUX_ERROR,details:P.REMUX_ALLOC_ERROR,fatal:!1,error:W,bytes:L,reason:`fail allocating video mdat ${L}`});return}const w=new DataView(S.buffer);w.setUint32(0,L),S.set(D.types.mdat,4);let F=!1,G=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY,V=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY;for(let W=0;W<l;W++){const B=a[W],oe=B.units;let fe=0;for(let be=0,Fe=oe.length;be<Fe;be++){const ze=oe[be],nt=ze.data,Bt=ze.data.byteLength;w.setUint32(h,Bt),h+=4,S.set(nt,h),h+=Bt,fe+=4+Bt}let ye;if(W<l-1)f=a[W+1].dts-B.dts,ye=a[W+1].pts-B.pts;else{const be=this.config,Fe=W>0?B.dts-a[W-1].dts:x;if(ye=W>0?B.pts-a[W-1].pts:x,be.stretchShortVideoTrack&&this.nextAudioTs!==null){const ze=Math.floor(be.maxBufferHole*n),nt=(r?g+r*n:this.nextAudioTs+u)-B.pts;nt>ze?(f=nt-Fe,f<0?f=Fe:F=!0,this.log(`It is approximately ${nt/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=Fe}else f=Fe}const X=Math.round(B.pts-B.dts);G=Math.min(G,f),V=Math.max(V,f),K=Math.min(K,ye),q=Math.max(q,ye),o.push(Wm(B.key,f,fe,X))}if(o.length){if(hn){if(hn<70){const W=o[0].flags;W.dependsOn=2,W.isNonSync=0}}else if(xc&&q-K<V-G&&x/V<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let W=m;for(let B=0,oe=o.length;B<oe;B++){const fe=W+o[B].duration,ye=W+o[B].cts;if(B<oe-1){const X=fe+o[B+1].cts;o[B].duration=X-ye}else o[B].duration=B?o[B-1].duration:x;o[B].cts=0,W=fe}}}f=F||!f?x:f;const z=p+f;this.nextVideoTs=c=z-u,this.videoSampleDuration=f,this.isVideoContiguous=!0;const se={data1:D.moof(e.sequenceNumber++,m,Ne(e,{samples:o})),data2:S,startPTS:(g-u)/n,endPTS:(v+f-u)/n,startDTS:(m-u)/n,endDTS:c/n,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,se}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return y6;case"ac3":return b6;default:return E6}}remuxAudio(e,t,s,r,n){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,d=this.getSamplesPerFrame(e),u=d*l,c=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],m=n!==void 0;let p=e.samples,g=h?0:8,v=this.nextAudioTs||-1;const b=c.baseTime*a/c.timescale,E=b+t*a;if(this.isAudioContiguous=s=s||p.length&&v>0&&(r&&Math.abs(E-(v+b))<9e3||Math.abs(ni(p[0].pts,E)-(v+b))<20*u),p.forEach(function(q){q.pts=ni(q.pts,E)}),!s||v<0){if(p=p.filter(q=>q.pts>=0),!p.length)return;n===0?v=0:r&&!m?v=Math.max(0,E-b):v=p[0].pts-b}if(e.segmentCodec==="aac"){const q=this.config.maxAudioFramesDrift;for(let z=0,$=v+b;z<p.length;z++){const re=p[z],se=re.pts,W=se-$,B=Math.abs(1e3*W/a);if(W<=-q*u&&m)z===0&&(this.warn(`Audio frame @ ${(se/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*W/a)} ms.`),this.nextAudioTs=v=se-b,$=se);else if(W>=q*u&&B<v6&&m){let oe=Math.round(W/u);for($=se-oe*u;$<0&&oe&&u;)oe--,$+=u;z===0&&(this.nextAudioTs=v=$-b),this.warn(`Injecting ${oe} audio frames @ ${(($-b)/a).toFixed(3)}s due to ${Math.round(1e3*W/a)} ms gap.`);for(let fe=0;fe<oe;fe++){let ye=m6.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ye||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ye=re.unit.subarray()),p.splice(z,0,{unit:ye,pts:$}),$+=u,z++}}re.pts=$,$+=u}}let T=null,x=null,R,I=0,C=p.length;for(;C--;)I+=p[C].unit.byteLength;for(let q=0,z=p.length;q<z;q++){const $=p[q],re=$.unit;let se=$.pts;if(x!==null){const B=f[q-1];B.duration=Math.round((se-x)/l)}else if(s&&e.segmentCodec==="aac"&&(se=v+b),T=se,I>0){I+=g;try{R=new Uint8Array(I)}catch(B){this.observer.emit(y.ERROR,y.ERROR,{type:ne.MUX_ERROR,details:P.REMUX_ALLOC_ERROR,fatal:!1,error:B,bytes:I,reason:`fail allocating audio mdat ${I}`});return}h||(new DataView(R.buffer).setUint32(0,I),R.set(D.types.mdat,4))}else return;R.set(re,g);const W=re.byteLength;g+=W,f.push(Wm(!0,d,W,0)),x=se}const L=f.length;if(!L)return;const S=f[f.length-1];v=x-b,this.nextAudioTs=v+l*S.duration;const w=h?new Uint8Array(0):D.moof(e.sequenceNumber++,T/l,Ne({},e,{samples:f}));e.samples=[];const F=(T-b)/a,G=v/a,V={data1:w,data2:R,startPTS:F,endPTS:G,startDTS:F,endDTS:G,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.isAudioContiguous=!0,V}}function ni(i,e){let t;if(e===null)return i;for(e<i?t=-8589934592:t=8589934592;Math.abs(i-e)>4294967296;)i+=t;return i}function T6(i){for(let e=0;e<i.length;e++)if(i[e].key)return e;return-1}function l2(i,e,t,s){const r=i.samples.length;if(!r)return;const n=i.inputTimeScale;for(let o=0;o<r;o++){const l=i.samples[o];l.pts=ni(l.pts-t.baseTime*n/t.timescale,e*n)/n,l.dts=ni(l.dts-s.baseTime*n/s.timescale,e*n)/n}const a=i.samples;return i.samples=[],{samples:a}}function d2(i,e,t){const s=i.samples.length;if(!s)return;const r=i.inputTimeScale;for(let a=0;a<s;a++){const o=i.samples[a];o.pts=ni(o.pts-t.baseTime*r/t.timescale,e*r)/r}i.samples.sort((a,o)=>a.pts-o.pts);const n=i.samples;return i.samples=[],{samples:n}}class _6 extends Ii{constructor(e,t,s,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,s,r){this.audioCodec=t,this.videoCodec=s,this.generateInitSegment(mT(e,r)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const r=this.initData=Tv(e);r.audio&&(t=qm(r.audio,Ve.AUDIO,this)),r.video&&(s=qm(r.video,Ve.VIDEO,this));const n={};r.audio&&r.video?n.audiovideo={container:"video/mp4",codec:t+","+s,supplemental:r.video.supplemental,initSegment:e,id:"main"}:r.audio?n.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?n.video={container:"video/mp4",codec:s,supplemental:r.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=n}remux(e,t,s,r,n,a){var o,l;let{initPTS:d,lastEndTime:u}=this;const c={audio:void 0,video:void 0,text:r,id3:s,initSegment:void 0};Y(u)||(u=this.lastEndTime=n||0);const h=t.samples;if(!(h!=null&&h.length))return c;const f={initPTS:void 0,timescale:void 0,trackId:void 0};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return this.warn("Failed to generate initSegment."),c;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const p=gT(h,m,this),g=m.audio?p[m.audio.id]:null,v=m.video?p[m.video.id]:null,b=hl(v,1/0),E=hl(g,1/0),T=hl(v,0,!0),x=hl(g,0,!0);let R,I=n,C=0;if(g&&(!v||!d&&E<b||d&&d.trackId===m.audio.id)?(f.trackId=m.audio.id,R=g,C=x-E):v&&(f.trackId=m.video.id,R=v,C=T-b),R){const q=R.timescale;I=R.start/q,f.initPTS=R.start-n*q,f.timescale=q,d||(this.initPTS=d={baseTime:f.initPTS,timescale:q,trackId:f.trackId})}(a||!d)&&(A6(d,I,n,C)||f.timescale!==d.timescale)&&(f.initPTS=I-n,f.timescale=1,d&&d.timescale===1&&this.warn(`Adjusting initPTS @${n} from ${d.baseTime/d.timescale} to ${f.initPTS}`),this.initPTS=d={baseTime:f.initPTS,timescale:1});const L=e?I-d.baseTime/d.timescale:u,S=L+C;C>0?this.lastEndTime=S:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const w=!!m.audio,F=!!m.video;let G="";w&&(G+="audio"),F&&(G+="video");const K={data1:h,startPTS:L,startDTS:L,endPTS:S,endDTS:S,type:G,hasAudio:w,hasVideo:F,nb:1,dropped:0};c.audio=w&&!F?K:void 0,c.video=F?K:void 0;const V=v==null?void 0:v.sampleCount;if(V){const q=v.keyFrameIndex,z=q!==-1;K.nb=V,K.dropped=q===0||this.isVideoContiguous?0:z?q:V,K.independent=z,K.firstKeyFrame=q,z&&v.keyFrameStart&&(K.firstKeyFramePTS=(v.keyFrameStart-d.baseTime)/d.timescale),this.isVideoContiguous||(c.independent=z),this.isVideoContiguous||(this.isVideoContiguous=z),K.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${q}/${V} dropped: ${K.dropped} start: ${K.firstKeyFramePTS||"NA"}`)}return c.initSegment=f,c.id3=l2(s,n,d,d),r.samples.length&&(c.text=d2(r,n,d)),c}}function hl(i,e,t=!1){return(i==null?void 0:i.start)!==void 0?(i.start+(t?i.duration:0))/i.timescale:e}function A6(i,e,t,s){if(i===null)return!0;const r=Math.max(s,1),n=e-i.baseTime/i.timescale;return Math.abs(n-t)>r}function qm(i,e,t){const s=i==null?void 0:i.codec;return s&&s.length>4?s:e===Ve.AUDIO?s==="ec-3"||s==="ac-3"||s==="alac"?s:s==="fLaC"||s==="Opus"?iu(s,!1):(t.warn(`Unhandled audio codec "${s}" in mp4 MAP`),s||"mp4a"):(t.warn(`Unhandled video codec "${s}" in mp4 MAP`),s||"avc1")}let fs;try{fs=self.performance.now.bind(self.performance)}catch{fs=Date.now}const Hl=[{demux:u6,remux:_6},{demux:Ks,remux:Bl},{demux:a6,remux:Bl},{demux:l6,remux:Bl}];Hl.splice(2,0,{demux:o6,remux:Bl});class jm{constructor(e,t,s,r,n,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=s,this.id=n,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,s,r){const n=s.transmuxing;n.executeStart=fs();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:d,discontinuity:u,trackSwitch:c,accurateTimeOffset:h,timeOffset:f,initSegmentChange:m}=r||o,{audioCodec:p,videoCodec:g,defaultInitPts:v,duration:b,initSegmentData:E}=l,T=S6(a,t);if(T&&jn(T.method)){const C=this.getDecrypter(),L=c0(T.method);if(C.isSync()){let S=C.softwareDecrypt(a,T.key.buffer,T.iv.buffer,L);if(s.part>-1){const F=C.flush();S=F&&F.buffer}if(!S)return n.executeEnd=fs(),Ic(s);a=new Uint8Array(S)}else return this.asyncResult=!0,this.decryptionPromise=C.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer,L).then(S=>{const w=this.push(S,null,s);return this.decryptionPromise=null,w}),this.decryptionPromise}const x=this.needsProbing(u,c);if(x){const C=this.configureTransmuxer(a);if(C)return this.logger.warn(`[transmuxer] ${C.message}`),this.observer.emit(y.ERROR,y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message}),n.executeEnd=fs(),Ic(s)}(u||c||m||x)&&this.resetInitSegment(E,p,g,b,t),(u||m||x)&&this.resetInitialTimestamp(v),d||this.resetContiguity();const R=this.transmux(a,T,f,h,s);this.asyncResult=wo(R);const I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,n.executeEnd=fs(),R}flush(e){const t=e.transmuxing;t.executeStart=fs();const{decrypter:s,currentTransmuxState:r,decryptionPromise:n}=this;if(n)return this.asyncResult=!0,n.then(()=>this.flush(e));const a=[],{timeOffset:o}=r;if(s){const c=s.flush();c&&a.push(this.push(c.buffer,null,e))}const{demuxer:l,remuxer:d}=this;if(!l||!d){t.executeEnd=fs();const c=[Ic(e)];return this.asyncResult?Promise.resolve(c):c}const u=l.flush(o);return wo(u)?(this.asyncResult=!0,u.then(c=>(this.flushRemux(a,c,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,s){const{audioTrack:r,videoTrack:n,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:d}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${s.sn}${s.part>-1?" part: "+s.part:""} of ${this.id===te.MAIN?"level":"track"} ${s.level}`);const u=this.remuxer.remux(r,n,a,o,d,l,!0,this.id);e.push({remuxResult:u,chunkMeta:s}),s.transmuxing.executeEnd=fs()}resetInitialTimestamp(e){const{demuxer:t,remuxer:s}=this;!t||!s||(t.resetTimeStamp(e),s.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,s,r,n){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,s,r),o.resetInitSegment(e,t,s,n))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,s,r,n){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,s,r,n):a=this.transmuxUnencrypted(e,s,r,n),a}transmuxUnencrypted(e,t,s,r){const{audioTrack:n,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(n,a,o,l,t,s,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,s,r,n){return this.demuxer.demuxSampleAes(e,t,s).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,s,r,!1,this.id),chunkMeta:n}))}configureTransmuxer(e){const{config:t,observer:s,typeSupported:r}=this;let n;for(let c=0,h=Hl.length;c<h;c++){var a;if((a=Hl[c].demux)!=null&&a.probe(e,this.logger)){n=Hl[c];break}}if(!n)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,d=n.remux,u=n.demux;(!l||!(l instanceof d))&&(this.remuxer=new d(s,t,r,this.logger)),(!o||!(o instanceof u))&&(this.demuxer=new u(s,t,r,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new d0(this.config)),e}}function S6(i,e){let t=null;return i.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Ic=i=>({remuxResult:{},chunkMeta:i});function wo(i){return"then"in i&&i.then instanceof Function}class C6{constructor(e,t,s,r,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=s,this.duration=r,this.defaultInitPts=n||null}}class x6{constructor(e,t,s,r,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=s,this.trackSwitch=r,this.timeOffset=n,this.initSegmentChange=a}}let Ym=0;class u2{constructor(e,t,s,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Ym++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const d=l.data,u=this.hls;if(!(!u||!(d!=null&&d.event)||d.instanceNo!==this.instanceNo))switch(d.event){case"init":{var c;const h=(c=this.workerContext)==null?void 0:c.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":{u.logger[d.data.logType]&&u.logger[d.data.logType](d.data.message);break}default:{d.data=d.data||{},d.data.frag=this.frag,d.data.part=this.part,d.data.id=this.id,u.trigger(d.event,d.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const d=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})};const n=e.config;this.hls=e,this.id=t,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=s,this.onFlush=r;const a=(l,d)=>{d=d||{},d.frag=this.frag||void 0,l===y.ERROR&&(d=d,d.parent=this.id,d.part=this.part,this.error=d.error),this.hls.trigger(l,d)};this.observer=new f0,this.observer.on(y.FRAG_DECRYPTED,a),this.observer.on(y.ERROR,a);const o=um(n.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(n.workerPath||D8()){try{n.workerPath?(l.log(`loading Web Worker ${n.workerPath} for "${t}"`),this.workerContext=P8(n.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=M8());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:Xe(n)})}catch(u){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new jm(this.observer,o,n,"",t,e.logger)}return}}this.transmuxer=new jm(this.observer,o,n,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Ym++;const t=this.hls.config,s=um(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:s,id:this.id,config:Xe(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),O8(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,s,r,n,a,o,l,d,u){var c,h;d.transmuxing.start=self.performance.now();const{instanceNo:f,transmuxer:m}=this,p=a?a.start:n.start,g=n.decryptdata,v=this.frag,b=!(v&&n.cc===v.cc),E=!(v&&d.level===v.level),T=v?d.sn-v.sn:-1,x=this.part?d.part-this.part.index:-1,R=T===0&&d.id>1&&d.id===(v==null?void 0:v.stats.chunkCount),I=!E&&(T===1||T===0&&(x===1||R&&x<=0)),C=self.performance.now();(E||T||n.stats.parsing.start===0)&&(n.stats.parsing.start=C),a&&(x||!I)&&(a.stats.parsing.start=C);const L=!(v&&((c=n.initSegment)==null?void 0:c.url)===((h=v.initSegment)==null?void 0:h.url)),S=new x6(b,I,l,E,p,L);if(!I||b||L){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${n.type} sn: ${d.sn}${d.part>-1?" part: "+d.part:""} ${this.id===te.MAIN?"level":"track"}: ${d.level} id: ${d.id}
        discontinuity: ${b}
        trackSwitch: ${E}
        contiguous: ${I}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${L}`);const w=new C6(s,r,t,o,u);this.configureTransmuxer(w)}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:e,decryptdata:g,chunkMeta:d,state:S},e instanceof ArrayBuffer?[e]:[]);else if(m){const w=m.push(e,g,d,S);wo(w)?w.then(F=>{this.handleTransmuxComplete(F)}).catch(F=>{this.transmuxerError(F,d,"transmuxer-interface push error")}):this.handleTransmuxComplete(w)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:s}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(s){const r=s.flush(e);wo(r)?r.then(n=>{this.handleFlushResult(n,e)}).catch(n=>{this.transmuxerError(n,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,t,s){this.hls&&(this.error=e,this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:s}))}handleFlushResult(e,t){e.forEach(s=>{this.handleTransmuxComplete(s)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:s}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):s&&s.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Zm=100;class I6 extends h0{constructor(e,t,s){super(e,t,s,"audio-stream-controller",te.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(y.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(y.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(y.BUFFER_RESET,this.onBufferReset,this),e.on(y.BUFFER_CREATED,this.onBufferCreated,this),e.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(y.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(y.FRAG_LOADING,this.onFragLoading,this),e.on(y.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(y.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(y.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(y.BUFFER_RESET,this.onBufferReset,this),e.off(y.BUFFER_CREATED,this.onBufferCreated,this),e.off(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(y.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(y.FRAG_LOADING,this.onFragLoading,this),e.off(y.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:s,initPTS:r,timescale:n}){if(s===te.MAIN){const a=t.cc,o=this.fragCurrent;if(this.initPTS[a]={baseTime:r,timescale:n},this.log(`InitPTS for cc: ${a} found from main: ${r}/${n}`),this.mainAnchor=t,this.state===U.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==a)&&this.syncWithAnchor(t,l==null?void 0:l.frag)}else!this.hls.hasEnoughToStart&&o&&o.cc!==a?(o.abortRequests(),this.syncWithAnchor(t,o)):this.state===U.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var s;const r=((s=this.mainFragLoading)==null?void 0:s.frag)||null;if(t&&(r==null?void 0:r.cc)===t.cc)return;const n=(r||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),l=kv(a,n,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===U.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=U.STOPPED;return}const s=this.lastCurrentTime;this.stopLoad(),this.setInterval(Zm),s>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${s.toFixed(3)}`),e=s,this.state=U.IDLE):this.state=U.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case U.IDLE:this.doTickIdle();break;case U.WAITING_TRACK:{const{levels:t,trackId:s}=this,r=t==null?void 0:t[s],n=r==null?void 0:r.details;if(n&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(n))break;this.state=U.WAITING_INIT_PTS}break}case U.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),s=this.retryDate;if(!s||t>=s||(e=this.media)!=null&&e.seeking){const{levels:r,trackId:n}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((r==null?void 0:r[n])||null),this.state=U.IDLE}break}case U.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:s,part:r,cache:n,complete:a}=t,o=this.mainAnchor;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.state=U.FRAG_LOADING;const l=n.flush().buffer,d={frag:s,part:r,payload:l,networkDetails:null};this._handleFragmentLoadProgress(d),a&&super._handleFragmentLoadComplete(d)}else o&&o.cc!==t.frag.cc&&this.syncWithAnchor(o,t.frag)}else this.state=U.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:s,media:r,trackId:n}=this,a=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(s!=null&&s[n]))return;const o=s[n],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=U.WAITING_TRACK,this.startFragRequested=!1;return}const d=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&d&&(this.bufferFlushed=!1,this.afterBufferFlushed(d,Ve.AUDIO,te.AUDIO));const u=this.getFwdBufferInfo(d,te.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){t.trigger(y.BUFFER_EOS,{type:"audio"}),this.state=U.ENDED;return}const c=u.len,h=t.maxBufferLength,f=l.fragments,m=f[0].start,p=this.getLoadPosition(),g=this.flushing?p:u.end;if(this.switchingTrack&&r){const E=p;l.PTSKnown&&E<m&&(u.end>m||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(c>=h&&!this.switchingTrack&&g<f[f.length-1].start)return;let v=this.getNextFragment(g,l);if(v&&this.isLoopLoading(v,g)&&(v=this.getNextFragmentLoopLoading(v,l,u,te.MAIN,h)),!v){this.bufferFlushed=!0;return}let b=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&b&&mt(v)&&!v.endList&&(!l.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(b)===yt.OK&&(this.mainFragLoading=b=null),b&&mt(b))){if(v.start>b.end){const T=this.fragmentTracker.getFragAtPos(g,te.MAIN);T&&T.end>b.end&&(b=T,this.mainFragLoading={frag:T,targetBufferTime:null})}if(v.start>b.end)return}this.loadFragment(v,o,g)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(s=>new Io(s))}onAudioTrackSwitching(e,t){const s=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),s?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==U.STOPPED&&(this.setInterval(Zm),this.state=U.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const s=this.cachedTrackLoadedData;s&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(y.AUDIO_TRACK_LOADED,s))}onAudioTrackLoaded(e,t){var s;const{levels:r}=this,{details:n,id:a,groupId:o,track:l}=t;if(!r){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const d=this.mainDetails;if(!d||n.endCC>d.endCC||d.expired){this.cachedTrackLoadedData=t,this.state!==U.STOPPED&&(this.state=U.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`);const u=r[a];let c=0;if(n.live||(s=u.details)!=null&&s.live){if(this.checkLiveUpdate(n),n.deltaUpdateFailed)return;if(u.details){var h;c=this.alignPlaylists(n,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}n.alignedSliding||(Kv(n,d),n.alignedSliding||lu(n,d),c=n.fragmentStart)}u.details=n,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(d,c),this.hls.trigger(y.AUDIO_TRACK_UPDATED,{details:n,id:a,groupId:t.groupId}),this.state===U.WAITING_TRACK&&!this.waitForCdnTuneIn(n)&&(this.state=U.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const s=e.frag,{part:r,payload:n}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const d=l[o];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const u=d.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(s.start);return}const c=a.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new u2(this.hls,te.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[s.cc],m=(t=s.initSegment)==null?void 0:t.data;if(f!==void 0){const g=r?r.index:-1,v=g!==-1,b=new u0(s.level,s.sn,s.stats.chunkCount,n.byteLength,g,v);h.push(n,m,c,"",s,r,u.totalduration,!1,b,f)}else{this.log(`Unknown video PTS for cc ${s.cc}, waiting for video PTS before demuxing audio frag ${s.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:p}=this.waitingData=this.waitingData||{frag:s,part:r,cache:new Wv,complete:!1};p.push(new Uint8Array(n)),this.state!==U.STOPPED&&(this.state=U.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const s=t.tracks.audio;s&&(this.mediaBuffer=s.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===te.MAIN&&mt(t.frag)&&(this.mainFragLoading=t,this.state===U.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:s,part:r}=t;if(s.type!==te.AUDIO){!this.audioOnly&&s.type===te.MAIN&&!s.elementaryStreams.video&&!s.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${r?" p: "+r.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(mt(s)){this.fragPrevious=s;const n=this.switchingTrack;n&&(this.bufferedTrack=n,this.switchingTrack=null,this.hls.trigger(y.AUDIO_TRACK_SWITCHED,Ue({},n)))}this.fragBufferedComplete(s,r),this.media&&this.tick()}onError(e,t){var s;if(t.fatal){this.state=U.ERROR;return}switch(t.details){case P.FRAG_GAP:case P.FRAG_PARSING_ERROR:case P.FRAG_DECRYPT_ERROR:case P.FRAG_LOAD_ERROR:case P.FRAG_LOAD_TIMEOUT:case P.KEY_LOAD_ERROR:case P.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(te.AUDIO,t);break;case P.AUDIO_TRACK_LOAD_ERROR:case P.AUDIO_TRACK_LOAD_TIMEOUT:case P.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===U.WAITING_TRACK&&((s=t.context)==null?void 0:s.type)===_e.AUDIO_TRACK&&(this.state=U.IDLE);break;case P.BUFFER_ADD_CODEC_ERROR:case P.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case P.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case P.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Ve.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Ve.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===U.ENDED&&(this.state=U.IDLE);const s=this.mediaBuffer||this.media;s&&(this.afterBufferFlushed(s,t,te.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const s="audio",{hls:r}=this,{remuxResult:n,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:d,level:u}=o,{details:c}=u,{audio:h,text:f,id3:m,initSegment:p}=n;if(this.fragContextChanged(l)||!c){this.fragmentTracker.removeFragment(l);return}if(this.state=U.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),p!=null&&p.tracks){const g=l.initSegment||l;this._bufferInitSegment(u,p.tracks,g,a),r.trigger(y.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:s,tracks:p.tracks})}if(h){const{startPTS:g,endPTS:v,startDTS:b,endDTS:E}=h;d&&(d.elementaryStreams[Ve.AUDIO]={startPTS:g,endPTS:v,startDTS:b,endDTS:E}),l.setElementaryStreamInfo(Ve.AUDIO,g,v,b,E),this.bufferFragmentData(h,l,d,a)}if(m!=null&&(t=m.samples)!=null&&t.length){const g=Ne({id:s,frag:l,details:c},m);r.trigger(y.FRAG_PARSING_METADATA,g)}if(f){const g=Ne({id:s,frag:l,details:c},f);r.trigger(y.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,t,s,r){if(this.state!==U.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const n=t.audio;n.id=te.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${n.container}, codecs[level/parsed]=[${a}/${n.codec}]`),a&&a.split(",").length===1&&(n.levelCodec=a),this.hls.trigger(y.BUFFER_CODECS,t);const o=n.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:s,part:null,chunkMeta:r,parent:s.type,data:o};this.hls.trigger(y.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,s){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===yt.NOT_LOADED||r===yt.PARTIAL){var n;if(!mt(e))this._loadInitSegment(e,t);else if((n=t.details)!=null&&n.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=U.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&lu(t.details,a)}else super.loadFragment(e,t,s)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:s,assocLang:r,characteristics:n,audioCodec:a,channels:o}=this.bufferedTrack;jr({name:t,lang:s,assocLang:r,characteristics:n,audioCodec:a,channels:o},e,Ar)||(ru(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(y.AUDIO_TRACK_SWITCHED,Ue({},e))}}class b0 extends Ii{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,s){const r=t==null?void 0:t.renditionReports;if(r){let n=-1;for(let a=0;a<r.length;a++){const o=r[a];let l;try{l=new self.URL(o.URI,t.url).href}catch(d){this.warn(`Could not construct new URL for Rendition Report: ${d}`),l=o.URI||""}if(l===e){n=a;break}else l===e.substring(0,l.length)&&(n=a)}if(n!==-1){const a=r[n],o=parseInt(a["LAST-MSN"])||(t==null?void 0:t.lastPartSn);let l=parseInt(a["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const d=s&&cm(s);return new hm(o,l>=0?l:void 0,d)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(s){this.warn(`Could not construct new URL with HLS Delivery Directives: ${s}`)}return e}playlistLoaded(e,t,s){const{details:r,stats:n}=t,a=self.performance.now(),o=n.loading.first?Math.max(0,a-n.loading.first):0;r.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==r.appliedTimelineOffset){const u=Math.max(l||0,0);r.appliedTimelineOffset=u,r.fragments.forEach(c=>{c.start=c.playlistOffset+u})}if(r.live||s!=null&&s.live){const u="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(s),s&&r.fragments.length>0){_8(s,r);const b=r.playlistParsingError;if(b){this.warn(b);const E=this.hls;if(!E.config.ignorePlaylistParsingErrors){var d;const{networkDetails:T}=t;E.trigger(y.ERROR,{type:ne.NETWORK_ERROR,details:P.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:b,reason:b.message,level:t.level||void 0,parent:(d=r.fragments[0])==null?void 0:d.type,networkDetails:T,stats:n});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=n.loading.start);const c=this.hls.mainForwardBufferInfo,h=c?c.end-c.len:0,f=(r.edge-h)*1e3,m=$v(r,f);if(r.requestScheduled+m<a?r.requestScheduled=a:r.requestScheduled+=m,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let p,g,v;if(r.canBlockReload&&r.endSN&&r.advanced){const b=this.hls.config.lowLatencyMode,E=r.lastPartSn,T=r.endSN,x=r.lastPartIndex,R=x!==-1,I=E===T;R?I?(g=T+1,v=b?0:x):(g=E,v=b?x+1:r.maxPartIndex):g=T+1;const C=r.age,L=C+r.ageHeader;let S=Math.min(L-r.partTarget,r.targetduration*1.5);if(S>0){if(L>r.targetduration*3)this.log(`Playlist last advanced ${C.toFixed(2)}s ago. Omitting segment and part directives.`),g=void 0,v=void 0;else if(s!=null&&s.tuneInGoal&&L-r.partTarget>s.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${s.tuneInGoal} to: ${S} with playlist age: ${r.age}`),S=0;else{const w=Math.floor(S/r.targetduration);if(g+=w,v!==void 0){const F=Math.round(S%r.targetduration/r.partTarget);v+=F}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${C.toFixed(2)}s goal: ${S} skip sn ${w} to part ${v}`)}r.tuneInGoal=S}if(p=this.getDeliveryDirectives(r,t.deliveryDirectives,g,v),b||!I){r.requestScheduled=a,this.loadingPlaylist(u,p);return}}else(r.canBlockReload||r.canSkipUntil)&&(p=this.getDeliveryDirectives(r,t.deliveryDirectives,g,v));p&&g!==void 0&&r.canBlockReload&&(r.requestScheduled=n.loading.first+Math.max(m-o*2,m/2)),this.scheduleLoading(u,p,r)}else this.clearTimer()}scheduleLoading(e,t,s){const r=s||e.details;if(!r){this.loadingPlaylist(e,t);return}const n=self.performance.now(),a=r.requestScheduled;if(n>=a){this.loadingPlaylist(e,t);return}const o=a-n;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,s,r){let n=cm(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(s=t.msn,r=t.part,n=Ul.No),new hm(s,r,n)}checkRetry(e){const t=e.details,s=nu(e),r=e.errorAction,{action:n,retryCount:a=0,retryConfig:o}=r||{},l=!!r&&!!o&&(n===Mt.RetryRequest||!r.resolved&&n===Mt.SendAlternateToPenaltyBox);if(l){var d;if(a>=o.maxNumRetry)return!1;if(s&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=l0(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}function c2(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!Do(i[t].attrs,e[t].attrs))return!1;return!0}function Do(i,e,t){const s=i["STABLE-RENDITION-ID"];return s&&!t?s===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>i[r]!==e[r])}function _h(i,e){return e.label.toLowerCase()===i.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(i.lang||"").toLowerCase())}class L6 extends b0{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.LEVEL_LOADING,this.onLevelLoading,this),e.on(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(y.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.LEVEL_LOADING,this.onLevelLoading,this),e.off(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(y.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(y.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:s,groupId:r,details:n}=t,a=this.tracksInGroup[s];if(!a||a.groupId!==r){this.warn(`Audio track with id:${s} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${s} "${a.name}" lang:${a.lang} group:${r} loaded [${n.startSN}-${n.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const s=t.audioGroups||null,r=this.groupIds;let n=this.currentTrack;if(!s||(r==null?void 0:r.length)!==(s==null?void 0:s.length)||s!=null&&s.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=s,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!s||s.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!n&&l){const h=Zi(l,o,Ar);if(h>-1)n=o[h];else{const f=Zi(l,this.tracks);n=this.tracks[f]}}let d=this.findTrackId(n);d===-1&&n&&(d=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${s==null?void 0:s.join(",")}`),this.hls.trigger(y.AUDIO_TRACKS_UPDATED,u);const c=this.trackId;if(d!==-1&&c===-1)this.setAudioTrack(d);else if(o.length&&c===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===_e.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const s=this.allAudioTracks;if(this.selectDefaultTrack=!1,s.length){const r=this.currentTrack;if(r&&jr(e,r,Ar))return r;const n=Zi(e,this.tracksInGroup,Ar);if(n>-1){const a=this.tracksInGroup[n];return this.setAudioTrack(n),a}else if(r){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=HT(e,t.levels,s,a,Ar);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=Zi(e,s);if(a>-1)return s[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const s=this.currentTrack,r=t[e],n=r.details&&!r.details.live;if(e===this.trackId&&r===s&&n||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(y.AUDIO_TRACK_SWITCHING,Ue({},r)),n))return;const a=this.switchParams(r.url,s==null?void 0:s.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const r=t[s];if(!(this.selectDefaultTrack&&!r.default)&&(!e||jr(e,r,Ar)))return s}if(e){const{name:s,lang:r,assocLang:n,characteristics:a,audioCodec:o,channels:l}=e;for(let d=0;d<t.length;d++){const u=t[d];if(jr({name:s,lang:r,assocLang:n,characteristics:a,audioCodec:o,channels:l},u,Ar))return d}for(let d=0;d<t.length;d++){const u=t[d];if(Do(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const u=t[d];if(Do(e.attrs,u.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&ru(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const s=e.id,r=e.groupId,n=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${s} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(y.AUDIO_TRACK_LOADING,{url:n,id:s,groupId:r,deliveryDirectives:t||null,track:e})}}class R6{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,s){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];r.push(e),r.length===1&&!s&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const s={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(s,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const s={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(s)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const s=(t=e[0])==null?void 0:t.label;(s==="async-blocker"||s==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(n){var s;if(r.onError(n),this.queues===null||this.tracks===null)return;const a=(s=this.tracks[e])==null?void 0:s.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,s;return(t=this.queues)!=null&&t[e]||(s=this.tracks)!=null&&s[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const s=(t=this.tracks)==null?void 0:t[e],r=s==null?void 0:s.buffer;return r?`SourceBuffer${r.updating?" updating":""}${s.ended?" ended":""}${s.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(s=>s.label).join(", "))||""}}const zm=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,h2="HlsJsTrackRemovedError";class k6 extends Error{constructor(e){super(e),this.name=h2}}class w6 extends Ii{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=s=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=s=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=s=>{const{media:r,mediaSource:n}=this;s&&this.log("Media source opened"),!(!r||!n)&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(y.MEDIA_ATTACHED,{media:r,mediaSource:n}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:s,_objectUrl:r}=this;s!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${s})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=rT(cr(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.BUFFER_RESET,this.onBufferReset,this),e.on(y.BUFFER_APPENDING,this.onBufferAppending,this),e.on(y.BUFFER_CODECS,this.onBufferCodecs,this),e.on(y.BUFFER_EOS,this.onBufferEos,this),e.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(y.FRAG_PARSED,this.onFragParsed,this),e.on(y.FRAG_CHANGED,this.onFragChanged,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.BUFFER_RESET,this.onBufferReset,this),e.off(y.BUFFER_APPENDING,this.onBufferAppending,this),e.off(y.BUFFER_CODECS,this.onBufferCodecs,this),e.off(y.BUFFER_EOS,this.onBufferEos,this),e.off(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(y.FRAG_PARSED,this.onFragParsed,this),e.off(y.FRAG_CHANGED,this.onFragChanged,this),e.off(y.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const s={};if(this.operationQueue){const n=this.isUpdating();n||this.operationQueue.removeBlockers();const a=this.isQueued();(n||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${n?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Ne(s,r.tracks):this.sourceBuffers.forEach(n=>{const[a]=n;a&&(s[a]=Ne({},this.tracks[a]),this.removeBuffer(a)),n[0]=n[1]=null}),{media:e,mediaSource:t,tracks:s}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var s;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(s=this.transferData)!=null&&s.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const s=this.media=t.media,r=cr(this.appendSource);if(this.transferData=this.overrides=void 0,s&&r){const n=!!t.mediaSource;(n||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(a),n)this._objectUrl=s.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{s.removeAttribute("src");const l=self.ManagedMediaSource;s.disableRemotePlayback=s.disableRemotePlayback||l&&a instanceof l,Qm(s),D6(s,o),s.load()}catch{s.src=o}else s.src=o}s.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,s;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(s=e.constructor)==null?void 0:s.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const s=this.tracks,r=t.tracks,n=r?Object.keys(r):null,a=n?n.length:0,o=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(r&&n&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Xe(s,(l,d)=>l==="initSegment"?void 0:d)};
transfer tracks: ${Xe(r,(l,d)=>l==="initSegment"?void 0:d)}}`),!mv(r,s)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,d=this.details,u=Math.max(l,(d==null?void 0:d.fragments[0].start)||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(s)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching(y.MEDIA_DETACHING,{}),this.onMediaAttaching(y.MEDIA_ATTACHING,t),e.currentTime=u;return}this.transferData=void 0,n.forEach(l=>{const d=l,u=r[d];if(u){const c=u.buffer;if(c){const h=this.fragmentTracker,f=u.id;if(h.hasFragments(f)||h.hasParts(f)){const g=me.getBuffered(c);h.detectEvictedFragments(d,g,f,null,!0)}const m=Lc(d),p=[d,c];this.sourceBuffers[m]=p,c.updating&&this.operationQueue&&this.operationQueue.prependBlocker(d),this.trackSourceBuffer(d,u)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const s=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:n,_objectUrl:a}=this;if(n){if(this.log(`media source ${s?"transferring":"detaching"}`),s)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=n.readyState==="open";try{const l=n.sourceBuffers;for(let d=l.length;d--;)o&&l[d].abort(),n.removeSourceBuffer(l[d]);o&&n.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(n.removeEventListener("startstreaming",this._onStartStreaming),n.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),s||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&Qm(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(y.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const s=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),s)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(s)}catch(n){this.warn(`onBufferReset ${e}`,n)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Lc(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new R6(this.tracks)}onBufferCodecs(e,t){const s=this.tracks,r=Object.keys(t);this.log(`BUFFER_CODECS: "${r}" (current SB count ${this.sourceBufferCount})`);const n="audiovideo"in t&&(s.audio||s.video)||s.audiovideo&&("audio"in t||"video"in t),a=!n&&this.sourceBufferCount&&this.media&&r.some(o=>!s[o]);if(n||a){this.warn(`Unsupported transition between "${Object.keys(s)}" and "${r}" SourceBuffers`);return}r.forEach(o=>{var l,d,u;const c=t[o],{id:h,codec:f,levelCodec:m,container:p,metadata:g,supplemental:v}=c;let b=s[o];const E=(l=this.transferData)==null||(d=l.tracks)==null?void 0:d[o],T=E!=null&&E.buffer?E:b,x=(T==null?void 0:T.pendingCodec)||(T==null?void 0:T.codec),R=T==null?void 0:T.levelCodec;b||(b=s[o]={buffer:void 0,listeners:[],codec:f,supplemental:v,container:p,levelCodec:m,metadata:g,id:h});const I=Fl(x,R),C=I==null?void 0:I.replace(zm,"$1");let L=Fl(f,m);const S=(u=L)==null?void 0:u.replace(zm,"$1");L&&I&&C!==S&&(o.slice(0,5)==="audio"&&(L=iu(L,this.appendSource)),this.log(`switching codec ${x} to ${L}`),L!==(b.pendingCodec||b.codec)&&(b.pendingCodec=L),b.container=p,this.appendChangeType(o,p,L))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const s=this.tracks[t];return e[t]={id:s.id,container:s.container,codec:s.codec,levelCodec:s.levelCodec},e},{})}appendChangeType(e,t,s){const r=`${t};codecs=${s}`,n={label:`change-type=${r}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),o.changeType(r),a.codec=s,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(n,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const s=e.start,r=s+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(s,te.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>r||l!=null&&l.buffer&&me.isBuffered(l.buffer,r)||((o=this.fragmentTracker.getAppendedFrag(r,te.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:s}=this,{data:r,type:n,parent:a,frag:o,part:l,chunkMeta:d,offset:u}=t,c=d.buffering[n],{sn:h,cc:f}=o,m=self.performance.now();c.start=m;const p=o.stats.buffering,g=l?l.stats.buffering:null;p.start===0&&(p.start=m),g&&g.start===0&&(g.start=m);const v=s.audio;let b=!1;n==="audio"&&(v==null?void 0:v.container)==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const E=s.video,T=E==null?void 0:E.buffer;if(T&&h!=="initSegment"){const I=l||o,C=this.blockedAudioAppend;if(n==="audio"&&a!=="main"&&!this.blockedAudioAppend){const S=I.start+I.duration*.05,w=T.buffered,F=this.currentOp("video");!w.length&&!F?this.blockAudio(I):!F&&!me.isBuffered(T,S)&&this.lastVideoAppendEnd<S&&this.blockAudio(I)}else if(n==="video"){const L=I.end;if(C){const S=C.frag.start;(L>S||L<this.lastVideoAppendEnd||me.isBuffered(T,S))&&this.unblockAudio()}this.lastVideoAppendEnd=L}}const x=(l||o).start,R={label:`append-${n}`,execute:()=>{var I;c.executeStart=self.performance.now();const C=(I=this.tracks[n])==null?void 0:I.buffer;C&&(b?this.updateTimestampOffset(C,x,.1,n,h,f):u!==void 0&&Y(u)&&this.updateTimestampOffset(C,u,1e-6,n,h,f)),this.appendExecutor(r,n)},onStart:()=>{},onComplete:()=>{const I=self.performance.now();c.executeEnd=c.end=I,p.first===0&&(p.first=I),g&&g.first===0&&(g.first=I);const C={};this.sourceBuffers.forEach(([L,S])=>{L&&(C[L]=me.getBuffered(S))}),this.appendErrors[n]=0,n==="audio"||n==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(y.BUFFER_APPENDED,{type:n,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:C})},onError:I=>{var C;const L={type:ne.MEDIA_ERROR,parent:o.type,details:P.BUFFER_APPEND_ERROR,sourceBufferName:n,frag:o,part:l,chunkMeta:d,error:I,err:I,fatal:!1},S=(C=this.media)==null?void 0:C.error;if(I.code===DOMException.QUOTA_EXCEEDED_ERR||I.name=="QuotaExceededError"||"quota"in I)L.details=P.BUFFER_FULL_ERROR;else if(I.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!S)L.errorAction=Lo(!0);else if(I.name===h2&&this.sourceBufferCount===0)L.errorAction=Lo(!0);else{const w=++this.appendErrors[n];this.warn(`Failed ${w}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${n}" sourceBuffer (${S||"no media error"})`),(w>=this.hls.config.appendErrorMaxRetry||S)&&(L.fatal=!0)}this.hls.trigger(y.ERROR,L)}};this.append(R,n,this.isPending(this.tracks[n]))}getFlushOp(e,t,s){return this.log(`queuing "${e}" remove ${t}-${s}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,s)},onStart:()=>{},onComplete:()=>{this.hls.trigger(y.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${s} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:s,startOffset:r,endOffset:n}=t;s?this.append(this.getFlushOp(s,r,n),s):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,r,n),a)})}onFragParsed(e,t){const{frag:s,part:r}=t,n=[],a=r?r.elementaryStreams:s.elementaryStreams;a[Ve.AUDIOVIDEO]?n.push("audiovideo"):(a[Ve.AUDIO]&&n.push("audio"),a[Ve.VIDEO]&&n.push("video"));const o=()=>{const l=self.performance.now();s.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const d=r?r.stats:s.stats;this.hls.trigger(y.FRAG_BUFFERED,{frag:s,part:r,stats:d,id:s.type})};n.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${s.type} level: ${s.level} sn: ${s.sn}`),this.blockBuffers(o,n).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t,s;return e&&(!((t=this.tracks[e])!=null&&t.ended)||((s=this.tracks[e])==null?void 0:s.ending))})}onBufferEos(e,t){var s;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const r=((s=this.overrides)==null?void 0:s.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})&&(r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(y.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(y.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===P.BUFFER_APPEND_ERROR&&t.frag){var s;const r=(s=t.errorAction)==null?void 0:s.nextAutoLevel;Y(r)&&r!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:s}=this;if(!s||t===null||!this.sourceBufferCount)return;const r=e.config,n=s.currentTime,a=t.levelTargetDuration,o=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(Y(o)&&o>=0){const l=Math.max(o,a),d=Math.floor(n/a)*a-l;this.flushBackBuffer(n,a,d)}if(Y(r.frontBufferFlushThreshold)&&r.frontBufferFlushThreshold>0){const l=Math.max(r.maxBufferLength,r.frontBufferFlushThreshold),d=Math.max(l,a),u=Math.floor(n/a)*a+d;this.flushFrontBuffer(n,a,u)}}flushBackBuffer(e,t,s){this.sourceBuffers.forEach(([r,n])=>{if(n){const o=me.getBuffered(n);if(o.length>0&&s>o.start(0)){var a;this.hls.trigger(y.BACK_BUFFER_REACHED,{bufferEnd:s});const l=this.tracks[r];if((a=this.details)!=null&&a.live)this.hls.trigger(y.LIVE_BACK_BUFFER_REACHED,{bufferEnd:s});else if(l!=null&&l.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(y.BUFFER_FLUSHING,{startOffset:0,endOffset:s,type:r})}}})}flushFrontBuffer(e,t,s){this.sourceBuffers.forEach(([r,n])=>{if(n){const a=me.getBuffered(n),o=a.length;if(o<2)return;const l=a.start(o-1),d=a.end(o-1);if(s>l||e>=l&&e<=d)return;this.hls.trigger(y.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:s}=this;if(!t||!this.media||(s==null?void 0:s.readyState)!=="open")return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&t.live&&s.setLiveSeekableRange){const d=Math.max(0,t.fragmentStart),u=Math.max(d,r);return{duration:1/0,start:d,end:u}}return{duration:1/0}}const n=(e=this.overrides)==null?void 0:e.duration;if(n)return Y(n)?{duration:n}:null;const a=this.media.duration,o=Y(s.duration)?s.duration:0;return r>o&&r>a||!Y(a)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:s}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(Y(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),t!==void 0&&s!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${s}.`),r.setLiveSeekableRange(t,s)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:s}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Xe(s)}`),this.tracksReady){var r;const n=(r=this.transferData)==null?void 0:r.tracks;n&&Object.keys(n).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,s])=>{if(t){const r=this.tracks[t];e[t]={buffer:s,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(y.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:s}=this;if(!s)throw new Error("createSourceBuffers called when mediaSource was null");for(const n in e){const a=n,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),d=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${d})${this.currentOp(a)?" Queued":""} ${Xe(o)}`);try{const u=s.addSourceBuffer(d),c=Lc(a),h=[a,u];t[c]=h,o.buffer=u}catch(u){var r;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(a),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[a],this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:a,mimeType:d,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const s=e.supplemental;let r=e.codec;s&&(t==="video"||t==="audiovideo")&&hh(s,"video")&&(r=ST(r,s));const n=Fl(r,e.levelCodec);return n?t.slice(0,5)==="audio"?iu(n,this.appendSource):n:""}trackSourceBuffer(e,t){const s=t.buffer;if(!s)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:s,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(n,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(y.BUFFER_FLUSHED,{type:n})})}get mediaSrc(){var e,t;const s=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return s==null?void 0:s.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const s=this.currentOp(e);s&&(s.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var s;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(s=this.mediaSource)==null?void 0:s.readyState}`);this.error(`${r}`,t),this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const n=this.currentOp(e);n&&n.onError(r)}updateTimestampOffset(e,t,s,r,n,a){const o=t-e.timestampOffset;Math.abs(o)>=s&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${n} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,s){const{media:r,mediaSource:n}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!r||!n||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Y(r.duration)?r.duration:1/0,d=Y(n.duration)?n.duration:1/0,u=Math.max(0,t),c=Math.min(s,l,d);c>u&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${u},${c}] from the ${e} SourceBuffer`),o.remove(u,c)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const s=this.tracks[t],r=s==null?void 0:s.buffer;if(!r)throw new k6(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);s.ending=!1,s.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:s}=this,r=t.map(a=>this.appendBlocker(a));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(a=>{s===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var s;const r=(s=this.tracks[t])==null?void 0:s.buffer;!r||r.updating||this.shiftAndExecuteNext(t)})}append(e,t,s){this.operationQueue&&this.operationQueue.append(e,t,s)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,s){const r=this.tracks[e];if(!r)return;const n=r.buffer;if(!n)return;const a=s.bind(this,e);r.listeners.push({event:t,listener:a}),n.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const s=t.buffer;s&&(t.listeners.forEach(r=>{s.removeEventListener(r.event,r.listener)}),t.listeners.length=0)}}function Qm(i){const e=i.querySelectorAll("source");[].slice.call(e).forEach(t=>{i.removeChild(t)})}function D6(i,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,i.appendChild(t)}function Lc(i){return i==="audio"?1:0}class T0{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(y.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(y.BUFFER_CODECS,this.onBufferCodecs,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(y.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(y.BUFFER_CODECS,this.onBufferCodecs,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const s=this.hls.levels[t.droppedLevel];this.isLevelAllowed(s)&&this.restrictedLevels.push({bitrate:s.bitrate,height:s.height,width:s.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const s=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,s.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Y(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,s=this.getMaxLevel(e.length-1);s!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${s}: ${e[s].height}p@${e[s].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=s,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const s=t.filter((r,n)=>this.isLevelAllowed(r)&&n<=e);return this.clientRect=null,T0.getMaxLevelByMediaSize(s,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const s=e.getBoundingClientRect();t.width=s.width,t.height=s.height,!t.width&&!t.height&&(t.width=s.right-s.left||e.width||0,t.height=s.bottom-s.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(s=>e.bitrate===s.bitrate&&e.width===s.width&&e.height===s.height)}static getMaxLevelByMediaSize(e,t,s){if(!(e!=null&&e.length))return-1;const r=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let n=e.length-1;const a=Math.max(t,s);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&r(l,e[o+1])){n=o;break}}return n}}const M6={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ot=M6,P6={HLS:"h"},O6=P6,N6="CMCD-Object",F6="CMCD-Request",U6="CMCD-Session",$6="CMCD-Status",$a={OBJECT:N6,REQUEST:F6,SESSION:U6,STATUS:$6},B6={[$a.OBJECT]:["br","ab","d","ot","tb","tpb","lb","tab","lab","url"],[$a.REQUEST]:["pb","bl","tbl","dl","ltc","mtp","nor","nrr","rc","sn","sta","su","ttfb","ttfbb","ttlb","cmsdd","cmsds","smrt","df","cs"],[$a.SESSION]:["cid","pr","sf","sid","st","v","msd"],[$a.STATUS]:["bs","bsd","cdn","rtp","bg","pt","ec","e"]};class ha{constructor(e,t){Array.isArray(e)&&(e=e.map(s=>s instanceof ha?s:new ha(s))),this.value=e,this.params=t}}const H6="Dict";function V6(i){return Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":typeof i=="object"?JSON.stringify(i):String(i)}function G6(i,e,t,s){return new Error(`failed to ${i} "${V6(e)}" as ${t}`,{cause:s})}function is(i,e,t){return G6("serialize",i,e,t)}class f2{constructor(e){this.description=e}}const Xm="Bare Item",K6="Boolean";function W6(i){if(typeof i!="boolean")throw is(i,K6);return i?"?1":"?0"}function q6(i){return btoa(String.fromCharCode(...i))}const j6="Byte Sequence";function Y6(i){if(ArrayBuffer.isView(i)===!1)throw is(i,j6);return`:${q6(i)}:`}const Z6="Integer";function z6(i){return i<-999999999999999||999999999999999<i}function m2(i){if(z6(i))throw is(i,Z6);return i.toString()}function Q6(i){return`@${m2(i.getTime()/1e3)}`}function p2(i,e){if(i<0)return-p2(-i,e);const t=Math.pow(10,e);if(Math.abs(i*t%1-.5)<Number.EPSILON){const r=Math.floor(i*t);return(r%2===0?r:r+1)/t}else return Math.round(i*t)/t}const X6="Decimal";function J6(i){const e=p2(i,3);if(Math.floor(Math.abs(e)).toString().length>12)throw is(i,X6);const t=e.toString();return t.includes(".")?t:`${t}.0`}const e_="String",t_=/[\x00-\x1f\x7f]+/;function i_(i){if(t_.test(i))throw is(i,e_);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function s_(i){return i.description||i.toString().slice(7,-1)}const r_="Token";function Jm(i){const e=s_(i);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw is(e,r_);return e}function Ah(i){switch(typeof i){case"number":if(!Y(i))throw is(i,Xm);return Number.isInteger(i)?m2(i):J6(i);case"string":return i_(i);case"symbol":return Jm(i);case"boolean":return W6(i);case"object":if(i instanceof Date)return Q6(i);if(i instanceof Uint8Array)return Y6(i);if(i instanceof f2)return Jm(i);default:throw is(i,Xm)}}const n_="Key";function Sh(i){if(/^[a-z*][a-z0-9\-_.*]*$/.test(i)===!1)throw is(i,n_);return i}function _0(i){return i==null?"":Object.entries(i).map(([e,t])=>t===!0?`;${Sh(e)}`:`;${Sh(e)}=${Ah(t)}`).join("")}function g2(i){return i instanceof ha?`${Ah(i.value)}${_0(i.params)}`:Ah(i)}function a_(i){return`(${i.value.map(g2).join(" ")})${_0(i.params)}`}function o_(i,e={whitespace:!0}){if(typeof i!="object")throw is(i,H6);const t=i instanceof Map?i.entries():Object.entries(i),s=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([r,n])=>{n instanceof ha||(n=new ha(n));let a=Sh(r);return n.value===!0?a+=_0(n.params):(a+="=",Array.isArray(n.value)?a+=a_(n):a+=g2(n)),a}).join(`,${s}`)}function l_(i,e){return o_(i,e)}function d_(i){return["ot","sf","st","e","sta"].includes(i)}function u_(i){return typeof i=="number"?Y(i):i!=null&&i!==""&&i!==!1}function c_(i,e){const t=new URL(i),s=new URL(e);if(t.origin!==s.origin)return i;const r=t.pathname.split("/").slice(1),n=s.pathname.split("/").slice(1,-1);for(;r[0]===n[0];)r.shift(),n.shift();for(;n.length;)n.shift(),r.unshift("..");return r.join("/")}const Vl=i=>Math.round(i),h_=(i,e)=>(e!=null&&e.baseUrl&&(i=c_(i,e.baseUrl)),encodeURIComponent(i)),fl=i=>Vl(i/100)*100,f_={br:Vl,d:Vl,bl:fl,dl:fl,mtp:fl,nor:h_,rtp:fl,tb:Vl};function m_(i,e){const t={};if(i==null||typeof i!="object")return t;const s=Object.keys(i).sort(),r=Ne({},f_,e==null?void 0:e.formatters),n=e==null?void 0:e.filter;return s.forEach(a=>{if((n==null?void 0:n(a))===!1)return;let o=i[a];const l=r[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||u_(o)&&(d_(a)&&typeof o=="string"&&(o=new f2(o)),t[a]=o))}),t}function v2(i,e={}){return i?l_(m_(i,e),Ne({whitespace:!1},e)):""}function p_(i,e={}){const t={};if(!i)return t;const s=Object.entries(i),r=Object.entries(B6).concat(Object.entries((e==null?void 0:e.customHeaderMap)||{})),n=s.reduce((a,o)=>{var l,d;const[u,c]=o,h=((l=r.find(f=>f[1].includes(u)))===null||l===void 0?void 0:l[0])||$a.REQUEST;return(d=a[h])!==null&&d!==void 0||(a[h]={}),a[h][u]=c,a},{});return Object.entries(n).reduce((a,[o,l])=>(a[o]=v2(l,e),a),t)}function g_(i,e,t){return Ne(i,p_(e,t))}const v_="CMCD";function E_(i,e={}){if(!i)return"";const t=v2(i,e);return`${v_}=${encodeURIComponent(t)}`}const ep=/CMCD=[^&#]+/;function y_(i,e,t){const s=E_(e,t);if(!s)return i;if(ep.test(i))return i.replace(ep,s);const r=i.includes("?")?"&":"?";return`${i}${r}${s}`}class b_{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Ot.MANIFEST,su:!this.initialized})}catch(n){this.hls.logger.warn("Could not generate manifest CMCD data.",n)}},this.applyFragmentData=r=>{try{const{frag:n,part:a}=r,o=this.hls.levels[n.level],l=this.getObjectType(n),d={d:(a||n).duration*1e3,ot:l};(l===Ot.VIDEO||l===Ot.AUDIO||l==Ot.MUXED)&&(d.br=o.bitrate/1e3,d.tb=this.getTopBandwidth(l)/1e3,d.bl=this.getBufferLength(l));const u=a?this.getNextPart(a):this.getNextFrag(n);u!=null&&u.url&&u.url!==n.url&&(d.nor=u.url),this.apply(r,d)}catch(n){this.hls.logger.warn("Could not generate segment CMCD data.",n)}},this.hls=e;const t=this.config=e.config,{cmcd:s}=t;s!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=s.sessionId||e.sessionId,this.cid=s.contentId,this.useHeaders=s.useHeaders===!0,this.includeKeys=s.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHED,this.onMediaDetached,this),e.on(y.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHED,this.onMediaDetached,this),e.off(y.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var s,r;this.audioBuffer=(s=t.tracks.audio)==null?void 0:s.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:O6.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Ne(t,this.createData());const s=t.ot===Ot.INIT||t.ot===Ot.VIDEO||t.ot===Ot.MUXED;this.starved&&s&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((a,o)=>(r.includes(o)&&(a[o]=t[o]),a),{}));const n={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),g_(e.headers,t,n)):e.url=y_(e.url,t,n)}getNextFrag(e){var t;const s=(t=this.hls.levels[e.level])==null?void 0:t.details;if(s){const r=e.sn-s.startSN;return s.fragments[r+1]}}getNextPart(e){var t,s;const{index:r,fragment:n}=e,a=(t=this.hls.levels[n.level])==null||(s=t.details)==null?void 0:s.partList;if(a){const{sn:o}=n;for(let l=a.length-1;l>=0;l--){const d=a[l];if(d.index===r&&d.fragment.sn===o)return a[l+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ot.TIMED_TEXT;if(e.sn==="initSegment")return Ot.INIT;if(t==="audio")return Ot.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ot.VIDEO:Ot.MUXED}getTopBandwidth(e){let t=0,s;const r=this.hls;if(e===Ot.AUDIO)s=r.audioTracks;else{const n=r.maxAutoLevel,a=n>-1?n+1:r.levels.length;s=r.levels.slice(0,a)}return s.forEach(n=>{n.bitrate>t&&(t=n.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,s=e===Ot.AUDIO?this.audioBuffer:this.videoBuffer;return!s||!t?NaN:me.bufferInfo(s,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,s=e||this.config.loader;return class{constructor(n){this.loader=void 0,this.loader=new s(n)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(n,a,o){t(n),this.loader.load(n,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,s=e||this.config.loader;return class{constructor(n){this.loader=void 0,this.loader=new s(n)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(n,a,o){t(n),this.loader.load(n,a,o)}}}}const T_=3e5;class __ extends Ii{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(s=>s!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:s}=t;s!==null&&(this.pathwayId=s.pathwayId,this.uri=s.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:s}=t;if((s==null?void 0:s.action)===Mt.SendAlternateToPenaltyBox&&s.flags===bi.MoveAllAlternatesMatchingHost){const r=this.levels;let n=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:d}=t.context;o&&r?a=this.getPathwayForGroupId(o,d,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!n&&r&&(n=this.pathways()),n&&n.length>1&&(this.updatePathwayPriority(n),s.resolved=this.pathwayId!==a),t.details===P.BUFFER_APPEND_ERROR&&!t.fatal?s.resolved=!0:s.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${r&&r.length} priorities: ${Xe(n)} penalized: ${Xe(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const s=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${s}"`),t=this.getLevelsForPathway(s),this.pathwayId=s}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const s=this.penalizedPathways,r=performance.now();Object.keys(s).forEach(n=>{r-s[n]>T_&&delete s[n]});for(let n=0;n<e.length;n++){const a=e[n];if(a in s)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,Vv(t),this.hls.trigger(y.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[o];l&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,s){const r=this.getLevelsForPathway(s).concat(this.levels||[]);for(let n=0;n<r.length;n++)if(t===_e.AUDIO_TRACK&&r[n].hasAudioGroup(e)||t===_e.SUBTITLE_TRACK&&r[n].hasSubtitleGroup(e))return r[n].pathwayId;return s}clonePathways(e){const t=this.levels;if(!t)return;const s={},r={};e.forEach(n=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=n;if(t.some(u=>u.pathwayId===a))return;const d=this.getLevelsForPathway(o).map(u=>{const c=new tt(u.attrs);c["PATHWAY-ID"]=a;const h=c.AUDIO&&`${c.AUDIO}_clone_${a}`,f=c.SUBTITLES&&`${c.SUBTITLES}_clone_${a}`;h&&(s[c.AUDIO]=h,c.AUDIO=h),f&&(r[c.SUBTITLES]=f,c.SUBTITLES=f);const m=E2(u.uri,c["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),p=new Io({attrs:c,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:m,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let g=1;g<u.audioGroups.length;g++)p.addGroupId("audio",`${u.audioGroups[g]}_clone_${a}`);if(u.subtitleGroups)for(let g=1;g<u.subtitleGroups.length;g++)p.addGroupId("text",`${u.subtitleGroups[g]}_clone_${a}`);return p});t.push(...d),tp(this.audioTracks,s,l,a),tp(this.subtitleTracks,r,l,a)})}loadSteeringManifest(e){const t=this.hls.config,s=t.loader;this.loader&&this.loader.destroy(),this.loader=new s(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const n={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},d={onSuccess:(u,c,h,f)=>{this.log(`Loaded steering manifest: "${r}"`);const m=u.data;if((m==null?void 0:m.VERSION)!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":p,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":v}=m;if(p)try{this.uri=new self.URL(p,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${p}`);return}this.scheduleRefresh(this.uri||h.url),g&&this.clonePathways(g);const b={steeringManifest:m,url:r.toString()};this.hls.trigger(y.STEERING_MANIFEST_LOADED,b),v&&this.updatePathwayPriority(v)},onError:(u,c,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${c.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${c.url} no longer available`);return}let m=this.timeToLoad*1e3;if(u.code===429){const p=this.loader;if(typeof(p==null?void 0:p.getResponseHeader)=="function"){const g=p.getResponseHeader("Retry-After");g&&(m=parseFloat(g)*1e3)}this.log(`Steering manifest ${c.url} rate limited`);return}this.scheduleRefresh(this.uri||c.url,m)},onTimeout:(u,c,h)=>{this.log(`Timeout loading steering manifest (${c.url})`),this.scheduleRefresh(this.uri||c.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(n,l,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var s;const r=(s=this.hls)==null?void 0:s.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function tp(i,e,t,s){i&&Object.keys(e).forEach(r=>{const n=i.filter(a=>a.groupId===r).map(a=>{const o=Ne({},a);return o.details=void 0,o.attrs=new tt(o.attrs),o.url=o.attrs.URI=E2(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[r],o.attrs["PATHWAY-ID"]=s,o});i.push(...n)})}function E2(i,e,t,s){const{HOST:r,PARAMS:n,[t]:a}=s;let o;e&&(o=a==null?void 0:a[e],o&&(i=o));const l=new self.URL(i);return r&&!o&&(l.host=r),n&&Object.keys(n).sort().forEach(d=>{d&&l.searchParams.set(d,n[d])}),l.href}function di(i,e,t){Si(i,e,t),i.addEventListener(e,t)}function Si(i,e,t){i.removeEventListener(e,t)}class Yn extends Ii{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=Yn.CDMCleanupPromise?[Yn.CDMCleanupPromise]:[],this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(y.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(y.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(y.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(y.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(y.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(y.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(y.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:s}=this.config,r=t[e];if(r)return r.licenseUrl;if(e===ot.WIDEVINE&&s)return s}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,s=t[e];if(s)return s.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,s=(a,o,l)=>!!a&&l.indexOf(a)===o,r=t.map(a=>a.audioCodec).filter(s),n=t.map(a=>a.videoCodec).filter(s);return r.length+n.length===0&&n.push("avc1.42e01e"),new Promise((a,o)=>{const l=d=>{const u=d.shift();this.getMediaKeysPromise(u,r,n).then(c=>a({keySystem:u,mediaKeys:c})).catch(c=>{d.length?l(d):c instanceof ti?o(c):o(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_NO_ACCESS,error:c,fatal:!0},c.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:s}=this.config;if(typeof s!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${s}`;return Ov===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return s(e,t)}getMediaKeysPromise(e,t,s){const r=f8(e,t,s,this.config.drmSystemOptions),n=this.keySystemAccessPromises[e];let a=n==null?void 0:n.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Xe(r)}`),a=this.requestMediaKeySystemAccess(e,r);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const d=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),o.hasMediaKeys=!0,d.then(c=>c?this.setMediaKeysServerCertificate(u,e,c):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>n.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:s}){this.log(`Creating key-system session "${t}" keyId: ${Fr.hexDump(e.keyId||[])}`);const r=s.createSession(),n={decryptdata:e,keySystem:t,mediaKeys:s,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(n),n}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const s=this.createMediaKeySessionContext(e),r=this.getKeyIdString(t),n="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(s,n,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Fr.hexDump(e.keyId)}updateKeySession(e,t){var s;const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyID ${Fr.hexDump(((s=e.decryptdata)==null?void 0:s.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),r.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Im(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:s})=>this.attemptSetMediaKeys(t,s))}selectKeySystem(e){return new Promise((t,s)=>this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const n=Im(r);n?t(n):s(new Error(`Unable to find format for key-system "${r}"`))}).catch(s))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=$l(this.config),s=e.map(vh).filter(r=>!!r&&t.indexOf(r)!==-1);return this.selectKeySystem(s)}loadKey(e){const t=e.keyInfo.decryptdata,s=this.getKeyIdString(t),r=`(keyId: ${s} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${r}`);let n=this.keyIdToKeySessionPromise[s];return n||(n=this.getKeySystemForKeyPromise(t).then(({keySystem:o,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${r}`),this.attemptSetMediaKeys(o,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:o,mediaKeys:l,decryptdata:t}))))),(this.keyIdToKeySessionPromise[s]=n.then(o=>{const l="cenc",d=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(o,l,d,"playlist-key")})).catch(o=>this.handleError(o))),n}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof ti?this.hls.trigger(y.ERROR,e.data):this.hls.trigger(y.ERROR,{type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),s=this.keyIdToKeySessionPromise[t];if(!s){const r=vh(e.keyFormat),n=r?[r]:$l(this.config);return this.attemptKeySystemAccess(n)}return s}getKeySystemSelectionPromise(e){if(e.length||(e=$l(this.config)),e.length===0)throw new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Xe({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const s=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(s).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),s.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(n=>s.indexOf(n)===-1)})}generateRequestWithPreferredKeySession(e,t,s,r){var n,a;const o=(n=this.config.drmSystems)==null||(a=n[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const m=o.call(this.hls,t,s,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");t=m.initDataType,s=m.initData?m.initData:null,e.decryptdata.pssh=s?new Uint8Array(s):null}catch(m){var l;if(this.warn(m.message),(l=this.hls)!=null&&l.config.debug)throw m}if(s===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const d=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${r}": ${d} (init data type: ${t} length: ${s?s.byteLength:null})`);const u=new f0,c=e._onmessage=m=>{const p=e.mediaKeysSession;if(!p){u.emit("error",new Error("invalid state"));return}const{messageType:g,message:v}=m;this.log(`"${g}" message event for session "${p.sessionId}" message size: ${v.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,v).catch(b=>{u.eventNames().length?u.emit("error",b):this.handleError(b)}):g==="license-release"?e.keySystem===ot.FAIRPLAY&&(this.updateKeySession(e,gh("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${g}"`)},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const g=e.keyStatus;u.emit("keyStatus",g),g==="expired"&&(this.warn(`${e.keySystem} expired for key ${d}`),this.renewKeySession(e))};di(e.mediaKeysSession,"message",c),di(e.mediaKeysSession,"keystatuseschange",h);const f=new Promise((m,p)=>{u.on("error",p),u.on("keyStatus",g=>{g.startsWith("usable")?m():g==="output-restricted"?p(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):g==="internal-error"?p(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${g}"`)):g==="expired"?p(new Error("key expired while generating request")):this.warn(`unhandled key status change "${g}"`)})});return e.mediaKeysSession.generateRequest(t,s).then(()=>{var m;this.log(`Request generated for key-session "${(m=e.mediaKeysSession)==null?void 0:m.sessionId}" keyId: ${d}`)}).catch(m=>{throw new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_NO_SESSION,error:m,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>f).catch(m=>{throw u.removeAllListeners(),this.removeSession(e),m}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,s)=>{if(typeof s=="string"&&typeof t=="object"){const r=s;s=t,t=r}this.log(`key status change "${t}" for keyStatuses keyId: ${Fr.hexDump("buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s))} session keyId: ${Fr.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,s=t.loader,r=new s(t),n=this.getServerCertificateUrl(e);return n?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:n},d=t.certLoadPolicy.default,u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(h,f,m,p)=>{a(h.data)},onError:(h,f,m,p)=>{o(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Ue({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${n}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,m)=>{o(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${n})`))},onAbort:(h,f,m)=>{o(new Error("aborted"))}};r.load(l,u,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,s){return new Promise((r,n)=>{e.setServerCertificate(s).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${s==null?void 0:s.byteLength}) on "${t}"`),r(e)}).catch(a=>{n(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(s=>this.updateKeySession(e,new Uint8Array(s)).catch(r=>{throw new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:r,fatal:!0},r.message)}))}unpackPlayReadyKeyMessage(e,t){const s=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!s.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(s,"application/xml"),n=r.querySelectorAll("HttpHeader");if(n.length>0){let u;for(let c=0,h=n.length;c<h;c++){var a,o;u=n[c];const f=(a=u.querySelector("name"))==null?void 0:a.textContent,m=(o=u.querySelector("value"))==null?void 0:o.textContent;f&&m&&e.setRequestHeader(f,m)}}const l=r.querySelector("Challenge"),d=l==null?void 0:l.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return gh(atob(d))}setupLicenseXHR(e,t,s,r){const n=this.config.licenseXhrSetup;return n?Promise.resolve().then(()=>{if(!s.decryptdata)throw new Error("Key removed");return n.call(this.hls,e,t,s,r)}).catch(a=>{if(!s.decryptdata)throw a;return e.open("POST",t,!0),n.call(this.hls,e,t,s,r)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const s=this.config.keyLoadPolicy.default;return new Promise((r,n)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return n(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const d=this.config.licenseResponseCallback;if(d)try{l=d.call(this.hls,o,a,e)}catch(u){this.error(u)}r(l)}else{const l=s.errorRetry,d=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||o.status>=400&&o.status<500)n(new ti({type:ne.KEY_SYSTEM_ERROR,details:P.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(r,n)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:d})=>{e.keySystem==ot.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(l,d)),l.send(d)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const s=t.media;this.media=s,di(s,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Si(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,s=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Bu.clearKeyUriToKeyIdMap();const r=s.length;Yn.CDMCleanupPromise=Promise.all(s.map(n=>this.removeSession(n)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(n=>{var a;this.log(`Could not clear media keys: ${n}`),(a=this.hls)==null||a.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${n}`)})}))).catch(n=>{var a;this.log(`Could not close sessions and clear media keys: ${n}`),(a=this.hls)==null||a.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${n}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const s=t.reduce((r,n)=>(r.indexOf(n.keyFormat)===-1&&r.push(n.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${s.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(s)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:s}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),s&&s.readyState!==XMLHttpRequest.DONE&&s.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const r=this.mediaKeySessions.indexOf(e);r>-1&&this.mediaKeySessions.splice(r,1);const{drmSystemOptions:n}=this.config;return(p8(n)?new Promise((o,l)=>{self.setTimeout(()=>l(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(o)}):Promise.resolve()).catch(o=>{var l;this.log(`Could not remove session: ${o}`),(l=this.hls)==null||l.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${o}`)})}).then(()=>t.close()).catch(o=>{var l;this.log(`Could not close session: ${o}`),(l=this.hls)==null||l.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${o}`)})})}}}Yn.CDMCleanupPromise=void 0;class ti extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class A_{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(y.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(y.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const s=this.hls.config;if(s.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),s.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,s){const r=performance.now();if(t){if(this.lastTime){const n=r-this.lastTime,a=s-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/n,d=this.hls;if(d.trigger(y.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:s}),l>0&&a>d.config.fpsDroppedMonitoringThreshold*o){let u=d.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=u)&&(u=u-1,d.trigger(y.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:d.currentLevel}),d.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=s,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function y2(i,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=i,e.dispatchEvent(t)}function b2(i,e){const t=i.mode;if(t==="disabled"&&(i.mode="hidden"),i.cues&&!i.cues.getCueById(e.id))try{if(i.addCue(e),!i.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(s){ke.debug(`[texttrack-utils]: ${s}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,i.addCue(r)}catch(r){ke.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(i.mode=t)}function Hn(i,e){const t=i.mode;if(t==="disabled"&&(i.mode="hidden"),i.cues)for(let s=i.cues.length;s--;)e&&i.cues[s].removeEventListener("enter",e),i.removeCue(i.cues[s]);t==="disabled"&&(i.mode=t)}function Ch(i,e,t,s){const r=i.mode;if(r==="disabled"&&(i.mode="hidden"),i.cues&&i.cues.length>0){const n=C_(i.cues,e,t);for(let a=0;a<n.length;a++)(!s||s(n[a]))&&i.removeCue(n[a])}r==="disabled"&&(i.mode=r)}function S_(i,e){if(e<=i[0].startTime)return 0;const t=i.length-1;if(e>i[t].endTime)return-1;let s=0,r=t,n;for(;s<=r;)if(n=Math.floor((r+s)/2),e<i[n].startTime)r=n-1;else if(e>i[n].startTime&&s<t)s=n+1;else return n;return i[s].startTime-e<e-i[r].startTime?s:r}function C_(i,e,t){const s=[],r=S_(i,e);if(r>-1)for(let n=r,a=i.length;n<a;n++){const o=i[n];if(o.startTime>=e&&o.endTime<=t)s.push(o);else if(o.startTime>t)return s}return s}function Gl(i){const e=[];for(let t=0;t<i.length;t++){const s=i[t];(s.kind==="subtitles"||s.kind==="captions")&&s.label&&e.push(i[t])}return e}class x_ extends b0{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const s=Gl(this.media.textTracks);for(let n=0;n<s.length;n++)if(s[n].mode==="hidden")t=s[n];else if(s[n].mode==="showing"){t=s[n];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.LEVEL_LOADING,this.onLevelLoading,this),e.on(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(y.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(y.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.LEVEL_LOADING,this.onLevelLoading,this),e.off(y.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(y.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(y.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const s=this.media;if(!s)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||s.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;Gl(s.textTracks).forEach(a=>{Hn(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:s,groupId:r,details:n}=t,a=this.tracksInGroup[s];if(!a||a.groupId!==r){this.warn(`Subtitle track with id:${s} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${s} "${a.name}" lang:${a.lang} group:${r} loaded [${n.startSN}-${n.endSN}]`),s===this.trackId&&this.playlistLoaded(s,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const s=t.subtitleGroups||null,r=this.groupIds;let n=this.currentTrack;if(!s||(r==null?void 0:r.length)!==(s==null?void 0:s.length)||s!=null&&s.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=s,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!s||s.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,c)=>{u.id=c});else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!n&&o){this.selectDefaultTrack=!1;const u=Zi(o,a);if(u>-1)n=a[u];else{const c=Zi(o,this.tracks);n=this.tracks[c]}}let l=this.findTrackId(n);l===-1&&n&&(l=this.findTrackId(null));const d={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${s==null?void 0:s.join(",")}" group-id`),this.hls.trigger(y.SUBTITLE_TRACKS_UPDATED,d),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,s=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const n=t[r];if(!(s&&!n.default||!s&&!e)&&(!e||jr(n,e)))return r}if(e){for(let r=0;r<t.length;r++){const n=t[r];if(Do(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const n=t[r];if(Do(e.attrs,n.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let s=0;s<t.length;s++){const r=t[s];if(_h(r,e))return s}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===_e.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const s=this.currentTrack;if(s&&jr(e,s))return s;const r=Zi(e,this.tracksInGroup);if(r>-1){const n=this.tracksInGroup[r];return this.setSubtitleTrack(r),n}else{if(s)return null;{const n=Zi(e,t);if(n>-1)return t[n]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const s=e.id,r=e.groupId,n=this.getUrlWithDirectives(e.url,t),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${s} "${e.name}" lang:${e.lang} group:${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(y.SUBTITLE_TRACK_LOADING,{url:n,id:s,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Gl(e.textTracks),s=this.currentTrack;let r;if(s&&(r=t.filter(n=>_h(s,n))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${s.name}" and language "${s.lang}"`)),[].slice.call(t).forEach(n=>{n.mode!=="disabled"&&n!==r&&(n.mode="disabled")}),r){const n=this.subtitleDisplay?"showing":"hidden";r.mode!==n&&(r.mode=n)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Y(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const s=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(y.SUBTITLE_TRACK_SWITCH,{id:e});return}const n=!!r.details&&!r.details.live;if(e===this.trackId&&r===s&&n)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:o="",name:l,type:d,url:u}=r;this.hls.trigger(y.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:d,url:u});const c=this.switchParams(r.url,s==null?void 0:s.details,r.details);this.loadPlaylist(c)}}function I_(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?n:n&3|8).toString(16)})}}}function fo(i){let e=5381,t=i.length;for(;t;)e=e*33^i.charCodeAt(--t);return(e>>>0).toString()}const Zn=.025;let uu=function(i){return i[i.Point=0]="Point",i[i.Range=1]="Range",i}({});function L_(i,e,t){return`${i.identifier}-${t+1}-${fo(e)}`}class R_{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const s=this.playoutLimit;return e<=0||isNaN(s)?!1:s===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>s}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Rc(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,s=Rc(t,e);return t-s<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Y(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Rc(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Zn))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?uu.Range:uu.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return k_(this)}}function Rc(i,e){return i-e.start<e.duration/2&&!(Math.abs(i-(e.start+e.duration))<Zn)?e.start:e.start+e.duration}function T2(i,e,t){const s=new self.URL(i,t);return s.protocol!=="data:"&&s.searchParams.set("_HLS_primary_id",e),s}function kc(i,e){for(;(t=i.assetList[++e])!=null&&t.error;)var t;return e}function k_(i){return`["${i.identifier}" ${i.cue.pre?"<pre>":i.cue.post?"<post>":""}${i.timelineStart.toFixed(2)}-${i.resumeTime.toFixed(2)}]`}function bn(i){const e=i.timelineStart,t=i.duration||0;return`["${i.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class w_{constructor(e,t,s,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls.trigger(y.PLAYOUT_LIMIT_REACHED,{})};const n=this.hls=new e(t);this.interstitial=s,this.assetItem=r;let a=r.uri;try{a=T2(a,t.primarySessionId).href}catch{}n.loadSource(a);const o=()=>{this.hasDetails=!0};n.once(y.LEVEL_LOADED,o),n.once(y.AUDIO_TRACK_LOADED,o),n.once(y.SUBTITLE_TRACK_LOADED,o),n.on(y.MEDIA_ATTACHING,(l,{media:d})=>{this.removeMediaListeners(),this.mediaAttached=d,this.interstitial.playoutLimit&&(d.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&n.on(y.BUFFER_APPENDED,()=>{const c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,n.trigger(y.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){var e;return((e=this.interstitial)==null?void 0:e.appendInPlace)||!1}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e||!this._bufferedEosTime)return!1;const s=this.timelineOffset,r=me.bufferInfo(e,s,0);return this.getAssetTime(r.end)>=this._bufferedEosTime-.02}reachedPlayout(e){const s=this.interstitial.playoutLimit;return this.startOffset+e>=s}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=me.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const s=e-t;if(Math.abs(s)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,s=this.duration;return Math.min(Math.max(0,e-t),s)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){this.hls.attachMedia(e)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}resetDetails(){const e=this.hls;if(this.hasDetails){e.stopLoad();const t=s=>delete s.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,s){this.hls.on(e,t)}once(e,t,s){this.hls.once(e,t)}off(e,t,s){this.hls.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${bn(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const ip=.033;class D_ extends Ii{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((s,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,s+1):s,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let s=-1;e.nextEvent?s=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(s=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[s]||(t===void 0&&(t=e.start),s=this.findItemIndexAtTime(t));s>=0&&(n=r[s])!=null&&n.event;){var n;s--}return s}findItemIndexAtTime(e,t){const s=this.items;if(s)for(let r=0;r<s.length;r++){let n=s[r];if(t&&t!=="primary"&&(n=n[t]),e===n.start||e>n.start&&e<n.end)return r}return-1}findJumpRestrictedIndex(e,t){const s=this.items;if(s)for(let r=e;r<=t&&s[r];r++){const n=s[r].event;if(n!=null&&n.restrictions.jump&&!n.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var s;if(((s=t[r].event)==null?void 0:s.identifier)===e)return r}return-1}findAssetIndex(e,t){const s=e.assetList,r=s.length;if(r>1)for(let n=0;n<r;n++){const a=s[n];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&t<o+(a.duration||0))return n}}return 0}get assetIdAtEnd(){var e,t;const s=(e=this.items)==null||(t=e[this.length-1])==null?void 0:t.event;if(s){const r=s.assetList,n=r[r.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const s=e.main.details,{dateRanges:r}=s,n=this.events,a=this.parseDateRanges(r,{url:s.url},t),o=Object.keys(r),l=n?n.filter(d=>!o.includes(d.identifier)):[];a.length&&a.sort((d,u)=>{const c=d.cue.pre,h=d.cue.post,f=u.cue.pre,m=u.cue.post;if(c&&!f)return-1;if(f&&!c||h&&!m)return 1;if(m&&!h)return-1;if(!c&&!f&&!h&&!m){const p=d.startTime,g=u.startTime;if(p!==g)return p-g}return d.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=a,l.forEach(d=>{this.removeEvent(d)}),this.updateSchedule(e,l)}updateSchedule(e,t=[]){const s=this.events||[];if(s.length||t.length||this.length<2){const r=this.items,n=this.parseSchedule(s,e);(t.length||(r==null?void 0:r.length)!==n.length||n.some((o,l)=>Math.abs(o.playout.start-r[l].playout.start)>.005||Math.abs(o.playout.end-r[l].playout.end)>.005))&&(this.items=n,this.onScheduleUpdate(t,r))}}parseDateRanges(e,t,s){const r=[],n=Object.keys(e);for(let a=0;a<n.length;a++){const o=n[a],l=e[o];if(l.isInterstitial){let d=this.eventMap[o];d?d.setDateRange(l):(d=new R_(l,t),this.eventMap[o]=d,s===!1&&(d.appendInPlace=s)),r.push(d)}}return r}parseSchedule(e,t){const s=[],r=t.main.details,n=r.live?1/0:r.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,d=0;if(e.forEach((u,c)=>{const h=u.cue.pre,f=u.cue.post,m=e[c-1]||null,p=u.appendInPlace,g=f?n:u.startOffset,v=u.duration,b=u.timelineOccupancy===uu.Range?v:0,E=u.resumptionOffset,T=(m==null?void 0:m.startTime)===g,x=g+u.cumulativeDuration;let R=p?x+v:g+E;if(h||!f&&g<=0){const C=d;d+=b,u.timelineStart=x;const L=a;a+=v,s.push({event:u,start:x,end:R,playout:{start:L,end:a},integrated:{start:C,end:d}})}else if(g<=n){if(!T){const S=g-l;if(S>ip){const w=l,F=d;d+=S;const G=a;a+=S;const K={previousEvent:e[c-1]||null,nextEvent:u,start:w,end:w+S,playout:{start:G,end:a},integrated:{start:F,end:d}};s.push(K)}else S>0&&m&&(m.cumulativeDuration+=S,s[s.length-1].end=g)}f&&(R=x),u.timelineStart=x;const C=d;d+=b;const L=a;a+=v,s.push({event:u,start:x,end:R,playout:{start:L,end:a},integrated:{start:C,end:d}})}else return;const I=u.resumeTime;f||I>n?l=n:l=I}),l<n){var o;const u=l,c=d,h=n-l;d+=h;const f=a;a+=h,s.push({previousEvent:((o=s[s.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:u+h,playout:{start:f,end:a},integrated:{start:c,end:d}})}this.setDurations(n,a,d)}else s.push({previousEvent:null,nextEvent:null,start:0,end:n,playout:{start:0,end:n},integrated:{start:0,end:n}}),this.setDurations(n,n,n);return s}setDurations(e,t,s){this.durations={primary:e,playout:t,integrated:s}}resolveOffsets(e,t){const s=t.main.details,r=s.live?1/0:s.edge;let n=0,a=-1;e.forEach((o,l)=>{const d=o.cue.pre,u=o.cue.post,c=d?0:u?r:o.startTime;this.updateAssetDurations(o),a===c?o.cumulativeDuration=n:(n=0,a=c),!u&&o.snapOptions.in&&(o.resumeAnchor=tn(null,s.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<ip&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const f=Y(o.resumeOffset)?o.resumeOffset:o.duration;n+=f})}primaryCanResumeInPlaceAt(e,t){const s=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(s-r)>Zn?(this.log(`"${e.identifier}" resumption ${s} not aligned with estimated timeline end ${r}`),!1):t?!Object.keys(t).some(a=>{const o=t[a].details,l=o.edge;if(s>=l)return this.log(`"${e.identifier}" resumption ${s} past ${a} playlist end ${l}`),!1;const d=tn(null,o.fragments,s);if(!d)return this.log(`"${e.identifier}" resumption ${s} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const u=a==="audio"?.175:0;return Math.abs(d.start-s)<Zn+u||Math.abs(d.end-s)<Zn+u?!1:(this.log(`"${e.identifier}" resumption ${s} not aligned with ${a} fragment bounds (${d.start}-${d.end} sn: ${d.sn} cc: ${d.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${s} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let s=0,r=!1,n=!1;e.assetList.forEach((a,o)=>{const l=t+s;a.startOffset=s,a.timelineStart=l,r||(r=a.duration===null),n||(n=!!a.error);const d=a.error?0:a.duration||0;s+=d}),r&&!n?e.duration=Math.max(s,e.duration):e.duration=s}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Rs(i){return`[${i.event?'"'+i.event.identifier+'"':"primary"}: ${i.start.toFixed(2)}-${i.end.toFixed(2)}]`}class M_{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const s=e.assetListUrl;let r;try{r=T2(s,this.hls.sessionId,e.baseUrl)}catch(h){const f=this.assignAssetListError(e,P.ASSET_LIST_LOAD_ERROR,h,s);this.hls.trigger(y.ERROR,f);return}t&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+t);const n=this.hls.config,a=n.loader,o=new a(n),l={responseType:"json",url:r.href},d=n.interstitialAssetListLoadPolicy.default,u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(h,f,m,p)=>{const g=h.data,v=g==null?void 0:g.ASSETS;if(!Array.isArray(v)){const b=this.assignAssetListError(e,P.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),m.url,f,p);this.hls.trigger(y.ERROR,b);return}e.assetListResponse=g,this.hls.trigger(y.ASSET_LIST_LOADED,{event:e,assetListResponse:g,networkDetails:p})},onError:(h,f,m,p)=>{const g=this.assignAssetListError(e,P.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${f.url})`),f.url,p,m);this.hls.trigger(y.ERROR,g)},onTimeout:(h,f,m)=>{const p=this.assignAssetListError(e,P.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${f.url})`),f.url,h,m);this.hls.trigger(y.ERROR,p)}};return o.load(l,u,c),this.hls.trigger(y.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,s,r,n,a){return e.error=s,{type:ne.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:s,networkDetails:a,stats:n}}}function sp(i){i==null||i.play().catch(()=>{})}class P_ extends Ii{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const s=this.currentTime;if(s===void 0||this.playbackDisabled)return;const r=s-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const a=r<=-.01;this.timelinePos=s,this.bufferedPos=s;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(s,s-r)&&this.updateSchedule(),this.checkBuffer(),a&&s<o.start||s>=o.end){var l;const h=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a){const f=this.findItemIndex(o);if(h>f){const m=this.schedule.findJumpRestrictedIndex(f+1,h);if(m>f){this.setSchedulePosition(m);return}}}this.setSchedulePosition(h);return}const d=this.playingAsset;if(!d){if(this.playingLastItem&&this.isInterstitial(o)){const h=o.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(s,h))}return}const u=d.timelineStart,c=d.duration||0;(a&&s<u||s>=u+c)&&this.setScheduleToAssetAtTime(s,d)},this.onTimeupdate=()=>{const s=this.currentTime;if(s===void 0||this.playbackDisabled)return;if(s>this.timelinePos)this.timelinePos=s,s>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(s>=r.end){this.timelinePos=r.end;const o=this.findItemIndex(r);this.setSchedulePosition(o+1)}const n=this.playingAsset;if(!n)return;const a=n.timelineStart+(n.duration||0);s>=a&&this.setScheduleToAssetAtTime(s,n)},this.onScheduleUpdate=(s,r)=>{const n=this.schedule,a=this.playingItem,o=n.events||[],l=n.items||[],d=n.durations,u=s.map(m=>m.identifier),c=!!(o.length||u.length);(c||r)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(m=>Rs(m))} pos: ${this.timelinePos}`),u.length&&this.log(`Removed events ${u}`),this.playerQueue.forEach(m=>{if(m.interstitial.appendInPlace){const p=m.assetItem.timelineStart,g=m.timelineOffset-p;if(g)try{m.timelineOffset=p}catch(v){Math.abs(g)>Zn&&this.warn(`${v} ("${m.assetId}" ${m.timelineOffset}->${p})`)}}});let h=null;if(a){const m=this.updateItem(a,this.timelinePos);this.itemsMatch(a,m)&&(this.playingItem=m,this.waitingItem=this.endedItem=null,h=()=>this.trimInPlace(m,a))}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const f=this.bufferingItem;if(f){const m=this.updateItem(f,this.bufferedPos);this.itemsMatch(f,m)?(this.bufferingItem=m,h||(h=()=>this.trimInPlace(m,f))):f.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(f.event,null))}if(s.forEach(m=>{m.assetList.forEach(p=>{this.clearAssetPlayer(p.identifier,null)})}),c||r){if(this.hls.trigger(y.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:d,removedIds:u}),this.isInterstitial(a)&&u.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}h&&h(),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new M_(e),this.schedule=new D_(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(y.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(y.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(y.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(y.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(y.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(y.BUFFER_APPENDED,this.onBufferAppended,this),e.on(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(y.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(y.MEDIA_ENDED,this.onMediaEnded,this),e.on(y.ERROR,this.onError,this),e.on(y.DESTROYING,this.onDestroying,this)}unregisterListeners(){const e=this.hls;e&&(e.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(y.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(y.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(y.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(y.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(y.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(y.BUFFER_CODECS,this.onBufferCodecs,this),e.off(y.BUFFER_APPENDED,this.onBufferAppended,this),e.off(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(y.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(y.MEDIA_ENDED,this.onMediaEnded,this),e.off(y.ERROR,this.onError,this),e.off(y.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Si(e,"play",this.onPlay),Si(e,"pause",this.onPause),Si(e,"seeking",this.onSeeking),Si(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const s=this.media=t.media;di(s,"seeking",this.onSeeking),di(s,"timeupdate",this.onTimeupdate),di(s,"play",this.onPlay),di(s,"pause",this.onPause)}onMediaAttached(e,t){const s=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,s===null)this.checkStart();else if(!r){this.clearScheduleState();const n=this.findItemIndex(s);this.setSchedulePosition(n)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const s=!!t.transferMedia,r=this.media;if(this.media=null,!s&&(r&&this.removeMediaListeners(r),this.detachedData)){const n=this.getBufferingPlayer();n&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,n.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const e=this,t=()=>e.bufferingItem||e.waitingItem,s=c=>c&&e.getAssetPlayer(c.identifier),r=(c,h,f,m,p)=>{if(c){let g=c[h].start;const v=c.event;if(v){if(h==="playout"||v.timelineOccupancy!==uu.Point){const b=s(f);(b==null?void 0:b.interstitial)===v&&(g+=b.assetItem.startOffset+b[p])}}else{const b=m==="bufferedPos"?a():e[m];g+=b-c.start}return g}return 0},n=(c,h)=>{if(c!==0&&h!=="primary"&&e.schedule.length){var f;const m=e.schedule.findItemIndexAtTime(c),p=(f=e.schedule.items)==null?void 0:f[m];if(p){const g=p[h].start-p.start;return c+g}}return c},a=()=>{const c=e.bufferedPos;return c===Number.MAX_VALUE?o("primary"):Math.max(c,0)},o=c=>{var h;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:e.schedule.durations[c]},l=(c,h)=>{var f,m;const p=e.effectivePlayingItem;if(p!=null&&(f=p.event)!=null&&f.restrictions.skip)return;e.log(`seek to ${c} "${h}"`);const g=e.effectivePlayingItem,v=e.schedule.findItemIndexAtTime(c,h),b=(m=e.schedule.items)==null?void 0:m[v],E=e.getBufferingPlayer(),T=E==null?void 0:E.interstitial,x=T==null?void 0:T.appendInPlace,R=g&&e.itemsMatch(g,b);if(g&&(x||R)){const C=s(e.playingAsset),L=(C==null?void 0:C.media)||e.primaryMedia;if(L){const S=h==="primary"?L.currentTime:r(g,h,e.playingAsset,"timelinePos","currentTime"),w=c-S,F=(x?S:L.currentTime)+w;if(F>=0&&(!C||x||F<=C.duration)){L.currentTime=F;return}}}if(b){let C=c;if(h!=="primary"){const S=b[h].start,w=c-S;C=b.start+w}const L=!e.isInterstitial(b);if((!e.isInterstitial(g)||g.event.appendInPlace)&&(L||b.event.appendInPlace)){const S=e.media||(x?E==null?void 0:E.media:null);S&&(S.currentTime=C)}else if(g){const S=e.findItemIndex(g);if(v>S){const F=e.schedule.findJumpRestrictedIndex(S+1,v);if(F>S){e.setSchedulePosition(F);return}}let w=0;if(L)e.timelinePos=C,e.checkBuffer();else{var I;const F=b==null||(I=b.event)==null?void 0:I.assetList;if(F){const G=c-(b[h]||b).start;for(let K=F.length;K--;){const V=F[K];if(V.duration&&G>=V.startOffset&&G<V.startOffset+V.duration){w=K;break}}}}e.setSchedulePosition(v,w)}}},d=()=>{const c=e.effectivePlayingItem;if(e.isInterstitial(c))return c;const h=t();return e.isInterstitial(h)?h:null},u={get currentTime(){const c=d(),h=e.effectivePlayingItem;return h&&h===c?r(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(c){const h=d(),f=e.effectivePlayingItem;f&&f===h&&l(c+f.playout.start,"playout")},get duration(){const c=d();return c?c.playout.end-c.playout.start:0},get assetPlayers(){var c;const h=(c=d())==null?void 0:c.event.assetList;return h?h.map(f=>e.getAssetPlayer(f.identifier)):[]},get playingIndex(){var c;const h=(c=d())==null?void 0:c.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return d()}};this.manager={get events(){var c,h;return((c=e.schedule)==null||(h=c.events)==null?void 0:h.slice(0))||[]},get schedule(){var c,h;return((c=e.schedule)==null||(h=c.items)==null?void 0:h.slice(0))||[]},get interstitialPlayer(){return d()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const c=t();return e.findItemIndex(c)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const c=e.effectivePlayingItem;return e.findItemIndex(c)},primary:{get bufferedEnd(){return a()},get currentTime(){const c=e.timelinePos;return c>0?c:0},set currentTime(c){l(c,"primary")},get duration(){return o("primary")},get seekableStart(){var c;return((c=e.primaryDetails)==null?void 0:c.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(c){l(c,"integrated")},get duration(){return o("integrated")},get seekableStart(){var c;return n(((c=e.primaryDetails)==null?void 0:c.fragmentStart)||0,"integrated")}},skip:()=>{const c=e.effectivePlayingItem,h=c==null?void 0:c.event;if(h&&!h.restrictions.skip){const f=e.findItemIndex(c);if(h.appendInPlace){const m=c.playout.start+c.event.duration;l(m+.001,"playout")}else e.advanceAfterAssetEnded(h,f,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,s=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!s?!1:this.findItemIndex(t)===s.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t,s;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let n=this.media;!n&&(e=this.bufferingItem)!=null&&(t=e.event)!=null&&t.appendInPlace&&(n=this.primaryMedia);const a=(s=n)==null?void 0:s.currentTime;if(!(a===void 0||!Y(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const s=this.getAssetPlayer(e);s&&this.transferMediaFromPlayer(s,t)}transferMediaFromPlayer(e,t){const s=e.interstitial.appendInPlace,r=e.media;if(s&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r){this.detachedData={media:r};return}const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Xe(n)}`),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var s,r;if(e.media===t)return;let n=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,d=(s=this.detachedData)==null?void 0:s.mediaSource;let u;if(a.media)l&&(n=a.transferMedia(),this.detachedData=n),u="Primary";else if(d){const f=this.getBufferingPlayer();f?(n=f.transferMedia(),u=`${f}`):u="detached MediaSource"}else u="detached media";if(!n){if(d)n=this.detachedData,this.log(`using detachedData: MediaSource ${Xe(n)}`);else if(!this.detachedData||a.media===t){const f=this.playerQueue;f.length>1&&f.forEach(m=>{if(o&&m.interstitial.appendInPlace!==l){const p=m.interstitial;this.clearInterstitial(m.interstitial,null),p.appendInPlace=!1,p.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${p}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const c=n&&"mediaSource"in n&&((r=n.mediaSource)==null?void 0:r.readyState)!=="closed",h=c&&n?n:t;if(this.log(`${c?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${u}`),h===n){const f=o&&e.assetId===this.schedule.assetIdAtEnd;h.overrides={duration:this.schedule.duration,endOfStream:!o||f,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const s=this.timelinePos,r=this.effectivePlayingItem;if(s===-1){const n=this.hls.startPosition;if(this.timelinePos=n,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(n>=0||!this.primaryLive){const a=this.timelinePos=n>0?n:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(r&&!this.playingItem){const n=e.findItemIndex(r);this.setSchedulePosition(n)}}advanceAfterAssetEnded(e,t,s){const r=kc(e,s);if(!e.isAssetPastPlayoutLimit(r))this.setSchedulePosition(t,r);else{const n=this.schedule.items;if(n){const a=t+1,o=n.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.timelinePos=l,this.checkBuffer()),this.setSchedulePosition(a)}}}setScheduleToAssetAtTime(e,t){const s=this.schedule,r=t.parentIdentifier,n=s.getEvent(r);if(n){const a=s.findEventIndex(r),o=s.findAssetIndex(n,e);this.advanceAfterAssetEnded(n,a,o-1)}}setSchedulePosition(e,t){const s=this.schedule.items;if(!s||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const r=e>=0?s[e]:null,n=this.playingItem,a=this.playingLastItem;if(this.isInterstitial(n)){var o;const d=n.event,u=this.playingAsset,c=u==null?void 0:u.identifier,h=c?this.getAssetPlayer(c):null;if(h&&c&&(!this.eventItemsMatch(n,r)||t!==void 0&&c!==((o=d.assetList)==null?void 0:o[t].identifier))){var l;const f=d.findAssetIndex(u);if(this.log(`INTERSTITIAL_ASSET_ENDED ${f+1}/${d.assetList.length} ${bn(u)}`),this.endedAsset=u,this.playingAsset=null,this.hls.trigger(y.INTERSTITIAL_ASSET_ENDED,{asset:u,assetListIndex:f,event:d,schedule:s.slice(0),scheduleIndex:e,player:h}),n!==this.playingItem){this.itemsMatch(n,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(d,this.findItemIndex(this.playingItem),f);return}this.retreiveMediaSource(c,r),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(n,r)&&(this.endedItem=n,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${d} ${Rs(n)}`),d.hasPlayed=!0,this.hls.trigger(y.INTERSTITIAL_ENDED,{event:d,schedule:s.slice(0),scheduleIndex:e}),d.cue.once)){this.updateSchedule();const f=this.schedule.items;if(r&&f){const m=this.findItemIndex(r);this.advanceSchedule(m,f,t,n,a)}return}}this.advanceSchedule(e,s,t,n,a)}advanceSchedule(e,t,s,r,n){const a=e>=0?t[e]:null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(d=>{const u=d.interstitial,c=this.schedule.findEventIndex(u.identifier);(c<e||c>e+1)&&this.clearInterstitial(u,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const d=a.event;if(s===void 0){s=this.schedule.findAssetIndex(d,this.timelinePos);const f=kc(d,s-1);if(d.isAssetPastPlayoutLimit(f)){this.advanceAfterAssetEnded(d,e,s);return}s=f}const u=this.waitingItem;this.assetsBuffered(a,o)||this.setBufferingItem(a);let c=this.preloadAssets(d,s);if(this.eventItemsMatch(a,u||r)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${Rs(a)} ${d.appendInPlace?"append in place":""}`),this.hls.trigger(y.INTERSTITIAL_STARTED,{event:d,schedule:t.slice(0),scheduleIndex:e})),!d.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${d}`);return}if(d.assetListLoader&&(d.assetListLoader.destroy(),d.assetListLoader=void 0),!o){this.log(`Waiting for attachMedia to start Interstitial ${d}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const h=d.assetList[s];if(!h){const f=t[e+1],m=this.media;f&&m&&!this.isInterstitial(f)&&m.currentTime<f.start&&(m.currentTime=this.timelinePos=f.start),this.advanceAfterAssetEnded(d,e,s||0);return}if(c||(c=this.getAssetPlayer(h.identifier)),c===null||c.destroyed){const f=d.assetList.length;this.warn(`asset ${s+1}/${f} player destroyed ${d}`),c=this.createAssetPlayer(d,h,s)}if(!this.eventItemsMatch(a,this.bufferingItem)&&d.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(c,s,t,e,o),this.shouldPlay&&sp(c.media)}else a!==null?(this.resumePrimary(a,e,r),this.shouldPlay&&sp(this.hls.media)):n&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e,t;return(e=this.mediaSelection)==null||(t=e.main)==null?void 0:t.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,s){var r;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Rs(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,t),this.timelinePos=a),this.attachPrimary(a,e)}if(!s)return;const n=this.schedule.items;n&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Rs(e)}`),this.hls.trigger(y.INTERSTITIALS_PRIMARY_RESUMED,{schedule:n.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const s=e.start;if(this.primaryLive){const r=this.primaryDetails;if(t===0)return this.hls.startPosition;if(r&&(s<r.fragmentStart||s>r.edge))return this.hls.liveSyncPosition||-1}return s}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:me.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,s){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const n=this.hls;n.media?this.checkBuffer():(this.transferMediaTo(n,r),s&&this.startLoadingPrimaryAt(e,s)),s||(this.timelinePos=e,this.startLoadingPrimaryAt(e,s))}startLoadingPrimaryAt(e,t){var s;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((s=r.mainForwardBufferInfo)==null?void 0:s.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(y.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(y.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1)return;const s=this.hls.levels[t.level],r=Ue(Ue({},this.mediaSelection||this.altSelection),{},{main:s});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const s=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=Ue(Ue({},this.altSelection),{},{audio:s});return}const n=Ue(Ue({},r),{},{audio:s});this.mediaSelection=n}onSubtitleTrackUpdated(e,t){const s=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=Ue(Ue({},this.altSelection),{},{subtitles:s});return}const n=Ue(Ue({},r),{},{subtitles:s});this.mediaSelection=n}onAudioTrackSwitching(e,t){const s=mm(t);this.playerQueue.forEach(r=>r.hls.setAudioOption(t)||r.hls.setAudioOption(s))}onSubtitleTrackSwitch(e,t){const s=mm(t);this.playerQueue.forEach(r=>r.hls.setSubtitleOption(t)||t.id!==-1&&r.hls.setSubtitleOption(s))}onBufferCodecs(e,t){const s=t.tracks;s&&(this.requiredTracks=s)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const s=this.playingItem;if(s&&!this.itemsMatch(s,this.bufferingItem)&&!this.isInterstitial(s)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let r=0;r<t.length;r++){const n=t[r];if(n.cue.post){var s;const a=this.schedule.findEventIndex(n.identifier),o=(s=this.schedule.items)==null?void 0:s[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const s=this.findItemIndex(t);this.setSchedulePosition(s+1)}else this.shouldPlay=!1}updateItem(e,t){const s=this.schedule.items;if(e&&s){const r=this.findItemIndex(e,t);return s[r]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((n,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(n.identifier,null)});const s=e.end+.25,r=me.bufferInfo(this.primaryMedia,s,0);(r.end>s||(r.nextStart||0)>s)&&(this.attachPrimary(s,null),this.flushFrontBuffer(s))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var s;return!!t&&(e===t||e.event.identifier===((s=t.event)==null?void 0:s.identifier))}findItemIndex(e,t){return e?this.schedule.findItemIndex(e,t):-1}updateSchedule(){const e=this.mediaSelection;e&&this.schedule.updateSchedule(e,[])}checkBuffer(e){const t=this.schedule.items;if(!t)return;const s=me.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,t,e)}updateBufferedPos(e,t,s){const r=this.schedule,n=this.bufferingItem;if(this.bufferedPos>e)return;if(t.length===1&&this.itemsMatch(t[0],n)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var d,u;const c=this.findItemIndex(n),h=Math.min(c+1,t.length-1),f=t[h];if((l===-1&&n&&e>=n.end||(d=f.event)!=null&&d.appendInPlace&&e+.01>=f.start)&&(l=h),h-o>1&&(n==null||(u=n.event)==null?void 0:u.appendInPlace)===!1)return;if(this.bufferedPos=e,l>c&&l>o)this.bufferedToItem(f);else{const m=this.primaryDetails;this.primaryLive&&m&&e>m.edge-m.targetduration&&f.start<m.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else s&&a&&!this.itemsMatch(a,n)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const n=this.getAssetPlayer(r.identifier);return!(n!=null&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,s=this.schedule;if(this.itemsMatch(e,t))this.bufferingItem!==e&&(this.bufferingItem=e);else{const{items:r,events:n}=s;if(!r||!n)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:t?t.end-this.timelinePos:0;this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Rs(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),this.playbackDisabled||(a?e.event.assetList.forEach(d=>{const u=this.getAssetPlayer(d.identifier);u&&u.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(d=>d.pauseBuffering()))),this.hls.trigger(y.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:n.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}return t}bufferedToItem(e,t=0){const s=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(s!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),s=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(s)}bufferedToEvent(e,t){const s=e.event,r=s.assetList.length===0&&!s.assetListLoader,n=s.cue.once;if(r||!n){const a=this.preloadAssets(s,t);if(a!=null&&a.interstitial.appendInPlace){const o=s.assetList[t],l=this.primaryMedia;o&&l&&this.bufferAssetPlayer(a,l)}}}preloadAssets(e,t){const s=e.assetUrl,r=e.assetList.length,n=r===0&&!e.assetListLoader,a=e.cue.once;if(n){const l=e.timelineStart;if(e.appendInPlace){var o;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(o=h.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let d,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const h=u-l;h>0&&(d=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${s?1:r} ${e}${d?` live-start: ${u} start-offset: ${d}`:""}`),s)return this.createAsset(e,0,0,l,e.duration,s);const c=this.assetListLoader.loadAssetList(e,d);c&&(e.assetListLoader=c)}else if(!a&&r){for(let l=t;l<r;l++){const d=e.assetList[l],u=this.getAssetPlayerQueueIndex(d.identifier);(u===-1||this.playerQueue[u].destroyed)&&!d.error&&this.createAssetPlayer(e,d,l)}return this.getAssetPlayer(e.assetList[t].identifier)}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(r=>{this.hls.trigger(y.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let s=0;s<t.length;s++)if(e===t[s].assetId)return s;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let s=0;s<e.length;s++)if(e[s].media===t)return e[s]}return null}createAsset(e,t,s,r,n,a){const o={parentIdentifier:e.identifier,identifier:L_(e,a,t),duration:n,startOffset:s,timelineStart:r,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,s){const r=this.hls,n=r.userConfig;let a=n.videoPreference;const o=r.loadLevelObj||r.levels[r.currentLevel];(a||o)&&(a=Ne({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=r.audioTracks[r.audioTrack],d=r.subtitleTracks[r.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const E=this.timelinePos-t.timelineStart;if(E>1){const T=t.duration;T&&E<T&&(u=E)}}const c=t.identifier,h=Ue(Ue({},n),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:c,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||n.audioPreference,subtitlePreference:d||n.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const f=h.cmcd;f!=null&&f.sessionId&&f.contentId&&(h.cmcd=Ne({},f,{contentId:fo(t.uri)})),this.getAssetPlayer(c)&&this.warn(`Duplicate date range identifier ${e} and asset ${c}`);const m=new w_(this.HlsPlayerClass,h,e,t);this.playerQueue.push(m),e.assetList[s]=t;const p=E=>{if(E.live){const R=new Error(`Interstitials MUST be VOD assets ${e}`),I={fatal:!0,type:ne.OTHER_ERROR,details:P.INTERSTITIAL_ASSET_ITEM_ERROR,error:R};this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),s,R.message);return}const T=E.edge-E.fragmentStart,x=t.duration;(x===null||T>x)&&(this.log(`Interstitial asset "${c}" duration change ${x} > ${T}`),t.duration=T,this.updateSchedule())};m.on(y.LEVEL_UPDATED,(E,{details:T})=>p(T)),m.on(y.LEVEL_PTS_UPDATED,(E,{details:T})=>p(T));const g=(E,T)=>{const x=this.getAssetPlayer(c);if(x&&T.tracks){x.off(y.BUFFER_CODECS,g),x.tracks=T.tracks;const R=this.primaryMedia;this.bufferingAsset===x.assetItem&&R&&!x.media&&this.bufferAssetPlayer(x,R)}};m.on(y.BUFFER_CODECS,g);const v=()=>{var E;const T=this.getAssetPlayer(c);if(this.log(`buffered to end of asset ${T}`),!T)return;const x=this.schedule.findEventIndex(e.identifier),R=(E=this.schedule.items)==null?void 0:E[x];if(this.isInterstitial(R)){const C=e.findAssetIndex(t),L=kc(e,C);if(!e.isAssetPastPlayoutLimit(L))this.bufferedToItem(R,L);else{var I;const S=(I=this.schedule.items)==null?void 0:I[x+1];S&&this.bufferedToItem(S)}}};m.on(y.BUFFERED_TO_END,v);const b=E=>()=>{if(!this.getAssetPlayer(c))return;this.shouldPlay=!0;const x=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,x,E)};return m.once(y.MEDIA_ENDED,b(s)),m.once(y.PLAYOUT_LIMIT_REACHED,b(1/0)),m.on(y.ERROR,(E,T)=>{const x=this.getAssetPlayer(c);if(T.details===P.BUFFER_STALLED_ERROR){if(x!=null&&x.media){const R=x.currentTime,I=x.duration-R;R&&e.appendInPlace&&I/x.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${c} ${e} at ${x.media.currentTime}`),v()):(this.warn(`Stalled at ${R} of ${R+I} in asset ${c} ${e}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(T,e,this.schedule.findEventIndex(e.identifier),s,`Asset player error ${T.error} ${e}`)}),m.on(y.DESTROYING,()=>{if(!this.getAssetPlayer(c))return;const T=new Error(`Asset player destroyed unexpectedly ${c}`),x={fatal:!0,type:ne.OTHER_ERROR,details:P.INTERSTITIAL_ASSET_ITEM_ERROR,error:T};this.handleAssetItemError(x,e,this.schedule.findEventIndex(e.identifier),s,T.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${bn(t)}`),this.hls.trigger(y.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:s,event:e,player:m}),m}clearInterstitial(e,t){e.assetList.forEach(s=>{this.clearAssetPlayer(s.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const s=this.playerQueue[t];this.transferMediaFromPlayer(s,null),s.resetDetails()}}clearAssetPlayer(e,t){const s=this.getAssetPlayerQueueIndex(e);if(s!==-1){this.log(`clear asset player "${e}" toSegment: ${t&&Rs(t)}`);const r=this.playerQueue[s];this.transferMediaFromPlayer(r,t),this.playerQueue.splice(s,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,s,r,n){const{interstitial:a,assetItem:o,assetId:l}=e,d=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,s[r]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${d} ${bn(o)}`),this.hls.trigger(y.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:s.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,n)}bufferAssetPlayer(e,t){var s,r;const{interstitial:n,assetItem:a}=e,o=this.schedule.findEventIndex(n.identifier),l=(s=this.schedule.items)==null?void 0:s[o];if(!l)return;this.setBufferingItem(l),this.bufferingAsset=a;const d=this.getBufferingPlayer();if(d===e)return;const u=n.appendInPlace;if(u&&(d==null?void 0:d.interstitial.appendInPlace)===!1)return;const c=(d==null?void 0:d.tracks)||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(u&&a!==this.playingAsset){if(!e.tracks)return;if(c&&!mv(c,e.tracks)){const h=new Error(`Asset ${bn(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(c)}')`),f={fatal:!0,type:ne.OTHER_ERROR,details:P.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},m=n.findAssetIndex(a);this.handleAssetItemError(f,n,o,m,h.message);return}}this.transferMediaTo(e,t)}handleAssetItemError(e,t,s,r,n){if(e.details===P.BUFFER_STALLED_ERROR)return;const a=t.assetList[r];this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&bn(a)} ${e.error}`);const o=a==null?void 0:a.identifier,l=this.getAssetPlayerQueueIndex(o),d=this.playerQueue[l]||null,u=this.schedule.items,c=Ne({},e,{fatal:!1,errorAction:Lo(!0),asset:a,assetListIndex:r,event:t,schedule:u,scheduleIndex:s,player:d});if(this.hls.trigger(y.INTERSTITIAL_ASSET_ERROR,c),!e.fatal)return;const h=this.playingAsset,f=new Error(n);if(a&&(this.clearAssetPlayer(o,null),a.error=f),!t.assetList.some(m=>!m.error))t.error=f;else{for(let m=r;m<t.assetList.length;m++)this.resetAssetPlayer(t.assetList[m].identifier);this.updateSchedule()}t.error?this.primaryFallback(t):h&&h.identifier===o&&this.advanceAfterAssetEnded(t,s,r)}primaryFallback(e){const t=e.timelineStart,s=this.effectivePlayingItem;if(this.updateSchedule(),s){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${s?Rs(s):"<none>"} error: ${e.error}`);let r=this.timelinePos;r===-1&&(r=this.hls.startPosition);const n=this.updateItem(s,r);this.itemsMatch(s,n)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t));const a=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var s;const r=t.event,n=r.identifier,a=t.assetListResponse.ASSETS;if(!this.schedule.hasEvent(n))return;const o=r.timelineStart,l=r.duration;let d=0;a.forEach((m,p)=>{const g=parseFloat(m.DURATION);this.createAsset(r,p,d,o+d,g,m.URI),d+=g}),r.duration=d,this.log(`Loaded asset-list with duration: ${d} (was: ${l}) ${r}`);const u=this.waitingItem,c=(u==null?void 0:u.event.identifier)===n;this.updateSchedule();const h=(s=this.bufferingItem)==null?void 0:s.event;if(c){var f;const m=this.schedule.findEventIndex(n),p=(f=this.schedule.items)==null?void 0:f[m];if(p){if(!this.playingItem&&this.timelinePos>p.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==m){r.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${r}`),this.primaryFallback(r);return}this.setBufferingItem(p)}this.setSchedulePosition(m)}else if((h==null?void 0:h.identifier)===n&&h.appendInPlace){const m=r.assetList[0],p=this.getAssetPlayer(m.identifier),g=this.primaryMedia;m&&p&&g&&this.bufferAssetPlayer(p,g)}}onError(e,t){switch(t.details){case P.ASSET_LIST_PARSING_ERROR:case P.ASSET_LIST_LOAD_ERROR:case P.ASSET_LIST_LOAD_TIMEOUT:{const s=t.interstitial;s&&this.primaryFallback(s);break}case P.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const rp=500;class O_ extends h0{constructor(e,t,s){super(e,t,s,"subtitle-stream-controller",te.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(y.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(y.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(y.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(y.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(y.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(y.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(y.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(y.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(y.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=U.IDLE,this.setInterval(rp),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:s,success:r}=t;if(this.fragContextChanged(s)||(mt(s)&&(this.fragPrevious=s),this.state=U.IDLE),!r)return;const n=this.tracksBuffered[this.currentTrackId];if(!n)return;let a;const o=s.start;for(let d=0;d<n.length;d++)if(o>=n[d].start&&o<=n[d].end){a=n[d];break}const l=s.start+s.duration;a?a.end=l:(a={start:o,end:l},n.push(a)),this.fragmentTracker.fragBuffered(s),this.fragBufferedComplete(s,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:s,endOffset:r}=t;if(s===0&&r!==Number.POSITIVE_INFINITY){const n=r-1;if(n<=0)return;t.endOffsetSubtitles=Math.max(0,n),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=n){a.shift();continue}else if(a[o].start<n)a[o].start=n;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(s,n,te.SUBTITLE)}}onError(e,t){const s=t.frag;(s==null?void 0:s.type)===te.SUBTITLE&&(t.details===P.FRAG_GAP&&this.fragmentTracker.fragBuffered(s,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==U.STOPPED&&(this.state=U.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&c2(this.levels,t)){this.levels=t.map(s=>new Io(s));return}this.tracksBuffered=[],this.levels=t.map(s=>{const r=new Io(s);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,te.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var s;if(this.currentTrackId=t.id,!((s=this.levels)!=null&&s.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==U.STOPPED&&this.setInterval(rp)}onSubtitleTrackLoaded(e,t){var s;const{currentTrackId:r,levels:n}=this,{details:a,id:o}=t;if(!n){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=n[o];if(o>=n.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(a.live||(s=l.details)!=null&&s.live){if(a.deltaUpdateFailed)return;const c=this.mainDetails;if(!c){this.startFragRequested=!1;return}const h=c.fragments[0];if(!l.details)a.hasProgramDateTime&&c.hasProgramDateTime?(lu(a,c),d=a.fragmentStart):h&&(d=h.start,yh(a,d));else{var u;d=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),d===0&&h&&(d=h.start,yh(a,d))}c&&!this.startFragRequested&&this.setStartPosition(c,d)}l.details=a,this.levelLastLoaded=l,o===r&&(this.hls.trigger(y.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===U.IDLE&&(tn(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:s}=e,r=t.decryptdata,n=this.hls;if(!this.fragContextChanged(t)&&s&&s.byteLength>0&&r!=null&&r.key&&r.iv&&jn(r.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(s),r.key.buffer,r.iv.buffer,c0(r.method)).catch(o=>{throw n.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();n.trigger(y.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=U.IDLE})}}doTick(){if(!this.media){this.state=U.IDLE;return}if(this.state===U.IDLE){const{currentTrackId:e,levels:t}=this,s=t==null?void 0:t[e];if(!s||!t.length||!s.details||this.waitForLive(s))return;const{config:r}=this,n=this.getLoadPosition(),a=me.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,r.maxBufferHole),{end:o,len:l}=a,d=s.details,u=this.hls.maxBufferLength+d.levelTargetDuration;if(l>u)return;const c=d.fragments,h=c.length,f=d.edge;let m=null;const p=this.fragPrevious;if(o<f){const b=r.maxFragLookUpTolerance,E=o>f-b?0:b;m=tn(p,c,Math.max(c[0].start,o),E),!m&&p&&p.start<c[0].start&&(m=c[0])}else m=c[h-1];if(m=this.filterReplacedPrimary(m,s.details),!m)return;const g=m.sn-d.startSN,v=c[g-1];if(v&&v.cc===m.cc&&this.fragmentTracker.getState(v)===yt.NOT_LOADED&&(m=v),this.fragmentTracker.getState(m)===yt.NOT_LOADED){const b=this.mapToInitFragWhenRequired(m);b&&this.loadFragment(b,s,o)}}}loadFragment(e,t,s){mt(e)?super.loadFragment(e,t,s):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new N_(this.tracksBuffered[this.currentTrackId]||[])}}class N_{constructor(e){this.buffered=void 0;const t=(s,r,n)=>{if(r=r>>>0,r>n-1)throw new DOMException(`Failed to execute '${s}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${n})`);return e[r][s]};this.buffered={get length(){return e.length},end(s){return t("end",s,e.length)},start(s){return t("start",s,e.length)}}}}const F_={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},_2=i=>String.fromCharCode(F_[i]||i),Ei=15,as=100,U_={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},$_={17:2,18:4,21:6,22:8,23:10,19:13,20:15},B_={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},H_={25:2,26:4,29:6,30:8,31:10,27:13,28:15},V_=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class G_{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const s=typeof t=="function"?t():t;ke.log(`${this.time} [${e}] ${s}`)}}}const yr=function(e){const t=[];for(let s=0;s<e.length;s++)t.push(e[s].toString(16));return t};class A2{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let s=0;s<t.length;s++){const r=t[s];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class K_{constructor(){this.uchar=" ",this.penState=new A2}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class W_{constructor(e){this.chars=[],this.pos=0,this.currPenState=new A2,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<as;t++)this.chars.push(new K_);this.logger=e}equals(e){for(let t=0;t<as;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<as;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<as;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>as&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=as)}moveCursor(e){const t=this.pos+e;if(e>1)for(let s=this.pos+1;s<t+1;s++)this.chars[s].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=_2(e);if(this.pos>=as){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<as;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let s=0;s<as;s++){const r=this.chars[s].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class wc{constructor(e){this.rows=[],this.currRow=Ei-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Ei;t++)this.rows.push(new W_(e));this.logger=e}reset(){for(let e=0;e<Ei;e++)this.rows[e].clear();this.currRow=Ei-1}equals(e){let t=!0;for(let s=0;s<Ei;s++)if(!this.rows[s].equals(e.rows[s])){t=!1;break}return t}copy(e){for(let t=0;t<Ei;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Ei;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Xe(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<Ei;o++)this.rows[o].clear();const n=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[n].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(a.rows[n+d])}}this.currRow=t;const s=this.rows[this.currRow];if(e.indent!==null){const n=e.indent,a=Math.max(n-1,0);s.setCursor(e.indent),e.color=s.chars[a].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Xe(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let s="",r=-1;for(let n=0;n<Ei;n++){const a=this.rows[n].getTextString();a&&(r=n+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?s="["+t.join(" | ")+"]":s=t.join(`
`)),s}getTextAndFormat(){return this.rows}}class np{constructor(e,t,s){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new wc(s),this.nonDisplayedMemory=new wc(s),this.lastOutputScreen=new wc(s),this.currRollUpRow=this.displayedMemory.rows[Ei-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=s}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ei-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let s=0;s<e.length;s++)this.writeScreen.insertChar(e[s]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const s=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[s]}this.logger.log(2,"MIDROW: "+Xe(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class ap{constructor(e,t,s){this.channels=void 0,this.currentChannel=0,this.cmdHistory=j_(),this.logger=void 0;const r=this.logger=new G_;this.channels=[null,new np(e,t,r),new np(e+1,s,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let s=0;s<t.length;s+=2){const r=t[s]&127,n=t[s+1]&127;let a=!1,o=null;if(r===0&&n===0)continue;this.logger.log(3,()=>"["+yr([t[s],t[s+1]])+"] -> ("+yr([r,n])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if(q_(r,n,l)){ml(null,null,l),this.logger.log(3,()=>"Repeated command ("+yr([r,n])+") is dropped");continue}ml(r,n,this.cmdHistory),a=this.parseCmd(r,n),a||(a=this.parseMidrow(r,n)),a||(a=this.parsePAC(r,n)),a||(a=this.parseBackgroundAttributes(r,n))}else ml(null,null,l);if(!a&&(o=this.parseChars(r,n),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+yr([r,n])+" orig: "+yr([t[s],t[s+1]]))}}parseCmd(e,t){const s=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(s||r))return!1;const n=e===20||e===21||e===23?1:2,a=this.channels[n];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let s=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?s=1:s=2,s!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[s];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+yr([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let s;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,n=(e===16||e===24)&&t>=64&&t<=95;if(!(r||n))return!1;const a=e<=23?1:2;t>=64&&t<=95?s=a===1?U_[e]:B_[e]:s=a===1?$_[e]:H_[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(s,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let s;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?s=t-96:s=t-64,r.underline=(s&1)===1,s<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(s/2)]:s<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((s-16)/2)*4,r}parseChars(e,t){let s,r=null,n=null;if(e>=25?(s=2,n=e-8):(s=1,n=e),n>=17&&n<=19){let a;n===17?a=t+80:n===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+_2(a)+"' in channel "+s),r=[a]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+yr(r).join(",")),r}parseBackgroundAttributes(e,t){const s=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(s||r))return!1;let n;const a={};e===16||e===24?(n=Math.floor((t-32)/2),a.background=V_[n],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}ml(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const s=this.channels[t];s&&s.cueSplitAtTime(e)}}}function ml(i,e,t){t.a=i,t.b=e}function q_(i,e,t){return t.a===i&&t.b===e}function j_(){return{a:null,b:null}}var A0=function(){if(ou!=null&&ou.VTTCue)return self.VTTCue;const i=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const d=l.toLowerCase();return~o.indexOf(d)?d:!1}function s(o){return t(i,o)}function r(o){return t(e,o)}function n(o,...l){let d=1;for(;d<arguments.length;d++){const u=arguments[d];for(const c in u)o[c]=u[c]}return o}function a(o,l,d){const u=this,c={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,m=o,p=l,g=d,v=null,b="",E=!0,T="auto",x="start",R=50,I="middle",C=50,L="middle";Object.defineProperty(u,"id",n({},c,{get:function(){return h},set:function(S){h=""+S}})),Object.defineProperty(u,"pauseOnExit",n({},c,{get:function(){return f},set:function(S){f=!!S}})),Object.defineProperty(u,"startTime",n({},c,{get:function(){return m},set:function(S){if(typeof S!="number")throw new TypeError("Start time must be set to a number.");m=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",n({},c,{get:function(){return p},set:function(S){if(typeof S!="number")throw new TypeError("End time must be set to a number.");p=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",n({},c,{get:function(){return g},set:function(S){g=""+S,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",n({},c,{get:function(){return v},set:function(S){v=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",n({},c,{get:function(){return b},set:function(S){const w=s(S);if(w===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",n({},c,{get:function(){return E},set:function(S){E=!!S,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",n({},c,{get:function(){return T},set:function(S){if(typeof S!="number"&&S!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",n({},c,{get:function(){return x},set:function(S){const w=r(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");x=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",n({},c,{get:function(){return R},set:function(S){if(S<0||S>100)throw new Error("Position must be between 0 and 100.");R=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",n({},c,{get:function(){return I},set:function(S){const w=r(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");I=w,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",n({},c,{get:function(){return C},set:function(S){if(S<0||S>100)throw new Error("Size must be between 0 and 100.");C=S,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",n({},c,{get:function(){return L},set:function(S){const w=r(S);if(!w)throw new SyntaxError("An invalid or illegal string was specified.");L=w,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class Y_{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function S2(i){function e(s,r,n,a){return(s|0)*3600+(r|0)*60+(n|0)+parseFloat(a||0)}const t=i.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Z_{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,s){return s?this.has(e)?this.values[e]:t[s]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,s){for(let r=0;r<s.length;++r)if(t===s[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const s=parseFloat(t);if(s>=0&&s<=100)return this.set(e,s),!0}return!1}}function C2(i,e,t,s){const r=s?i.split(s):[i];for(const n in r){if(typeof r[n]!="string")continue;const a=r[n].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const xh=new A0(0,0,""),pl=xh.align==="middle"?"middle":"center";function z_(i,e,t){const s=i;function r(){const o=S2(i);if(o===null)throw new Error("Malformed timestamp: "+s);return i=i.replace(/^[^\sa-zA-Z-]+/,""),o}function n(o,l){const d=new Z_;C2(o,function(h,f){let m;switch(h){case"region":for(let p=t.length-1;p>=0;p--)if(t[p].id===f){d.set(h,t[p].region);break}break;case"vertical":d.alt(h,f,["rl","lr"]);break;case"line":m=f.split(","),d.integer(h,m[0]),d.percent(h,m[0])&&d.set("snapToLines",!1),d.alt(h,m[0],["auto"]),m.length===2&&d.alt("lineAlign",m[1],["start",pl,"end"]);break;case"position":m=f.split(","),d.percent(h,m[0]),m.length===2&&d.alt("positionAlign",m[1],["start",pl,"end","line-left","line-right","auto"]);break;case"size":d.percent(h,f);break;case"align":d.alt(h,f,["start",pl,"end","left","right"]);break}},/:/,/\s/),l.region=d.get("region",null),l.vertical=d.get("vertical","");let u=d.get("line","auto");u==="auto"&&xh.line===-1&&(u=-1),l.line=u,l.lineAlign=d.get("lineAlign","start"),l.snapToLines=d.get("snapToLines",!0),l.size=d.get("size",100),l.align=d.get("align",pl);let c=d.get("position","auto");c==="auto"&&xh.position===50&&(c=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=c}function a(){i=i.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),i.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+s);i=i.slice(3),a(),e.endTime=r(),a(),n(i,e)}function x2(i){return i.replace(/<br(?: \/)?>/gi,`
`)}class Q_{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Y_,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function s(){let n=t.buffer,a=0;for(n=x2(n);a<n.length&&n[a]!=="\r"&&n[a]!==`
`;)++a;const o=n.slice(0,a);return n[a]==="\r"&&++a,n[a]===`
`&&++a,t.buffer=n.slice(a),o}function r(n){C2(n,function(a,o){},/:/)}try{let n="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;n=s();const o=n.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:n=s(),t.state){case"HEADER":/:/.test(n)?r(n):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new A0(0,0,""),t.state="CUE",n.indexOf("-->")===-1){t.cue.id=n;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{z_(n,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=n.indexOf("-->")!==-1;if(!n||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=n}continue;case"BADCUE":n||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const X_=/\r\n|\n\r|\n|\r/g,Dc=function(e,t,s=0){return e.slice(s,s+t.length)===t},J_=function(e){let t=parseInt(e.slice(-3));const s=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),n=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Y(t)||!Y(s)||!Y(r)||!Y(n))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*s,t+=60*1e3*r,t+=60*60*1e3*n,t};function S0(i,e,t){return fo(i.toString())+fo(e.toString())+fo(t)}const e9=function(e,t,s){let r=e[t],n=e[r.prevCC];if(!n||!n.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(a=n)!=null&&a.new;){var a;e.ccOffset+=r.start-n.start,r.new=!1,r=n,n=e[r.prevCC]}e.presentationOffset=s};function t9(i,e,t,s,r,n,a){const o=new Q_,l=Zt(new Uint8Array(i)).trim().replace(X_,`
`).split(`
`),d=[],u=e?g6(e.baseTime,e.timescale):0;let c="00:00.000",h=0,f=0,m,p=!0;o.oncue=function(g){const v=t[s];let b=t.ccOffset;const E=(h-u)/9e4;if(v!=null&&v.new&&(f!==void 0?b=t.ccOffset=v.start:e9(t,s,E)),E){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}b=E-t.presentationOffset}const T=g.endTime-g.startTime,x=ni((g.startTime+b-f)*9e4,r*9e4)/9e4;g.startTime=Math.max(x,0),g.endTime=Math.max(x+T,0);const R=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(R)),g.id||(g.id=S0(g.startTime,g.endTime,R)),g.endTime>0&&d.push(g)},o.onparsingerror=function(g){m=g},o.onflush=function(){if(m){a(m);return}n(d)},l.forEach(g=>{if(p)if(Dc(g,"X-TIMESTAMP-MAP=")){p=!1,g.slice(16).split(",").forEach(v=>{Dc(v,"LOCAL:")?c=v.slice(6):Dc(v,"MPEGTS:")&&(h=parseInt(v.slice(7)))});try{f=J_(c)/1e3}catch(v){m=v}return}else g===""&&(p=!1);o.parse(g+`
`)}),o.flush()}const Mc="stpp.ttml.im1t",I2=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,L2=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,i9={left:"start",center:"center",right:"end",start:"start",end:"end"};function op(i,e,t,s){const r=Ee(new Uint8Array(i),["mdat"]);if(r.length===0){s(new Error("Could not parse IMSC1 mdat"));return}const n=r.map(o=>Zt(o)),a=p6(e.baseTime,1,e.timescale);try{n.forEach(o=>t(s9(o,a)))}catch(o){s(o)}}function s9(i,e){const r=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(n).reduce((c,h)=>(c[h]=r.getAttribute(`ttp:${h}`)||n[h],c),{}),o=r.getAttribute("xml:space")!=="preserve",l=lp(Pc(r,"styling","style")),d=lp(Pc(r,"layout","region")),u=Pc(r,"body","[begin]");return[].map.call(u,c=>{const h=R2(c,o);if(!h||!c.hasAttribute("begin"))return null;const f=Nc(c.getAttribute("begin"),a),m=Nc(c.getAttribute("dur"),a);let p=Nc(c.getAttribute("end"),a);if(f===null)throw dp(c);if(p===null){if(m===null)throw dp(c);p=f+m}const g=new A0(f-e,p-e,h);g.id=S0(g.startTime,g.endTime,g.text);const v=d[c.getAttribute("region")],b=l[c.getAttribute("style")],E=r9(v,b,l),{textAlign:T}=E;if(T){const x=i9[T];x&&(g.lineAlign=x),g.align=T}return Ne(g,E),g}).filter(c=>c!==null)}function Pc(i,e,t){const s=i.getElementsByTagName(e)[0];return s?[].slice.call(s.querySelectorAll(t)):[]}function lp(i){return i.reduce((e,t)=>{const s=t.getAttribute("xml:id");return s&&(e[s]=t),e},{})}function R2(i,e){return[].slice.call(i.childNodes).reduce((t,s,r)=>{var n;return s.nodeName==="br"&&r?t+`
`:(n=s.childNodes)!=null&&n.length?R2(s,e):e?t+s.textContent.trim().replace(/\s+/g," "):t+s.textContent},"")}function r9(i,e,t){const s="http://www.w3.org/ns/ttml#styling";let r=null;const n=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=i!=null&&i.hasAttribute("style")?i.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(r=t[a]),n.reduce((o,l)=>{const d=Oc(e,s,l)||Oc(i,s,l)||Oc(r,s,l);return d&&(o[l]=d),o},{})}function Oc(i,e,t){return i&&i.hasAttributeNS(e,t)?i.getAttributeNS(e,t):null}function dp(i){return new Error(`Could not parse ttml timestamp ${i}`)}function Nc(i,e){if(!i)return null;let t=S2(i);return t===null&&(I2.test(i)?t=n9(i,e):L2.test(i)&&(t=a9(i,e))),t}function n9(i,e){const t=I2.exec(i),s=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+s/e.frameRate}function a9(i,e){const t=L2.exec(i),s=Number(t[1]);switch(t[2]){case"h":return s*3600;case"m":return s*60;case"ms":return s*1e3;case"f":return s/e.frameRate;case"t":return s/e.tickRate}return s}class gl{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,s){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=s,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class o9{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=cp(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(y.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(y.FRAG_LOADING,this.onFragLoading,this),e.on(y.FRAG_LOADED,this.onFragLoaded,this),e.on(y.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(y.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(y.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(y.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(y.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(y.FRAG_LOADING,this.onFragLoading,this),e.off(y.FRAG_LOADED,this.onFragLoaded,this),e.off(y.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(y.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(y.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(y.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(y.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new gl(this,"textTrack1"),t=new gl(this,"textTrack2"),s=new gl(this,"textTrack3"),r=new gl(this,"textTrack4");this.cea608Parser1=new ap(1,e,t),this.cea608Parser2=new ap(3,s,r)}addCues(e,t,s,r,n){let a=!1;for(let o=n.length;o--;){const l=n[o],d=l9(l[0],l[1],t,s);if(d>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],s),a=!0,d/(s-t)>.5))return}if(a||n.push([t,s]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,s,r)}else{const o=this.Cues.newCue(null,t,s,r);this.hls.trigger(y.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:s,initPTS:r,timescale:n}){const{unparsedVttFrags:a}=this;s===te.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:n}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.initPTS[o.frag.cc]?this.onFragLoaded(y.FRAG_LOADED,o):this.hls.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:o.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:s}=this;if(s)for(let r=0;r<s.textTracks.length;r++){const n=s.textTracks[r];if(up(n,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return n}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:s,media:r}=this,{label:n,languageCode:a}=t[e],o=this.getExistingTrack(n,a);if(o)s[e]=o,Hn(s[e]),y2(s[e],r);else{const l=this.createTextTrack("captions",n,a);l&&(l[e]=!0,s[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const s=t.label,r={_id:e,label:s,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(y.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,s){const r=this.media;if(r)return r.addTextTrack(e,t,s)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const s=!!t.transferMedia;if(this.media=null,s)return;const{captionsTracks:r}=this;Object.keys(r).forEach(n=>{Hn(r[n]),delete r[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=cp(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let s=0;s<t.length;s++)Hn(t[s])}onSubtitleTracksUpdated(e,t){const s=t.subtitleTracks||[],r=s.some(n=>n.textCodec===Mc);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(c2(this.tracks,s)){this.tracks=s;return}if(this.textTracks=[],this.tracks=s,this.config.renderTextTracksNatively){const a=this.media,o=a?Gl(a.textTracks):null;if(this.tracks.forEach((l,d)=>{let u;if(o){let c=null;for(let h=0;h<o.length;h++)if(o[h]&&up(o[h],l)){c=o[h],o[h]=null;break}c&&(u=c)}if(u)Hn(u);else{const c=k2(l);u=this.createTextTrack(c,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(d=>d!==null).map(d=>d.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(y.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(s=>{const r=/(?:CC|SERVICE)([1-4])/.exec(s.instreamId);if(!r)return;const n=`textTrack${r[1]}`,a=this.captionsProperties[n];a&&(a.label=s.name,s.lang&&(a.languageCode=s.lang),a.media=s)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===te.MAIN){var s,r;const{cea608Parser1:n,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:d}=t.frag,u=(s=(r=t.part)==null?void 0:r.index)!=null?s:-1;n&&a&&(d!==o+1||d===o&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(n.reset(),a.reset()),this.lastCc=l,this.lastSn=d,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:s,payload:r}=t;if(s.type===te.SUBTITLE)if(r.byteLength){const n=s.decryptdata,a="stats"in t;if(n==null||!n.encrypted||a){const o=this.tracks[s.level],l=this.vttCCs;l[s.cc]||(l[s.cc]={start:s.start,prevCC:this.prevCC,new:!0},this.prevCC=s.cc),o&&o.textCodec===Mc?this._parseIMSC1(s,r):this._parseVTTs(t)}}else this.hls.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const s=this.hls;op(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),s.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{s.logger.log(`Failed to parse IMSC1: ${r}`),s.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:s,payload:r}=e,{initPTS:n,unparsedVttFrags:a}=this,o=n.length-1;if(!n[s.cc]&&o===-1){a.push(e);return}const l=this.hls,d=(t=s.initSegment)!=null&&t.data?ui(s.initSegment.data,new Uint8Array(r)).buffer:r;t9(d,this.initPTS[s.cc],this.vttCCs,s.cc,s.start,u=>{this._appendCues(u,s.level),l.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:s})},u=>{const c=u.message==="Missing initPTS for VTT MPEGTS";c?a.push(e):this._fallbackToIMSC1(s,r),l.logger.log(`Failed to parse VTT cue: ${u}`),!(c&&o>s.cc)&&l.trigger(y.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:s,error:u})})}_fallbackToIMSC1(e,t){const s=this.tracks[e.level];s.textCodec||op(t,this.initPTS[e.cc],()=>{s.textCodec=Mc,this._parseIMSC1(e,t)},()=>{s.textCodec="wvtt"})}_appendCues(e,t){const s=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(n=>b2(r,n))}else{const r=this.tracks[t];if(!r)return;const n=r.default?"default":"subtitles"+t;s.trigger(y.CUES_PARSED,{type:"subtitles",cues:e,track:n})}}onFragDecrypted(e,t){const{frag:s}=t;s.type===te.SUBTITLE&&this.onFragLoaded(y.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:s,samples:r}=t;if(!(s.type===te.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let n=0;n<r.length;n++){const a=r[n].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(r[n].pts,o[0]),this.cea608Parser2.addData(r[n].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:s,endOffsetSubtitles:r,type:n}){const{media:a}=this;if(!(!a||a.currentTime<s)){if(!n||n==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>Ch(o[l],t,s))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>Ch(o[l],t,r))}}}extractCea608Data(e){const t=[[],[]],s=e[0]&31;let r=2;for(let n=0;n<s;n++){const a=e[r++],o=127&e[r++],l=127&e[r++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function k2(i){return i.characteristics&&/transcribes-spoken-dialog/gi.test(i.characteristics)&&/describes-music-and-sound/gi.test(i.characteristics)?"captions":"subtitles"}function up(i,e){return!!i&&i.kind===k2(e)&&_h(e,i)}function l9(i,e,t,s){return Math.min(e,s)-Math.max(i,t)}function cp(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const d9=/\s/,u9={newCue(i,e,t,s){const r=[];let n,a,o,l,d;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<s.rows.length;h++)if(n=s.rows[h],o=!0,l=0,d="",!n.isEmpty()){var c;for(let p=0;p<n.chars.length;p++)d9.test(n.chars[p].uchar)&&o?l++:(d+=n.chars[p].uchar,o=!1);n.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=x2(d.trim()),m=S0(e,t,f);i!=null&&(c=i.cues)!=null&&c.getCueById(m)||(a=new u(e,t,f),a.id=m,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(a))}return i&&r.length&&(r.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),r.forEach(h=>b2(i,h))),r}};function c9(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const h9=/(\d+)-(\d+)\/(\d+)/;class hp{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||g9,this.controller=new self.AbortController,this.stats=new r0}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,s){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const n=f9(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=s,this.request=this.fetchSetup(e,n),self.clearTimeout(this.requestTimeout),t.timeout=l&&Y(l)?l:d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(wo(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(c=>{var h;this.response=this.loader=c;const f=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},d-(f-r.loading.start)),!c.ok){const{status:p,statusText:g}=c;throw new v9(g||"fetch, bad network response",p,c)}r.loading.first=f,r.total=p9(c.headers)||r.total;const m=(h=this.callbacks)==null?void 0:h.onProgress;return m&&Y(t.highWaterMark)?this.loadProgressively(c,r,e,t.highWaterMark,m):a?c.arrayBuffer():e.responseType==="json"?c.json():c.text()}).then(c=>{var h,f;const m=this.response;if(!m)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const p=c[o];p&&(r.loaded=r.total=p);const g={url:m.url,data:c,code:m.status},v=(h=this.callbacks)==null?void 0:h.onProgress;v&&!Y(t.highWaterMark)&&v(r,e,c,m),(f=this.callbacks)==null||f.onSuccess(g,r,e,m)}).catch(c=>{var h;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const f=c&&c.code||0,m=c?c.message:null;(h=this.callbacks)==null||h.onError({code:f,text:m},e,c?c.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,s,r=0,n){const a=new Wv,o=e.body.getReader(),l=()=>o.read().then(d=>{if(d.done)return a.dataLength&&n(t,s,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=d.value,c=u.length;return t.loaded+=c,c<r||a.dataLength?(a.push(u),a.dataLength>=r&&n(t,s,a.flush().buffer,e)):n(t,s,u.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function f9(i,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ne({},i.headers))};return i.rangeEnd&&t.headers.set("Range","bytes="+i.rangeStart+"-"+String(i.rangeEnd-1)),t}function m9(i){const e=h9.exec(i);if(e)return parseInt(e[2])-parseInt(e[1])+1}function p9(i){const e=i.get("Content-Range");if(e){const s=m9(e);if(Y(s))return s}const t=i.get("Content-Length");if(t)return parseInt(t)}function g9(i,e){return new self.Request(i.url,e)}class v9 extends Error{constructor(e,t,s){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=s}}const E9=/^age:\s*[\d.]+\s*$/im;class w2{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new r0,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,s){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=s,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const s=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const n=this.xhrSetup;n?Promise.resolve().then(()=>{if(!(this.loader!==s||this.stats.aborted))return n(s,t.url)}).catch(a=>{if(!(this.loader!==s||this.stats.aborted))return s.open("GET",t.url,!0),n(s,t.url)}).then(()=>{this.loader!==s||this.stats.aborted||this.openAndSendXhr(s,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:s.status,text:a.message},t,s,r)}):this.openAndSendXhr(s,t,e)}openAndSendXhr(e,t,s){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:n,maxLoadTimeMs:a}=s.loadPolicy;if(r)for(const o in r)e.setRequestHeader(o,r[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),s.timeout=n&&Y(n)?n:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:s}=this;if(!e||!t)return;const r=t.readyState,n=this.config;if(!s.aborted&&r>=2&&(s.loading.first===0&&(s.loading.first=Math.max(self.performance.now(),s.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(s.loading.first-s.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const d=t.status,u=t.responseType==="text"?t.responseText:null;if(d>=200&&d<300){const m=u??t.response;if(m!=null){var a,o;s.loading.end=Math.max(self.performance.now(),s.loading.first);const p=t.responseType==="arraybuffer"?m.byteLength:m.length;s.loaded=s.total=p,s.bwEstimate=s.total*8e3/(s.loading.end-s.loading.first);const g=(a=this.callbacks)==null?void 0:a.onProgress;g&&g(s,e,m,t);const v={url:t.responseURL,data:m,code:d};(o=this.callbacks)==null||o.onSuccess(v,s,e,t);return}}const c=n.loadPolicy.errorRetry,h=s.retry,f={url:e.url,data:void 0,code:d};if(au(c,h,!1,f))this.retry(c);else{var l;ke.error(`${d} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:d,text:t.statusText},e,t,s)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(au(e,t,!0))this.retry(e);else{var s;ke.warn(`timeout while loading ${(s=this.context)==null?void 0:s.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:s}=this;this.retryDelay=l0(e,s.retry),s.retry++,ke.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${s.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&E9.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const y9={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},b9=Ue(Ue({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:w2,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:VT,bufferController:w6,capLevelController:T0,errorController:jT,fpsController:A_,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Ov,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:y9},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},T9()),{},{subtitleStreamController:O_,subtitleTrackController:x_,timelineController:o9,audioStreamController:I6,audioTrackController:L6,emeController:Yn,cmcdController:b_,contentSteeringController:__,interstitialsController:P_});function T9(){return{cueHandler:u9,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function _9(i,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const s=Ih(i),r=["manifest","level","frag"],n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,d=[];n.forEach(u=>{const c=`${a}Loading${u}`,h=e[c];if(h!==void 0&&l){d.push(c);const f=s[o].default;switch(e[o]={default:f},u){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),d.length&&t.warn(`hls.js config: "${d.join('", "')}" setting(s) are deprecated, use "${o}": ${Xe(e[o])}`)}),Ue(Ue({},s),e)}function Ih(i){return i&&typeof i=="object"?Array.isArray(i)?i.map(Ih):Object.keys(i).reduce((e,t)=>(e[t]=Ih(i[t]),e),{}):i}function A9(i,e){const t=i.loader;t!==hp&&t!==w2?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),i.progressive=!1):c9()&&(i.loader=hp,i.progressive=!0,i.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Kl=2,S9=.1,C9=.05,x9=100;class I9 extends wv{constructor(e,t){super("gap-controller",e.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var s;(s=this.media)!=null&&s.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var s;this.ended=((s=this.media)==null?void 0:s.currentTime)||1,this.hls.trigger(y.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(x9),this.mediaSource=t.mediaSource;const s=this.media=t.media;di(s,"playing",this.onMediaPlaying),di(s,"waiting",this.onMediaWaiting),di(s,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:s}=this;s&&(Si(s,"playing",this.onMediaPlaying),Si(s,"waiting",this.onMediaWaiting),Si(s,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var s,r;const n=(s=this.hls)==null?void 0:s.config;if(!n)return;const a=this.media;if(!a)return;const{seeking:o}=a,l=this.seeking&&!o,d=!this.seeking&&o,u=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,n.nudgeOnVideoHole&&!u&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||l){l&&this.stallResolved(e);return}if(u){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(y.MEDIA_ENDED,{stalled:!1}));return}if(!me.getBuffered(a).length){this.nudgeRetry=0;return}const c=me.bufferInfo(a,e,0),h=c.nextStart||0,f=this.fragmentTracker;if(o&&f&&this.hls){const R=fp(this.hls.inFlightFragments,e),I=c.len>Kl,C=!h||R||h-e>Kl&&!f.getPartialFragment(e);if(I||C)return;this.moved=!1}const m=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&f){if(!(c.len>0)&&!h)return;const I=Math.max(h,c.start||0)-e,L=!!(m!=null&&m.live)?m.targetduration*2:Kl,S=f.getPartialFragment(e);if(I>0&&(I<=L||S)){a.paused||this._trySkipBufferHole(S);return}}const p=n.detectStallWithCurrentTimeMs,g=self.performance.now(),v=this.waiting;let b=this.stalled;if(b===null)if(v>0&&g-v<p)b=this.stalled=v;else{this.stalled=g;return}const E=g-b;if(!o&&(E>=p||v)&&this.hls){var T;if(((T=this.mediaSource)==null?void 0:T.readyState)==="ended"&&!(m!=null&&m.live)&&Math.abs(e-((m==null?void 0:m.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(y.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(c),!this.media||!this.hls)return}const x=me.bufferInfo(a,e,n.maxBufferHole);this._tryFixBufferStall(x,E,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const s=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(s)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(y.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var s;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(s=this.buffered.audio)!=null&&s.length&&r&&r.length>1&&e>r.end(0)){const n=me.bufferedInfo(me.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const a=me.timeRangesToArray(r),o=me.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=me.bufferedInfo(a,e,0).bufferedIndex,d=a[o].end,u=a[o+1].start;if((l===-1||l>o)&&u-d<1&&e-d<2){const c=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${d} -> ${u} buffered index: ${l}`);this.warn(c.message),this.media.currentTime+=1e-6;const h=this.fragmentTracker.getPartialFragment(e)||void 0,f=me.bufferInfo(this.media,e,0);this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:c,reason:c.message,frag:h,buffer:f.len,bufferInfo:f})}}}}}_tryFixBufferStall(e,t,s){var r,n;const{fragmentTracker:a,media:o}=this,l=(r=this.hls)==null?void 0:r.config;if(!o||!a||!l)return;const d=(n=this.hls)==null?void 0:n.latestLevelDetails,u=a.getPartialFragment(s);if((u||d!=null&&d.live&&s<d.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const c=e.buffered,h=this.adjacentTraversal(e,s);(c&&c.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-s<l.maxBufferHole||h))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const s=this.fragmentTracker,r=e.nextStart;if(s&&r){const n=s.getFragAtPos(t,te.MAIN),a=s.getFragAtPos(r,te.MAIN);if(n&&a)return a.sn-n.sn<2}return!1}_reportStall(e){const{hls:t,media:s,stallReported:r,stalled:n}=this;if(!r&&n!==null&&s&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${s.currentTime} due to low buffer (${Xe(e)})`);this.warn(a.message),t.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:n}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:s,media:r}=this,n=(t=this.hls)==null?void 0:t.config;if(!r||!s||!n)return 0;const a=r.currentTime,o=me.bufferInfo(r,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const u=o.len<=n.maxBufferHole,c=o.len>0&&o.len<1&&r.readyState<3,h=l-a;if(h>0&&(u||c)){if(h>n.maxBufferHole){let m=!1;if(a===0){const p=s.getAppendedFrag(0,te.MAIN);p&&l<p.end&&(m=!0)}if(!m){const p=e||s.getAppendedFrag(a,te.MAIN);if(p){var d;if(!((d=this.hls.loadLevelObj)!=null&&d.details)||fp(this.hls.inFlightFragments,l))return 0;let v=!1,b=p.end;for(;b<l;){const E=s.getAppendedFrag(b,te.MAIN)||s.getPartialFragment(b);if(E)b+=E.duration;else{v=!0;break}}if(v)return 0}}}const f=Math.max(l+C9,a+S9);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${f}`),this.moved=!0,r.currentTime=f,!(e!=null&&e.gap)){const m=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${f}`);this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:m,reason:m.message,frag:e||void 0,buffer:o.len,bufferInfo:o})}return f}}return 0}_tryNudgeBuffer(e){const{hls:t,media:s,nudgeRetry:r}=this,n=t==null?void 0:t.config;if(!s||!n)return 0;const a=s.currentTime;if(this.nudgeRetry++,r<n.nudgeMaxRetry){const o=a+(r+1)*n.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),s.currentTime=o,t.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${n.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function fp(i,e){const t=mp(i.main);if(t&&t.start<=e)return t;const s=mp(i.audio);return s&&s.start<=e?s:null}function mp(i){if(!i)return null;switch(i.state){case U.IDLE:case U.STOPPED:case U.ENDED:case U.ERROR:return null}return i.frag}const L9=.25;function Lh(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function pp(i,e,t,s,r){let n=new i(e,t,"");try{n.value=s,r&&(n.type=r)}catch{n=new i(e,t,Xe(r?Ue({type:r},s):s))}return n}const vl=(()=>{const i=Lh();try{i&&new i(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class R9{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(y.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(y.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(y.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(y.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(y.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(e,t){var s;this.media=t.media,((s=t.overrides)==null?void 0:s.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const e=this.hls.latestLevelDetails;e&&this.updateDateRangeCues(e)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Hn(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const s=e[t];if(s.kind==="metadata"&&s.label==="id3")return y2(s,this.media),s}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:r}}}=this;if(!s&&!r)return;const{samples:n}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=Lh();if(a)for(let o=0;o<n.length;o++){const l=n[o].type;if(l===Yt.emsg&&!s||!r)continue;const d=Xv(n[o].data);if(d){const u=n[o].pts;let c=u+n[o].duration;c>vl&&(c=vl),c-u<=0&&(c=u+L9);for(let f=0;f<d.length;f++){const m=d[f];if(!Jv(m)){this.updateId3CueEnds(u,l);const p=pp(a,u,c,m,l);p&&this.id3Track.addCue(p)}}}}}updateId3CueEnds(e,t){var s;const r=(s=this.id3Track)==null?void 0:s.cues;if(r)for(let n=r.length;n--;){const a=r[n];a.type===t&&a.startTime<e&&a.endTime===vl&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:s,type:r}){const{id3Track:n,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(n&&(o||l)){let d;r==="audio"?d=u=>u.type===Yt.audioId3&&l:r==="video"?d=u=>u.type===Yt.emsg&&o:d=u=>u.type===Yt.audioId3&&l||u.type===Yt.emsg&&o,Ch(n,t,s,d)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:s}=this,{dateRanges:r}=e,n=Object.keys(r);let a=this.dateRangeCuesAppended;if(s&&t){var o;if((o=s.cues)!=null&&o.length){const u=Object.keys(a).filter(c=>!n.includes(c));for(let c=u.length;c--;){const h=u[c],f=a[h].cues;delete a[h],Object.keys(f).forEach(m=>{try{const p=f[m];p.removeEventListener("enter",this.onEventCueEnter),s.removeCue(p)}catch{}})}}else a=this.dateRangeCuesAppended={}}const l=e.fragments[e.fragments.length-1];if(n.length===0||!Y(l==null?void 0:l.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const d=Lh();for(let u=0;u<n.length;u++){const c=n[u],h=r[c],f=h.startTime,m=a[c],p=(m==null?void 0:m.cues)||{};let g=(m==null?void 0:m.durationKnown)||!1,v=vl;const{duration:b,endDate:E}=h;if(E&&b!==null)v=f+b,g=!0;else if(h.endOnNext&&!g){const x=n.reduce((R,I)=>{if(I!==h.id){const C=r[I];if(C.class===h.class&&C.startDate>h.startDate&&(!R||h.startDate<R.startDate))return C}return R},null);x&&(v=x.startTime,g=!0)}const T=Object.keys(h.attr);for(let x=0;x<T.length;x++){const R=T[x];if(!a8(R))continue;const I=p[R];if(I)g&&!m.durationKnown?I.endTime=v:Math.abs(I.startTime-f)>.01&&(I.startTime=f,I.endTime=v);else if(d){let C=h.attr[R];o8(R)&&(C=pv(C));const S=pp(d,f,v,{key:R,data:C},Yt.dateRange);S&&(S.id=c,this.id3Track.addCue(S),p[R]=S,this.hls.config.interstitialsController&&(R==="X-ASSET-LIST"||R==="X-ASSET-URL")&&S.addEventListener("enter",this.onEventCueEnter))}}a[c]={cues:p,dateRange:h,durationKnown:g}}}}class k9{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,s=this.levelDetails;if(!t||!s)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:n,maxLiveSyncPlaybackRate:a}=this.config;if(!n||a===1||!s.live)return;const o=this.targetLatency;if(o===null)return;const l=r-o,d=Math.min(this.maxLatency,o+s.targetduration);if(l<d&&l>.05&&this.forwardBufferLength>1){const c=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,f=Math.min(c,Math.max(1,h));this.changeMediaPlaybackRate(t,f)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:s,targetduration:r}=e,{liveSyncDuration:n,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let d=o&&s||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||d===0)&&(d=n!==void 0?n:a*r);const u=r;return d+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const s=this.levelDetails;if(s===null)return null;const r=s.edge,n=e-t-this.edgeStalled,a=r-s.totalduration,o=r-(this.config.lowLatencyMode&&s.partTarget||s.targetduration);return Math.min(Math.max(a,n),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const s=e.buffered.length;return(s?e.buffered.end(s-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(y.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(y.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(y.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(y.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var s;t.details===P.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(s=this.levelDetails)!=null&&s.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var s,r;e.playbackRate!==t&&((s=this.hls)==null||s.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class w9 extends b0{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(y.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(y.FRAG_BUFFERED,this.onFragBuffered,this),e.on(y.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(y.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(y.FRAG_BUFFERED,this.onFragBuffered,this),e.off(y.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const s=this.hls.config.preferManagedMediaSource,r=[],n={},a={};let o=!1,l=!1,d=!1;t.levels.forEach(u=>{const c=u.attrs;let{audioCodec:h,videoCodec:f}=u;h&&(u.audioCodec=h=iu(h,s)||void 0),f&&(f=u.videoCodec=CT(f));const{width:m,height:p,unknownCodecs:g}=u;let v=g?g.length:0;if(g)for(let S=v;S--;){const w=g[S];this.isAudioSupported(w)?(u.audioCodec=h=h?`${h},${w}`:w,v--,ua.audio[h.substring(0,4)]=2):this.isVideoSupported(w)&&(u.videoCodec=f=f?`${f},${w}`:w,v--,ua.video[f.substring(0,4)]=2)}if(o||(o=!!(m&&p)),l||(l=!!f),d||(d=!!h),v||h&&!this.isAudioSupported(h)||f&&!this.isVideoSupported(f)){this.log(`Some or all CODECS not supported "${c.CODECS}"`);return}const{CODECS:b,"FRAME-RATE":E,"HDCP-LEVEL":T,"PATHWAY-ID":x,RESOLUTION:R,"VIDEO-RANGE":I}=c,L=`${`${x||"."}-`}${u.bitrate}-${R}-${E}-${b}-${I}-${T}`;if(n[L])if(n[L].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const S=a[L]+=1;u.attrs["PATHWAY-ID"]=new Array(S+1).join(".");const w=this.createLevel(u);n[L]=w,r.push(w)}else n[L].addGroupId("audio",c.AUDIO),n[L].addGroupId("text",c.SUBTITLES);else{const S=this.createLevel(u);n[L]=S,a[L]=1,r.push(S)}}),this.filterAndSortMediaOptions(r,t,o,l,d)}createLevel(e){const t=new Io(e),s=e.supplemental;if(s!=null&&s.videoCodec&&!this.isVideoSupported(s.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${s.videoCodec}"`);this.log(r.message),t.supportedResult=Cv(r,[])}return t}isAudioSupported(e){return hh(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return hh(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,s,r,n){let a=[],o=[],l=e;if((s||r)&&n&&(l=l.filter(({videoCodec:g,videoRange:v,width:b,height:E})=>(!!g||!!(b&&E))&&MT(v))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let g="no level with compatible codecs found in manifest",v=g;t.levels.length&&(v=`one or more CODECS in variant not supported: ${Xe(t.levels.map(E=>E.attrs.CODECS).filter((E,T,x)=>x.indexOf(E)===T))}`,this.warn(v),g+=` (${v})`);const b=new Error(g);this.hls.trigger(y.ERROR,{type:ne.MEDIA_ERROR,details:P.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:b,reason:v})}});return}t.audioTracks&&(a=t.audioTracks.filter(g=>!g.audioCodec||this.isAudioSupported(g.audioCodec)),gp(a)),t.subtitles&&(o=t.subtitles,gp(o));const d=l.slice(0);l.sort((g,v)=>{if(g.attrs["HDCP-LEVEL"]!==v.attrs["HDCP-LEVEL"])return(g.attrs["HDCP-LEVEL"]||"")>(v.attrs["HDCP-LEVEL"]||"")?1:-1;if(s&&g.height!==v.height)return g.height-v.height;if(g.frameRate!==v.frameRate)return g.frameRate-v.frameRate;if(g.videoRange!==v.videoRange)return su.indexOf(g.videoRange)-su.indexOf(v.videoRange);if(g.videoCodec!==v.videoCodec){const b=lm(g.videoCodec),E=lm(v.videoCodec);if(b!==E)return E-b}if(g.uri===v.uri&&g.codecSet!==v.codecSet){const b=tu(g.codecSet),E=tu(v.codecSet);if(b!==E)return E-b}return g.averageBitrate!==v.averageBitrate?g.averageBitrate-v.averageBitrate:0});let u=d[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==d.length)){for(let g=0;g<d.length;g++)if(d[g].pathwayId===l[0].pathwayId){u=d[g];break}}this._levels=l;for(let g=0;g<l.length;g++)if(l[g]===u){var c;this._firstLevel=g;const v=u.bitrate,b=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${v}`),((c=this.hls.userConfig)==null?void 0:c.abrEwmaDefaultEstimate)===void 0){const E=Math.min(v,this.hls.config.abrEwmaDefaultEstimateMax);E>b&&b===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const h=n&&!r,f=this.hls.config,m=!!(f.audioStreamController&&f.audioTrackController),p={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:n,video:r,altAudio:m&&!h&&a.some(g=>!!g.url)};this.hls.trigger(y.MANIFEST_PARSED,p)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),c=e<0;if(this.hls.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.LEVEL_SWITCH_ERROR,level:e,fatal:c,error:u,reason:u.message}),c)return;e=Math.min(e,t.length-1)}const s=this.currentLevelIndex,r=this.currentLevel,n=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,s===e&&r&&n===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${s}${n?" with Pathway "+n:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(y.LEVEL_SWITCHING,l);const d=a.details;if(!d||d.live){const u=this.switchParams(a.uri,r==null?void 0:r.details,d);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),s=e.filter(r=>t.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=s}}onError(e,t){t.fatal||!t.context||t.context.type===_e.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===te.MAIN){const s=t.elementaryStreams;if(!Object.keys(s).some(n=>!!s[n]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var s;const{level:r,details:n}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${r}`),(o=t.deliveryDirectives)!=null&&o.skip&&(n.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(r,t,l)}else(s=t.deliveryDirectives)!=null&&s.skip&&(n.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const s=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,n=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${r}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${n?" Pathway "+n:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(y.LEVEL_LOADING,{url:s,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const s=this._levels.filter((n,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(n),n===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,n.details&&n.details.fragments.forEach(o=>o.level=-1)),!1));Vv(s),this._levels=s,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=s.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(y.LEVELS_UPDATED,{levels:s})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:s}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(y.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:s}))}}function gp(i){const e={};i.forEach(t=>{const s=t.groupId||"";t.id=e[s]=e[s]||0,e[s]++})}function D2(){return self.SourceBuffer||self.WebKitSourceBuffer}function M2(){if(!cr())return!1;const e=D2();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function D9(){if(!M2())return!1;const i=cr();return typeof(i==null?void 0:i.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>i.isTypeSupported(xo(e,"video")))||["mp4a.40.2","fLaC"].some(e=>i.isTypeSupported(xo(e,"audio"))))}function M9(){var i;const e=D2();return typeof(e==null||(i=e.prototype)==null?void 0:i.changeType)=="function"}const P9=100;class O9 extends h0{constructor(e,t,s){super(e,t,s,"stream-controller",te.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,n=r?r.currentTime:null;if(n===null||!Y(n)||(this.log(`Media seeked to ${n.toFixed(3)}`),!this.getBufferedFrag(n)))return;const a=this.getFwdBufferInfoAtPos(r,n,te.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${n} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(y.MANIFEST_PARSED,this.onManifestParsed,this),e.on(y.LEVEL_LOADING,this.onLevelLoading,this),e.on(y.LEVEL_LOADED,this.onLevelLoaded,this),e.on(y.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(y.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(y.BUFFER_CREATED,this.onBufferCreated,this),e.on(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(y.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(y.MANIFEST_PARSED,this.onManifestParsed,this),e.off(y.LEVEL_LOADED,this.onLevelLoaded,this),e.off(y.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(y.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(y.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(y.BUFFER_CREATED,this.onBufferCreated,this),e.off(y.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(y.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(y.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:s,hls:r}=this;if(this.stopLoad(),this.setInterval(P9),this.level=-1,!this.startFragRequested){let n=r.startLevel;n===-1&&(r.config.testBandwidth&&this.levels.length>1?(n=0,this.bitrateTest=!0):n=r.firstAutoLevel),r.nextLoadLevel=n,this.level=r.loadLevel,this._hasEnoughToStart=!!t}s>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${s.toFixed(3)}`),e=s),this.state=U.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=U.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case U.WAITING_LEVEL:{const{levels:t,level:s}=this,r=t==null?void 0:t[s],n=r==null?void 0:r.details;if(n&&(!n.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(n))break;this.state=U.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=U.IDLE;break}break}case U.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),s=this.retryDate;if(!s||t>=s||(e=this.media)!=null&&e.seeking){const{levels:r,level:n}=this,a=r==null?void 0:r[n];this.resetStartWhenNotLoaded(a||null),this.state=U.IDLE}}break}this.state===U.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:s,media:r}=this;if(t===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const n=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(s!=null&&s[n]))return;const a=s[n],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const p={};this.altAudio===2&&(p.type="video"),this.hls.trigger(y.BUFFER_EOS,p),this.state=U.ENDED;return}if(!this.buffering)return;e.loadLevel!==n&&e.manualLevel===-1&&this.log(`Adapting to level ${n} from level ${this.level}`),this.level=e.nextLoadLevel=n;const d=a.details;if(!d||this.state===U.WAITING_LEVEL||this.waitForLive(a)){this.level=n,this.state=U.WAITING_LEVEL,this.startFragRequested=!1;return}const u=o.len,c=this.getMaxBufferLength(a.maxBitrate);if(u>=c)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,d);if(this.couldBacktrack&&!this.fragPrevious&&f&&mt(f)&&this.fragmentTracker.getState(f)!==yt.OK){var m;const g=((m=this.backtrackFragment)!=null?m:f).sn-d.startSN,v=d.fragments[g-1];v&&f.cc===v.cc&&(f=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const g=this.audioOnly&&!this.altAudio?Ve.AUDIO:Ve.VIDEO,v=(g===Ve.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,g,te.MAIN)}f=this.getNextFragmentLoopLoading(f,d,o,te.MAIN,c)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,s){const r=this.fragmentTracker.getState(e);r===yt.NOT_LOADED||r===yt.PARTIAL?mt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,s):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,te.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let s;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const n=this.getLevelDetails();if(n!=null&&n.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<n.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],d=this.fragLastKbps;d&&this.fragCurrent?s=this.fragCurrent.duration*l.maxBitrate/(1e3*d)+1:s=0}else s=0;const a=this.getBufferedFrag(t.currentTime+s);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,d=o.duration,u=Math.max(a.end,l+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case U.KEY_LOADING:case U.FRAG_LOADING:case U.FRAG_LOADING_WAITING_RETRY:case U.PARSING:case U.PARSED:this.state=U.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const s=t.media;di(s,"playing",this.onMediaPlaying),di(s,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:s}=this;s&&(Si(s,"playing",this.onMediaPlaying),Si(s,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(y.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let s=!1,r=!1;t.levels.forEach(n=>{const a=n.audioCodec;a&&(s=s||a.indexOf("mp4a.40.2")!==-1,r=r||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=s&&r&&!M9(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:s}=this;if(!s||this.state!==U.IDLE)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=U.WAITING_LEVEL)}onLevelLoaded(e,t){var s;const{levels:r,startFragRequested:n}=this,a=t.level,o=t.details,l=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const d=t.levelInfo,u=this.fragCurrent;u&&(this.state===U.FRAG_LOADING||this.state===U.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&this.abortCurrentFrag();let c=0;if(o.live||(s=d.details)!=null&&s.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;c=this.alignPlaylists(o,d.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(d.details=o,this.levelLastLoaded=d,n||this.setStartPosition(o,c),this.hls.trigger(y.LEVEL_UPDATED,{details:o,level:a}),this.state===U.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=U.IDLE}n&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:s}=this;if(!s)return;const r=this.hls.liveSyncPosition,n=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=n>=a-t.maxFragLookUpTolerance&&n<=o;if(r!==null&&s.duration>r&&(n<r||!l)){const u=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&s.readyState<4||n<o-u)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),s.readyState))if(this.warn(`Playback: ${n.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var d;const c=me.bufferInfo(s,r,0);if(!(c!=null&&(d=c.buffered)!=null&&d.length)){s.currentTime=r;return}if(c.start<=n){s.currentTime=r;return}const{nextStart:f}=me.bufferedInfo(c.buffered,n,0);f&&(s.currentTime=f)}else s.currentTime=r}}_handleFragmentLoadProgress(e){var t;const s=e.frag,{part:r,payload:n}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${s.sn} of level ${s.level} will not be buffered`);return}const o=a[s.level];if(!o){this.warn(`Level ${s.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${s.sn} of level ${s.level} after level details were reset`),this.fragmentTracker.removeFragment(s);return}const d=o.videoCodec,u=l.PTSKnown||!l.live,c=(t=s.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new u2(this.hls,te.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,p=m!==-1,g=new u0(s.level,s.sn,s.stats.chunkCount,n.byteLength,m,p),v=this.initPTS[s.cc];f.push(n,c,h,d,s,r,l.totalduration,u,g,v)}onAudioTrackSwitching(e,t){const s=this.hls,r=this.altAudio===2;if(ru(t.url,s))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.fragmentTracker.removeAllFragments(),s.once(y.BUFFER_FLUSHED,()=>{var a;(a=this.hls)==null||a.trigger(y.AUDIO_TRACK_SWITCHED,t)}),s.trigger(y.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}s.trigger(y.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const s=ru(t.url,this.hls);if(s){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=s?2:0,this.tick()}onBufferCreated(e,t){const s=t.tracks;let r,n,a=!1;for(const o in s){const l=s[o];if(l.id==="main"){if(n=o,r=l,o==="video"){const d=s[o];d&&(this.videoBuffer=d.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${n}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:s,part:r}=t,n=s.type===te.MAIN;if(n){if(this.fragContextChanged(s)){this.warn(`Fragment ${s.sn}${r?" p: "+r.index:""} of level ${s.level} finished buffering, but was aborted. state: ${this.state}`),this.state===U.PARSED&&(this.state=U.IDLE);return}const o=r?r.stats:s.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),mt(s)&&(this.fragPrevious=s),this.fragBufferedComplete(s,r)}const a=this.media;a&&(!this._hasEnoughToStart&&me.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),n&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var s;if(t.fatal){this.state=U.ERROR;return}switch(t.details){case P.FRAG_GAP:case P.FRAG_PARSING_ERROR:case P.FRAG_DECRYPT_ERROR:case P.FRAG_LOAD_ERROR:case P.FRAG_LOAD_TIMEOUT:case P.KEY_LOAD_ERROR:case P.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(te.MAIN,t);break;case P.LEVEL_LOAD_ERROR:case P.LEVEL_LOAD_TIMEOUT:case P.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===U.WAITING_LEVEL&&((s=t.context)==null?void 0:s.type)===_e.LEVEL&&(this.state=U.IDLE);break;case P.BUFFER_ADD_CODEC_ERROR:case P.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case P.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case P.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=U.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Ve.AUDIO||!this.altAudio){const s=(t===Ve.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;s&&(this.afterBufferFlushed(s,t,te.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let s=this.startPosition;if(s>=0&&t<s){if(e.seeking){this.log(`could not seek to ${s}, already seeking at ${t}`);return}const r=this.timelineOffset;r&&s&&(s+=r);const n=this.getLevelDetails(),a=me.getBuffered(e),o=a.length?a.start(0):0,l=o-s,d=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<d||this.loadingParts&&l<2*((n==null?void 0:n.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),s+=l,this.startPosition=s),t<s&&(this.log(`seek to target start position ${s} from current time ${t} buffer start ${o}`),e.currentTime=s)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(s=>{const{hls:r}=this,n=s==null?void 0:s.frag;if(!n||this.fragContextChanged(n))return;t.fragmentError=0,this.state=U.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=n.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(y.FRAG_LOADED,s),n.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const s=this.playlistType,{hls:r}=this,{remuxResult:n,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:d,level:u}=o,{video:c,text:h,id3:f,initSegment:m}=n,{details:p}=u,g=this.altAudio?void 0:n.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=U.PARSING,m){if(m!=null&&m.tracks){const T=l.initSegment||l;this._bufferInitSegment(u,m.tracks,T,a),r.trigger(y.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:s,tracks:m.tracks})}const v=m.initPTS,b=m.timescale,E=this.initPTS[l.cc];Y(v)&&(!E||E.baseTime!==v||E.timescale!==b)&&(this.initPTS[l.cc]={baseTime:v,timescale:b},r.trigger(y.INIT_PTS_FOUND,{frag:l,id:s,initPTS:v,timescale:b}))}if(c&&p){g&&c.type==="audiovideo"&&this.logMuxedErr(l);const v=p.fragments[l.sn-1-p.startSN],b=l.sn===p.startSN,E=!v||l.cc>v.cc;if(n.independent!==!1){const{startPTS:T,endPTS:x,startDTS:R,endDTS:I}=c;if(d)d.elementaryStreams[c.type]={startPTS:T,endPTS:x,startDTS:R,endDTS:I};else if(c.firstKeyFrame&&c.independent&&a.id===1&&!E&&(this.couldBacktrack=!0),c.dropped&&c.independent){const C=this.getMainFwdBufferInfo(),L=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,S=c.firstKeyFramePTS?c.firstKeyFramePTS:T;if(!b&&L<S-this.config.maxBufferHole&&!E){this.backtrack(l);return}else E&&(l.gap=!0);l.setElementaryStreamInfo(c.type,l.start,x,l.start,I,!0)}else b&&T-(p.appliedTimelineOffset||0)>Kl&&(l.gap=!0);l.setElementaryStreamInfo(c.type,T,x,R,I),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(c,l,d,a,b||E)}else if(b||E)l.gap=!0;else{this.backtrack(l);return}}if(g){const{startPTS:v,endPTS:b,startDTS:E,endDTS:T}=g;d&&(d.elementaryStreams[Ve.AUDIO]={startPTS:v,endPTS:b,startDTS:E,endDTS:T}),l.setElementaryStreamInfo(Ve.AUDIO,v,b,E,T),this.bufferFragmentData(g,l,d,a)}if(p&&f!=null&&(t=f.samples)!=null&&t.length){const v={id:s,frag:l,details:p,samples:f.samples};r.trigger(y.FRAG_PARSING_METADATA,v)}if(p&&h){const v={id:s,frag:l,details:p,samples:h.samples};r.trigger(y.FRAG_PARSING_USERDATA,v)}}logMuxedErr(e){this.warn(`${mt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,s,r){if(this.state!==U.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(s));const{audio:n,video:a,audiovideo:o}=t;if(n){const d=e.audioCodec;let u=Fl(n.codec,d);u==="mp4a"&&(u="mp4a.40.5");const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const h=n.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&n.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),d&&d!==u&&this.log(`Swapping manifest audio codec "${d}" for "${u}"`),n.levelCodec=u,n.id=te.MAIN,this.log(`Init audio buffer, container:${n.container}, codecs[selected/level/parsed]=[${u||""}/${d||""}/${n.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=te.MAIN;const d=a.codec;if((d==null?void 0:d.length)===4)switch(d){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${d}]${a.codec!==d?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger(y.BUFFER_CODECS,t),!this.hls)return;l.forEach(d=>{const c=t[d].initSegment;c!=null&&c.byteLength&&this.hls.trigger(y.BUFFER_APPENDING,{type:d,data:c,frag:s,part:null,chunkMeta:r,parent:s.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,te.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,s=e==null?void 0:e[t];return s?this.getMaxBufferLength(s.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=U.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const s=e.currentTime;if(me.isBuffered(e,s)?t=this.getAppendedFrag(s):me.isBuffered(e,s+.1)&&(t=this.getAppendedFrag(s+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,n=t.level;(!r||t.sn!==r.sn||r.level!==n)&&(this.fragPlaying=t,this.hls.trigger(y.FRAG_CHANGED,{frag:t}),(!r||r.level!==n)&&this.hls.trigger(y.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Y(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Y(t)){const s=this.getLevelDetails(),r=this.currentFrag||(s?tn(null,s.fragments,t):null);if(r){const n=r.programDateTime;if(n!==null){const a=n+(t-r.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class N9{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const s in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[s].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=P.KEY_LOAD_ERROR,s,r,n){return new hs({type:ne.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:n,error:s,networkDetails:r})}loadClear(e,t,s){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,n=t.length;r<n;r++){const a=t[r];if(e.cc<=a.cc&&(!mt(e)||!mt(a)||e.sn<a.sn)||!s&&r==n-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const l=vh(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const r=$l(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var s,r;t&&e.setKeyFormat(t);const n=e.decryptdata;if(!n){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,P.KEY_LOAD_ERROR,d))}const a=n.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,P.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((s=o)!=null&&s.decryptdata.key)return n.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((r=o)!=null&&r.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(d=>(n.key=d.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return n.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,P.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${n.method}"`)))}}loadKeyEME(e,t){const s={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const r=this.emeController.loadKey(s);if(r)return(e.keyLoadPromise=r.then(n=>(e.mediaKeySessionContext=n,s))).catch(n=>{throw e.keyLoadPromise=null,n})}return Promise.resolve(s)}loadKeyHTTP(e,t){const s=this.config,r=s.loader,n=new r(s);return t.keyLoader=e.loader=n,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=s.keyLoadPolicy.default,u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(h,f,m,p)=>{const{frag:g,keyInfo:v,url:b}=m;if(!g.decryptdata||v!==this.keyUriToKeyInfo[b])return o(this.createKeyLoadError(g,P.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),p));v.decryptdata.key=g.decryptdata.key=new Uint8Array(h.data),g.keyLoader=null,v.loader=null,a({frag:g,keyInfo:v})},onError:(h,f,m,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,P.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),m,Ue({url:l.url,data:void 0},h)))},onTimeout:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,P.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,P.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};n.load(l,u,c)})}resetLoader(e){const{frag:t,keyInfo:s,url:r}=e,n=s.loader;t.keyLoader===n&&(t.keyLoader=null,s.loader=null),delete this.keyUriToKeyInfo[r],n&&n.destroy()}}function vp(i){const{type:e}=i;switch(e){case _e.AUDIO_TRACK:return te.AUDIO;case _e.SUBTITLE_TRACK:return te.SUBTITLE;default:return te.MAIN}}function Fc(i,e){let t=i.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class F9{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(y.MANIFEST_LOADING,this.onManifestLoading,this),e.on(y.LEVEL_LOADING,this.onLevelLoading,this),e.on(y.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(y.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(y.MANIFEST_LOADING,this.onManifestLoading,this),e.off(y.LEVEL_LOADING,this.onLevelLoading,this),e.off(y.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(y.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(y.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,s=t.pLoader,r=t.loader,n=s||r,a=new n(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:s}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:_e.MANIFEST,url:s,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:s,level:r,pathwayId:n,url:a,deliveryDirectives:o,levelInfo:l}=t;this.load({id:s,level:r,pathwayId:n,responseType:"text",type:_e.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:s,groupId:r,url:n,deliveryDirectives:a,track:o}=t;this.load({id:s,groupId:r,level:null,responseType:"text",type:_e.AUDIO_TRACK,url:n,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:s,groupId:r,url:n,deliveryDirectives:a,track:o}=t;this.load({id:s,groupId:r,level:null,responseType:"text",type:_e.SUBTITLE_TRACK,url:n,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const s=this.loaders[_e.LEVEL];if(s){const r=s.context;r&&!t.levels.some(n=>n===r.levelOrTrack)&&(s.abort(),delete this.loaders[_e.LEVEL])}}load(e){var t;const s=this.hls.config;let r=this.getInternalLoader(e);if(r){const d=this.hls.logger,u=r.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?d.log(`[playlist-loader]: ignore ${e.url} ongoing request`):d.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}d.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let n;if(e.type===_e.MANIFEST?n=s.manifestLoadPolicy.default:n=Ne({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),Y((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===_e.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===_e.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===_e.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const u=d.partTarget,c=d.targetduration;if(u&&c){const h=Math.max(u*3,c*.8)*1e3;n=Ne({},n,{maxTimeToFirstByteMs:Math.min(h,n.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,n.maxTimeToFirstByteMs)})}}}const a=n.errorRetry||n.timeoutRetry||{},o={loadPolicy:n,timeout:n.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(d,u,c,h)=>{const f=this.getInternalLoader(c);this.resetInternalLoader(c.type);const m=d.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(d,c,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),zi.isMediaPlaylist(m)||c.type!==_e.MANIFEST?this.handleTrackOrLevelPlaylist(d,u,c,h||null,f):this.handleMasterPlaylist(d,u,c,h)},onError:(d,u,c,h)=>{this.handleNetworkError(u,c,!1,d,h)},onTimeout:(d,u,c)=>{this.handleNetworkError(u,c,!0,void 0,d)}};r.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:s}=this.hls;(e||s)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,s,r){const n=this.hls,a=e.data,o=Fc(e,s),l=zi.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,s,l.playlistParsingError,r,t);return}const{contentSteering:d,levels:u,sessionData:c,sessionKeys:h,startTimeOffset:f,variableList:m}=l;this.variableList=m;const{AUDIO:p=[],SUBTITLES:g,"CLOSED-CAPTIONS":v}=zi.parseMasterPlaylistMedia(a,o,l);p.length&&!p.some(E=>!E.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new tt({}),bitrate:0,url:""})),n.trigger(y.MANIFEST_LOADED,{levels:u,audioTracks:p,subtitles:g,captions:v,contentSteering:d,url:o,stats:t,networkDetails:r,sessionData:c,sessionKeys:h,startTimeOffset:f,variableList:m})}handleTrackOrLevelPlaylist(e,t,s,r,n){const a=this.hls,{id:o,level:l,type:d}=s,u=Fc(e,s),c=Y(l)?l:Y(o)?o:0,h=vp(s),f=zi.parseLevelPlaylist(e.data,u,c,h,0,this.variableList);if(d===_e.MANIFEST){const m={attrs:new tt({}),bitrate:0,details:f,name:"",url:u};f.requestScheduled=t.loading.start+$v(f,0),a.trigger(y.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:u,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),s.levelDetails=f,this.handlePlaylistLoaded(f,e,t,s,r,n)}handleManifestParsingError(e,t,s,r,n){this.hls.trigger(y.ERROR,{type:ne.NETWORK_ERROR,details:P.MANIFEST_PARSING_ERROR,fatal:t.type===_e.MANIFEST,url:e.url,err:s,error:s,reason:s.message,response:e,context:t,networkDetails:r,stats:n})}handleNetworkError(e,t,s=!1,r,n){let a=`A network ${s?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===_e.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===_e.AUDIO_TRACK||e.type===_e.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=P.UNKNOWN,d=!1;const u=this.getInternalLoader(e);switch(e.type){case _e.MANIFEST:l=s?P.MANIFEST_LOAD_TIMEOUT:P.MANIFEST_LOAD_ERROR,d=!0;break;case _e.LEVEL:l=s?P.LEVEL_LOAD_TIMEOUT:P.LEVEL_LOAD_ERROR,d=!1;break;case _e.AUDIO_TRACK:l=s?P.AUDIO_TRACK_LOAD_TIMEOUT:P.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case _e.SUBTITLE_TRACK:l=s?P.SUBTITLE_TRACK_LOAD_TIMEOUT:P.SUBTITLE_LOAD_ERROR,d=!1;break}u&&this.resetInternalLoader(e.type);const c={type:ne.NETWORK_ERROR,details:l,fatal:d,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:n};if(r){const h=(t==null?void 0:t.url)||e.url;c.response=Ue({url:h,data:void 0},r)}this.hls.trigger(y.ERROR,c)}handlePlaylistLoaded(e,t,s,r,n,a){const o=this.hls,{type:l,level:d,id:u,groupId:c,deliveryDirectives:h}=r,f=Fc(t,r),m=vp(r),p=typeof r.level=="number"&&m===te.MAIN?d:void 0;if(!e.fragments.length){const v=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(y.ERROR,{type:ne.NETWORK_ERROR,details:P.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:v,reason:v.message,response:t,context:r,level:p,parent:m,networkDetails:n,stats:s});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const g=e.playlistParsingError;if(g){if(this.hls.logger.warn(g),!o.config.ignorePlaylistParsingErrors){o.trigger(y.ERROR,{type:ne.NETWORK_ERROR,details:P.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:g,reason:g.message,response:t,context:r,level:p,parent:m,networkDetails:n,stats:s});return}e.playlistParsingError=null}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case _e.MANIFEST:case _e.LEVEL:o.trigger(y.LEVEL_LOADED,{details:e,levelInfo:r.levelOrTrack||o.levels[0],level:p||0,id:u||0,stats:s,networkDetails:n,deliveryDirectives:h,withoutMultiVariant:l===_e.MANIFEST});break;case _e.AUDIO_TRACK:o.trigger(y.AUDIO_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:u||0,groupId:c||"",stats:s,networkDetails:n,deliveryDirectives:h});break;case _e.SUBTITLE_TRACK:o.trigger(y.SUBTITLE_TRACK_LOADED,{details:e,track:r.levelOrTrack,id:u||0,groupId:c||"",stats:s,networkDetails:n,deliveryDirectives:h});break}}}class qs{static get version(){return Ro}static isMSESupported(){return M2()}static isSupported(){return D9()}static getMediaSource(){return cr()}static get Events(){return y}static get MetadataSchema(){return Yt}static get ErrorTypes(){return ne}static get ErrorDetails(){return P}static get DefaultConfig(){return qs.defaultConfig?qs.defaultConfig:b9}static set DefaultConfig(e){qs.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new f0,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=sT(e.debug||!1,"Hls instance",e.assetPlayerId),s=this.config=_9(qs.DefaultConfig,e,t);this.userConfig=e,s.progressive&&A9(s,t);const{abrController:r,bufferController:n,capLevelController:a,errorController:o,fpsController:l}=s,d=new o(this),u=this.abrController=new r(this),c=new YT(this),h=s.interstitialsController,f=h?this.interstitialsController=new h(this,qs):null,m=this.bufferController=new n(this,c),p=this.capLevelController=new a(this),g=new l(this),v=new F9(this),b=s.contentSteeringController,E=b?new b(this):null,T=this.levelController=new w9(this,E),x=new R9(this),R=new N9(this.config),I=this.streamController=new O9(this,c,R),C=this.gapController=new I9(this,c);p.setStreamController(I),g.setStreamController(I);const L=[v,T,I];f&&L.splice(1,0,f),E&&L.splice(1,0,E),this.networkControllers=L;const S=[u,m,C,p,g,x,c];this.audioTrackController=this.createController(s.audioTrackController,L);const w=s.audioStreamController;w&&L.push(this.audioStreamController=new w(this,c,R)),this.subtitleTrackController=this.createController(s.subtitleTrackController,L);const F=s.subtitleStreamController;F&&L.push(this.subtititleStreamController=new F(this,c,R)),this.createController(s.timelineController,S),R.emeController=this.emeController=this.createController(s.emeController,S),this.cmcdController=this.createController(s.cmcdController,S),this.latencyController=this.createController(k9,S),this.coreComponents=S,L.push(d);const G=d.onErrorOut;typeof G=="function"&&this.on(y.ERROR,G,d),this.on(y.MANIFEST_LOADED,v.onManifestLoaded,v)}createController(e,t){if(e){const s=new e(this);return t&&t.push(s),s}return null}on(e,t,s=this){this._emitter.on(e,t,s)}once(e,t,s=this){this._emitter.once(e,t,s)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,s=this,r){this._emitter.off(e,t,s,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,s){return this._emitter.emit(e,t,s)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(s){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+s.message+'". Here is a stacktrace:',s),!this.triggeringException){this.triggeringException=!0;const r=e===y.ERROR;this.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.INTERNAL_EXCEPTION,fatal:r,event:e,error:s}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(y.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const n=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(y.ERROR,{type:ne.OTHER_ERROR,details:P.ATTACH_MEDIA_ERROR,fatal:!0,error:n});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,s=t?e.media:e,r=t?e:{media:s};this._media=s,this.trigger(y.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(y.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(y.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,s=this._url,r=this._url=s0.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&s&&(s!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(y.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let s=0;s<this.networkControllers.length&&(this.networkControllers[s].startLoad(e,t),!(!this.started||!this.networkControllers));s++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[te.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[te.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[te.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=I_()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){DT(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const s=e.length;for(let r=0;r<s;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:s}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,s)for(let n=r;n--;){const a=e[n].attrs["HDCP-LEVEL"];if(a&&a<=s)return n}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const s=Lv(t);return xv(e,s,navigator.mediaCapabilities)}}qs.defaultConfig=void 0;var Ae=qs,We={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},de={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},Vu=i=>i===We.VIDEO?"playback":i,Os=class Ba extends Error{constructor(e,t=Ba.MEDIA_ERR_CUSTOM,s,r){var n;super(e),this.name="MediaError",this.code=t,this.context=r,this.fatal=s??(t>=Ba.MEDIA_ERR_NETWORK&&t<=Ba.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(n=Ba.defaultMessages[this.code])!=null?n:"")}};Os.MEDIA_ERR_ABORTED=1,Os.MEDIA_ERR_NETWORK=2,Os.MEDIA_ERR_DECODE=3,Os.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Os.MEDIA_ERR_ENCRYPTED=5,Os.MEDIA_ERR_CUSTOM=100,Os.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var Z=Os,U9=i=>i==null,C0=(i,e)=>U9(e)?!1:i in e,Rh={ANY:"any",MUTED:"muted"},Pe={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},Qi={MSE:"mse",NATIVE:"native"},Ha={HEADER:"header",QUERY:"query",NONE:"none"},cu=Object.values(Ha),bs={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},Ep={HLS:bs.M3U8};[...Object.values(bs)];var $9="en",kh={code:$9},ut=(i,e,t,s,r=i)=>{r.addEventListener(e,t,s),i.addEventListener("teardown",()=>{r.removeEventListener(e,t)},{once:!0})};function B9(i,e,t){e&&t>e&&(t=e);for(let s=0;s<i.length;s++)if(i.start(s)<=t&&i.end(s)>=t)return!0;return!1}var x0=i=>{let e=i.indexOf("?");if(e<0)return[i];let t=i.slice(0,e),s=i.slice(e);return[t,s]},Gu=i=>{let{type:e}=i;if(e){let t=e.toUpperCase();return C0(t,Ep)?Ep[t]:e}return H9(i)},P2=i=>i==="VOD"?Pe.ON_DEMAND:Pe.LIVE,O2=i=>i==="EVENT"?Number.POSITIVE_INFINITY:i==="VOD"?Number.NaN:0,H9=i=>{let{src:e}=i;if(!e)return"";let t="";try{t=new URL(e).pathname}catch{console.error("invalid url")}let s=t.lastIndexOf(".");if(s<0)return G9(i)?bs.M3U8:"";let r=t.slice(s+1).toUpperCase();return C0(r,bs)?bs[r]:""},V9="mux.com",G9=({src:i,customDomain:e=V9})=>{let t;try{t=new URL(`${i}`)}catch{return!1}let s=t.protocol==="https:",r=t.hostname===`stream.${e}`.toLowerCase(),n=t.pathname.split("/"),a=n.length===2,o=!(n!=null&&n[1].includes("."));return s&&r&&a&&o},zn=i=>{let e=(i??"").split(".")[1];if(e)try{let t=e.replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(t).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(s)}catch{return}},K9=({exp:i},e=Date.now())=>!i||i*1e3<e,W9=({sub:i},e)=>i!==e,q9=({aud:i},e)=>!i,j9=({aud:i},e)=>i!==e,N2="en";function ae(i,e=!0){var t,s;let r=e&&(s=(t=kh)==null?void 0:t[i])!=null?s:i,n=e?kh.code:N2;return new Y9(r,n)}var Y9=class{constructor(e,t=(s=>(s=kh)!=null?s:N2)()){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,(t,s)=>{var r;return(r=e[s])!=null?r:""})}toString(){return this.message}},Z9=Object.values(Rh),yp=i=>typeof i=="boolean"||typeof i=="string"&&Z9.includes(i),z9=(i,e,t)=>{let{autoplay:s}=i,r=!1,n=!1,a=yp(s)?s:!!s,o=()=>{r||ut(e,"playing",()=>{r=!0},{once:!0})};if(o(),ut(e,"loadstart",()=>{r=!1,o(),Uc(e,a)},{once:!0}),ut(e,"loadstart",()=>{t||(i.streamType&&i.streamType!==Pe.UNKNOWN?n=i.streamType===Pe.LIVE:n=!Number.isFinite(e.duration)),Uc(e,a)},{once:!0}),t&&t.once(Ae.Events.LEVEL_LOADED,(l,d)=>{var u;i.streamType&&i.streamType!==Pe.UNKNOWN?n=i.streamType===Pe.LIVE:n=(u=d.details.live)!=null?u:!1}),!a){let l=()=>{!n||Number.isFinite(i.startTime)||(t!=null&&t.liveSyncPosition?e.currentTime=t.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};t&&ut(e,"play",()=>{e.preload==="metadata"?t.once(Ae.Events.LEVEL_UPDATED,l):l()},{once:!0})}return l=>{r||(a=yp(l)?l:!!l,Uc(e,a))}},Uc=(i,e)=>{if(!e)return;let t=i.muted,s=()=>i.muted=t;switch(e){case Rh.ANY:i.play().catch(()=>{i.muted=!0,i.play().catch(s)});break;case Rh.MUTED:i.muted=!0,i.play().catch(s);break;default:i.play().catch(()=>{});break}},Q9=({preload:i,src:e},t,s)=>{let r=c=>{c!=null&&["","none","metadata","auto"].includes(c)?t.setAttribute("preload",c):t.removeAttribute("preload")};if(!s)return r(i),r;let n=!1,a=!1,o=s.config.maxBufferLength,l=s.config.maxBufferSize,d=c=>{r(c);let h=c??t.preload;a||h==="none"||(h==="metadata"?(s.config.maxBufferLength=1,s.config.maxBufferSize=1):(s.config.maxBufferLength=o,s.config.maxBufferSize=l),u())},u=()=>{!n&&e&&(n=!0,s.loadSource(e))};return ut(t,"play",()=>{a=!0,s.config.maxBufferLength=o,s.config.maxBufferSize=l,u()},{once:!0}),d(i),d};function X9(i,e){var t;if(!("videoTracks"in i))return;let s=new WeakMap;e.on(Ae.Events.MANIFEST_PARSED,function(l,d){o();let u=i.addVideoTrack("main");u.selected=!0;for(let[c,h]of d.levels.entries()){let f=u.addRendition(h.url[0],h.width,h.height,h.videoCodec,h.bitrate);s.set(h,`${c}`),f.id=`${c}`}}),e.on(Ae.Events.AUDIO_TRACKS_UPDATED,function(l,d){a();for(let u of d.audioTracks){let c=u.default?"main":"alternative",h=i.addAudioTrack(c,u.name,u.lang);h.id=`${u.id}`,u.default&&(h.enabled=!0)}}),i.audioTracks.addEventListener("change",()=>{var l;let d=+((l=[...i.audioTracks].find(c=>c.enabled))==null?void 0:l.id),u=e.audioTracks.map(c=>c.id);d!=e.audioTrack&&u.includes(d)&&(e.audioTrack=d)}),e.on(Ae.Events.LEVELS_UPDATED,function(l,d){var u;let c=i.videoTracks[(u=i.videoTracks.selectedIndex)!=null?u:0];if(!c)return;let h=d.levels.map(f=>s.get(f));for(let f of i.videoRenditions)f.id&&!h.includes(f.id)&&c.removeRendition(f)});let r=l=>{let d=l.target.selectedIndex;d!=e.nextLevel&&(e.nextLevel=d)};(t=i.videoRenditions)==null||t.addEventListener("change",r);let n=()=>{for(let l of i.videoTracks)i.removeVideoTrack(l)},a=()=>{for(let l of i.audioTracks)i.removeAudioTrack(l)},o=()=>{n(),a()};e.once(Ae.Events.DESTROYING,o)}var $c=i=>"time"in i?i.time:i.startTime;function J9(i,e){e.on(Ae.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(r,{tracks:n})=>{n.forEach(a=>{var o,l;let d=(o=a.subtitleTrack)!=null?o:a.closedCaptions,u=e.subtitleTracks.findIndex(({lang:h,name:f,type:m})=>h==(d==null?void 0:d.lang)&&f===a.label&&m.toLowerCase()===a.kind),c=((l=a._id)!=null?l:a.default)?"default":`${a.kind}${u}`;I0(i,a.kind,a.label,d==null?void 0:d.lang,c,a.default)})});let t=()=>{if(!e.subtitleTracks.length)return;let r=Array.from(i.textTracks).find(o=>o.id&&o.mode==="showing"&&["subtitles","captions"].includes(o.kind));if(!r)return;let n=e.subtitleTracks[e.subtitleTrack],a=n?n.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||(r==null?void 0:r.id)!==a){let o=e.subtitleTracks.findIndex(({lang:l,name:d,type:u,default:c})=>r.id==="default"&&c||l==r.language&&d===r.label&&u.toLowerCase()===r.kind);e.subtitleTrack=o}(r==null?void 0:r.id)===a&&r.cues&&Array.from(r.cues).forEach(o=>{r.addCue(o)})};i.textTracks.addEventListener("change",t),e.on(Ae.Events.CUES_PARSED,(r,{track:n,cues:a})=>{let o=i.textTracks.getTrackById(n);if(!o)return;let l=o.mode==="disabled";l&&(o.mode="hidden"),a.forEach(d=>{var u;(u=o.cues)!=null&&u.getCueById(d.id)||o.addCue(d)}),l&&(o.mode="disabled")}),e.once(Ae.Events.DESTROYING,()=>{i.textTracks.removeEventListener("change",t),i.querySelectorAll("track[data-removeondestroy]").forEach(r=>{r.remove()})});let s=()=>{Array.from(i.textTracks).forEach(r=>{var n,a;if(!["subtitles","caption"].includes(r.kind)&&(r.label==="thumbnails"||r.kind==="chapters")){if(!((n=r.cues)!=null&&n.length)){let o="track";r.kind&&(o+=`[kind="${r.kind}"]`),r.label&&(o+=`[label="${r.label}"]`);let l=i.querySelector(o),d=(a=l==null?void 0:l.getAttribute("src"))!=null?a:"";l==null||l.removeAttribute("src"),setTimeout(()=>{l==null||l.setAttribute("src",d)},0)}r.mode!=="hidden"&&(r.mode="hidden")}})};e.once(Ae.Events.MANIFEST_LOADED,s),e.once(Ae.Events.MEDIA_ATTACHED,s)}function I0(i,e,t,s,r,n){let a=document.createElement("track");return a.kind=e,a.label=t,s&&(a.srclang=s),r&&(a.id=r),n&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),i.append(a),a.track}function e7(i,e){let t=Array.prototype.find.call(i.querySelectorAll("track"),s=>s.track===e);t==null||t.remove()}function Yo(i,e,t){var s;return(s=Array.from(i.querySelectorAll("track")).find(r=>r.track.label===e&&r.track.kind===t))==null?void 0:s.track}async function F2(i,e,t,s){let r=Yo(i,t,s);return r||(r=I0(i,s,t),r.mode="hidden",await new Promise(n=>setTimeout(()=>n(void 0),0))),r.mode!=="hidden"&&(r.mode="hidden"),[...e].sort((n,a)=>$c(a)-$c(n)).forEach(n=>{var a,o;let l=n.value,d=$c(n);if("endTime"in n&&n.endTime!=null)r==null||r.addCue(new VTTCue(d,n.endTime,s==="chapters"?l:JSON.stringify(l??null)));else{let u=Array.prototype.findIndex.call(r==null?void 0:r.cues,m=>m.startTime>=d),c=(a=r==null?void 0:r.cues)==null?void 0:a[u],h=c?c.startTime:Number.isFinite(i.duration)?i.duration:Number.MAX_SAFE_INTEGER,f=(o=r==null?void 0:r.cues)==null?void 0:o[u-1];f&&(f.endTime=d),r==null||r.addCue(new VTTCue(d,h,s==="chapters"?l:JSON.stringify(l??null)))}}),i.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),r}var L0="cuepoints",U2=Object.freeze({label:L0});async function $2(i,e,t=U2){return F2(i,e,t.label,"metadata")}var wh=i=>({time:i.startTime,value:JSON.parse(i.text)});function t7(i,e={label:L0}){let t=Yo(i,e.label,"metadata");return t!=null&&t.cues?Array.from(t.cues,s=>wh(s)):[]}function B2(i,e={label:L0}){var t,s;let r=Yo(i,e.label,"metadata");if(!((t=r==null?void 0:r.activeCues)!=null&&t.length))return;if(r.activeCues.length===1)return wh(r.activeCues[0]);let{currentTime:n}=i,a=Array.prototype.find.call((s=r.activeCues)!=null?s:[],({startTime:o,endTime:l})=>o<=n&&l>n);return wh(a||r.activeCues[0])}async function i7(i,e=U2){return new Promise(t=>{ut(i,"loadstart",async()=>{let s=await $2(i,[],e);ut(i,"cuechange",()=>{let r=B2(i);if(r){let n=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:r});i.dispatchEvent(n)}},{},s),t(s)})})}var R0="chapters",H2=Object.freeze({label:R0}),Dh=i=>({startTime:i.startTime,endTime:i.endTime,value:i.text});async function V2(i,e,t=H2){return F2(i,e,t.label,"chapters")}function s7(i,e={label:R0}){var t;let s=Yo(i,e.label,"chapters");return(t=s==null?void 0:s.cues)!=null&&t.length?Array.from(s.cues,r=>Dh(r)):[]}function G2(i,e={label:R0}){var t,s;let r=Yo(i,e.label,"chapters");if(!((t=r==null?void 0:r.activeCues)!=null&&t.length))return;if(r.activeCues.length===1)return Dh(r.activeCues[0]);let{currentTime:n}=i,a=Array.prototype.find.call((s=r.activeCues)!=null?s:[],({startTime:o,endTime:l})=>o<=n&&l>n);return Dh(a||r.activeCues[0])}async function r7(i,e=H2){return new Promise(t=>{ut(i,"loadstart",async()=>{let s=await V2(i,[],e);ut(i,"cuechange",()=>{let r=G2(i);if(r){let n=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:r});i.dispatchEvent(n)}},{},s),t(s)})})}function n7(i,e){if(e){let t=e.playingDate;if(t!=null)return new Date(t.getTime()-i.currentTime*1e3)}return typeof i.getStartDate=="function"?i.getStartDate():new Date(NaN)}function a7(i,e){if(e&&e.playingDate)return e.playingDate;if(typeof i.getStartDate=="function"){let t=i.getStartDate();return new Date(t.getTime()+i.currentTime*1e3)}return new Date(NaN)}var mo={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},o7=i=>{if(i===We.VIDEO)return mo.VIDEO;if(i===We.DRM)return mo.DRM},l7=(i,e)=>{var t,s;let r=Vu(i),n=`${r}Token`;return(t=e.tokens)!=null&&t[r]?(s=e.tokens)==null?void 0:s[r]:C0(n,e)?e[n]:void 0},hu=(i,e,t,s,r=!1,n=!(a=>(a=globalThis.navigator)==null?void 0:a.onLine)())=>{var a,o;if(n){let v=ae("Your device appears to be offline",r),b,E=Z.MEDIA_ERR_NETWORK,T=new Z(v,E,!1,b);return T.errorCategory=e,T.muxCode=de.NETWORK_OFFLINE,T.data=i,T}let l="status"in i?i.status:i.code,d=Date.now(),u=Z.MEDIA_ERR_NETWORK;if(l===200)return;let c=Vu(e),h=l7(e,t),f=o7(e),[m]=x0((a=t.playbackId)!=null?a:"");if(!l||!m)return;let p=zn(h);if(h&&!p){let v=ae("The {tokenNamePrefix}-token provided is invalid or malformed.",r).format({tokenNamePrefix:c}),b=ae("Compact JWT string: {token}",r).format({token:h}),E=new Z(v,u,!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_MALFORMED,E.data=i,E}if(l>=500){let v=new Z("",u,s??!0);return v.errorCategory=e,v.muxCode=de.NETWORK_UNKNOWN_ERROR,v}if(l===403)if(p){if(K9(p,d)){let v={timeStyle:"medium",dateStyle:"medium"},b=ae("The video’s secured {tokenNamePrefix}-token has expired.",r).format({tokenNamePrefix:c}),E=ae("Expired at: {expiredDate}. Current time: {currentDate}.",r).format({expiredDate:new Intl.DateTimeFormat("en",v).format((o=p.exp)!=null?o:0*1e3),currentDate:new Intl.DateTimeFormat("en",v).format(d)}),T=new Z(b,u,!0,E);return T.errorCategory=e,T.muxCode=de.NETWORK_TOKEN_EXPIRED,T.data=i,T}if(W9(p,m)){let v=ae("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",r).format({tokenNamePrefix:c}),b=ae("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",r).format({tokenNamePrefix:c,playbackId:m,tokenPlaybackId:p.sub}),E=new Z(v,u,!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_SUB_MISMATCH,E.data=i,E}if(q9(p)){let v=ae("The {tokenNamePrefix}-token is formatted with incorrect information.",r).format({tokenNamePrefix:c}),b=ae("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",r).format({tokenNamePrefix:c,expectedAud:f}),E=new Z(v,u,!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_AUD_MISSING,E.data=i,E}if(j9(p,f)){let v=ae("The {tokenNamePrefix}-token is formatted with incorrect information.",r).format({tokenNamePrefix:c}),b=ae("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",r).format({tokenNamePrefix:c,expectedAud:f,aud:p.aud}),E=new Z(v,u,!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_AUD_MISMATCH,E.data=i,E}}else{let v=ae("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",r).format({tokenNamePrefix:c,category:e}),b=ae("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new Z(v,u,s??!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_MISSING,E.data=i,E}if(l===412){let v=ae("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",r),b=ae("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new Z(v,u,s??!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_NOT_READY,E.streamType=t.streamType===Pe.LIVE?"live":t.streamType===Pe.ON_DEMAND?"on-demand":"unknown",E.data=i,E}if(l===404){let v=ae("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",r),b=ae("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new Z(v,u,s??!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_NOT_FOUND,E.data=i,E}if(l===400){let v=ae("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),b=ae("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new Z(v,u,s??!0,b);return E.errorCategory=e,E.muxCode=de.NETWORK_INVALID_URL,E.data=i,E}let g=new Z("",u,s??!0);return g.errorCategory=e,g.muxCode=de.NETWORK_UNKNOWN_ERROR,g.data=i,g},bp=Ae.DefaultConfig.capLevelController,K2=class W2 extends bp{constructor(e){super(e)}get levels(){var e;return(e=this.hls.levels)!=null?e:[]}getValidLevels(e){return this.levels.filter((t,s)=>this.isLevelAllowed(t)&&s<=e)}getMaxLevel(e){let t=super.getMaxLevel(e),s=this.getValidLevels(e);if(!s[t])return t;let r=Math.min(s[t].width,s[t].height),n=W2.minMaxResolution;return r>=n?t:bp.getMaxLevelByMediaSize(s,n*(16/9),n)}};K2.minMaxResolution=720;var d7=K2,u7=d7,Wl={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},c7=i=>{if(i.includes("fps"))return Wl.FAIRPLAY;if(i.includes("playready"))return Wl.PLAYREADY;if(i.includes("widevine"))return Wl.WIDEVINE},h7=i=>{let e=i.split(`
`).find((t,s,r)=>s&&r[s-1].startsWith("#EXT-X-STREAM-INF"));return fetch(e).then(t=>t.status!==200?Promise.reject(t):t.text())},f7=i=>{let e=i.split(`
`).filter(s=>s.startsWith("#EXT-X-SESSION-DATA"));if(!e.length)return{};let t={};for(let s of e){let r=p7(s),n=r["DATA-ID"];n&&(t[n]={...r})}return{sessionData:t}},m7=/([A-Z0-9-]+)="?(.*?)"?(?:,|$)/g;function p7(i){let e=[...i.matchAll(m7)];return Object.fromEntries(e.map(([,t,s])=>[t,s]))}var g7=i=>{var e,t,s;let r=i.split(`
`),n=(t=((e=r.find(d=>d.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:t.trim(),a=P2(n),o=O2(n),l;if(a===Pe.LIVE){let d=r.find(u=>u.startsWith("#EXT-X-PART-INF"));if(d)l=+d.split(":")[1].split("=")[1]*2;else{let u=r.find(h=>h.startsWith("#EXT-X-TARGETDURATION")),c=(s=u==null?void 0:u.split(":"))==null?void 0:s[1];l=+(c??6)*3}}return{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}},v7=async(i,e)=>{if(e===bs.MP4)return{streamType:Pe.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0,sessionData:void 0};if(e===bs.M3U8){let t=await fetch(i);if(!t.ok)return Promise.reject(t);let s=await t.text(),r=await h7(s);return{...f7(s),...g7(r)}}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${i}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0,sessionData:void 0}},E7=async(i,e,t=Gu({src:i}))=>{var s,r,n,a;let{streamType:o,targetLiveWindow:l,liveEdgeStartOffset:d,sessionData:u}=await v7(i,t),c=u==null?void 0:u["com.apple.hls.chapters"];(c!=null&&c.URI||c!=null&&c.VALUE.toLocaleLowerCase().startsWith("http"))&&k0((s=c.URI)!=null?s:c.VALUE,e),((r=st.get(e))!=null?r:{}).liveEdgeStartOffset=d,((n=st.get(e))!=null?n:{}).targetLiveWindow=l,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((a=st.get(e))!=null?a:{}).streamType=o,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},k0=async(i,e)=>{var t,s;try{let r=await fetch(i);if(!r.ok)throw new Error(`Failed to fetch Mux metadata: ${r.status} ${r.statusText}`);let n=await r.json(),a={};if(!((t=n==null?void 0:n[0])!=null&&t.metadata))return;for(let l of n[0].metadata)l.key&&l.value&&(a[l.key]=l.value);((s=st.get(e))!=null?s:{}).metadata=a;let o=new CustomEvent("muxmetadata");e.dispatchEvent(o)}catch(r){console.error(r)}},y7=i=>{var e;let t=i.type,s=P2(t),r=O2(t),n,a=!!((e=i.partList)!=null&&e.length);return s===Pe.LIVE&&(n=a?i.partTarget*2:i.targetduration*3),{streamType:s,targetLiveWindow:r,liveEdgeStartOffset:n,lowLatency:a}},b7=(i,e,t)=>{var s,r,n,a,o,l,d,u;let{streamType:c,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:m}=y7(i);if(c===Pe.LIVE){m?(t.config.backBufferLength=(s=t.userConfig.backBufferLength)!=null?s:4,t.config.maxFragLookUpTolerance=(r=t.userConfig.maxFragLookUpTolerance)!=null?r:.001,t.config.abrBandWidthUpFactor=(n=t.userConfig.abrBandWidthUpFactor)!=null?n:t.config.abrBandWidthFactor):t.config.backBufferLength=(a=t.userConfig.backBufferLength)!=null?a:8;let p=Object.freeze({get length(){return e.seekable.length},start(g){return e.seekable.start(g)},end(g){var v;return g>this.length||g<0||Number.isFinite(e.duration)?e.seekable.end(g):(v=t.liveSyncPosition)!=null?v:e.seekable.end(g)}});((o=st.get(e))!=null?o:{}).seekable=p}((l=st.get(e))!=null?l:{}).liveEdgeStartOffset=f,((d=st.get(e))!=null?d:{}).targetLiveWindow=h,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((u=st.get(e))!=null?u:{}).streamType=c,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},Tp,_p,T7=(_p=(Tp=globalThis==null?void 0:globalThis.navigator)==null?void 0:Tp.userAgent)!=null?_p:"",Ap,Sp,Cp,_7=(Cp=(Sp=(Ap=globalThis==null?void 0:globalThis.navigator)==null?void 0:Ap.userAgentData)==null?void 0:Sp.platform)!=null?Cp:"",A7=T7.toLowerCase().includes("android")||["x11","android"].some(i=>_7.toLowerCase().includes(i)),st=new WeakMap,Ts="mux.com",xp,Ip,q2=(Ip=(xp=Ae).isSupported)==null?void 0:Ip.call(xp),S7=A7,w0=()=>i0.utils.now(),C7=i0.utils.generateUUID,Mh=({playbackId:i,customDomain:e=Ts,maxResolution:t,minResolution:s,renditionOrder:r,programStartTime:n,programEndTime:a,assetStartTime:o,assetEndTime:l,playbackToken:d,tokens:{playback:u=d}={},extraSourceParams:c={}}={})=>{if(!i)return;let[h,f=""]=x0(i),m=new URL(`https://stream.${e}/${h}.m3u8${f}`);return u||m.searchParams.has("token")?(m.searchParams.forEach((p,g)=>{g!="token"&&m.searchParams.delete(g)}),u&&m.searchParams.set("token",u)):(t&&m.searchParams.set("max_resolution",t),s&&(m.searchParams.set("min_resolution",s),t&&+t.slice(0,-1)<+s.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",s,"maxResolution",t)),r&&m.searchParams.set("rendition_order",r),n&&m.searchParams.set("program_start_time",`${n}`),a&&m.searchParams.set("program_end_time",`${a}`),o&&m.searchParams.set("asset_start_time",`${o}`),l&&m.searchParams.set("asset_end_time",`${l}`),Object.entries(c).forEach(([p,g])=>{g!=null&&m.searchParams.set(p,g)})),m.toString()},Ku=i=>{if(!i)return;let[e]=i.split("?");return e||void 0},D0=i=>{if(!i||!i.startsWith("https://stream."))return;let[e]=new URL(i).pathname.slice(1).split(/\.m3u8|\//);return e||void 0},x7=i=>{var e,t,s;return(e=i==null?void 0:i.metadata)!=null&&e.video_id?i.metadata.video_id:eE(i)&&(s=(t=Ku(i.playbackId))!=null?t:D0(i.src))!=null?s:i.src},j2=i=>{var e;return(e=st.get(i))==null?void 0:e.error},I7=i=>{var e;return(e=st.get(i))==null?void 0:e.metadata},Ph=i=>{var e,t;return(t=(e=st.get(i))==null?void 0:e.streamType)!=null?t:Pe.UNKNOWN},L7=i=>{var e,t;return(t=(e=st.get(i))==null?void 0:e.targetLiveWindow)!=null?t:Number.NaN},M0=i=>{var e,t;return(t=(e=st.get(i))==null?void 0:e.seekable)!=null?t:i.seekable},R7=i=>{var e;let t=(e=st.get(i))==null?void 0:e.liveEdgeStartOffset;if(typeof t!="number")return Number.NaN;let s=M0(i);return s.length?s.end(s.length-1)-t:Number.NaN},P0=.034,k7=(i,e,t=P0)=>Math.abs(i-e)<=t,Y2=(i,e,t=P0)=>i>e||k7(i,e,t),w7=(i,e=P0)=>i.paused&&Y2(i.currentTime,i.duration,e),Z2=(i,e)=>{var t,s,r;if(!e||!i.buffered.length)return;if(i.readyState>2)return!1;let n=e.currentLevel>=0?(s=(t=e.levels)==null?void 0:t[e.currentLevel])==null?void 0:s.details:(r=e.levels.find(c=>!!c.details))==null?void 0:r.details;if(!n||n.live)return;let{fragments:a}=n;if(!(a!=null&&a.length))return;if(i.currentTime<i.duration-(n.targetduration+.5))return!1;let o=a[a.length-1];if(i.currentTime<=o.start)return!1;let l=o.start+o.duration/2,d=i.buffered.start(i.buffered.length-1),u=i.buffered.end(i.buffered.length-1);return l>d&&l<u},z2=(i,e)=>i.ended||i.loop?i.ended:e&&Z2(i,e)?!0:w7(i),D7=(i,e,t)=>{Q2(e,t,i);let{metadata:s={}}=i,{view_session_id:r=C7()}=s,n=x7(i);s.view_session_id=r,s.video_id=n,i.metadata=s;let a=u=>{var c;(c=e.mux)==null||c.emit("hb",{view_drm_type:u})};i.drmTypeCb=a,st.set(e,{retryCount:0});let o=M7(i,e),l=Q9(i,e,o);i!=null&&i.muxDataKeepSession&&e!=null&&e.mux&&!e.mux.deleted?o&&e.mux.addHLSJS({hlsjs:o,Hls:o?Ae:void 0}):$7(i,e,o),B7(i,e,o),i7(e),r7(e);let d=z9(i,e,o);return{engine:o,setAutoplay:d,setPreload:l}},Q2=(i,e,t)=>{let s=e==null?void 0:e.engine;i!=null&&i.mux&&!i.mux.deleted&&(t!=null&&t.muxDataKeepSession?s&&i.mux.removeHLSJS():(i.mux.destroy(),delete i.mux)),s&&(s.detachMedia(),s.destroy()),i&&(i.hasAttribute("src")&&(i.removeAttribute("src"),i.load()),i.removeEventListener("error",iE),i.removeEventListener("error",Oh),i.removeEventListener("durationchange",tE),st.delete(i),i.dispatchEvent(new Event("teardown")))};function X2(i,e){var t;let s=Gu(i);if(s!==bs.M3U8)return!0;let r=!s||((t=e.canPlayType(s))!=null?t:!0),{preferPlayback:n}=i,a=n===Qi.MSE,o=n===Qi.NATIVE;return r&&(o||!(q2&&(a||S7)))}var M7=(i,e)=>{let{debug:t,streamType:s,startTime:r=-1,metadata:n,preferCmcd:a,_hlsConfig:o={}}=i,l=Gu(i)===bs.M3U8,d=X2(i,e);if(l&&!d&&q2){let u={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},c=P7(s),h=O7(i),f=[Ha.QUERY,Ha.HEADER].includes(a)?{useHeaders:a===Ha.HEADER,sessionId:n==null?void 0:n.view_session_id,contentId:n==null?void 0:n.video_id}:void 0,m=new Ae({debug:t,startPosition:r,cmcd:f,xhrSetup:(p,g)=>{var v,b;if(a&&a!==Ha.QUERY)return;let E=new URL(g);if(!E.searchParams.has("CMCD"))return;let T=((b=(v=E.searchParams.get("CMCD"))==null?void 0:v.split(","))!=null?b:[]).filter(x=>x.startsWith("sid")||x.startsWith("cid")).join(",");E.searchParams.set("CMCD",T),p.open("GET",E)},capLevelController:u7,...u,...c,...h,...o});return m.on(Ae.Events.MANIFEST_PARSED,async function(p,g){var v,b;let E=(v=g.sessionData)==null?void 0:v["com.apple.hls.chapters"];(E!=null&&E.URI||E!=null&&E.VALUE.toLocaleLowerCase().startsWith("http"))&&k0((b=E==null?void 0:E.URI)!=null?b:E==null?void 0:E.VALUE,e)}),m}},P7=i=>i===Pe.LIVE?{backBufferLength:8}:{},O7=i=>{let{tokens:{drm:e}={},playbackId:t,drmTypeCb:s}=i,r=Ku(t);return!e||!r?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:ql(i,"fairplay"),serverCertificateUrl:J2(i,"fairplay")},"com.widevine.alpha":{licenseUrl:ql(i,"widevine")},"com.microsoft.playready":{licenseUrl:ql(i,"playready")}},requestMediaKeySystemAccessFunc:(n,a)=>(n==="com.widevine.alpha"&&(a=[...a.map(o=>{var l;let d=(l=o.videoCapabilities)==null?void 0:l.map(u=>({...u,robustness:"HW_SECURE_ALL"}));return{...o,videoCapabilities:d}}),...a]),navigator.requestMediaKeySystemAccess(n,a).then(o=>{let l=c7(n);return s==null||s(l),o}))}},N7=async i=>{let e=await fetch(i);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},F7=async(i,e)=>{let t=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:i});if(t.status!==200)return Promise.reject(t);let s=await t.arrayBuffer();return new Uint8Array(s)},U7=(i,e)=>{ut(e,"encrypted",async t=>{try{let s=t.initDataType;if(s!=="skd"){console.error(`Received unexpected initialization data type "${s}"`);return}if(!e.mediaKeys){let l=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[s],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(u=>{var c;return(c=i.drmTypeCb)==null||c.call(i,Wl.FAIRPLAY),u}).catch(()=>{let u=ae("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),c=new Z(u,Z.MEDIA_ERR_ENCRYPTED,!0);c.errorCategory=We.DRM,c.muxCode=de.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,oi(e,c)});if(!l)return;let d=await l.createMediaKeys();try{let u=await N7(J2(i,"fairplay")).catch(c=>{if(c instanceof Response){let h=hu(c,We.DRM,i);return console.error("mediaError",h==null?void 0:h.message,h==null?void 0:h.context),h?Promise.reject(h):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(c)});await d.setServerCertificate(u).catch(()=>{let c=ae("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),h=new Z(c,Z.MEDIA_ERR_ENCRYPTED,!0);return h.errorCategory=We.DRM,h.muxCode=de.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(h)})}catch(u){oi(e,u);return}await e.setMediaKeys(d)}let r=t.initData;if(r==null){console.error(`Could not start encrypted playback due to missing initData in ${t.type} event`);return}let n=e.mediaKeys.createSession();n.addEventListener("keystatuseschange",()=>{n.keyStatuses.forEach(l=>{let d;if(l==="internal-error"){let u=ae("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");d=new Z(u,Z.MEDIA_ERR_ENCRYPTED,!0),d.errorCategory=We.DRM,d.muxCode=de.ENCRYPTED_CDM_ERROR}else if(l==="output-restricted"||l==="output-downscaled"){let u=ae("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");d=new Z(u,Z.MEDIA_ERR_ENCRYPTED,!1),d.errorCategory=We.DRM,d.muxCode=de.ENCRYPTED_OUTPUT_RESTRICTED}d&&oi(e,d)})});let a=await Promise.all([n.generateRequest(s,r).catch(()=>{let l=ae("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),d=new Z(l,Z.MEDIA_ERR_ENCRYPTED,!0);d.errorCategory=We.DRM,d.muxCode=de.ENCRYPTED_GENERATE_REQUEST_FAILED,oi(e,d)}),new Promise(l=>{n.addEventListener("message",d=>{l(d.message)},{once:!0})})]).then(([,l])=>l),o=await F7(a,ql(i,"fairplay")).catch(l=>{if(l instanceof Response){let d=hu(l,We.DRM,i);return console.error("mediaError",d==null?void 0:d.message,d==null?void 0:d.context),d?Promise.reject(d):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(l)});await n.update(o).catch(()=>{let l=ae("Failed to update DRM license. This may be an issue with the player or your protected content."),d=new Z(l,Z.MEDIA_ERR_ENCRYPTED,!0);return d.errorCategory=We.DRM,d.muxCode=de.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(d)})}catch(s){oi(e,s);return}})},ql=({playbackId:i,tokens:{drm:e}={},customDomain:t=Ts},s)=>{let r=Ku(i);return`https://license.${t.toLocaleLowerCase().endsWith(Ts)?t:Ts}/license/${s}/${r}?token=${e}`},J2=({playbackId:i,tokens:{drm:e}={},customDomain:t=Ts},s)=>{let r=Ku(i);return`https://license.${t.toLocaleLowerCase().endsWith(Ts)?t:Ts}/appcert/${s}/${r}?token=${e}`},eE=({playbackId:i,src:e,customDomain:t})=>{if(i)return!0;if(typeof e!="string")return!1;let s=window==null?void 0:window.location.href,r=new URL(e,s).hostname.toLocaleLowerCase();return r.includes(Ts)||!!t&&r.includes(t.toLocaleLowerCase())},$7=(i,e,t)=>{var s;let{envKey:r,disableTracking:n,muxDataSDK:a=i0,muxDataSDKOptions:o={}}=i,l=eE(i);if(!n&&(r||l)){let{playerInitTime:d,playerSoftwareName:u,playerSoftwareVersion:c,beaconCollectionDomain:h,debug:f,disableCookies:m}=i,p={...i.metadata,video_title:((s=i==null?void 0:i.metadata)==null?void 0:s.video_title)||void 0},g=v=>typeof v.player_error_code=="string"?!1:typeof i.errorTranslator=="function"?i.errorTranslator(v):v;a.monitor(e,{debug:f,beaconCollectionDomain:h,hlsjs:t,Hls:t?Ae:void 0,automaticErrorTracking:!1,errorTranslator:g,disableCookies:m,...o,data:{...r?{env_key:r}:{},player_software_name:u,player_software:u,player_software_version:c,player_init_time:d,...p}})}},B7=(i,e,t)=>{var s,r;let n=X2(i,e),{src:a,customDomain:o=Ts}=i,l=()=>{e.ended||!z2(e,t)||(Z2(e,t)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},d,u,c=()=>{let h=M0(e),f,m;h.length>0&&(f=h.start(0),m=h.end(0)),(u!==m||d!==f)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),d=f,u=m};if(ut(e,"durationchange",c),e&&n){let h=Gu(i);if(typeof a=="string"){if(a.endsWith(".mp4")&&a.includes(o)){let p=D0(a),g=new URL(`https://stream.${o}/${p}/metadata.json`);k0(g.toString(),e)}let f=()=>{if(Ph(e)!==Pe.LIVE||Number.isFinite(e.duration))return;let p=setInterval(c,1e3);e.addEventListener("teardown",()=>{clearInterval(p)},{once:!0}),ut(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(p)})},m=async()=>E7(a,e,h).then(f).catch(p=>{if(p instanceof Response){let g=hu(p,We.VIDEO,i);if(g){oi(e,g);return}}});if(e.preload==="none"){let p=()=>{m(),e.removeEventListener("loadedmetadata",g)},g=()=>{m(),e.removeEventListener("play",p)};ut(e,"play",p,{once:!0}),ut(e,"loadedmetadata",g,{once:!0})}else m();(s=i.tokens)!=null&&s.drm?U7(i,e):ut(e,"encrypted",()=>{let p=ae("Attempting to play DRM-protected content without providing a DRM token."),g=new Z(p,Z.MEDIA_ERR_ENCRYPTED,!0);g.errorCategory=We.DRM,g.muxCode=de.ENCRYPTED_MISSING_TOKEN,oi(e,g)},{once:!0}),e.setAttribute("src",a),i.startTime&&(((r=st.get(e))!=null?r:{}).startTime=i.startTime,e.addEventListener("durationchange",tE,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",iE),e.addEventListener("error",Oh),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(f=>{f.remove()})},{once:!0}),ut(e,"pause",l),ut(e,"seeked",l),ut(e,"play",()=>{e.ended||Y2(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else t&&a?(t.once(Ae.Events.LEVEL_LOADED,(h,f)=>{b7(f.details,e,t),c(),Ph(e)===Pe.LIVE&&!Number.isFinite(e.duration)&&(t.on(Ae.Events.LEVEL_UPDATED,c),ut(e,"durationchange",()=>{Number.isFinite(e.duration)&&t.off(Ae.Events.LEVELS_UPDATED,c)}))}),t.on(Ae.Events.ERROR,(h,f)=>{var m,p;let g=H7(f,i);if(g.muxCode===de.NETWORK_NOT_READY){let v=(m=st.get(e))!=null?m:{},b=(p=v.retryCount)!=null?p:0;if(b<6){let E=b===0?5e3:6e4,T=new Z(`Retrying in ${E/1e3} seconds...`,g.code,g.fatal);Object.assign(T,g),oi(e,T),setTimeout(()=>{v.retryCount=b+1,f.details==="manifestLoadError"&&f.url&&t.loadSource(f.url)},E);return}else{v.retryCount=0;let E=new Z('Try again later or <a href="#" onclick="window.location.reload(); return false;" style="color: #4a90e2;">click here to retry</a>',g.code,g.fatal);Object.assign(E,g),oi(e,E);return}}oi(e,g)}),t.on(Ae.Events.MANIFEST_LOADED,()=>{let h=st.get(e);h&&h.error&&(h.error=null,h.retryCount=0,e.dispatchEvent(new Event("emptied")),e.dispatchEvent(new Event("loadstart")))}),e.addEventListener("error",Oh),ut(e,"waiting",l),X9(i,t),J9(e,t),t.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function tE(i){var e;let t=i.target,s=(e=st.get(t))==null?void 0:e.startTime;if(s&&B9(t.seekable,t.duration,s)){let r=t.preload==="auto";r&&(t.preload="none"),t.currentTime=s,r&&(t.preload="auto")}}async function iE(i){if(!i.isTrusted)return;i.stopImmediatePropagation();let e=i.target;if(!(e!=null&&e.error))return;let{message:t,code:s}=e.error,r=new Z(t,s);if(e.src&&s===Z.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var n;let a=(n=j2(e))!=null?n:e.error;(a==null?void 0:a.code)===Z.MEDIA_ERR_SRC_NOT_SUPPORTED&&oi(e,r)},500);return}if(e.src&&(s!==Z.MEDIA_ERR_DECODE||s!==void 0))try{let{status:n}=await fetch(e.src);r.data={response:{code:n}}}catch{}oi(e,r)}function oi(i,e){var t;e.fatal&&(((t=st.get(i))!=null?t:{}).error=e,i.dispatchEvent(new CustomEvent("error",{detail:e})))}function Oh(i){var e,t;if(!(i instanceof CustomEvent)||!(i.detail instanceof Z))return;let s=i.target,r=i.detail;!r||!r.fatal||(((e=st.get(s))!=null?e:{}).error=r,(t=s.mux)==null||t.emit("error",{player_error_code:r.code,player_error_message:r.message,player_error_context:r.context}))}var H7=(i,e)=>{var t,s,r;console.error("getErrorFromHlsErrorData()",i);let n={[Ae.ErrorTypes.NETWORK_ERROR]:Z.MEDIA_ERR_NETWORK,[Ae.ErrorTypes.MEDIA_ERROR]:Z.MEDIA_ERR_DECODE,[Ae.ErrorTypes.KEY_SYSTEM_ERROR]:Z.MEDIA_ERR_ENCRYPTED},a=u=>[Ae.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Ae.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(u.details)?Z.MEDIA_ERR_NETWORK:n[u.type],o=u=>{if(u.type===Ae.ErrorTypes.KEY_SYSTEM_ERROR)return We.DRM;if(u.type===Ae.ErrorTypes.NETWORK_ERROR)return We.VIDEO},l,d=a(i);if(d===Z.MEDIA_ERR_NETWORK&&i.response){let u=(t=o(i))!=null?t:We.VIDEO;l=(s=hu(i.response,u,e,i.fatal))!=null?s:new Z("",d,i.fatal)}else if(d===Z.MEDIA_ERR_ENCRYPTED)if(i.details===Ae.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let u=ae("Attempting to play DRM-protected content without providing a DRM token.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_MISSING_TOKEN}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let u=ae("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_NO_SESSION){let u=ae("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,!0),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let u=ae("Failed to update DRM license. This may be an issue with the player or your protected content.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let u=ae("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let u=ae("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_CDM_ERROR}else if(i.details===Ae.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let u=ae("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");l=new Z(u,Z.MEDIA_ERR_ENCRYPTED,!1),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_OUTPUT_RESTRICTED}else l=new Z(i.error.message,Z.MEDIA_ERR_ENCRYPTED,i.fatal),l.errorCategory=We.DRM,l.muxCode=de.ENCRYPTED_ERROR;else l=new Z("",d,i.fatal);return l.context||(l.context=`${i.url?`url: ${i.url}
`:""}${i.response&&(i.response.code||i.response.text)?`response: ${i.response.code}, ${i.response.text}
`:""}${i.reason?`failure reason: ${i.reason}
`:""}${i.level?`level: ${i.level}
`:""}${i.parent?`parent stream controller: ${i.parent}
`:""}${i.buffer?`buffer length: ${i.buffer}
`:""}${i.error?`error: ${i.error}
`:""}${i.event?`event: ${i.event}
`:""}${i.err?`error message: ${(r=i.err)==null?void 0:r.message}
`:""}`),l.data=i,l};const V7=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],sE=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function G7(i){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${dE(i)}></audio>
    </slot>
    <slot></slot>
  `}function K7(i){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${dE(i)}></video>
    </slot>
    <slot></slot>
  `}function lE(i,{tag:e,is:t}){var n,a,o,l,d,rE,c,h,f,m,p,Sr,Nh,nE,Fh,aE,oE;const s=(a=(n=globalThis.document)==null?void 0:n.createElement)==null?void 0:a.call(n,e,{is:t}),r=s?W7(s):[];return o=class extends i{constructor(){super(...arguments);ge(this,p);ge(this,c,!1);ge(this,h,null);ge(this,f,new Map);ge(this,m);De(this,"get");De(this,"set");De(this,"call")}static get observedAttributes(){var L,S;return Ge(L=o,d,rE).call(L),[...((S=s==null?void 0:s.constructor)==null?void 0:S.observedAttributes)??[],...sE]}get nativeEl(){var C;return Ge(this,p,Sr).call(this),O(this,h)??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??((C=this.shadowRoot)==null?void 0:C.querySelector(e))??null}set nativeEl(C){pe(this,h,C)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(C){this.toggleAttribute("muted",C)}get src(){return this.getAttribute("src")}set src(C){this.setAttribute("src",`${C}`)}get preload(){var C;return this.getAttribute("preload")??((C=this.nativeEl)==null?void 0:C.preload)}set preload(C){this.setAttribute("preload",`${C}`)}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const C=q7(this.attributes);t&&(C.is=t),e&&(C.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(C)}this.nativeEl.muted=this.hasAttribute("muted");for(const C of r)Ge(this,p,aE).call(this,C);pe(this,m,new MutationObserver(Ge(this,p,nE).bind(this))),this.shadowRoot.addEventListener("slotchange",()=>Ge(this,p,Nh).call(this)),Ge(this,p,Nh).call(this);for(const C of this.constructor.Events)this.shadowRoot.addEventListener(C,this,!0)}handleEvent(C){C.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(C.type,{detail:C.detail}))}attributeChangedCallback(C,L,S){Ge(this,p,Sr).call(this),Ge(this,p,oE).call(this,C,L,S)}connectedCallback(){Ge(this,p,Sr).call(this)}},l=new WeakMap,d=new WeakSet,rE=function(){if(O(this,l))return;pe(this,l,!0);const C=new Set(this.observedAttributes);C.delete("muted");for(const L of r)if(!(L in this.prototype))if(typeof s[L]=="function")this.prototype[L]=function(...S){return Ge(this,p,Sr).call(this),(()=>{var G;if(this.call)return this.call(L,...S);const F=(G=this.nativeEl)==null?void 0:G[L];return F==null?void 0:F.apply(this.nativeEl,S)})()};else{const S={get(){var F,G;Ge(this,p,Sr).call(this);const w=L.toLowerCase();if(C.has(w)){const K=this.getAttribute(w);return K===null?!1:K===""?!0:K}return((F=this.get)==null?void 0:F.call(this,L))??((G=this.nativeEl)==null?void 0:G[L])}};L!==L.toUpperCase()&&(S.set=function(w){Ge(this,p,Sr).call(this);const F=L.toLowerCase();if(C.has(F)){w===!0||w===!1||w==null?this.toggleAttribute(F,!!w):this.setAttribute(F,w);return}if(this.set){this.set(L,w);return}this.nativeEl&&(this.nativeEl[L]=w)}),Object.defineProperty(this.prototype,L,S)}},c=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakSet,Sr=function(){O(this,c)||(pe(this,c,!0),this.init())},Nh=function(){var w;const C=new Map(O(this,f)),L=(w=this.shadowRoot)==null?void 0:w.querySelector("slot:not([name])");(L==null?void 0:L.assignedElements({flatten:!0}).filter(F=>["track","source"].includes(F.localName))).forEach(F=>{var K,V;C.delete(F);let G=O(this,f).get(F);G||(G=F.cloneNode(),O(this,f).set(F,G),(K=O(this,m))==null||K.observe(F,{attributes:!0})),(V=this.nativeEl)==null||V.append(G),Ge(this,p,Fh).call(this,G)}),C.forEach((F,G)=>{F.remove(),O(this,f).delete(G)})},nE=function(C){for(const L of C)if(L.type==="attributes"){const{target:S,attributeName:w}=L,F=O(this,f).get(S);F&&w&&(F.setAttribute(w,S.getAttribute(w)??""),Ge(this,p,Fh).call(this,F))}},Fh=function(C){C&&C.localName==="track"&&C.default&&(C.kind==="chapters"||C.kind==="metadata")&&C.track.mode==="disabled"&&(C.track.mode="hidden")},aE=function(C){if(Object.prototype.hasOwnProperty.call(this,C)){const L=this[C];delete this[C],this[C]=L}},oE=function(C,L,S){var w,F,G;["id","class"].includes(C)||!o.observedAttributes.includes(C)&&this.constructor.observedAttributes.includes(C)||(S===null?(w=this.nativeEl)==null||w.removeAttribute(C):((F=this.nativeEl)==null?void 0:F.getAttribute(C))!==S&&((G=this.nativeEl)==null||G.setAttribute(C,S)))},ge(o,d),De(o,"getTemplateHTML",e.endsWith("audio")?G7:K7),De(o,"shadowRootOptions",{mode:"open"}),De(o,"Events",V7),ge(o,l,!1),o}function W7(i){const e=[];for(let t=Object.getPrototypeOf(i);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t)){const s=Object.getOwnPropertyNames(t);e.push(...s)}return e}function dE(i){let e="";for(const t in i){if(!sE.includes(t))continue;const s=i[t];s===""?e+=` ${t}`:e+=` ${t}="${s}"`}return e}function q7(i){const e={};for(const t of i)e[t.name]=t.value;return e}const El=lE(globalThis.HTMLElement??class{},{tag:"video"});lE(globalThis.HTMLElement??class{},{tag:"audio"});var uE=i=>{throw TypeError(i)},O0=(i,e,t)=>e.has(i)||uE("Cannot "+t),Lt=(i,e,t)=>(O0(i,e,"read from private field"),t?t.call(i):e.get(i)),mi=(i,e,t)=>e.has(i)?uE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ri=(i,e,t,s)=>(O0(i,e,"write to private field"),e.set(i,t),t),Bc=(i,e,t)=>(O0(i,e,"access private method"),t),j7=()=>{try{return"0.26.1"}catch{}return"UNKNOWN"},Y7=j7(),Z7=()=>Y7,z7=`
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>`,N={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},Q7=Object.values(N),Lp=Z7(),Rp="mux-video",Mi,Va,jl,Ga,Yl,Zl,zl,Ql,Xl,Ka,Wa,Jl,X7=class extends El{constructor(){super(),mi(this,Wa),mi(this,Mi),mi(this,Va),mi(this,jl),mi(this,Ga,{}),mi(this,Yl,{}),mi(this,Zl),mi(this,zl),mi(this,Ql),mi(this,Xl),mi(this,Ka,""),ri(this,jl,w0()),this.nativeEl.addEventListener("muxmetadata",i=>{var e;let t=I7(this.nativeEl),s=(e=this.metadata)!=null?e:{};this.metadata={...t,...s},(t==null?void 0:t["com.mux.video.branding"])==="mux-free-plan"&&(ri(this,Ka,"default"),this.updateLogo())})}static get NAME(){return Rp}static get VERSION(){return Lp}static get observedAttributes(){var i;return[...Q7,...(i=El.observedAttributes)!=null?i:[]]}static getLogoHTML(i){return!i||i==="false"?"":i==="default"?z7:`<img part="logo" src="${i}" />`}static getTemplateHTML(i={}){var e;return`
      ${El.getTemplateHTML(i)}
      <style>
        :host {
          position: relative;
        }
        slot[name="logo"] {
          display: flex;
          justify-content: end;
          position: absolute;
          top: 1rem;
          right: 1rem;
          opacity: 0;
          transition: opacity 0.25s ease-in-out;
          z-index: 1;
        }
        slot[name="logo"]:has([part="logo"]) {
          opacity: 1;
        }
        slot[name="logo"] [part="logo"] {
          width: 5rem;
          pointer-events: none;
          user-select: none;
        }
      </style>
      <slot name="logo">
        ${this.getLogoHTML((e=i[N.LOGO])!=null?e:"")}
      </slot>
    `}get preferCmcd(){var i;return(i=this.getAttribute(N.PREFER_CMCD))!=null?i:void 0}set preferCmcd(i){i!==this.preferCmcd&&(i?cu.includes(i)?this.setAttribute(N.PREFER_CMCD,i):console.warn(`Invalid value for preferCmcd. Must be one of ${cu.join()}`):this.removeAttribute(N.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(N.PLAYER_INIT_TIME)?+this.getAttribute(N.PLAYER_INIT_TIME):Lt(this,jl)}set playerInitTime(i){i!=this.playerInitTime&&(i==null?this.removeAttribute(N.PLAYER_INIT_TIME):this.setAttribute(N.PLAYER_INIT_TIME,`${+i}`))}get playerSoftwareName(){var i;return(i=Lt(this,Ql))!=null?i:Rp}set playerSoftwareName(i){ri(this,Ql,i)}get playerSoftwareVersion(){var i;return(i=Lt(this,zl))!=null?i:Lp}set playerSoftwareVersion(i){ri(this,zl,i)}get _hls(){var i;return(i=Lt(this,Mi))==null?void 0:i.engine}get mux(){var i;return(i=this.nativeEl)==null?void 0:i.mux}get error(){var i;return(i=j2(this.nativeEl))!=null?i:null}get errorTranslator(){return Lt(this,Xl)}set errorTranslator(i){ri(this,Xl,i)}get src(){return this.getAttribute("src")}set src(i){i!==this.src&&(i==null?this.removeAttribute("src"):this.setAttribute("src",i))}get type(){var i;return(i=this.getAttribute(N.TYPE))!=null?i:void 0}set type(i){i!==this.type&&(i?this.setAttribute(N.TYPE,i):this.removeAttribute(N.TYPE))}get preload(){let i=this.getAttribute("preload");return i===""?"auto":["none","metadata","auto"].includes(i)?i:super.preload}set preload(i){i!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(i)?this.setAttribute("preload",i):this.removeAttribute("preload"))}get debug(){return this.getAttribute(N.DEBUG)!=null}set debug(i){i!==this.debug&&(i?this.setAttribute(N.DEBUG,""):this.removeAttribute(N.DEBUG))}get disableTracking(){return this.hasAttribute(N.DISABLE_TRACKING)}set disableTracking(i){i!==this.disableTracking&&this.toggleAttribute(N.DISABLE_TRACKING,!!i)}get disableCookies(){return this.hasAttribute(N.DISABLE_COOKIES)}set disableCookies(i){i!==this.disableCookies&&(i?this.setAttribute(N.DISABLE_COOKIES,""):this.removeAttribute(N.DISABLE_COOKIES))}get startTime(){let i=this.getAttribute(N.START_TIME);if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}set startTime(i){i!==this.startTime&&(i==null?this.removeAttribute(N.START_TIME):this.setAttribute(N.START_TIME,`${i}`))}get playbackId(){var i;return this.hasAttribute(N.PLAYBACK_ID)?this.getAttribute(N.PLAYBACK_ID):(i=D0(this.src))!=null?i:void 0}set playbackId(i){i!==this.playbackId&&(i?this.setAttribute(N.PLAYBACK_ID,i):this.removeAttribute(N.PLAYBACK_ID))}get maxResolution(){var i;return(i=this.getAttribute(N.MAX_RESOLUTION))!=null?i:void 0}set maxResolution(i){i!==this.maxResolution&&(i?this.setAttribute(N.MAX_RESOLUTION,i):this.removeAttribute(N.MAX_RESOLUTION))}get minResolution(){var i;return(i=this.getAttribute(N.MIN_RESOLUTION))!=null?i:void 0}set minResolution(i){i!==this.minResolution&&(i?this.setAttribute(N.MIN_RESOLUTION,i):this.removeAttribute(N.MIN_RESOLUTION))}get renditionOrder(){var i;return(i=this.getAttribute(N.RENDITION_ORDER))!=null?i:void 0}set renditionOrder(i){i!==this.renditionOrder&&(i?this.setAttribute(N.RENDITION_ORDER,i):this.removeAttribute(N.RENDITION_ORDER))}get programStartTime(){let i=this.getAttribute(N.PROGRAM_START_TIME);if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}set programStartTime(i){i==null?this.removeAttribute(N.PROGRAM_START_TIME):this.setAttribute(N.PROGRAM_START_TIME,`${i}`)}get programEndTime(){let i=this.getAttribute(N.PROGRAM_END_TIME);if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}set programEndTime(i){i==null?this.removeAttribute(N.PROGRAM_END_TIME):this.setAttribute(N.PROGRAM_END_TIME,`${i}`)}get assetStartTime(){let i=this.getAttribute(N.ASSET_START_TIME);if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}set assetStartTime(i){i==null?this.removeAttribute(N.ASSET_START_TIME):this.setAttribute(N.ASSET_START_TIME,`${i}`)}get assetEndTime(){let i=this.getAttribute(N.ASSET_END_TIME);if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}set assetEndTime(i){i==null?this.removeAttribute(N.ASSET_END_TIME):this.setAttribute(N.ASSET_END_TIME,`${i}`)}get customDomain(){var i;return(i=this.getAttribute(N.CUSTOM_DOMAIN))!=null?i:void 0}set customDomain(i){i!==this.customDomain&&(i?this.setAttribute(N.CUSTOM_DOMAIN,i):this.removeAttribute(N.CUSTOM_DOMAIN))}get drmToken(){var i;return(i=this.getAttribute(N.DRM_TOKEN))!=null?i:void 0}set drmToken(i){i!==this.drmToken&&(i?this.setAttribute(N.DRM_TOKEN,i):this.removeAttribute(N.DRM_TOKEN))}get playbackToken(){var i,e,t,s;if(this.hasAttribute(N.PLAYBACK_TOKEN))return(i=this.getAttribute(N.PLAYBACK_TOKEN))!=null?i:void 0;if(this.hasAttribute(N.PLAYBACK_ID)){let[,r]=x0((e=this.playbackId)!=null?e:"");return(t=new URLSearchParams(r).get("token"))!=null?t:void 0}if(this.src)return(s=new URLSearchParams(this.src).get("token"))!=null?s:void 0}set playbackToken(i){i!==this.playbackToken&&(i?this.setAttribute(N.PLAYBACK_TOKEN,i):this.removeAttribute(N.PLAYBACK_TOKEN))}get tokens(){let i=this.getAttribute(N.PLAYBACK_TOKEN),e=this.getAttribute(N.DRM_TOKEN);return{...Lt(this,Yl),...i!=null?{playback:i}:{},...e!=null?{drm:e}:{}}}set tokens(i){ri(this,Yl,i??{})}get ended(){return z2(this.nativeEl,this._hls)}get envKey(){var i;return(i=this.getAttribute(N.ENV_KEY))!=null?i:void 0}set envKey(i){i!==this.envKey&&(i?this.setAttribute(N.ENV_KEY,i):this.removeAttribute(N.ENV_KEY))}get beaconCollectionDomain(){var i;return(i=this.getAttribute(N.BEACON_COLLECTION_DOMAIN))!=null?i:void 0}set beaconCollectionDomain(i){i!==this.beaconCollectionDomain&&(i?this.setAttribute(N.BEACON_COLLECTION_DOMAIN,i):this.removeAttribute(N.BEACON_COLLECTION_DOMAIN))}get streamType(){var i;return(i=this.getAttribute(N.STREAM_TYPE))!=null?i:Ph(this.nativeEl)}set streamType(i){i!==this.streamType&&(i?this.setAttribute(N.STREAM_TYPE,i):this.removeAttribute(N.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(N.TARGET_LIVE_WINDOW)?+this.getAttribute(N.TARGET_LIVE_WINDOW):L7(this.nativeEl)}set targetLiveWindow(i){i!=this.targetLiveWindow&&(i==null?this.removeAttribute(N.TARGET_LIVE_WINDOW):this.setAttribute(N.TARGET_LIVE_WINDOW,`${+i}`))}get liveEdgeStart(){var i,e;if(this.hasAttribute(N.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:t}=this,s=(i=this.nativeEl.seekable.end(0))!=null?i:0,r=(e=this.nativeEl.seekable.start(0))!=null?e:0;return Math.max(r,s-t)}return R7(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(N.LIVE_EDGE_OFFSET))return+this.getAttribute(N.LIVE_EDGE_OFFSET)}set liveEdgeOffset(i){i!=this.liveEdgeOffset&&(i==null?this.removeAttribute(N.LIVE_EDGE_OFFSET):this.setAttribute(N.LIVE_EDGE_OFFSET,`${+i}`))}get seekable(){return M0(this.nativeEl)}async addCuePoints(i){return $2(this.nativeEl,i)}get activeCuePoint(){return B2(this.nativeEl)}get cuePoints(){return t7(this.nativeEl)}async addChapters(i){return V2(this.nativeEl,i)}get activeChapter(){return G2(this.nativeEl)}get chapters(){return s7(this.nativeEl)}getStartDate(){return n7(this.nativeEl,this._hls)}get currentPdt(){return a7(this.nativeEl,this._hls)}get preferPlayback(){let i=this.getAttribute(N.PREFER_PLAYBACK);if(i===Qi.MSE||i===Qi.NATIVE)return i}set preferPlayback(i){i!==this.preferPlayback&&(i===Qi.MSE||i===Qi.NATIVE?this.setAttribute(N.PREFER_PLAYBACK,i):this.removeAttribute(N.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(i=>i.startsWith("metadata-")&&![N.METADATA_URL].includes(i)).reduce((i,e)=>{let t=this.getAttribute(e);return t!=null&&(i[e.replace(/^metadata-/,"").replace(/-/g,"_")]=t),i},{}),...Lt(this,Ga)}}set metadata(i){ri(this,Ga,i??{}),this.mux&&this.mux.emit("hb",Lt(this,Ga))}get _hlsConfig(){return Lt(this,Zl)}set _hlsConfig(i){ri(this,Zl,i)}get logo(){var i;return(i=this.getAttribute(N.LOGO))!=null?i:Lt(this,Ka)}set logo(i){i?this.setAttribute(N.LOGO,i):this.removeAttribute(N.LOGO)}load(){ri(this,Mi,D7(this,this.nativeEl,Lt(this,Mi)))}unload(){Q2(this.nativeEl,Lt(this,Mi),this),ri(this,Mi,void 0)}attributeChangedCallback(i,e,t){var s,r;switch(El.observedAttributes.includes(i)&&!["src","autoplay","preload"].includes(i)&&super.attributeChangedCallback(i,e,t),i){case N.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=t??void 0;break;case N.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=t??void 0;break;case"src":{let n=!!e,a=!!t;!n&&a?Bc(this,Wa,Jl).call(this):n&&!a?this.unload():n&&a&&(this.unload(),Bc(this,Wa,Jl).call(this));break}case"autoplay":if(t===e)break;(s=Lt(this,Mi))==null||s.setAutoplay(this.autoplay);break;case"preload":if(t===e)break;(r=Lt(this,Mi))==null||r.setPreload(t);break;case N.PLAYBACK_ID:this.src=Mh(this);break;case N.DEBUG:{let n=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=n);break}case N.METADATA_URL:t&&fetch(t).then(n=>n.json()).then(n=>this.metadata=n).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${t}!`));break;case N.STREAM_TYPE:(t==null||t!==e)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case N.TARGET_LIVE_WINDOW:(t==null||t!==e)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break;case N.LOGO:(t==null||t!==e)&&this.updateLogo();break}}updateLogo(){if(!this.shadowRoot)return;let i=this.shadowRoot.querySelector('slot[name="logo"]');if(!i)return;let e=this.constructor.getLogoHTML(Lt(this,Ka)||this.logo);i.innerHTML=e}connectedCallback(){var i;(i=super.connectedCallback)==null||i.call(this),this.nativeEl&&this.src&&!Lt(this,Mi)&&Bc(this,Wa,Jl).call(this)}disconnectedCallback(){this.unload()}handleEvent(i){i.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(i.type,{composed:!0,detail:i.detail}))}};Mi=new WeakMap,Va=new WeakMap,jl=new WeakMap,Ga=new WeakMap,Yl=new WeakMap,Zl=new WeakMap,zl=new WeakMap,Ql=new WeakMap,Xl=new WeakMap,Ka=new WeakMap,Wa=new WeakSet,Jl=async function(){Lt(this,Va)||(await ri(this,Va,Promise.resolve()),ri(this,Va,null),this.load())};const Yr=new WeakMap;class Hc extends Error{}class J7 extends Error{}const eA=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],tA=globalThis.WeakRef?class extends Set{add(i){super.add(new WeakRef(i))}forEach(i){super.forEach(e=>{const t=e.deref();t&&i(t)})}}:Set;function iA(i){var e,t,s;(t=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&t.isAvailable?(s=globalThis.cast)!=null&&s.framework?i():customElements.whenDefined("google-cast-button").then(i):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(i)}}function sA(){return globalThis.chrome}function rA(){var t;const i="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((t=globalThis.chrome)!=null&&t.cast||document.querySelector(`script[src="${i}"]`))return;const e=document.createElement("script");e.src=i,document.head.append(e)}function lr(){var i,e;return(e=(i=globalThis.cast)==null?void 0:i.framework)==null?void 0:e.CastContext.getInstance()}function N0(){var i;return(i=lr())==null?void 0:i.getCurrentSession()}function F0(){var i;return(i=N0())==null?void 0:i.getSessionObj().media[0]}function nA(i){return new Promise((e,t)=>{F0().editTracksInfo(i,e,t)})}function aA(i){return new Promise((e,t)=>{F0().getStatus(i,e,t)})}function kp(i){return lr().setOptions({...cE(),...i})}function cE(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}function oA(i){if(!i)return;const e=/\.([a-zA-Z0-9]+)(?:\?.*)?$/,t=i.match(e);return t?t[1]:null}function lA(i){const e=i.split(`
`),t=[];for(let s=0;s<e.length;s++)if(e[s].trim().startsWith("#EXT-X-STREAM-INF")){const n=e[s+1]?e[s+1].trim():"";n&&!n.startsWith("#")&&t.push(n)}return t}function dA(i){return i.split(`
`).find(s=>!s.trim().startsWith("#")&&s.trim()!=="")}async function uA(i){try{const t=(await fetch(i,{method:"HEAD"})).headers.get("Content-Type");return eA.some(s=>t===s)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function cA(i){try{const e=await(await fetch(i)).text();let t=e;const s=lA(e);if(s.length>0){const a=new URL(s[0],i).toString();t=await(await fetch(a)).text()}const r=dA(t);return oA(r)}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}const ed=new tA,ks=new WeakSet;let vt;iA(()=>{var i,e,t,s;if(!((e=(i=globalThis.chrome)==null?void 0:i.cast)!=null&&e.isAvailable)){console.debug("chrome.cast.isAvailable",(s=(t=globalThis.chrome)==null?void 0:t.cast)==null?void 0:s.isAvailable);return}vt||(vt=cast.framework,lr().addEventListener(vt.CastContextEventType.CAST_STATE_CHANGED,r=>{ed.forEach(n=>{var a,o;return(o=(a=Yr.get(n)).onCastStateChanged)==null?void 0:o.call(a,r)})}),lr().addEventListener(vt.CastContextEventType.SESSION_STATE_CHANGED,r=>{ed.forEach(n=>{var a,o;return(o=(a=Yr.get(n)).onSessionStateChanged)==null?void 0:o.call(a,r)})}),ed.forEach(r=>{var n,a;return(a=(n=Yr.get(r)).init)==null?void 0:a.call(n)}))});let wp=0;var Me,jo,qt,vs,Kr,Wr,Zs,Mu,qe,Cr,hE,fE,Uh,mE,$h,pE,Bh;class hA extends EventTarget{constructor(t){super();ge(this,qe);ge(this,Me);ge(this,jo);ge(this,qt);ge(this,vs);ge(this,Kr,"disconnected");ge(this,Wr,!1);ge(this,Zs,new Set);ge(this,Mu,new WeakMap);pe(this,Me,t),ed.add(this),Yr.set(this,{init:()=>Ge(this,qe,$h).call(this),onCastStateChanged:()=>Ge(this,qe,Uh).call(this),onSessionStateChanged:()=>Ge(this,qe,mE).call(this),getCastPlayer:()=>O(this,qe,Cr)}),Ge(this,qe,$h).call(this)}get state(){return O(this,Kr)}async watchAvailability(t){if(O(this,Me).disableRemotePlayback)throw new Hc("disableRemotePlayback attribute is present.");return O(this,Mu).set(t,++wp),O(this,Zs).add(t),queueMicrotask(()=>t(Ge(this,qe,fE).call(this))),wp}async cancelWatchAvailability(t){if(O(this,Me).disableRemotePlayback)throw new Hc("disableRemotePlayback attribute is present.");t?O(this,Zs).delete(t):O(this,Zs).clear()}async prompt(){var s,r,n,a;if(O(this,Me).disableRemotePlayback)throw new Hc("disableRemotePlayback attribute is present.");if(!((r=(s=globalThis.chrome)==null?void 0:s.cast)!=null&&r.isAvailable))throw new J7("The RemotePlayback API is disabled on this platform.");const t=ks.has(O(this,Me));ks.add(O(this,Me)),kp(O(this,Me).castOptions),Object.entries(O(this,vs)).forEach(([o,l])=>{O(this,qt).controller.addEventListener(o,l)});try{await lr().requestSession()}catch(o){if(t||ks.delete(O(this,Me)),o==="cancel")return;throw new Error(o)}(a=(n=Yr.get(O(this,Me)))==null?void 0:n.loadOnPrompt)==null||a.call(n)}}Me=new WeakMap,jo=new WeakMap,qt=new WeakMap,vs=new WeakMap,Kr=new WeakMap,Wr=new WeakMap,Zs=new WeakMap,Mu=new WeakMap,qe=new WeakSet,Cr=function(){if(ks.has(O(this,Me)))return O(this,qt)},hE=function(){ks.has(O(this,Me))&&(Object.entries(O(this,vs)).forEach(([t,s])=>{O(this,qt).controller.removeEventListener(t,s)}),ks.delete(O(this,Me)),O(this,Me).muted=O(this,qt).isMuted,O(this,Me).currentTime=O(this,qt).savedPlayerState.currentTime,O(this,qt).savedPlayerState.isPaused===!1&&O(this,Me).play())},fE=function(){var s;const t=(s=lr())==null?void 0:s.getCastState();return t&&t!=="NO_DEVICES_AVAILABLE"},Uh=function(){const t=lr().getCastState();if(ks.has(O(this,Me))&&t==="CONNECTING"&&(pe(this,Kr,"connecting"),this.dispatchEvent(new Event("connecting"))),!O(this,Wr)&&(t!=null&&t.includes("CONNECT"))){pe(this,Wr,!0);for(let s of O(this,Zs))s(!0)}else if(O(this,Wr)&&(!t||t==="NO_DEVICES_AVAILABLE")){pe(this,Wr,!1);for(let s of O(this,Zs))s(!1)}},mE=async function(){var s;const{SESSION_RESUMED:t}=vt.SessionState;if(lr().getSessionState()===t&&O(this,Me).castSrc===((s=F0())==null?void 0:s.media.contentId)){ks.add(O(this,Me)),Object.entries(O(this,vs)).forEach(([r,n])=>{O(this,qt).controller.addEventListener(r,n)});try{await aA(new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}O(this,vs)[vt.RemotePlayerEventType.IS_PAUSED_CHANGED](),O(this,vs)[vt.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},$h=function(){!vt||O(this,jo)||(pe(this,jo,!0),kp(O(this,Me).castOptions),O(this,Me).textTracks.addEventListener("change",()=>Ge(this,qe,Bh).call(this)),Ge(this,qe,Uh).call(this),pe(this,qt,new vt.RemotePlayer),new vt.RemotePlayerController(O(this,qt)),pe(this,vs,{[vt.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:t})=>{t===!0?(pe(this,Kr,"connected"),this.dispatchEvent(new Event("connect"))):(Ge(this,qe,hE).call(this),pe(this,Kr,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[vt.RemotePlayerEventType.DURATION_CHANGED]:()=>{O(this,Me).dispatchEvent(new Event("durationchange"))},[vt.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{O(this,Me).dispatchEvent(new Event("volumechange"))},[vt.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{O(this,Me).dispatchEvent(new Event("volumechange"))},[vt.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var t;(t=O(this,qe,Cr))!=null&&t.isMediaLoaded&&O(this,Me).dispatchEvent(new Event("timeupdate"))},[vt.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{O(this,Me).dispatchEvent(new Event("resize"))},[vt.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{O(this,Me).dispatchEvent(new Event(this.paused?"pause":"play"))},[vt.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var t,s;((t=O(this,qe,Cr))==null?void 0:t.playerState)!==chrome.cast.media.PlayerState.PAUSED&&O(this,Me).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(s=O(this,qe,Cr))==null?void 0:s.playerState]))},[vt.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var t;(t=O(this,qe,Cr))!=null&&t.isMediaLoaded&&(await Promise.resolve(),Ge(this,qe,pE).call(this))}}))},pE=function(){Ge(this,qe,Bh).call(this)},Bh=async function(){var h,f,m;if(!O(this,qe,Cr))return;const s=(((h=O(this,qt).mediaInfo)==null?void 0:h.tracks)??[]).filter(({type:p})=>p===chrome.cast.media.TrackType.TEXT),r=[...O(this,Me).textTracks].filter(({kind:p})=>p==="subtitles"||p==="captions"),n=s.map(({language:p,name:g,trackId:v})=>{const{mode:b}=r.find(E=>E.language===p&&E.label===g)??{};return b?{mode:b,trackId:v}:!1}).filter(Boolean),o=n.filter(({mode:p})=>p!=="showing").map(({trackId:p})=>p),l=n.find(({mode:p})=>p==="showing"),d=((m=(f=N0())==null?void 0:f.getSessionObj().media[0])==null?void 0:m.activeTrackIds)??[];let u=d;if(d.length&&(u=u.filter(p=>!o.includes(p))),l!=null&&l.trackId&&(u=[...u,l.trackId]),u=[...new Set(u)],!((p,g)=>p.length===g.length&&p.every(v=>g.includes(v)))(d,u))try{const p=new chrome.cast.media.EditTracksInfoRequest(u);await nA(p)}catch(p){console.error(p)}};const fA=i=>{var e,t,s,r,n,a,Le,gE;return e=class extends i{constructor(){super(...arguments);ge(this,a);ge(this,t,{paused:!1});ge(this,s,cE());ge(this,r);ge(this,n)}get remote(){return O(this,n)?O(this,n):sA()?(this.disableRemotePlayback||rA(),Yr.set(this,{loadOnPrompt:()=>Ge(this,a,gE).call(this)}),pe(this,n,new hA(this))):super.remote}attributeChangedCallback(c,h,f){if(super.attributeChangedCallback(c,h,f),c==="cast-receiver"&&f){O(this,s).receiverApplicationId=f;return}if(O(this,a,Le))switch(c){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var g;if(!O(this,a,Le))return super.load();const c=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);c.customData=this.castCustomData;const h=[...this.querySelectorAll("track")].filter(({kind:v,src:b})=>b&&(v==="subtitles"||v==="captions")),f=[];let m=0;if(h.length&&(c.tracks=h.map(v=>{const b=++m;f.length===0&&v.track.mode==="showing"&&f.push(b);const E=new chrome.cast.media.Track(b,chrome.cast.media.TrackType.TEXT);return E.trackContentId=v.src,E.trackContentType="text/vtt",E.subtype=v.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,E.name=v.label,E.language=v.srclang,E})),this.castStreamType==="live"?c.streamType=chrome.cast.media.StreamType.LIVE:c.streamType=chrome.cast.media.StreamType.BUFFERED,c.metadata=new chrome.cast.media.GenericMediaMetadata,c.metadata.title=this.title,c.metadata.images=[{url:this.poster}],uA(this.castSrc)){const v=await cA(this.castSrc);((v==null?void 0:v.includes("m4s"))||(v==null?void 0:v.includes("mp4")))&&(c.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,c.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4)}const p=new chrome.cast.media.LoadRequest(c);p.currentTime=super.currentTime??0,p.autoplay=!O(this,t).paused,p.activeTrackIds=f,await((g=N0())==null?void 0:g.loadMedia(p)),this.dispatchEvent(new Event("volumechange"))}play(){var c;if(O(this,a,Le)){O(this,a,Le).isPaused&&((c=O(this,a,Le).controller)==null||c.playOrPause());return}return super.play()}pause(){var c;if(O(this,a,Le)){O(this,a,Le).isPaused||(c=O(this,a,Le).controller)==null||c.playOrPause();return}super.pause()}get castOptions(){return O(this,s)}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(c){this.castReceiver!=c&&this.setAttribute("cast-receiver",`${c}`)}get castSrc(){var c;return this.getAttribute("cast-src")??((c=this.querySelector("source"))==null?void 0:c.src)??this.currentSrc}set castSrc(c){this.castSrc!=c&&this.setAttribute("cast-src",`${c}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(c){this.setAttribute("cast-content-type",`${c}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(c){this.setAttribute("cast-stream-type",`${c}`)}get castCustomData(){return O(this,r)}set castCustomData(c){const h=typeof c;if(!["object","undefined"].includes(h)){console.error(`castCustomData must be nullish or an object but value was of type ${h}`);return}pe(this,r,c)}get readyState(){if(O(this,a,Le))switch(O(this,a,Le).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return O(this,a,Le)?O(this,a,Le).isPaused:super.paused}get muted(){var c;return O(this,a,Le)?(c=O(this,a,Le))==null?void 0:c.isMuted:super.muted}set muted(c){var h;if(O(this,a,Le)){(c&&!O(this,a,Le).isMuted||!c&&O(this,a,Le).isMuted)&&((h=O(this,a,Le).controller)==null||h.muteOrUnmute());return}super.muted=c}get volume(){var c;return O(this,a,Le)?((c=O(this,a,Le))==null?void 0:c.volumeLevel)??1:super.volume}set volume(c){var h;if(O(this,a,Le)){O(this,a,Le).volumeLevel=+c,(h=O(this,a,Le).controller)==null||h.setVolumeLevel();return}super.volume=c}get duration(){var c,h;return O(this,a,Le)&&((c=O(this,a,Le))!=null&&c.isMediaLoaded)?((h=O(this,a,Le))==null?void 0:h.duration)??NaN:super.duration}get currentTime(){var c,h;return O(this,a,Le)&&((c=O(this,a,Le))!=null&&c.isMediaLoaded)?((h=O(this,a,Le))==null?void 0:h.currentTime)??0:super.currentTime}set currentTime(c){var h;if(O(this,a,Le)){O(this,a,Le).currentTime=c,(h=O(this,a,Le).controller)==null||h.seek();return}super.currentTime=c}},t=new WeakMap,s=new WeakMap,r=new WeakMap,n=new WeakMap,a=new WeakSet,Le=function(){var c,h;return(h=(c=Yr.get(this.remote))==null?void 0:c.getCastPlayer)==null?void 0:h.call(c)},gE=async function(){O(this,t).paused=el(e.prototype,this,"paused"),el(e.prototype,this,"pause").call(this),this.muted=el(e.prototype,this,"muted");try{await this.load()}catch(c){console.error(c)}},De(e,"observedAttributes",[...i.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),e};class Wu extends Event{constructor(t,s){super(t);De(this,"track");this.track=s.track}}const Hh=new WeakMap;function J(i){return Hh.get(i)??mA(i,{})}function mA(i,e){let t=Hh.get(i);return t||Hh.set(i,t={}),Object.assign(t,e)}function Vh(i,e){const t=i.videoTracks;J(e).media=i,J(e).renditionSet||(J(e).renditionSet=new Set);const s=J(t).trackSet;s.add(e);const r=s.size-1;r in Kh.prototype||Object.defineProperty(Kh.prototype,r,{get(){return[...J(this).trackSet][r]}}),queueMicrotask(()=>{t.dispatchEvent(new Wu("addtrack",{track:e}))})}function Gh(i){var s;const e=(s=J(i).media)==null?void 0:s.videoTracks;if(!e)return;J(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new Wu("removetrack",{track:i}))})}function pA(i){const e=J(i).media.videoTracks??[];let t=!1;for(const s of e)s!==i&&(s.selected=!1,t=!0);if(t){if(J(e).changeRequested)return;J(e).changeRequested=!0,queueMicrotask(()=>{delete J(e).changeRequested,e.dispatchEvent(new Event("change"))})}}var zs,Qs,Xs,qr,qa;class Kh extends EventTarget{constructor(){super();ge(this,qr);ge(this,zs);ge(this,Qs);ge(this,Xs);J(this).trackSet=new Set}[Symbol.iterator](){return O(this,qr,qa).values()}get length(){return O(this,qr,qa).size}getTrackById(t){return[...O(this,qr,qa)].find(s=>s.id===t)??null}get selectedIndex(){return[...O(this,qr,qa)].findIndex(t=>t.selected)}get onaddtrack(){return O(this,zs)}set onaddtrack(t){O(this,zs)&&(this.removeEventListener("addtrack",O(this,zs)),pe(this,zs,void 0)),typeof t=="function"&&(pe(this,zs,t),this.addEventListener("addtrack",t))}get onremovetrack(){return O(this,Qs)}set onremovetrack(t){O(this,Qs)&&(this.removeEventListener("removetrack",O(this,Qs)),pe(this,Qs,void 0)),typeof t=="function"&&(pe(this,Qs,t),this.addEventListener("removetrack",t))}get onchange(){return O(this,Xs)}set onchange(t){O(this,Xs)&&(this.removeEventListener("change",O(this,Xs)),pe(this,Xs,void 0)),typeof t=="function"&&(pe(this,Xs,t),this.addEventListener("change",t))}}zs=new WeakMap,Qs=new WeakMap,Xs=new WeakMap,qr=new WeakSet,qa=function(){return J(this).trackSet};class qu extends Event{constructor(t,s){super(t);De(this,"rendition");this.rendition=s.rendition}}function gA(i,e){const t=J(i).media.videoRenditions;J(e).media=J(i).media,J(e).track=i;const s=J(i).renditionSet;s.add(e);const r=s.size-1;r in Wh.prototype||Object.defineProperty(Wh.prototype,r,{get(){return Tn(this)[r]}}),queueMicrotask(()=>{i.selected&&t.dispatchEvent(new qu("addrendition",{rendition:e}))})}function vA(i){const e=J(i).media.videoRenditions,t=J(i).track;J(t).renditionSet.delete(i),queueMicrotask(()=>{J(i).track.selected&&e.dispatchEvent(new qu("removerendition",{rendition:i}))})}function EA(i){const e=J(i).media.videoRenditions;!e||J(e).changeRequested||(J(e).changeRequested=!0,queueMicrotask(()=>{delete J(e).changeRequested,J(i).track.selected&&e.dispatchEvent(new Event("change"))}))}function Tn(i){return[...J(i).media.videoTracks].filter(t=>t.selected).flatMap(t=>[...J(t).renditionSet])}var Js,er,tr;class Wh extends EventTarget{constructor(){super(...arguments);ge(this,Js);ge(this,er);ge(this,tr)}[Symbol.iterator](){return Tn(this).values()}get length(){return Tn(this).length}getRenditionById(t){return Tn(this).find(s=>`${s.id}`==`${t}`)??null}get selectedIndex(){return Tn(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[s,r]of Tn(this).entries())r.selected=s===t}get onaddrendition(){return O(this,Js)}set onaddrendition(t){O(this,Js)&&(this.removeEventListener("addrendition",O(this,Js)),pe(this,Js,void 0)),typeof t=="function"&&(pe(this,Js,t),this.addEventListener("addrendition",t))}get onremoverendition(){return O(this,er)}set onremoverendition(t){O(this,er)&&(this.removeEventListener("removerendition",O(this,er)),pe(this,er,void 0)),typeof t=="function"&&(pe(this,er,t),this.addEventListener("removerendition",t))}get onchange(){return O(this,tr)}set onchange(t){O(this,tr)&&(this.removeEventListener("change",O(this,tr)),pe(this,tr,void 0)),typeof t=="function"&&(pe(this,tr,t),this.addEventListener("change",t))}}Js=new WeakMap,er=new WeakMap,tr=new WeakMap;var ra;class yA{constructor(){De(this,"src");De(this,"id");De(this,"width");De(this,"height");De(this,"bitrate");De(this,"frameRate");De(this,"codec");ge(this,ra,!1)}get selected(){return O(this,ra)}set selected(e){O(this,ra)!==e&&(pe(this,ra,e),EA(this))}}ra=new WeakMap;var na;class vE{constructor(){De(this,"id");De(this,"kind");De(this,"label","");De(this,"language","");De(this,"sourceBuffer");ge(this,na,!1)}addRendition(e,t,s,r,n,a){const o=new yA;return o.src=e,o.width=t,o.height=s,o.frameRate=a,o.bitrate=n,o.codec=r,gA(this,o),o}removeRendition(e){vA(e)}get selected(){return O(this,na)}set selected(e){O(this,na)!==e&&(pe(this,na,e),e===!0&&pA(this))}}na=new WeakMap;function bA(i,e){const t=J(i).media.audioRenditions;J(e).media=J(i).media,J(e).track=i;const s=J(i).renditionSet;s.add(e);const r=s.size-1;r in qh.prototype||Object.defineProperty(qh.prototype,r,{get(){return _n(this)[r]}}),queueMicrotask(()=>{i.enabled&&t.dispatchEvent(new qu("addrendition",{rendition:e}))})}function TA(i){const e=J(i).media.audioRenditions,t=J(i).track;J(t).renditionSet.delete(i),queueMicrotask(()=>{J(i).track.enabled&&e.dispatchEvent(new qu("removerendition",{rendition:i}))})}function _A(i){const e=J(i).media.audioRenditions;!e||J(e).changeRequested||(J(e).changeRequested=!0,queueMicrotask(()=>{delete J(e).changeRequested,J(i).track.enabled&&e.dispatchEvent(new Event("change"))}))}function _n(i){return[...J(i).media.audioTracks].filter(t=>t.enabled).flatMap(t=>[...J(t).renditionSet])}var ir,sr,rr;class qh extends EventTarget{constructor(){super(...arguments);ge(this,ir);ge(this,sr);ge(this,rr)}[Symbol.iterator](){return _n(this).values()}get length(){return _n(this).length}getRenditionById(t){return _n(this).find(s=>`${s.id}`==`${t}`)??null}get selectedIndex(){return _n(this).findIndex(t=>t.selected)}set selectedIndex(t){for(const[s,r]of _n(this).entries())r.selected=s===t}get onaddrendition(){return O(this,ir)}set onaddrendition(t){O(this,ir)&&(this.removeEventListener("addrendition",O(this,ir)),pe(this,ir,void 0)),typeof t=="function"&&(pe(this,ir,t),this.addEventListener("addrendition",t))}get onremoverendition(){return O(this,sr)}set onremoverendition(t){O(this,sr)&&(this.removeEventListener("removerendition",O(this,sr)),pe(this,sr,void 0)),typeof t=="function"&&(pe(this,sr,t),this.addEventListener("removerendition",t))}get onchange(){return O(this,rr)}set onchange(t){O(this,rr)&&(this.removeEventListener("change",O(this,rr)),pe(this,rr,void 0)),typeof t=="function"&&(pe(this,rr,t),this.addEventListener("change",t))}}ir=new WeakMap,sr=new WeakMap,rr=new WeakMap;var aa;class AA{constructor(){De(this,"src");De(this,"id");De(this,"bitrate");De(this,"codec");ge(this,aa,!1)}get selected(){return O(this,aa)}set selected(e){O(this,aa)!==e&&(pe(this,aa,e),_A(this))}}aa=new WeakMap;function jh(i,e){const t=i.audioTracks;J(e).media=i,J(e).renditionSet||(J(e).renditionSet=new Set);const s=J(t).trackSet;s.add(e);const r=s.size-1;r in Zh.prototype||Object.defineProperty(Zh.prototype,r,{get(){return[...J(this).trackSet][r]}}),queueMicrotask(()=>{t.dispatchEvent(new Wu("addtrack",{track:e}))})}function Yh(i){var s;const e=(s=J(i).media)==null?void 0:s.audioTracks;if(!e)return;J(e).trackSet.delete(i),queueMicrotask(()=>{e.dispatchEvent(new Wu("removetrack",{track:i}))})}function SA(i){const e=J(i).media.audioTracks;!e||J(e).changeRequested||(J(e).changeRequested=!0,queueMicrotask(()=>{delete J(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var nr,ar,or,oa,td;class Zh extends EventTarget{constructor(){super();ge(this,oa);ge(this,nr);ge(this,ar);ge(this,or);J(this).trackSet=new Set}[Symbol.iterator](){return O(this,oa,td).values()}get length(){return O(this,oa,td).size}getTrackById(t){return[...O(this,oa,td)].find(s=>s.id===t)??null}get onaddtrack(){return O(this,nr)}set onaddtrack(t){O(this,nr)&&(this.removeEventListener("addtrack",O(this,nr)),pe(this,nr,void 0)),typeof t=="function"&&(pe(this,nr,t),this.addEventListener("addtrack",t))}get onremovetrack(){return O(this,ar)}set onremovetrack(t){O(this,ar)&&(this.removeEventListener("removetrack",O(this,ar)),pe(this,ar,void 0)),typeof t=="function"&&(pe(this,ar,t),this.addEventListener("removetrack",t))}get onchange(){return O(this,or)}set onchange(t){O(this,or)&&(this.removeEventListener("change",O(this,or)),pe(this,or,void 0)),typeof t=="function"&&(pe(this,or,t),this.addEventListener("change",t))}}nr=new WeakMap,ar=new WeakMap,or=new WeakMap,oa=new WeakSet,td=function(){return J(this).trackSet};var la;class EE{constructor(){De(this,"id");De(this,"kind");De(this,"label","");De(this,"language","");De(this,"sourceBuffer");ge(this,la,!1)}addRendition(e,t,s){const r=new AA;return r.src=e,r.codec=t,r.bitrate=s,bA(this,r),r}removeRendition(e){TA(e)}get enabled(){return O(this,la)}set enabled(e){O(this,la)!==e&&(pe(this,la,e),SA(this))}}la=new WeakMap;const Dp=fu(globalThis.HTMLMediaElement,"video"),Mp=fu(globalThis.HTMLMediaElement,"audio");function CA(i){if(!(i!=null&&i.prototype))return i;const e=fu(i,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(i.prototype,"videoTracks",{get(){return xA(this)}});const t=fu(i,"audio");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(i.prototype,"audioTracks",{get(){return IA(this)}}),"addVideoTrack"in i.prototype||(i.prototype.addVideoTrack=function(n,a="",o=""){const l=new vE;return l.kind=n,l.label=a,l.language=o,Vh(this,l),l}),"removeVideoTrack"in i.prototype||(i.prototype.removeVideoTrack=Gh),"addAudioTrack"in i.prototype||(i.prototype.addAudioTrack=function(n,a="",o=""){const l=new EE;return l.kind=n,l.label=a,l.language=o,jh(this,l),l}),"removeAudioTrack"in i.prototype||(i.prototype.removeAudioTrack=Yh),"videoRenditions"in i.prototype||Object.defineProperty(i.prototype,"videoRenditions",{get(){return s(this)}});const s=n=>{let a=J(n).videoRenditions;return a||(a=new Wh,J(a).media=n,J(n).videoRenditions=a),a};"audioRenditions"in i.prototype||Object.defineProperty(i.prototype,"audioRenditions",{get(){return r(this)}});const r=n=>{let a=J(n).audioRenditions;return a||(a=new qh,J(a).media=n,J(n).audioRenditions=a),a};return i}function fu(i,e){var t;if(i!=null&&i.prototype)return(t=Object.getOwnPropertyDescriptor(i.prototype,`${e}Tracks`))==null?void 0:t.get}function xA(i){let e=J(i).videoTracks;if(!e&&(e=new Kh,J(i).videoTracks=e,Dp)){const t=Dp.call(i.nativeEl??i);for(const s of t)Vh(i,s);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",s=>{if([...e].some(r=>r instanceof vE)){for(const r of t)Gh(r);return}Vh(i,s.track)}),t.addEventListener("removetrack",s=>{Gh(s.track)})}return e}function IA(i){let e=J(i).audioTracks;if(!e&&(e=new Zh,J(i).audioTracks=e,Mp)){const t=Mp.call(i.nativeEl??i);for(const s of t)jh(i,s);t.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),t.addEventListener("addtrack",s=>{if([...e].some(r=>r instanceof EE)){for(const r of t)Yh(r);return}jh(i,s.track)}),t.addEventListener("removetrack",s=>{Yh(s.track)})}return e}var yE=i=>{throw TypeError(i)},bE=(i,e,t)=>e.has(i)||yE("Cannot "+t),LA=(i,e,t)=>(bE(i,e,"read from private field"),t?t.call(i):e.get(i)),RA=(i,e,t)=>e.has(i)?yE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),kA=(i,e,t,s)=>(bE(i,e,"write to private field"),e.set(i,t),t),TE=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class i extends TE{}globalThis.DocumentFragment=i}var wA=class extends TE{},DA={get(i){},define(i,e,t){},getName(i){return null},upgrade(i){},whenDefined(i){return Promise.resolve(wA)}},MA={customElements:DA},PA=typeof window>"u"||typeof globalThis.customElements>"u",Vc=PA?MA:globalThis,id,Pp=class extends fA(CA(X7)){constructor(){super(...arguments),RA(this,id)}get autoplay(){let i=this.getAttribute("autoplay");return i===null?!1:i===""?!0:i}set autoplay(i){let e=this.autoplay;i!==e&&(i?this.setAttribute("autoplay",typeof i=="string"?i:""):this.removeAttribute("autoplay"))}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var i;return(i=LA(this,id))!=null?i:this.muxCastCustomData}set castCustomData(i){kA(this,id,i)}};id=new WeakMap;Vc.customElements.get("mux-video")||(Vc.customElements.define("mux-video",Pp),Vc.MuxVideoElement=Pp);const ee={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},we={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},_E={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_WIDTH:"mediaWidth"},AE=Object.entries(_E),_=AE.reduce((i,[e,t])=>(i[e]=t.toLowerCase(),i),{}),OA={USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},As=AE.reduce((i,[e,t])=>(i[e]=t.toLowerCase(),i),{...OA});Object.entries(As).reduce((i,[e,t])=>{const s=_[e];return s&&(i[t]=s),i},{userinactivechange:"userinactive"});const NA=Object.entries(_).reduce((i,[e,t])=>{const s=As[e];return s&&(i[t]=s),i},{userinactive:"userinactivechange"}),es={SUBTITLES:"subtitles",CAPTIONS:"captions",CHAPTERS:"chapters",METADATA:"metadata"},Qn={DISABLED:"disabled",SHOWING:"showing"},Op={MOUSE:"mouse",TOUCH:"touch"},ii={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},ms={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},FA={FULLSCREEN:"fullscreen"};function UA(i){return i==null?void 0:i.map(BA).join(" ")}function $A(i){return i==null?void 0:i.split(/\s+/).map(HA)}function BA(i){if(i){const{id:e,width:t,height:s}=i;return[e,t,s].filter(r=>r!=null).join(":")}}function HA(i){if(i){const[e,t,s]=i.split(":");return{id:e,width:+t,height:+s}}}function VA(i){return i==null?void 0:i.map(KA).join(" ")}function GA(i){return i==null?void 0:i.split(/\s+/).map(WA)}function KA(i){if(i){const{id:e,kind:t,language:s,label:r}=i;return[e,t,s,r].filter(n=>n!=null).join(":")}}function WA(i){if(i){const[e,t,s,r]=i.split(":");return{id:e,kind:t,language:s,label:r}}}function qA(i){return i.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function U0(i){return typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i)}function SE(i){return typeof i!="string"?!1:!isNaN(i)&&!isNaN(parseFloat(i))}const CE=i=>new Promise(e=>setTimeout(e,i)),Np=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],jA=(i,e)=>{const t=i===1?Np[e].singular:Np[e].plural;return`${i} ${t}`},po=i=>{if(!U0(i))return"";const e=Math.abs(i),t=e!==i,s=new Date(0,0,0,0,0,e,0);return`${[s.getHours(),s.getMinutes(),s.getSeconds()].map((o,l)=>o&&jA(o,l)).filter(o=>o).join(", ")}${t?" remaining":""}`};function ur(i,e){let t=!1;i<0&&(t=!0,i=0-i),i=i<0?0:i;let s=Math.floor(i%60),r=Math.floor(i/60%60),n=Math.floor(i/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(i)||i===1/0)&&(n=r=s="0"),n=n>0||o>0?n+":":"",r=((n||a>=10)&&r<10?"0"+r:r)+":",s=s<10?"0"+s:s,(t?"-":"")+n+r+s}const YA={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings",Auto:"Auto","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute",live:"live",Off:"Off","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var Fp;const Gc={en:YA};let zh=((Fp=globalThis.navigator)==null?void 0:Fp.language)||"en";const ZA=i=>{zh=i},zA=i=>{var e,t,s;const[r]=zh.split("-");return((e=Gc[zh])==null?void 0:e[i])||((t=Gc[r])==null?void 0:t[i])||((s=Gc.en)==null?void 0:s[i])||i},ie=(i,e={})=>zA(i).replace(/\{(\w+)\}/g,(t,s)=>s in e?String(e[s]):`{${s}}`);let xE=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}};class IE extends xE{}let Up=class extends IE{constructor(){super(...arguments),this.role=null}};class QA{observe(){}unobserve(){}disconnect(){}}const LE={createElement:function(){return new Mo.HTMLElement},createElementNS:function(){return new Mo.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(i){return!1}},Mo={ResizeObserver:QA,document:LE,Node:IE,Element:Up,HTMLElement:class extends Up{constructor(){super(...arguments),this.innerHTML=""}get content(){return new Mo.DocumentFragment}},DocumentFragment:class extends xE{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(i){return null},setItem(i,e){},removeItem(i){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(i){return{matches:!1,media:i}},DOMParser:class{parseFromString(e,t){return{body:{textContent:e}}}}},RE=typeof window>"u"||typeof window.customElements>"u",kE=Object.keys(Mo).every(i=>i in globalThis),M=RE&&!kE?Mo:globalThis,bt=RE&&!kE?LE:globalThis.document,$p=new WeakMap,$0=i=>{let e=$p.get(i);return e||$p.set(i,e=new Set),e},wE=new M.ResizeObserver(i=>{for(const e of i)for(const t of $0(e.target))t(e)});function fa(i,e){$0(i).add(e),wE.observe(i)}function ma(i,e){const t=$0(i);t.delete(e),t.size||wE.unobserve(i)}function Qt(i){const e={};for(const t of i)e[t.name]=t.value;return e}function hi(i){var e;return(e=Qh(i))!=null?e:ya(i,"media-controller")}function Qh(i){var e;const{MEDIA_CONTROLLER:t}=we,s=i.getAttribute(t);if(s)return(e=ju(i))==null?void 0:e.getElementById(s)}const DE=(i,e,t=".value")=>{const s=i.querySelector(t);s&&(s.textContent=e)},XA=(i,e)=>{const t=`slot[name="${e}"]`,s=i.shadowRoot.querySelector(t);return s?s.children:[]},ME=(i,e)=>XA(i,e)[0],Cs=(i,e)=>!i||!e?!1:i!=null&&i.contains(e)?!0:Cs(i,e.getRootNode().host),ya=(i,e)=>{if(!i)return null;const t=i.closest(e);return t||ya(i.getRootNode().host,e)};function B0(i=document){var e;const t=i==null?void 0:i.activeElement;return t?(e=B0(t.shadowRoot))!=null?e:t:null}function ju(i){var e;const t=(e=i==null?void 0:i.getRootNode)==null?void 0:e.call(i);return t instanceof ShadowRoot||t instanceof Document?t:null}function PE(i,{depth:e=3,checkOpacity:t=!0,checkVisibilityCSS:s=!0}={}){if(i.checkVisibility)return i.checkVisibility({checkOpacity:t,checkVisibilityCSS:s});let r=i;for(;r&&e>0;){const n=getComputedStyle(r);if(t&&n.opacity==="0"||s&&n.visibility==="hidden"||n.display==="none")return!1;r=r.parentElement,e--}return!0}function JA(i,e,t,s){const r=s.x-t.x,n=s.y-t.y,a=r*r+n*n;if(a===0)return 0;const o=((i-t.x)*r+(e-t.y)*n)/a;return Math.max(0,Math.min(1,o))}function ht(i,e){const t=eS(i,s=>s===e);return t||OE(i,e)}function eS(i,e){var t,s;let r;for(r of(t=i.querySelectorAll("style:not([media])"))!=null?t:[]){let n;try{n=(s=r.sheet)==null?void 0:s.cssRules}catch{continue}for(const a of n??[])if(e(a.selectorText))return a}}function OE(i,e){var t,s;const r=(t=i.querySelectorAll("style:not([media])"))!=null?t:[],n=r==null?void 0:r[r.length-1];return n!=null&&n.sheet?(n==null||n.sheet.insertRule(`${e}{}`,n.sheet.cssRules.length),(s=n.sheet.cssRules)==null?void 0:s[n.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",i),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function je(i,e,t=Number.NaN){const s=i.getAttribute(e);return s!=null?+s:t}function rt(i,e,t){const s=+t;if(t==null||Number.isNaN(s)){i.hasAttribute(e)&&i.removeAttribute(e);return}je(i,e,void 0)!==s&&i.setAttribute(e,`${s}`)}function xe(i,e){return i.hasAttribute(e)}function Ie(i,e,t){if(t==null){i.hasAttribute(e)&&i.removeAttribute(e);return}xe(i,e)!=t&&i.toggleAttribute(e,t)}function Ye(i,e,t=null){var s;return(s=i.getAttribute(e))!=null?s:t}function Ze(i,e,t){if(t==null){i.hasAttribute(e)&&i.removeAttribute(e);return}const s=`${t}`;Ye(i,e,void 0)!==s&&i.setAttribute(e,s)}var NE=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},ws=(i,e,t)=>(NE(i,e,"read from private field"),t?t.call(i):e.get(i)),tS=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},yl=(i,e,t,s)=>(NE(i,e,"write to private field"),e.set(i,t),t),Nt;function iS(i){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
        box-sizing: border-box;
      }
    </style>
  `}class Yu extends M.HTMLElement{constructor(){if(super(),tS(this,Nt,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[we.MEDIA_CONTROLLER,_.MEDIA_PAUSED]}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===we.MEDIA_CONTROLLER&&(t&&((n=(r=ws(this,Nt))==null?void 0:r.unassociateElement)==null||n.call(r,this),yl(this,Nt,null)),s&&this.isConnected&&(yl(this,Nt,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=ws(this,Nt))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,s,r;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),yl(this,Nt,sS(this)),this.getAttribute(we.MEDIA_CONTROLLER)&&((t=(e=ws(this,Nt))==null?void 0:e.associateElement)==null||t.call(e,this)),(s=ws(this,Nt))==null||s.addEventListener("pointerdown",this),(r=ws(this,Nt))==null||r.addEventListener("click",this)}disconnectedCallback(){var e,t,s,r;this.getAttribute(we.MEDIA_CONTROLLER)&&((t=(e=ws(this,Nt))==null?void 0:e.unassociateElement)==null||t.call(e,this)),(s=ws(this,Nt))==null||s.removeEventListener("pointerdown",this),(r=ws(this,Nt))==null||r.removeEventListener("click",this),yl(this,Nt,null)}handleEvent(e){var t;const s=(t=e.composedPath())==null?void 0:t[0];if(["video","media-controller"].includes(s==null?void 0:s.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:n,clientY:a}=e,{left:o,top:l,width:d,height:u}=this.getBoundingClientRect(),c=n-o,h=a-l;if(c<0||h<0||c>d||h>u||d===0&&u===0)return;const{pointerType:f=this._pointerType}=e;if(this._pointerType=void 0,f===Op.TOUCH){this.handleTap(e);return}else if(f===Op.MOUSE){this.handleMouseClick(e);return}}}}get mediaPaused(){return xe(this,_.MEDIA_PAUSED)}set mediaPaused(e){Ie(this,_.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new M.CustomEvent(t,{composed:!0,bubbles:!0}))}}Nt=new WeakMap;Yu.shadowRootOptions={mode:"open"};Yu.getTemplateHTML=iS;function sS(i){var e;const t=i.getAttribute(we.MEDIA_CONTROLLER);return t?(e=i.getRootNode())==null?void 0:e.getElementById(t):ya(i,"media-controller")}M.customElements.get("media-gesture-receiver")||M.customElements.define("media-gesture-receiver",Yu);var Bp=Yu,H0=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},jt=(i,e,t)=>(H0(i,e,"read from private field"),t?t.call(i):e.get(i)),Gt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},xr=(i,e,t,s)=>(H0(i,e,"write to private field"),e.set(i,t),t),li=(i,e,t)=>(H0(i,e,"access private method"),t),mu,An,Po,Vn,sd,Xh,FE,ja,rd,Jh,UE,ef,$E,Oo,Zu,zu,V0,pa,No;const le={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"};function rS(i){return`
    <style>
      
      :host([${_.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
        outline: none;
      }

      :host {
        box-sizing: border-box;
        position: relative;
        display: inline-block;
        line-height: 0;
        background-color: var(--media-background-color, #000);
      }

      :host(:not([${le.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        display: flex;
        flex-flow: column nowrap;
        align-items: start;
        pointer-events: none;
        background: none;
      }

      slot[name=media] {
        display: var(--media-slot-display, contents);
      }

      
      :host([${le.AUDIO}]) slot[name=media] {
        display: var(--media-slot-display, none);
      }

      
      :host([${le.AUDIO}]) [part~=layer][part~=gesture-layer] {
        height: 0;
        display: block;
      }

      
      :host(:not([${le.AUDIO}])[${le.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
          :host(:not([${le.AUDIO}])[${le.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
        display: none;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {
        pointer-events: auto;
      }

      :host(:not([${le.AUDIO}])) *[part~=layer][part~=centered-layer] {
        align-items: center;
        justify-content: center;
      }

      :host(:not([${le.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
      :host(:not([${le.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
        align-self: stretch;
        flex-grow: 1;
      }

      slot[name=middle-chrome] {
        display: inline;
        flex-grow: 1;
        pointer-events: none;
        background: none;
      }

      
      ::slotted([slot=media]),
      ::slotted([slot=poster]) {
        width: 100%;
        height: 100%;
      }

      
      :host(:not([${le.AUDIO}])) .spacer {
        flex-grow: 1;
      }

      
      :host(:-webkit-full-screen) {
        
        width: 100% !important;
        height: 100% !important;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not([${le.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {
        opacity: 1;
        transition: var(--media-control-transition-in, opacity 0.25s);
      }

      
      :host([${le.USER_INACTIVE}]:not([${_.MEDIA_PAUSED}]):not([${_.MEDIA_IS_AIRPLAYING}]):not([${_.MEDIA_IS_CASTING}]):not([${le.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${le.NO_AUTOHIDE}]):not([role=dialog])) {
        opacity: 0;
        transition: var(--media-control-transition-out, opacity 1s);
      }

      :host([${le.USER_INACTIVE}]:not([${le.NO_AUTOHIDE}]):not([${_.MEDIA_PAUSED}]):not([${_.MEDIA_IS_CASTING}]):not([${le.AUDIO}])) ::slotted([slot=media]) {
        cursor: none;
      }

      :host([${le.USER_INACTIVE}][${le.AUTOHIDE_OVER_CONTROLS}]:not([${le.NO_AUTOHIDE}]):not([${_.MEDIA_PAUSED}]):not([${_.MEDIA_IS_CASTING}]):not([${le.AUDIO}])) * {
        --media-cursor: none;
        cursor: none;
      }


      ::slotted(media-control-bar)  {
        align-self: stretch;
      }

      
      :host(:not([${le.AUDIO}])[${_.MEDIA_HAS_PLAYED}]) slot[name=poster] {
        display: none;
      }

      ::slotted([role=dialog]) {
        width: 100%;
        height: 100%;
        align-self: center;
      }

      ::slotted([role=menu]) {
        align-self: end;
      }
    </style>

    <slot name="media" part="layer media-layer"></slot>
    <slot name="poster" part="layer poster-layer"></slot>
    <slot name="gestures-chrome" part="layer gesture-layer">
      <media-gesture-receiver slot="gestures-chrome">
        <template shadowrootmode="${Bp.shadowRootOptions.mode}">
          ${Bp.getTemplateHTML({})}
        </template>
      </media-gesture-receiver>
    </slot>
    <span part="layer vertical-layer">
      <slot name="top-chrome" part="top chrome"></slot>
      <slot name="middle-chrome" part="middle chrome"></slot>
      <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
      
      <slot part="bottom chrome"></slot>
    </span>
    <slot name="dialog" part="layer dialog-layer"></slot>
  `}const nS=Object.values(_),aS="sm:384 md:576 lg:768 xl:960";function oS(i){BE(i.target,i.contentRect.width)}function BE(i,e){var t;if(!i.isConnected)return;const s=(t=i.getAttribute(le.BREAKPOINTS))!=null?t:aS,r=lS(s),n=dS(r,e);let a=!1;if(Object.keys(r).forEach(o=>{if(n.includes(o)){i.hasAttribute(`breakpoint${o}`)||(i.setAttribute(`breakpoint${o}`,""),a=!0);return}i.hasAttribute(`breakpoint${o}`)&&(i.removeAttribute(`breakpoint${o}`),a=!0)}),a){const o=new CustomEvent(As.BREAKPOINTS_CHANGE,{detail:n});i.dispatchEvent(o)}i.breakpointsComputed||(i.breakpointsComputed=!0,i.dispatchEvent(new CustomEvent(As.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}function lS(i){const e=i.split(/\s+/);return Object.fromEntries(e.map(t=>t.split(":")))}function dS(i,e){return Object.keys(i).filter(t=>e>=parseInt(i[t]))}class Qu extends M.HTMLElement{constructor(){if(super(),Gt(this,Xh),Gt(this,Jh),Gt(this,ef),Gt(this,Oo),Gt(this,zu),Gt(this,pa),Gt(this,mu,0),Gt(this,An,null),Gt(this,Po,null),Gt(this,Vn,void 0),this.breakpointsComputed=!1,Gt(this,sd,new MutationObserver(li(this,Xh,FE).bind(this))),Gt(this,ja,!1),Gt(this,rd,t=>{jt(this,ja)||(setTimeout(()=>{oS(t),xr(this,ja,!1)},0),xr(this,ja,!0))}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const t=Qt(this.attributes),s=this.constructor.getTemplateHTML(t);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(s):this.shadowRoot.innerHTML=s}const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",()=>{if(!e.assignedElements({flatten:!0}).length){jt(this,An)&&this.mediaUnsetCallback(jt(this,An));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[le.AUTOHIDE,le.GESTURES_DISABLED].concat(nS).filter(e=>![_.MEDIA_RENDITION_LIST,_.MEDIA_AUDIO_TRACK_LIST,_.MEDIA_CHAPTERS_CUES,_.MEDIA_WIDTH,_.MEDIA_HEIGHT,_.MEDIA_ERROR,_.MEDIA_ERROR_MESSAGE].includes(e))}attributeChangedCallback(e,t,s){e.toLowerCase()==le.AUTOHIDE&&(this.autohide=s)}get media(){let e=this.querySelector(":scope > [slot=media]");return(e==null?void 0:e.nodeName)=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(xr(this,An,e),e.localName.includes("-")&&await M.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;jt(this,sd).observe(this,{childList:!0,subtree:!0}),fa(this,jt(this,rd));const t=this.getAttribute(le.AUDIO)!=null,s=ie(t?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",s),this.handleMediaUpdated(this.media),this.setAttribute(le.USER_INACTIVE,""),BE(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=M.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;jt(this,sd).disconnect(),ma(this,jt(this,rd)),this.media&&this.mediaUnsetCallback(this.media),(e=M.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){xr(this,An,null)}handleEvent(e){switch(e.type){case"pointerdown":xr(this,mu,e.timeStamp);break;case"pointermove":li(this,Jh,UE).call(this,e);break;case"pointerup":li(this,ef,$E).call(this,e);break;case"mouseleave":li(this,Oo,Zu).call(this);break;case"mouseup":this.removeAttribute(le.KEYBOARD_CONTROL);break;case"keyup":li(this,pa,No).call(this),this.setAttribute(le.KEYBOARD_CONTROL,"");break}}set autohide(e){const t=Number(e);xr(this,Vn,isNaN(t)?0:t)}get autohide(){return(jt(this,Vn)===void 0?2:jt(this,Vn)).toString()}get breakpoints(){return Ye(this,le.BREAKPOINTS)}set breakpoints(e){Ze(this,le.BREAKPOINTS,e)}get audio(){return xe(this,le.AUDIO)}set audio(e){Ie(this,le.AUDIO,e)}get gesturesDisabled(){return xe(this,le.GESTURES_DISABLED)}set gesturesDisabled(e){Ie(this,le.GESTURES_DISABLED,e)}get keyboardControl(){return xe(this,le.KEYBOARD_CONTROL)}set keyboardControl(e){Ie(this,le.KEYBOARD_CONTROL,e)}get noAutohide(){return xe(this,le.NO_AUTOHIDE)}set noAutohide(e){Ie(this,le.NO_AUTOHIDE,e)}get autohideOverControls(){return xe(this,le.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){Ie(this,le.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return xe(this,le.USER_INACTIVE)}set userInteractive(e){Ie(this,le.USER_INACTIVE,e)}}mu=new WeakMap;An=new WeakMap;Po=new WeakMap;Vn=new WeakMap;sd=new WeakMap;Xh=new WeakSet;FE=function(i){const e=this.media;for(const t of i){if(t.type!=="childList")continue;const s=t.removedNodes;for(const r of s){if(r.slot!="media"||t.target!=this)continue;let n=t.previousSibling&&t.previousSibling.previousElementSibling;if(!n||!e)this.mediaUnsetCallback(r);else{let a=n.slot!=="media";for(;(n=n.previousSibling)!==null;)n.slot=="media"&&(a=!1);a&&this.mediaUnsetCallback(r)}}if(e)for(const r of t.addedNodes)r===e&&this.handleMediaUpdated(e)}};ja=new WeakMap;rd=new WeakMap;Jh=new WeakSet;UE=function(i){if(i.pointerType!=="mouse"&&i.timeStamp-jt(this,mu)<250)return;li(this,zu,V0).call(this),clearTimeout(jt(this,Po));const e=this.hasAttribute(le.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(i.target)||e)&&li(this,pa,No).call(this)};ef=new WeakSet;$E=function(i){if(i.pointerType==="touch"){const e=!this.hasAttribute(le.USER_INACTIVE);[this,this.media].includes(i.target)&&e?li(this,Oo,Zu).call(this):li(this,pa,No).call(this)}else i.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e==null?void 0:e.localName))&&li(this,pa,No).call(this)};Oo=new WeakSet;Zu=function(){if(jt(this,Vn)<0||this.hasAttribute(le.USER_INACTIVE))return;this.setAttribute(le.USER_INACTIVE,"");const i=new M.CustomEvent(As.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(i)};zu=new WeakSet;V0=function(){if(!this.hasAttribute(le.USER_INACTIVE))return;this.removeAttribute(le.USER_INACTIVE);const i=new M.CustomEvent(As.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(i)};pa=new WeakSet;No=function(){li(this,zu,V0).call(this),clearTimeout(jt(this,Po));const i=parseInt(this.autohide);i<0||xr(this,Po,setTimeout(()=>{li(this,Oo,Zu).call(this)},i*1e3))};Qu.shadowRootOptions={mode:"open"};Qu.getTemplateHTML=rS;M.customElements.get("media-container")||M.customElements.define("media-container",Qu);var HE=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ct=(i,e,t)=>(HE(i,e,"read from private field"),t?t.call(i):e.get(i)),Ia=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},bl=(i,e,t,s)=>(HE(i,e,"write to private field"),e.set(i,t),t),Sn,Cn,pu,$r,us,Ns;class G0{constructor(e,t,{defaultValue:s}={defaultValue:void 0}){Ia(this,us),Ia(this,Sn,void 0),Ia(this,Cn,void 0),Ia(this,pu,void 0),Ia(this,$r,new Set),bl(this,Sn,e),bl(this,Cn,t),bl(this,pu,new Set(s))}[Symbol.iterator](){return Ct(this,us,Ns).values()}get length(){return Ct(this,us,Ns).size}get value(){var e;return(e=[...Ct(this,us,Ns)].join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(bl(this,$r,new Set),this.add(...(t=e==null?void 0:e.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return[...Ct(this,us,Ns)][e]}values(){return Ct(this,us,Ns).values()}forEach(e,t){Ct(this,us,Ns).forEach(e,t)}add(...e){var t,s;e.forEach(r=>Ct(this,$r).add(r)),!(this.value===""&&!((t=Ct(this,Sn))!=null&&t.hasAttribute(`${Ct(this,Cn)}`)))&&((s=Ct(this,Sn))==null||s.setAttribute(`${Ct(this,Cn)}`,`${this.value}`))}remove(...e){var t;e.forEach(s=>Ct(this,$r).delete(s)),(t=Ct(this,Sn))==null||t.setAttribute(`${Ct(this,Cn)}`,`${this.value}`)}contains(e){return Ct(this,us,Ns).has(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}Sn=new WeakMap;Cn=new WeakMap;pu=new WeakMap;$r=new WeakMap;us=new WeakSet;Ns=function(){return Ct(this,$r).size?Ct(this,$r):Ct(this,pu)};const uS=(i="")=>i.split(/\s+/),VE=(i="")=>{const[e,t,s]=i.split(":"),r=s?decodeURIComponent(s):void 0;return{kind:e==="cc"?es.CAPTIONS:es.SUBTITLES,language:t,label:r}},Xu=(i="",e={})=>uS(i).map(t=>{const s=VE(t);return{...e,...s}}),GE=i=>i?Array.isArray(i)?i.map(e=>typeof e=="string"?VE(e):e):typeof i=="string"?Xu(i):[i]:[],tf=({kind:i,label:e,language:t}={kind:"subtitles"})=>e?`${i==="captions"?"cc":"sb"}:${t}:${encodeURIComponent(e)}`:t,Fo=(i=[])=>Array.prototype.map.call(i,tf).join(" "),cS=(i,e)=>t=>t[i]===e,KE=i=>{const e=Object.entries(i).map(([t,s])=>cS(t,s));return t=>e.every(s=>s(t))},go=(i,e=[],t=[])=>{const s=GE(t).map(KE),r=n=>s.some(a=>a(n));Array.from(e).filter(r).forEach(n=>{n.mode=i})},Ju=(i,e=()=>!0)=>{if(!(i!=null&&i.textTracks))return[];const t=typeof e=="function"?e:KE(e);return Array.from(i.textTracks).filter(t)},WE=i=>{var e;return!!((e=i.mediaSubtitlesShowing)!=null&&e.length)||i.hasAttribute(_.MEDIA_SUBTITLES_SHOWING)},hS=i=>{var e;const{media:t,fullscreenElement:s}=i;try{const r=s&&"requestFullscreen"in s?"requestFullscreen":s&&"webkitRequestFullScreen"in s?"webkitRequestFullScreen":void 0;if(r){const n=(e=s[r])==null?void 0:e.call(s);if(n instanceof Promise)return n.catch(()=>{})}else t!=null&&t.webkitEnterFullscreen?t.webkitEnterFullscreen():t!=null&&t.requestFullscreen&&t.requestFullscreen()}catch(r){console.error(r)}},Hp="exitFullscreen"in bt?"exitFullscreen":"webkitExitFullscreen"in bt?"webkitExitFullscreen":"webkitCancelFullScreen"in bt?"webkitCancelFullScreen":void 0,fS=i=>{var e;const{documentElement:t}=i;if(Hp){const s=(e=t==null?void 0:t[Hp])==null?void 0:e.call(t);if(s instanceof Promise)return s.catch(()=>{})}},Ya="fullscreenElement"in bt?"fullscreenElement":"webkitFullscreenElement"in bt?"webkitFullscreenElement":void 0,mS=i=>{const{documentElement:e,media:t}=i,s=e==null?void 0:e[Ya];return!s&&"webkitDisplayingFullscreen"in t&&"webkitPresentationMode"in t&&t.webkitDisplayingFullscreen&&t.webkitPresentationMode===FA.FULLSCREEN?t:s},pS=i=>{var e;const{media:t,documentElement:s,fullscreenElement:r=t}=i;if(!t||!s)return!1;const n=mS(i);if(!n)return!1;if(n===r||n===t)return!0;if(n.localName.includes("-")){let a=n.shadowRoot;if(!(Ya in a))return Cs(n,r);for(;a!=null&&a[Ya];){if(a[Ya]===r)return!0;a=(e=a[Ya])==null?void 0:e.shadowRoot}}return!1},gS="fullscreenEnabled"in bt?"fullscreenEnabled":"webkitFullscreenEnabled"in bt?"webkitFullscreenEnabled":void 0,vS=i=>{const{documentElement:e,media:t}=i;return!!(e!=null&&e[gS])||t&&"webkitSupportsFullscreen"in t};let Tl;const K0=()=>{var i,e;return Tl||(Tl=(e=(i=bt)==null?void 0:i.createElement)==null?void 0:e.call(i,"video"),Tl)},ES=async(i=K0())=>{if(!i)return!1;const e=i.volume;i.volume=e/2+.1;const t=new AbortController,s=await Promise.race([yS(i,t.signal),bS(i,e)]);return t.abort(),s},yS=(i,e)=>new Promise(t=>{i.addEventListener("volumechange",()=>t(!0),{signal:e})}),bS=async(i,e)=>{for(let t=0;t<10;t++){if(i.volume===e)return!1;await CE(10)}return i.volume!==e},TS=/.*Version\/.*Safari\/.*/.test(M.navigator.userAgent),qE=(i=K0())=>M.matchMedia("(display-mode: standalone)").matches&&TS?!1:typeof(i==null?void 0:i.requestPictureInPicture)=="function",jE=(i=K0())=>vS({documentElement:bt,media:i}),_S=jE(),AS=qE(),SS=!!M.WebKitPlaybackTargetAvailabilityEvent,CS=!!M.chrome,gu=i=>Ju(i.media,e=>[es.SUBTITLES,es.CAPTIONS].includes(e.kind)).sort((e,t)=>e.kind>=t.kind?1:-1),YE=i=>Ju(i.media,e=>e.mode===Qn.SHOWING&&[es.SUBTITLES,es.CAPTIONS].includes(e.kind)),ZE=(i,e)=>{const t=gu(i),s=YE(i),r=!!s.length;if(t.length){if(e===!1||r&&e!==!0)go(Qn.DISABLED,t,s);else if(e===!0||!r&&e!==!1){let n=t[0];const{options:a}=i;if(!(a!=null&&a.noSubtitlesLangPref)){const u=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),c=u?[u,...globalThis.navigator.languages]:globalThis.navigator.languages,h=t.filter(f=>c.some(m=>f.language.toLowerCase().startsWith(m.split("-")[0]))).sort((f,m)=>{const p=c.findIndex(v=>f.language.toLowerCase().startsWith(v.split("-")[0])),g=c.findIndex(v=>m.language.toLowerCase().startsWith(v.split("-")[0]));return p-g});h[0]&&(n=h[0])}const{language:o,label:l,kind:d}=n;go(Qn.DISABLED,t,s),go(Qn.SHOWING,t,[{language:o,label:l,kind:d}])}}},W0=(i,e)=>i===e?!0:i==null||e==null||typeof i!=typeof e?!1:typeof i=="number"&&Number.isNaN(i)&&Number.isNaN(e)?!0:typeof i!="object"?!1:Array.isArray(i)?xS(i,e):Object.entries(i).every(([t,s])=>t in e&&W0(s,e[t])),xS=(i,e)=>{const t=Array.isArray(i),s=Array.isArray(e);return t!==s?!1:t||s?i.length!==e.length?!1:i.every((r,n)=>W0(r,e[n])):!0},IS=Object.values(ms);let vu;const LS=ES().then(i=>(vu=i,vu)),RS=async(...i)=>{await Promise.all(i.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof M.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const s=M.customElements.get(t);s&&e instanceof s||(await M.customElements.whenDefined(t),M.customElements.upgrade(e))}))},kS=new M.DOMParser,wS=i=>i&&(kS.parseFromString(i,"text/html").body.textContent||i),Za={mediaError:{get(i,e){const{media:t}=i;if((e==null?void 0:e.type)!=="playing")return t==null?void 0:t.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(i,e){var t;const{media:s}=i;if((e==null?void 0:e.type)!=="playing")return(t=s==null?void 0:s.error)==null?void 0:t.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(i,e){var t,s;const{media:r}=i;if((e==null?void 0:e.type)!=="playing")return(s=(t=r==null?void 0:r.error)==null?void 0:t.message)!=null?s:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.paused)!=null?e:!0},set(i,e){var t;const{media:s}=e;s&&(i?s.pause():(t=s.play())==null||t.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(i,e){const{media:t}=i;return t?e?e.type==="playing":!t.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.playbackRate)!=null?e:1},set(i,e){const{media:t}=e;t&&Number.isFinite(+i)&&(t.playbackRate=+i)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.muted)!=null?e:!1},set(i,e){const{media:t}=e;if(t){try{M.localStorage.setItem("media-chrome-pref-muted",i?"true":"false")}catch(s){console.debug("Error setting muted pref",s)}t.muted=i}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(i,e)=>{const{options:{noMutedPref:t}}=e,{media:s}=e;if(!(!s||s.muted||t))try{const r=M.localStorage.getItem("media-chrome-pref-muted")==="true";Za.mediaMuted.set(r,e),i(r)}catch(r){console.debug("Error getting muted pref",r)}}]},mediaVolume:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.volume)!=null?e:1},set(i,e){const{media:t}=e;if(t){try{i==null?M.localStorage.removeItem("media-chrome-pref-volume"):M.localStorage.setItem("media-chrome-pref-volume",i.toString())}catch(s){console.debug("Error setting volume pref",s)}Number.isFinite(+i)&&(t.volume=+i)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(i,e)=>{const{options:{noVolumePref:t}}=e;if(!t)try{const{media:s}=e;if(!s)return;const r=M.localStorage.getItem("media-chrome-pref-volume");if(r==null)return;Za.mediaVolume.set(+r,e),i(+r)}catch(s){console.debug("Error getting volume pref",s)}}]},mediaVolumeLevel:{get(i){const{media:e}=i;return typeof(e==null?void 0:e.volume)>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(i){var e;const{media:t}=i;return(e=t==null?void 0:t.currentTime)!=null?e:0},set(i,e){const{media:t}=e;!t||!U0(i)||(t.currentTime=i)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(i){const{media:e,options:{defaultDuration:t}={}}=i;return t&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?t:Number.isFinite(e==null?void 0:e.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(i){const{media:e}=i;return(e==null?void 0:e.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(i){var e;const{media:t}=i;if(!((e=t==null?void 0:t.seekable)!=null&&e.length))return;const s=t.seekable.start(0),r=t.seekable.end(t.seekable.length-1);if(!(!s&&!r))return[Number(s.toFixed(3)),Number(r.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(i){var e;const{media:t}=i,s=(e=t==null?void 0:t.buffered)!=null?e:[];return Array.from(s).map((r,n)=>[Number(s.start(n).toFixed(3)),Number(s.end(n).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(i){const{media:e,options:{defaultStreamType:t}={}}=i,s=[ms.LIVE,ms.ON_DEMAND].includes(t)?t:void 0;if(!e)return s;const{streamType:r}=e;if(IS.includes(r))return r===ms.UNKNOWN?s:r;const n=e.duration;return n===1/0?ms.LIVE:Number.isFinite(n)?ms.ON_DEMAND:s},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(i){const{media:e}=i;if(!e)return Number.NaN;const{targetLiveWindow:t}=e,s=Za.mediaStreamType.get(i);return(t==null||Number.isNaN(t))&&s===ms.LIVE?0:t},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(i){const{media:e,options:{liveEdgeOffset:t=10}={}}=i;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(Za.mediaStreamType.get(i)===ms.LIVE))return!1;const r=e.seekable;if(!r)return!0;if(!r.length)return!1;const n=r.end(r.length-1)-t;return e.currentTime>=n},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(i){return gu(i).map(({kind:e,label:t,language:s})=>({kind:e,label:t,language:s}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(i){return YE(i).map(({kind:e,label:t,language:s})=>({kind:e,label:t,language:s}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(i,e)=>{var t,s;const{media:r,options:n}=e;if(!r)return;const a=o=>{var l;!n.defaultSubtitles||o&&![es.CAPTIONS,es.SUBTITLES].includes((l=o==null?void 0:o.track)==null?void 0:l.kind)||ZE(e,!0)};return r.addEventListener("loadstart",a),(t=r.textTracks)==null||t.addEventListener("addtrack",a),(s=r.textTracks)==null||s.addEventListener("removetrack",a),()=>{var o,l;r.removeEventListener("loadstart",a),(o=r.textTracks)==null||o.removeEventListener("addtrack",a),(l=r.textTracks)==null||l.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(i){var e;const{media:t}=i;if(!t)return[];const[s]=Ju(t,{kind:es.CHAPTERS});return Array.from((e=s==null?void 0:s.cues)!=null?e:[]).map(({text:r,startTime:n,endTime:a})=>({text:wS(r),startTime:n,endTime:a}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(i,e)=>{var t;const{media:s}=e;if(!s)return;const r=s.querySelector('track[kind="chapters"][default][src]'),n=(t=s.shadowRoot)==null?void 0:t.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return r==null||r.addEventListener("load",i),n==null||n.addEventListener("load",i),()=>{r==null||r.removeEventListener("load",i),n==null||n.removeEventListener("load",i)}}]},mediaIsPip:{get(i){var e,t;const{media:s,documentElement:r}=i;if(!s||!r||!r.pictureInPictureElement)return!1;if(r.pictureInPictureElement===s)return!0;if(r.pictureInPictureElement instanceof HTMLMediaElement)return(e=s.localName)!=null&&e.includes("-")?Cs(s,r.pictureInPictureElement):!1;if(r.pictureInPictureElement.localName.includes("-")){let n=r.pictureInPictureElement.shadowRoot;for(;n!=null&&n.pictureInPictureElement;){if(n.pictureInPictureElement===s)return!0;n=(t=n.pictureInPictureElement)==null?void 0:t.shadowRoot}}return!1},set(i,e){const{media:t}=e;if(t)if(i){if(!bt.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!t.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const s=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};t.requestPictureInPicture().catch(r=>{if(r.code===11){if(!t.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(t.readyState===0&&t.preload==="none"){const n=()=>{t.removeEventListener("loadedmetadata",a),t.preload="none"},a=()=>{t.requestPictureInPicture().catch(s),n()};t.addEventListener("loadedmetadata",a),t.preload="metadata",setTimeout(()=>{t.readyState===0&&s(),n()},1e3)}else throw r}else throw r})}else bt.pictureInPictureElement&&bt.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(i){var e;const{media:t}=i;return[...(e=t==null?void 0:t.videoRenditions)!=null?e:[]].map(s=>({...s}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(i){var e,t,s;const{media:r}=i;return(s=(t=r==null?void 0:r.videoRenditions)==null?void 0:t[(e=r.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:s.id},set(i,e){const{media:t}=e;if(!(t!=null&&t.videoRenditions)){console.warn("MediaController: Rendition selection not supported by this media.");return}const s=i,r=Array.prototype.findIndex.call(t.videoRenditions,n=>n.id==s);t.videoRenditions.selectedIndex!=r&&(t.videoRenditions.selectedIndex=r)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(i){var e;const{media:t}=i;return[...(e=t==null?void 0:t.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(i){var e,t;const{media:s}=i;return(t=[...(e=s==null?void 0:s.audioTracks)!=null?e:[]].find(r=>r.enabled))==null?void 0:t.id},set(i,e){const{media:t}=e;if(!(t!=null&&t.audioTracks)){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const s=i;for(const r of t.audioTracks)r.enabled=s==r.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(i){return pS(i)},set(i,e){i?hS(e):fS(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(i){var e;const{media:t}=i;return!(t!=null&&t.remote)||((e=t.remote)==null?void 0:e.state)==="disconnected"?!1:!!t.remote.state},set(i,e){var t,s;const{media:r}=e;if(r&&!(i&&((t=r.remote)==null?void 0:t.state)!=="disconnected")&&!(!i&&((s=r.remote)==null?void 0:s.state)!=="connected")){if(typeof r.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}r.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(i,e){const{media:t}=e;if(t){if(!(t.webkitShowPlaybackTargetPicker&&M.WebKitPlaybackTargetAvailabilityEvent)){console.error("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}t.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(i){const{media:e}=i;if(!_S||!jE(e))return ii.UNSUPPORTED}},mediaPipUnavailable:{get(i){const{media:e}=i;if(!AS||!qE(e))return ii.UNSUPPORTED}},mediaVolumeUnavailable:{get(i){const{media:e}=i;if(vu===!1||(e==null?void 0:e.volume)==null)return ii.UNSUPPORTED},stateOwnersUpdateHandlers:[i=>{vu==null&&LS.then(e=>i(e?void 0:ii.UNSUPPORTED))}]},mediaCastUnavailable:{get(i,{availability:e="not-available"}={}){var t;const{media:s}=i;if(!CS||!((t=s==null?void 0:s.remote)!=null&&t.state))return ii.UNSUPPORTED;if(!(e==null||e==="available"))return ii.UNAVAILABLE},stateOwnersUpdateHandlers:[(i,e)=>{var t;const{media:s}=e;return s?(s.disableRemotePlayback||s.hasAttribute("disableremoteplayback")||(t=s==null?void 0:s.remote)==null||t.watchAvailability(n=>{i({availability:n?"available":"not-available"})}).catch(n=>{n.name==="NotSupportedError"?i({availability:null}):i({availability:"not-available"})}),()=>{var n;(n=s==null?void 0:s.remote)==null||n.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(i,e){if(!SS)return ii.UNSUPPORTED;if((e==null?void 0:e.availability)==="not-available")return ii.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(i,e)=>{var t;const{media:s}=e;return s?(s.disableRemotePlayback||s.hasAttribute("disableremoteplayback")||(t=s==null?void 0:s.remote)==null||t.watchAvailability(n=>{i({availability:n?"available":"not-available"})}).catch(n=>{n.name==="NotSupportedError"?i({availability:null}):i({availability:"not-available"})}),()=>{var n;(n=s==null?void 0:s.remote)==null||n.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(i){var e;const{media:t}=i;if(!(t!=null&&t.videoRenditions))return ii.UNSUPPORTED;if(!((e=t.videoRenditions)!=null&&e.length))return ii.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(i){var e,t;const{media:s}=i;if(!(s!=null&&s.audioTracks))return ii.UNSUPPORTED;if(((t=(e=s.audioTracks)==null?void 0:e.length)!=null?t:0)<=1)return ii.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},DS={[ee.MEDIA_PREVIEW_REQUEST](i,e,{detail:t}){var s,r,n;const{media:a}=e,o=t??void 0;let l,d;if(a&&o!=null){const[f]=Ju(a,{kind:es.METADATA,label:"thumbnails"}),m=Array.prototype.find.call((s=f==null?void 0:f.cues)!=null?s:[],(p,g,v)=>g===0?p.endTime>o:g===v.length-1?p.startTime<=o:p.startTime<=o&&p.endTime>o);if(m){const p=/'^(?:[a-z]+:)?\/\//i.test(m.text)||(r=a==null?void 0:a.querySelector('track[label="thumbnails"]'))==null?void 0:r.src,g=new URL(m.text,p);d=new URLSearchParams(g.hash).get("#xywh").split(",").map(b=>+b),l=g.href}}const u=i.mediaDuration.get(e);let h=(n=i.mediaChaptersCues.get(e).find((f,m,p)=>m===p.length-1&&u===f.endTime?f.startTime<=o&&f.endTime>=o:f.startTime<=o&&f.endTime>o))==null?void 0:n.text;return t!=null&&h==null&&(h=""),{mediaPreviewTime:o,mediaPreviewImage:l,mediaPreviewCoords:d,mediaPreviewChapter:h}},[ee.MEDIA_PAUSE_REQUEST](i,e){i["mediaPaused"].set(!0,e)},[ee.MEDIA_PLAY_REQUEST](i,e){var t,s,r,n;const a="mediaPaused",l=i.mediaStreamType.get(e)===ms.LIVE,d=!((t=e.options)!=null&&t.noAutoSeekToLive),u=i.mediaTargetLiveWindow.get(e)>0;if(l&&d&&!u){const c=(s=i.mediaSeekable.get(e))==null?void 0:s[1];if(c){const h=(n=(r=e.options)==null?void 0:r.seekToLiveOffset)!=null?n:0,f=c-h;i.mediaCurrentTime.set(f,e)}}i[a].set(!1,e)},[ee.MEDIA_PLAYBACK_RATE_REQUEST](i,e,{detail:t}){const s="mediaPlaybackRate",r=t;i[s].set(r,e)},[ee.MEDIA_MUTE_REQUEST](i,e){i["mediaMuted"].set(!0,e)},[ee.MEDIA_UNMUTE_REQUEST](i,e){const t="mediaMuted";i.mediaVolume.get(e)||i.mediaVolume.set(.25,e),i[t].set(!1,e)},[ee.MEDIA_VOLUME_REQUEST](i,e,{detail:t}){const s="mediaVolume",r=t;r&&i.mediaMuted.get(e)&&i.mediaMuted.set(!1,e),i[s].set(r,e)},[ee.MEDIA_SEEK_REQUEST](i,e,{detail:t}){const s="mediaCurrentTime",r=t;i[s].set(r,e)},[ee.MEDIA_SEEK_TO_LIVE_REQUEST](i,e){var t,s,r;const n="mediaCurrentTime",a=(t=i.mediaSeekable.get(e))==null?void 0:t[1];if(Number.isNaN(Number(a)))return;const o=(r=(s=e.options)==null?void 0:s.seekToLiveOffset)!=null?r:0,l=a-o;i[n].set(l,e)},[ee.MEDIA_SHOW_SUBTITLES_REQUEST](i,e,{detail:t}){var s;const{options:r}=e,n=gu(e),a=GE(t),o=(s=a[0])==null?void 0:s.language;o&&!r.noSubtitlesLangPref&&M.localStorage.setItem("media-chrome-pref-subtitles-lang",o),go(Qn.SHOWING,n,a)},[ee.MEDIA_DISABLE_SUBTITLES_REQUEST](i,e,{detail:t}){const s=gu(e),r=t??[];go(Qn.DISABLED,s,r)},[ee.MEDIA_TOGGLE_SUBTITLES_REQUEST](i,e,{detail:t}){ZE(e,t)},[ee.MEDIA_RENDITION_REQUEST](i,e,{detail:t}){const s="mediaRenditionSelected",r=t;i[s].set(r,e)},[ee.MEDIA_AUDIO_TRACK_REQUEST](i,e,{detail:t}){const s="mediaAudioTrackEnabled",r=t;i[s].set(r,e)},[ee.MEDIA_ENTER_PIP_REQUEST](i,e){const t="mediaIsPip";i.mediaIsFullscreen.get(e)&&i.mediaIsFullscreen.set(!1,e),i[t].set(!0,e)},[ee.MEDIA_EXIT_PIP_REQUEST](i,e){i["mediaIsPip"].set(!1,e)},[ee.MEDIA_ENTER_FULLSCREEN_REQUEST](i,e){const t="mediaIsFullscreen";i.mediaIsPip.get(e)&&i.mediaIsPip.set(!1,e),i[t].set(!0,e)},[ee.MEDIA_EXIT_FULLSCREEN_REQUEST](i,e){i["mediaIsFullscreen"].set(!1,e)},[ee.MEDIA_ENTER_CAST_REQUEST](i,e){const t="mediaIsCasting";i.mediaIsFullscreen.get(e)&&i.mediaIsFullscreen.set(!1,e),i[t].set(!0,e)},[ee.MEDIA_EXIT_CAST_REQUEST](i,e){i["mediaIsCasting"].set(!1,e)},[ee.MEDIA_AIRPLAY_REQUEST](i,e){i["mediaIsAirplaying"].set(!0,e)}},MS=({media:i,fullscreenElement:e,documentElement:t,stateMediator:s=Za,requestMap:r=DS,options:n={},monitorStateOwnersOnlyWithSubscriptions:a=!0})=>{const o=[],l={options:{...n}};let d=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const u=p=>{p!=null&&(W0(p,d)||(d=Object.freeze({...d,...p}),o.forEach(g=>g(d))))},c=()=>{const p=Object.entries(s).reduce((g,[v,{get:b}])=>(g[v]=b(l),g),{});u(p)},h={};let f;const m=async(p,g)=>{var v,b,E,T,x,R,I,C,L,S,w,F,G,K,V,q;const z=!!f;if(f={...l,...f??{},...p},z)return;await RS(...Object.values(p));const $=o.length>0&&g===0&&a,re=l.media!==f.media,se=((v=l.media)==null?void 0:v.textTracks)!==((b=f.media)==null?void 0:b.textTracks),W=((E=l.media)==null?void 0:E.videoRenditions)!==((T=f.media)==null?void 0:T.videoRenditions),B=((x=l.media)==null?void 0:x.audioTracks)!==((R=f.media)==null?void 0:R.audioTracks),oe=((I=l.media)==null?void 0:I.remote)!==((C=f.media)==null?void 0:C.remote),fe=l.documentElement!==f.documentElement,ye=!!l.media&&(re||$),X=!!((L=l.media)!=null&&L.textTracks)&&(se||$),be=!!((S=l.media)!=null&&S.videoRenditions)&&(W||$),Fe=!!((w=l.media)!=null&&w.audioTracks)&&(B||$),ze=!!((F=l.media)!=null&&F.remote)&&(oe||$),nt=!!l.documentElement&&(fe||$),Bt=ye||X||be||Fe||ze||nt,xs=o.length===0&&g===1&&a,an=!!f.media&&(re||xs),on=!!((G=f.media)!=null&&G.textTracks)&&(se||xs),lc=!!((K=f.media)!=null&&K.videoRenditions)&&(W||xs),Se=!!((V=f.media)!=null&&V.audioTracks)&&(B||xs),gt=!!((q=f.media)!=null&&q.remote)&&(oe||xs),Pt=!!f.documentElement&&(fe||xs),Li=an||on||lc||Se||gt||Pt;if(!(Bt||Li)){Object.entries(f).forEach(([Ce,Ht])=>{l[Ce]=Ht}),c(),f=void 0;return}Object.entries(s).forEach(([Ce,{get:Ht,mediaEvents:zo=[],textTracksEvents:ln=[],videoRenditionsEvents:Qo=[],audioTracksEvents:pr=[],remoteEvents:Xo=[],rootEvents:dc=[],stateOwnersUpdateHandlers:Jo=[]}])=>{h[Ce]||(h[Ce]={});const kt=at=>{const Vt=Ht(l,at);u({[Ce]:Vt})};let Je;Je=h[Ce].mediaEvents,zo.forEach(at=>{Je&&ye&&(l.media.removeEventListener(at,Je),h[Ce].mediaEvents=void 0),an&&(f.media.addEventListener(at,kt),h[Ce].mediaEvents=kt)}),Je=h[Ce].textTracksEvents,ln.forEach(at=>{var Vt,fi;Je&&X&&((Vt=l.media.textTracks)==null||Vt.removeEventListener(at,Je),h[Ce].textTracksEvents=void 0),on&&((fi=f.media.textTracks)==null||fi.addEventListener(at,kt),h[Ce].textTracksEvents=kt)}),Je=h[Ce].videoRenditionsEvents,Qo.forEach(at=>{var Vt,fi;Je&&be&&((Vt=l.media.videoRenditions)==null||Vt.removeEventListener(at,Je),h[Ce].videoRenditionsEvents=void 0),lc&&((fi=f.media.videoRenditions)==null||fi.addEventListener(at,kt),h[Ce].videoRenditionsEvents=kt)}),Je=h[Ce].audioTracksEvents,pr.forEach(at=>{var Vt,fi;Je&&Fe&&((Vt=l.media.audioTracks)==null||Vt.removeEventListener(at,Je),h[Ce].audioTracksEvents=void 0),Se&&((fi=f.media.audioTracks)==null||fi.addEventListener(at,kt),h[Ce].audioTracksEvents=kt)}),Je=h[Ce].remoteEvents,Xo.forEach(at=>{var Vt,fi;Je&&ze&&((Vt=l.media.remote)==null||Vt.removeEventListener(at,Je),h[Ce].remoteEvents=void 0),gt&&((fi=f.media.remote)==null||fi.addEventListener(at,kt),h[Ce].remoteEvents=kt)}),Je=h[Ce].rootEvents,dc.forEach(at=>{Je&&nt&&(l.documentElement.removeEventListener(at,Je),h[Ce].rootEvents=void 0),Pt&&(f.documentElement.addEventListener(at,kt),h[Ce].rootEvents=kt)});const B1=h[Ce].stateOwnersUpdateHandlers;Jo.forEach(at=>{B1&&Bt&&B1(),Li&&(h[Ce].stateOwnersUpdateHandlers=at(kt,f))})}),Object.entries(f).forEach(([Ce,Ht])=>{l[Ce]=Ht}),c(),f=void 0};return m({media:i,fullscreenElement:e,documentElement:t,options:n}),{dispatch(p){const{type:g,detail:v}=p;if(r[g]&&d.mediaErrorCode==null){u(r[g](s,l,p));return}g==="mediaelementchangerequest"?m({media:v}):g==="fullscreenelementchangerequest"?m({fullscreenElement:v}):g==="documentelementchangerequest"?m({documentElement:v}):g==="optionschangerequest"&&Object.entries(v??{}).forEach(([b,E])=>{l.options[b]=E})},getState(){return d},subscribe(p){return m({},o.length+1),o.push(p),p(d),()=>{const g=o.indexOf(p);g>=0&&(m({},o.length-1),o.splice(g,1))}}}};var q0=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Te=(i,e,t)=>(q0(i,e,"read from private field"),t?t.call(i):e.get(i)),os=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Ds=(i,e,t,s)=>(q0(i,e,"write to private field"),e.set(i,t),t),js=(i,e,t)=>(q0(i,e,"access private method"),t),Br,za,Be,Qa,Pi,nd,ad,sf,ga,Uo,od,rf;const zE=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],Vp=10,Q={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYS_USED:"keysused",LIVE_EDGE_OFFSET:"liveedgeoffset",SEEK_TO_LIVE_OFFSET:"seektoliveoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_HOTKEYS:"nohotkeys",NO_VOLUME_PREF:"novolumepref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_DEFAULT_STORE:"nodefaultstore",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset",LANG:"lang"};class QE extends Qu{constructor(){super(),os(this,ad),os(this,ga),os(this,od),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,os(this,Br,new G0(this,Q.HOTKEYS)),os(this,za,void 0),os(this,Be,void 0),os(this,Qa,void 0),os(this,Pi,void 0),os(this,nd,t=>{var s;(s=Te(this,Be))==null||s.dispatch(t)}),this.associateElement(this);let e={};Ds(this,Qa,t=>{Object.entries(t).forEach(([s,r])=>{if(s in e&&e[s]===r)return;this.propagateMediaState(s,r);const n=s.toLowerCase(),a=new M.CustomEvent(NA[n],{composed:!0,detail:r});this.dispatchEvent(a)}),e=t}),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Q.NO_HOTKEYS,Q.HOTKEYS,Q.DEFAULT_STREAM_TYPE,Q.DEFAULT_SUBTITLES,Q.DEFAULT_DURATION,Q.LANG)}get mediaStore(){return Te(this,Be)}set mediaStore(e){var t,s;if(Te(this,Be)&&((t=Te(this,Pi))==null||t.call(this),Ds(this,Pi,void 0)),Ds(this,Be,e),!Te(this,Be)&&!this.hasAttribute(Q.NO_DEFAULT_STORE)){js(this,ad,sf).call(this);return}Ds(this,Pi,(s=Te(this,Be))==null?void 0:s.subscribe(Te(this,Qa)))}get fullscreenElement(){var e;return(e=Te(this,za))!=null?e:this}set fullscreenElement(e){var t;this.hasAttribute(Q.FULLSCREEN_ELEMENT)&&this.removeAttribute(Q.FULLSCREEN_ELEMENT),Ds(this,za,e),(t=Te(this,Be))==null||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return xe(this,Q.DEFAULT_SUBTITLES)}set defaultSubtitles(e){Ie(this,Q.DEFAULT_SUBTITLES,e)}get defaultStreamType(){return Ye(this,Q.DEFAULT_STREAM_TYPE)}set defaultStreamType(e){Ze(this,Q.DEFAULT_STREAM_TYPE,e)}get defaultDuration(){return je(this,Q.DEFAULT_DURATION)}set defaultDuration(e){rt(this,Q.DEFAULT_DURATION,e)}get noHotkeys(){return xe(this,Q.NO_HOTKEYS)}set noHotkeys(e){Ie(this,Q.NO_HOTKEYS,e)}get keysUsed(){return Ye(this,Q.KEYS_USED)}set keysUsed(e){Ze(this,Q.KEYS_USED,e)}get liveEdgeOffset(){return je(this,Q.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){rt(this,Q.LIVE_EDGE_OFFSET,e)}get noAutoSeekToLive(){return xe(this,Q.NO_AUTO_SEEK_TO_LIVE)}set noAutoSeekToLive(e){Ie(this,Q.NO_AUTO_SEEK_TO_LIVE,e)}get noVolumePref(){return xe(this,Q.NO_VOLUME_PREF)}set noVolumePref(e){Ie(this,Q.NO_VOLUME_PREF,e)}get noSubtitlesLangPref(){return xe(this,Q.NO_SUBTITLES_LANG_PREF)}set noSubtitlesLangPref(e){Ie(this,Q.NO_SUBTITLES_LANG_PREF,e)}get noDefaultStore(){return xe(this,Q.NO_DEFAULT_STORE)}set noDefaultStore(e){Ie(this,Q.NO_DEFAULT_STORE,e)}attributeChangedCallback(e,t,s){var r,n,a,o,l,d,u,c;if(super.attributeChangedCallback(e,t,s),e===Q.NO_HOTKEYS)s!==t&&s===""?(this.hasAttribute(Q.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):s!==t&&s===null&&this.enableHotkeys();else if(e===Q.HOTKEYS)Te(this,Br).value=s;else if(e===Q.DEFAULT_SUBTITLES&&s!==t)(r=Te(this,Be))==null||r.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Q.DEFAULT_SUBTITLES)}});else if(e===Q.DEFAULT_STREAM_TYPE)(a=Te(this,Be))==null||a.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(n=this.getAttribute(Q.DEFAULT_STREAM_TYPE))!=null?n:void 0}});else if(e===Q.LIVE_EDGE_OFFSET)(o=Te(this,Be))==null||o.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Q.LIVE_EDGE_OFFSET)?+this.getAttribute(Q.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Q.SEEK_TO_LIVE_OFFSET)?void 0:+this.getAttribute(Q.LIVE_EDGE_OFFSET)}});else if(e===Q.SEEK_TO_LIVE_OFFSET)(l=Te(this,Be))==null||l.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(Q.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Q.SEEK_TO_LIVE_OFFSET):void 0}});else if(e===Q.NO_AUTO_SEEK_TO_LIVE)(d=Te(this,Be))==null||d.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(Q.NO_AUTO_SEEK_TO_LIVE)}});else if(e===Q.FULLSCREEN_ELEMENT){const h=s?(u=this.getRootNode())==null?void 0:u.getElementById(s):void 0;Ds(this,za,h),(c=Te(this,Be))==null||c.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===Q.LANG&&s!==t&&ZA(s)}connectedCallback(){var e,t;!Te(this,Be)&&!this.hasAttribute(Q.NO_DEFAULT_STORE)&&js(this,ad,sf).call(this),(e=Te(this,Be))==null||e.dispatch({type:"documentelementchangerequest",detail:bt}),super.connectedCallback(),Te(this,Be)&&!Te(this,Pi)&&Ds(this,Pi,(t=Te(this,Be))==null?void 0:t.subscribe(Te(this,Qa))),this.enableHotkeys()}disconnectedCallback(){var e,t,s,r;(e=super.disconnectedCallback)==null||e.call(this),Te(this,Be)&&((t=Te(this,Be))==null||t.dispatch({type:"documentelementchangerequest",detail:void 0}),(s=Te(this,Be))==null||s.dispatch({type:ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),Te(this,Pi)&&((r=Te(this,Pi))==null||r.call(this),Ds(this,Pi,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),(t=Te(this,Be))==null||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),(t=Te(this,Be))==null||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){Wp(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const s=this.registerMediaStateReceiver.bind(this),r=this.unregisterMediaStateReceiver.bind(this),n=$S(e,s,r);Object.values(ee).forEach(a=>{e.addEventListener(a,Te(this,nd))}),t.set(e,n)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(ee).forEach(r=>{e.removeEventListener(r,Te(this,nd))})}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),Te(this,Be)&&Object.entries(Te(this,Be).getState()).forEach(([r,n])=>{Wp([e],r,n)}))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,s=t.indexOf(e);s<0||t.splice(s,1)}enableHotkeys(){this.addEventListener("keydown",js(this,od,rf))}disableHotkeys(){this.removeEventListener("keydown",js(this,od,rf)),this.removeEventListener("keyup",js(this,ga,Uo))}get hotkeys(){return Ye(this,Q.HOTKEYS)}set hotkeys(e){Ze(this,Q.HOTKEYS,e)}keyboardShortcutHandler(e){var t,s,r,n,a;const o=e.target;if(((r=(s=(t=o.getAttribute(Q.KEYS_USED))==null?void 0:t.split(" "))!=null?s:o==null?void 0:o.keysUsed)!=null?r:[]).map(h=>h==="Space"?" ":h).filter(Boolean).includes(e.key))return;let d,u,c;if(!Te(this,Br).contains(`no${e.key.toLowerCase()}`)&&!(e.key===" "&&Te(this,Br).contains("nospace")))switch(e.key){case" ":case"k":d=Te(this,Be).getState().mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new M.CustomEvent(d,{composed:!0,bubbles:!0}));break;case"m":d=this.mediaStore.getState().mediaVolumeLevel==="off"?ee.MEDIA_UNMUTE_REQUEST:ee.MEDIA_MUTE_REQUEST,this.dispatchEvent(new M.CustomEvent(d,{composed:!0,bubbles:!0}));break;case"f":d=this.mediaStore.getState().mediaIsFullscreen?ee.MEDIA_EXIT_FULLSCREEN_REQUEST:ee.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new M.CustomEvent(d,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new M.CustomEvent(ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const h=this.hasAttribute(Q.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(Q.KEYBOARD_BACKWARD_SEEK_OFFSET):Vp;u=Math.max(((n=this.mediaStore.getState().mediaCurrentTime)!=null?n:0)-h,0),c=new M.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:u}),this.dispatchEvent(c);break}case"ArrowRight":{const h=this.hasAttribute(Q.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(Q.KEYBOARD_FORWARD_SEEK_OFFSET):Vp;u=Math.max(((a=this.mediaStore.getState().mediaCurrentTime)!=null?a:0)+h,0),c=new M.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:u}),this.dispatchEvent(c);break}}}}Br=new WeakMap;za=new WeakMap;Be=new WeakMap;Qa=new WeakMap;Pi=new WeakMap;nd=new WeakMap;ad=new WeakSet;sf=function(){var i;this.mediaStore=MS({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Q.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(Q.DEFAULT_DURATION)?+this.getAttribute(Q.DEFAULT_DURATION):void 0,defaultStreamType:(i=this.getAttribute(Q.DEFAULT_STREAM_TYPE))!=null?i:void 0,liveEdgeOffset:this.hasAttribute(Q.LIVE_EDGE_OFFSET)?+this.getAttribute(Q.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Q.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Q.SEEK_TO_LIVE_OFFSET):this.hasAttribute(Q.LIVE_EDGE_OFFSET)?+this.getAttribute(Q.LIVE_EDGE_OFFSET):void 0,noAutoSeekToLive:this.hasAttribute(Q.NO_AUTO_SEEK_TO_LIVE),noVolumePref:this.hasAttribute(Q.NO_VOLUME_PREF),noSubtitlesLangPref:this.hasAttribute(Q.NO_SUBTITLES_LANG_PREF)}})};ga=new WeakSet;Uo=function(i){const{key:e}=i;if(!zE.includes(e)){this.removeEventListener("keyup",js(this,ga,Uo));return}this.keyboardShortcutHandler(i)};od=new WeakSet;rf=function(i){const{metaKey:e,altKey:t,key:s}=i;if(e||t||!zE.includes(s)){this.removeEventListener("keyup",js(this,ga,Uo));return}[" ","ArrowLeft","ArrowRight"].includes(s)&&!(Te(this,Br).contains(`no${s.toLowerCase()}`)||s===" "&&Te(this,Br).contains("nospace"))&&i.preventDefault(),this.addEventListener("keyup",js(this,ga,Uo),{once:!0})};const PS=Object.values(_),OS=Object.values(_E),XE=i=>{var e,t,s,r;let{observedAttributes:n}=i.constructor;!n&&((e=i.nodeName)!=null&&e.includes("-"))&&(M.customElements.upgrade(i),{observedAttributes:n}=i.constructor);const a=(r=(s=(t=i==null?void 0:i.getAttribute)==null?void 0:t.call(i,we.MEDIA_CHROME_ATTRIBUTES))==null?void 0:s.split)==null?void 0:r.call(s,/\s+/);return Array.isArray(n||a)?(n||a).filter(o=>PS.includes(o)):[]},NS=i=>{var e,t;return(e=i.nodeName)!=null&&e.includes("-")&&M.customElements.get((t=i.nodeName)==null?void 0:t.toLowerCase())&&!(i instanceof M.customElements.get(i.nodeName.toLowerCase()))&&M.customElements.upgrade(i),OS.some(s=>s in i)},nf=i=>NS(i)||!!XE(i).length,Gp=i=>{var e;return(e=i==null?void 0:i.join)==null?void 0:e.call(i,":")},Kp={[_.MEDIA_SUBTITLES_LIST]:Fo,[_.MEDIA_SUBTITLES_SHOWING]:Fo,[_.MEDIA_SEEKABLE]:Gp,[_.MEDIA_BUFFERED]:i=>i==null?void 0:i.map(Gp).join(" "),[_.MEDIA_PREVIEW_COORDS]:i=>i==null?void 0:i.join(" "),[_.MEDIA_RENDITION_LIST]:UA,[_.MEDIA_AUDIO_TRACK_LIST]:VA},FS=async(i,e,t)=>{var s,r;if(i.isConnected||await CE(0),typeof t=="boolean"||t==null)return Ie(i,e,t);if(typeof t=="number")return rt(i,e,t);if(typeof t=="string")return Ze(i,e,t);if(Array.isArray(t)&&!t.length)return i.removeAttribute(e);const n=(r=(s=Kp[e])==null?void 0:s.call(Kp,t))!=null?r:t;return i.setAttribute(e,n)},US=i=>{var e;return!!((e=i.closest)!=null&&e.call(i,'*[slot="media"]'))},Ir=(i,e)=>{if(US(i))return;const t=(r,n)=>{var a,o;nf(r)&&n(r);const{children:l=[]}=r??{},d=(o=(a=r==null?void 0:r.shadowRoot)==null?void 0:a.children)!=null?o:[];[...l,...d].forEach(c=>Ir(c,n))},s=i==null?void 0:i.nodeName.toLowerCase();if(s.includes("-")&&!nf(i)){M.customElements.whenDefined(s).then(()=>{t(i,e)});return}t(i,e)},Wp=(i,e,t)=>{i.forEach(s=>{if(e in s){s[e]=t;return}const r=XE(s),n=e.toLowerCase();r.includes(n)&&FS(s,n,t)})},$S=(i,e,t)=>{Ir(i,e);const s=u=>{var c;const h=(c=u==null?void 0:u.composedPath()[0])!=null?c:u.target;e(h)},r=u=>{var c;const h=(c=u==null?void 0:u.composedPath()[0])!=null?c:u.target;t(h)};i.addEventListener(ee.REGISTER_MEDIA_STATE_RECEIVER,s),i.addEventListener(ee.UNREGISTER_MEDIA_STATE_RECEIVER,r);const n=u=>{u.forEach(c=>{const{addedNodes:h=[],removedNodes:f=[],type:m,target:p,attributeName:g}=c;m==="childList"?(Array.prototype.forEach.call(h,v=>Ir(v,e)),Array.prototype.forEach.call(f,v=>Ir(v,t))):m==="attributes"&&g===we.MEDIA_CHROME_ATTRIBUTES&&(nf(p)?e(p):t(p))})};let a=[];const o=u=>{const c=u.target;c.name!=="media"&&(a.forEach(h=>Ir(h,t)),a=[...c.assignedElements({flatten:!0})],a.forEach(h=>Ir(h,e)))};i.addEventListener("slotchange",o);const l=new MutationObserver(n);return l.observe(i,{childList:!0,attributes:!0,subtree:!0}),()=>{Ir(i,t),i.removeEventListener("slotchange",o),l.disconnect(),i.removeEventListener(ee.REGISTER_MEDIA_STATE_RECEIVER,s),i.removeEventListener(ee.UNREGISTER_MEDIA_STATE_RECEIVER,r)}};M.customElements.get("media-controller")||M.customElements.define("media-controller",QE);var BS=QE;const fn={PLACEMENT:"placement",BOUNDS:"bounds"};function HS(i){return`
    <style>
      :host {
        --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
        --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
        --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
        --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
        --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
        position: relative;
        pointer-events: none;
        display: var(--media-tooltip-display, inline-flex);
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        z-index: var(--media-tooltip-z-index, 1);
        background: var(--_tooltip-background);
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        font: var(--media-font,
          var(--media-font-weight, 400)
          var(--media-font-size, 13px) /
          var(--media-text-content-height, var(--media-control-height, 18px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        padding: var(--media-tooltip-padding, .35em .7em);
        border: var(--media-tooltip-border, none);
        border-radius: var(--media-tooltip-border-radius, 5px);
        filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
        white-space: var(--media-tooltip-white-space, nowrap);
      }

      :host([hidden]) {
        display: none;
      }

      img, svg {
        display: inline-block;
      }

      #arrow {
        position: absolute;
        width: 0px;
        height: 0px;
        border-style: solid;
        display: var(--media-tooltip-arrow-display, block);
      }

      :host(:not([placement])),
      :host([placement="top"]) {
        position: absolute;
        bottom: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host(:not([placement])) #arrow,
      :host([placement="top"]) #arrow {
        top: 100%;
        left: 50%;
        border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
        border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="right"]) {
        position: absolute;
        left: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="right"]) #arrow {
        top: 50%;
        right: 100%;
        border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
        border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
        transform: translate(0, -50%);
      }

      :host([placement="bottom"]) {
        position: absolute;
        top: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host([placement="bottom"]) #arrow {
        bottom: 100%;
        left: 50%;
        border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
        border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="left"]) {
        position: absolute;
        right: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="left"]) #arrow {
        top: 50%;
        left: 100%;
        border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
        border-color: transparent transparent transparent var(--_tooltip-arrow-background);
        transform: translate(0, -50%);
      }
      
      :host([placement="none"]) #arrow {
        display: none;
      }
    </style>
    <slot></slot>
    <div id="arrow"></div>
  `}class ec extends M.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!PE(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if(t==="left"||t==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const s=getComputedStyle(this),r=(e=ya(this,"#"+this.bounds))!=null?e:hi(this);if(!r)return;const{x:n,width:a}=r.getBoundingClientRect(),{x:o,width:l}=this.getBoundingClientRect(),d=o+l,u=n+a,c=s.getPropertyValue("--media-tooltip-offset-x"),h=c?parseFloat(c.replace("px","")):0,f=s.getPropertyValue("--media-tooltip-container-margin"),m=f?parseFloat(f.replace("px","")):0,p=o-n+h-m,g=d-u+h+m;if(p<0){this.style.setProperty("--media-tooltip-offset-x",`${p}px`);return}if(g>0){this.style.setProperty("--media-tooltip-offset-x",`${g}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}if(this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[fn.PLACEMENT,fn.BOUNDS]}get placement(){return Ye(this,fn.PLACEMENT)}set placement(e){Ze(this,fn.PLACEMENT,e)}get bounds(){return Ye(this,fn.BOUNDS)}set bounds(e){Ze(this,fn.BOUNDS,e)}}ec.shadowRootOptions={mode:"open"};ec.getTemplateHTML=HS;M.customElements.get("media-tooltip")||M.customElements.define("media-tooltip",ec);var qp=ec,j0=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},dt=(i,e,t)=>(j0(i,e,"read from private field"),t?t.call(i):e.get(i)),mn=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},_l=(i,e,t,s)=>(j0(i,e,"write to private field"),e.set(i,t),t),VS=(i,e,t)=>(j0(i,e,"access private method"),t),Oi,Gn,Ys,xn,ld,af,JE;const Ms={TOOLTIP_PLACEMENT:"tooltipplacement",DISABLED:"disabled",NO_TOOLTIP:"notooltip"};function GS(i,e={}){return`
    <style>
      :host {
        position: relative;
        font: var(--media-font,
          var(--media-font-weight, bold)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        padding: var(--media-button-padding, var(--media-control-padding, 10px));
        justify-content: var(--media-button-justify-content, center);
        display: inline-flex;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        transition: background .15s linear;
        pointer-events: auto;
        cursor: var(--media-cursor, pointer);
        -webkit-tap-highlight-color: transparent;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }
      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgba(50 50 70 / .7));
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-button-icon-width);
        height: var(--media-button-icon-height, var(--media-control-height, 24px));
        transform: var(--media-button-icon-transform);
        transition: var(--media-button-icon-transition);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
      }

      media-tooltip {
        
        max-width: 0;
        overflow-x: clip;
        opacity: 0;
        transition: opacity .3s, max-width 0s 9s;
      }

      :host(:hover) media-tooltip,
      :host(:focus-visible) media-tooltip {
        max-width: 100vw;
        opacity: 1;
        transition: opacity .3s;
      }

      :host([notooltip]) slot[name="tooltip"] {
        display: none;
      }
    </style>

    ${this.getSlotTemplateHTML(i,e)}

    <slot name="tooltip">
      <media-tooltip part="tooltip" aria-hidden="true">
        <template shadowrootmode="${qp.shadowRootOptions.mode}">
          ${qp.getTemplateHTML({})}
        </template>
        <slot name="tooltip-content">
          ${this.getTooltipContentHTML(i)}
        </slot>
      </media-tooltip>
    </slot>
  `}function KS(i,e){return`
    <slot></slot>
  `}function WS(){return""}class Rt extends M.HTMLElement{constructor(){if(super(),mn(this,af),mn(this,Oi,void 0),this.preventClick=!1,this.tooltipEl=null,mn(this,Gn,e=>{this.preventClick||this.handleClick(e),setTimeout(dt(this,Ys),0)}),mn(this,Ys,()=>{var e,t;(t=(e=this.tooltipEl)==null?void 0:e.updateXOffset)==null||t.call(e)}),mn(this,xn,e=>{const{key:t}=e;if(!this.keysUsed.includes(t)){this.removeEventListener("keyup",dt(this,xn));return}this.preventClick||this.handleClick(e)}),mn(this,ld,e=>{const{metaKey:t,altKey:s,key:r}=e;if(t||s||!this.keysUsed.includes(r)){this.removeEventListener("keyup",dt(this,xn));return}this.addEventListener("keyup",dt(this,xn),{once:!0})}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes),t=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(t):this.shadowRoot.innerHTML=t}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Ms.TOOLTIP_PLACEMENT,we.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",dt(this,Gn)),this.addEventListener("keydown",dt(this,ld)),this.tabIndex=0}disable(){this.removeEventListener("click",dt(this,Gn)),this.removeEventListener("keydown",dt(this,ld)),this.removeEventListener("keyup",dt(this,xn)),this.tabIndex=-1}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===we.MEDIA_CONTROLLER?(t&&((n=(r=dt(this,Oi))==null?void 0:r.unassociateElement)==null||n.call(r,this),_l(this,Oi,null)),s&&this.isConnected&&(_l(this,Oi,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=dt(this,Oi))==null?void 0:o.associateElement)==null||l.call(o,this))):e==="disabled"&&s!==t?s==null?this.enable():this.disable():e===Ms.TOOLTIP_PLACEMENT&&this.tooltipEl&&s!==t&&(this.tooltipEl.placement=s),dt(this,Ys).call(this)}connectedCallback(){var e,t,s;const{style:r}=ht(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const n=this.getAttribute(we.MEDIA_CONTROLLER);n&&(_l(this,Oi,(e=this.getRootNode())==null?void 0:e.getElementById(n)),(s=(t=dt(this,Oi))==null?void 0:t.associateElement)==null||s.call(t,this)),M.customElements.whenDefined("media-tooltip").then(()=>VS(this,af,JE).call(this))}disconnectedCallback(){var e,t;this.disable(),(t=(e=dt(this,Oi))==null?void 0:e.unassociateElement)==null||t.call(e,this),_l(this,Oi,null),this.removeEventListener("mouseenter",dt(this,Ys)),this.removeEventListener("focus",dt(this,Ys)),this.removeEventListener("click",dt(this,Gn))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return Ye(this,Ms.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){Ze(this,Ms.TOOLTIP_PLACEMENT,e)}get mediaController(){return Ye(this,we.MEDIA_CONTROLLER)}set mediaController(e){Ze(this,we.MEDIA_CONTROLLER,e)}get disabled(){return xe(this,Ms.DISABLED)}set disabled(e){Ie(this,Ms.DISABLED,e)}get noTooltip(){return xe(this,Ms.NO_TOOLTIP)}set noTooltip(e){Ie(this,Ms.NO_TOOLTIP,e)}handleClick(e){}}Oi=new WeakMap;Gn=new WeakMap;Ys=new WeakMap;xn=new WeakMap;ld=new WeakMap;af=new WeakSet;JE=function(){this.addEventListener("mouseenter",dt(this,Ys)),this.addEventListener("focus",dt(this,Ys)),this.addEventListener("click",dt(this,Gn));const i=this.tooltipPlacement;i&&this.tooltipEl&&(this.tooltipEl.placement=i)};Rt.shadowRootOptions={mode:"open"};Rt.getTemplateHTML=GS;Rt.getSlotTemplateHTML=KS;Rt.getTooltipContentHTML=WS;M.customElements.get("media-chrome-button")||M.customElements.define("media-chrome-button",Rt);const jp=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`;function qS(i){return`
    <style>
      :host([${_.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${_.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${_.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
      :host(:not([${_.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${jp}</slot>
      <slot name="exit">${jp}</slot>
    </slot>
  `}function jS(){return`
    <slot name="tooltip-enter">${ie("start airplay")}</slot>
    <slot name="tooltip-exit">${ie("stop airplay")}</slot>
  `}const Yp=i=>{const e=i.mediaIsAirplaying?ie("stop airplay"):ie("start airplay");i.setAttribute("aria-label",e)};class Y0 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_IS_AIRPLAYING,_.MEDIA_AIRPLAY_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),Yp(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_IS_AIRPLAYING&&Yp(this)}get mediaIsAirplaying(){return xe(this,_.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){Ie(this,_.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return Ye(this,_.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){Ze(this,_.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new M.CustomEvent(ee.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}Y0.getSlotTemplateHTML=qS;Y0.getTooltipContentHTML=jS;M.customElements.get("media-airplay-button")||M.customElements.define("media-airplay-button",Y0);const YS=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,ZS=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function zS(i){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-checked="true"]) slot[name=tooltip-enable],
      :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${YS}</slot>
      <slot name="off">${ZS}</slot>
    </slot>
  `}function QS(){return`
    <slot name="tooltip-enable">${ie("Enable captions")}</slot>
    <slot name="tooltip-disable">${ie("Disable captions")}</slot>
  `}const Zp=i=>{i.setAttribute("aria-checked",WE(i).toString())};class Z0 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_SUBTITLES_LIST,_.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",ie("closed captions")),Zp(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_SUBTITLES_SHOWING&&Zp(this)}get mediaSubtitlesList(){return zp(this,_.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Qp(this,_.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return zp(this,_.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Qp(this,_.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new M.CustomEvent(ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}Z0.getSlotTemplateHTML=zS;Z0.getTooltipContentHTML=QS;const zp=(i,e)=>{const t=i.getAttribute(e);return t?Xu(t):[]},Qp=(i,e,t)=>{if(!(t!=null&&t.length)){i.removeAttribute(e);return}const s=Fo(t);i.getAttribute(e)!==s&&i.setAttribute(e,s)};M.customElements.get("media-captions-button")||M.customElements.define("media-captions-button",Z0);const XS='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',JS='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>';function eC(i){return`
    <style>
      :host([${_.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${_.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${_.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
      :host(:not([${_.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${XS}</slot>
      <slot name="exit">${JS}</slot>
    </slot>
  `}function tC(){return`
    <slot name="tooltip-enter">${ie("Start casting")}</slot>
    <slot name="tooltip-exit">${ie("Stop casting")}</slot>
  `}const Xp=i=>{const e=i.mediaIsCasting?ie("stop casting"):ie("start casting");i.setAttribute("aria-label",e)};class z0 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_IS_CASTING,_.MEDIA_CAST_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),Xp(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_IS_CASTING&&Xp(this)}get mediaIsCasting(){return xe(this,_.MEDIA_IS_CASTING)}set mediaIsCasting(e){Ie(this,_.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return Ye(this,_.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){Ze(this,_.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?ee.MEDIA_EXIT_CAST_REQUEST:ee.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new M.CustomEvent(e,{composed:!0,bubbles:!0}))}}z0.getSlotTemplateHTML=eC;z0.getTooltipContentHTML=tC;M.customElements.get("media-cast-button")||M.customElements.define("media-cast-button",z0);var Q0=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Zr=(i,e,t)=>(Q0(i,e,"read from private field"),e.get(i)),ls=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},X0=(i,e,t,s)=>(Q0(i,e,"write to private field"),e.set(i,t),t),br=(i,e,t)=>(Q0(i,e,"access private method"),t),Eu,$o,sn,dd,of,lf,e5,df,t5,uf,i5,cf,s5,hf,r5;function iC(i){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        display: var(--media-dialog-display, inline-flex);
        justify-content: center;
        align-items: center;
        
        transition-behavior: allow-discrete;
        visibility: hidden;
        opacity: 0;
        transform: translateY(2px) scale(.99);
        pointer-events: none;
      }

      :host([open]) {
        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      #content {
        display: flex;
        position: relative;
        box-sizing: border-box;
        width: min(320px, 100%);
        word-wrap: break-word;
        max-height: 100%;
        overflow: auto;
        text-align: center;
        line-height: 1.4;
      }
    </style>
    ${this.getSlotTemplateHTML(i)}
  `}function sC(i){return`
    <slot id="content"></slot>
  `}const La={OPEN:"open",ANCHOR:"anchor"};class Zo extends M.HTMLElement{constructor(){super(),ls(this,dd),ls(this,lf),ls(this,df),ls(this,uf),ls(this,cf),ls(this,hf),ls(this,Eu,!1),ls(this,$o,null),ls(this,sn,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[La.OPEN,La.ANCHOR]}get open(){return xe(this,La.OPEN)}set open(e){Ie(this,La.OPEN,e)}handleEvent(e){switch(e.type){case"invoke":br(this,uf,i5).call(this,e);break;case"focusout":br(this,cf,s5).call(this,e);break;case"keydown":br(this,hf,r5).call(this,e);break}}connectedCallback(){br(this,dd,of).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,t,s){br(this,dd,of).call(this),e===La.OPEN&&s!==t&&(this.open?br(this,lf,e5).call(this):br(this,df,t5).call(this))}focus(){X0(this,$o,B0());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),t=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||t)return;const s=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');s==null||s.focus()}get keysUsed(){return["Escape","Tab"]}}Eu=new WeakMap;$o=new WeakMap;sn=new WeakMap;dd=new WeakSet;of=function(){if(!Zr(this,Eu)&&(X0(this,Eu,!0),!this.shadowRoot)){this.attachShadow(this.constructor.shadowRootOptions);const i=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(i),queueMicrotask(()=>{const{style:e}=ht(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")})}};lf=new WeakSet;e5=function(){var i;(i=Zr(this,sn))==null||i.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};df=new WeakSet;t5=function(){var i;(i=Zr(this,sn))==null||i.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))};uf=new WeakSet;i5=function(i){X0(this,sn,i.relatedTarget),Cs(this,i.relatedTarget)||(this.open=!this.open)};cf=new WeakSet;s5=function(i){var e;Cs(this,i.relatedTarget)||((e=Zr(this,$o))==null||e.focus(),Zr(this,sn)&&Zr(this,sn)!==i.relatedTarget&&this.open&&(this.open=!1))};hf=new WeakSet;r5=function(i){var e,t,s,r,n;const{key:a,ctrlKey:o,altKey:l,metaKey:d}=i;o||l||d||this.keysUsed.includes(a)&&(i.preventDefault(),i.stopPropagation(),a==="Tab"?(i.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(r=(s=this.nextElementSibling)==null?void 0:s.focus)==null||r.call(s),this.blur()):a==="Escape"&&((n=Zr(this,$o))==null||n.focus(),this.open=!1))};Zo.shadowRootOptions={mode:"open"};Zo.getTemplateHTML=iC;Zo.getSlotTemplateHTML=sC;M.customElements.get("media-chrome-dialog")||M.customElements.define("media-chrome-dialog",Zo);var J0=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},et=(i,e,t)=>(J0(i,e,"read from private field"),t?t.call(i):e.get(i)),It=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Fs=(i,e,t,s)=>(J0(i,e,"write to private field"),e.set(i,t),t),yi=(i,e,t)=>(J0(i,e,"access private method"),t),Ni,tc,ud,cd,Ti,yu,hd,fd,md,e1,n5,pd,ff,gd,mf,bu,t1,pf,a5,gf,o5,vf,l5,Ef,d5;function rC(i){return`
    <style>
      :host {
        --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

        box-shadow: var(--_focus-visible-box-shadow, none);
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
        display: inline-flex;
        align-items: center;
        
        vertical-align: middle;
        box-sizing: border-box;
        position: relative;
        width: 100px;
        transition: background .15s linear;
        cursor: var(--media-cursor, pointer);
        pointer-events: auto;
        touch-action: none; 
      }

      
      input[type=range]:focus {
        outline: 0;
      }
      input[type=range]:focus::-webkit-slider-runnable-track {
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgb(50 50 70 / .7));
      }

      #leftgap {
        padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      }

      #rightgap {
        padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      }

      #startpoint,
      #endpoint {
        position: absolute;
      }

      #endpoint {
        right: 0;
      }

      #container {
        
        width: var(--media-range-track-width, 100%);
        transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
        min-width: 40px;
      }

      #range {
        
        display: var(--media-time-range-hover-display, block);
        bottom: var(--media-time-range-hover-bottom, -7px);
        height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
        width: 100%;
        position: absolute;
        cursor: var(--media-cursor, pointer);

        -webkit-appearance: none; 
        -webkit-tap-highlight-color: transparent;
        background: transparent; 
        margin: 0;
        z-index: 1;
      }

      @media (hover: hover) {
        #range {
          bottom: var(--media-time-range-hover-bottom, -5px);
          height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
        }
      }

      
      
      #range::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: transparent;
        width: .1px;
        height: .1px;
      }

      
      #range::-moz-range-thumb {
        background: transparent;
        border: transparent;
        width: .1px;
        height: .1px;
      }

      #appearance {
        height: var(--media-range-track-height, 4px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        position: absolute;
        
        will-change: transform;
      }

      #track {
        background: var(--media-range-track-background, rgb(255 255 255 / .2));
        border-radius: var(--media-range-track-border-radius, 1px);
        border: var(--media-range-track-border, none);
        outline: var(--media-range-track-outline);
        outline-offset: var(--media-range-track-outline-offset);
        backdrop-filter: var(--media-range-track-backdrop-filter);
        -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
        box-shadow: var(--media-range-track-box-shadow, none);
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #progress,
      #pointer {
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #progress {
        background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
        transition: var(--media-range-track-transition);
      }

      #pointer {
        background: var(--media-range-track-pointer-background);
        border-right: var(--media-range-track-pointer-border-right);
        transition: visibility .25s, opacity .25s;
        visibility: hidden;
        opacity: 0;
      }

      @media (hover: hover) {
        :host(:hover) #pointer {
          transition: visibility .5s, opacity .5s;
          visibility: visible;
          opacity: 1;
        }
      }

      #thumb,
      ::slotted([slot=thumb]) {
        width: var(--media-range-thumb-width, 10px);
        height: var(--media-range-thumb-height, 10px);
        transition: var(--media-range-thumb-transition);
        transform: var(--media-range-thumb-transform, none);
        opacity: var(--media-range-thumb-opacity, 1);
        translate: -50%;
        position: absolute;
        left: 0;
        cursor: var(--media-cursor, pointer);
      }

      #thumb {
        border-radius: var(--media-range-thumb-border-radius, 10px);
        background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
        box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
        border: var(--media-range-thumb-border, none);
      }

      :host([disabled]) #thumb {
        background-color: #777;
      }

      .segments #appearance {
        height: var(--media-range-segment-hover-height, 7px);
      }

      #track {
        clip-path: url(#segments-clipping);
      }

      #segments {
        --segments-gap: var(--media-range-segments-gap, 2px);
        position: absolute;
        width: 100%;
        height: 100%;
      }

      #segments-clipping {
        transform: translateX(calc(var(--segments-gap) / 2));
      }

      #segments-clipping:empty {
        display: none;
      }

      #segments-clipping rect {
        height: var(--media-range-track-height, 4px);
        y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
        transition: var(--media-range-segment-transition, transform .1s ease-in-out);
        transform: var(--media-range-segment-transform, scaleY(1));
        transform-origin: center;
      }
    </style>
    <div id="leftgap"></div>
    <div id="container">
      <div id="startpoint"></div>
      <div id="endpoint"></div>
      <div id="appearance">
        <div id="track" part="track">
          <div id="pointer"></div>
          <div id="progress" part="progress"></div>
        </div>
        <slot name="thumb">
          <div id="thumb" part="thumb"></div>
        </slot>
        <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
      </div>
      <input id="range" type="range" min="0" max="1" step="any" value="0">
    </div>
    <div id="rightgap"></div>
  `}class ba extends M.HTMLElement{constructor(){if(super(),It(this,e1),It(this,pd),It(this,gd),It(this,bu),It(this,pf),It(this,gf),It(this,vf),It(this,Ef),It(this,Ni,void 0),It(this,tc,void 0),It(this,ud,void 0),It(this,cd,void 0),It(this,Ti,{}),It(this,yu,[]),It(this,hd,()=>{if(this.range.matches(":focus-visible")){const{style:e}=ht(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),It(this,fd,()=>{const{style:e}=ht(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),It(this,md,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes),t=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(t):this.shadowRoot.innerHTML=t}this.container=this.shadowRoot.querySelector("#container"),Fs(this,ud,this.shadowRoot.querySelector("#startpoint")),Fs(this,cd,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",we.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===we.MEDIA_CONTROLLER?(t&&((n=(r=et(this,Ni))==null?void 0:r.unassociateElement)==null||n.call(r,this),Fs(this,Ni,null)),s&&this.isConnected&&(Fs(this,Ni,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=et(this,Ni))==null?void 0:o.associateElement)==null||l.call(o,this))):(e==="disabled"||e==="aria-disabled"&&t!==s)&&(s==null?(this.range.removeAttribute(e),yi(this,pd,ff).call(this)):(this.range.setAttribute(e,s),yi(this,gd,mf).call(this)))}connectedCallback(){var e,t,s;const{style:r}=ht(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),et(this,Ti).pointer=ht(this.shadowRoot,"#pointer"),et(this,Ti).progress=ht(this.shadowRoot,"#progress"),et(this,Ti).thumb=ht(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),et(this,Ti).activeSegment=ht(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const n=this.getAttribute(we.MEDIA_CONTROLLER);n&&(Fs(this,Ni,(e=this.getRootNode())==null?void 0:e.getElementById(n)),(s=(t=et(this,Ni))==null?void 0:t.associateElement)==null||s.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",et(this,hd)),this.shadowRoot.addEventListener("focusout",et(this,fd)),yi(this,pd,ff).call(this),fa(this.container,et(this,md))}disconnectedCallback(){var e,t;yi(this,gd,mf).call(this),(t=(e=et(this,Ni))==null?void 0:e.unassociateElement)==null||t.call(e,this),Fs(this,Ni,null),this.shadowRoot.removeEventListener("focusin",et(this,hd)),this.shadowRoot.removeEventListener("focusout",et(this,fd)),ma(this.container,et(this,md))}updatePointerBar(e){var t;(t=et(this,Ti).pointer)==null||t.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,t;const s=this.range.valueAsNumber*100;(e=et(this,Ti).progress)==null||e.style.setProperty("width",`${s}%`),(t=et(this,Ti).thumb)==null||t.style.setProperty("left",`${s}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!(e!=null&&e.length)),!(e!=null&&e.length))return;const s=[...new Set([+this.range.min,...e.flatMap(n=>[n.start,n.end]),+this.range.max])];Fs(this,yu,[...s]);const r=s.pop();for(const[n,a]of s.entries()){const[o,l]=[n===0,n===s.length-1],d=o?"calc(var(--segments-gap) / -1)":`${a*100}%`,c=`calc(${((l?r:s[n+1])-a)*100}%${o||l?"":" - var(--segments-gap)"})`,h=bt.createElementNS("http://www.w3.org/2000/svg","rect"),f=ht(this.shadowRoot,`#segments-clipping rect:nth-child(${n+1})`);f.style.setProperty("x",d),f.style.setProperty("width",c),t.append(h)}}getPointerRatio(e){return JA(e.clientX,e.clientY,et(this,ud).getBoundingClientRect(),et(this,cd).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":yi(this,Ef,d5).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":yi(this,pf,a5).call(this,e);break;case"pointerdown":yi(this,bu,t1).call(this,e);break;case"pointerup":yi(this,gf,o5).call(this);break;case"pointerleave":yi(this,vf,l5).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Ni=new WeakMap;tc=new WeakMap;ud=new WeakMap;cd=new WeakMap;Ti=new WeakMap;yu=new WeakMap;hd=new WeakMap;fd=new WeakMap;md=new WeakMap;e1=new WeakSet;n5=function(i){const e=et(this,Ti).activeSegment;if(!e)return;const t=this.getPointerRatio(i),r=`#segments-clipping rect:nth-child(${et(this,yu).findIndex((n,a,o)=>{const l=o[a+1];return l!=null&&t>=n&&t<=l})+1})`;(e.selectorText!=r||!e.style.transform)&&(e.selectorText=r,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};pd=new WeakSet;ff=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};gd=new WeakSet;mf=function(){var i,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(i=M.window)==null||i.removeEventListener("pointerup",this),(e=M.window)==null||e.removeEventListener("pointermove",this)};bu=new WeakSet;t1=function(i){var e;Fs(this,tc,i.composedPath().includes(this.range)),(e=M.window)==null||e.addEventListener("pointerup",this)};pf=new WeakSet;a5=function(i){var e;i.pointerType!=="mouse"&&yi(this,bu,t1).call(this,i),this.addEventListener("pointerleave",this),(e=M.window)==null||e.addEventListener("pointermove",this)};gf=new WeakSet;o5=function(){var i;(i=M.window)==null||i.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};vf=new WeakSet;l5=function(){var i,e;this.removeEventListener("pointerleave",this),(i=M.window)==null||i.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=et(this,Ti).activeSegment)==null||e.style.removeProperty("transform")};Ef=new WeakSet;d5=function(i){this.toggleAttribute("dragging",i.buttons===1||i.pointerType!=="mouse"),this.updatePointerBar(i),yi(this,e1,n5).call(this,i),this.dragging&&(i.pointerType!=="mouse"||!et(this,tc))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(i),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))};ba.shadowRootOptions={mode:"open"};ba.getTemplateHTML=rC;M.customElements.get("media-chrome-range")||M.customElements.define("media-chrome-range",ba);var u5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Al=(i,e,t)=>(u5(i,e,"read from private field"),t?t.call(i):e.get(i)),nC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Sl=(i,e,t,s)=>(u5(i,e,"write to private field"),e.set(i,t),t),Fi;function aC(i){return`
    <style>
      :host {
        
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --media-loading-indicator-icon-height: 44px;
      }

      ::slotted(media-time-range),
      ::slotted(media-volume-range) {
        min-height: 100%;
      }

      ::slotted(media-time-range),
      ::slotted(media-clip-selector) {
        flex-grow: 1;
      }

      ::slotted([role="menu"]) {
        position: absolute;
      }
    </style>

    <slot></slot>
  `}class i1 extends M.HTMLElement{constructor(){if(super(),nC(this,Fi,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[we.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===we.MEDIA_CONTROLLER&&(t&&((n=(r=Al(this,Fi))==null?void 0:r.unassociateElement)==null||n.call(r,this),Sl(this,Fi,null)),s&&this.isConnected&&(Sl(this,Fi,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=Al(this,Fi))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,s;const r=this.getAttribute(we.MEDIA_CONTROLLER);r&&(Sl(this,Fi,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(s=(t=Al(this,Fi))==null?void 0:t.associateElement)==null||s.call(t,this))}disconnectedCallback(){var e,t;(t=(e=Al(this,Fi))==null?void 0:e.unassociateElement)==null||t.call(e,this),Sl(this,Fi,null)}}Fi=new WeakMap;i1.shadowRootOptions={mode:"open"};i1.getTemplateHTML=aC;M.customElements.get("media-control-bar")||M.customElements.define("media-control-bar",i1);var c5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Cl=(i,e,t)=>(c5(i,e,"read from private field"),t?t.call(i):e.get(i)),oC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},xl=(i,e,t,s)=>(c5(i,e,"write to private field"),e.set(i,t),t),Ui;function lC(i,e={}){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
        padding: var(--media-control-padding, 10px);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        text-align: center;
        pointer-events: auto;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }

      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }
    </style>

    ${this.getSlotTemplateHTML(i,e)}
  `}function dC(i,e){return`
    <slot></slot>
  `}class mr extends M.HTMLElement{constructor(){if(super(),oC(this,Ui,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[we.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===we.MEDIA_CONTROLLER&&(t&&((n=(r=Cl(this,Ui))==null?void 0:r.unassociateElement)==null||n.call(r,this),xl(this,Ui,null)),s&&this.isConnected&&(xl(this,Ui,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=Cl(this,Ui))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,s;const{style:r}=ht(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const n=this.getAttribute(we.MEDIA_CONTROLLER);n&&(xl(this,Ui,(e=this.getRootNode())==null?void 0:e.getElementById(n)),(s=(t=Cl(this,Ui))==null?void 0:t.associateElement)==null||s.call(t,this))}disconnectedCallback(){var e,t;(t=(e=Cl(this,Ui))==null?void 0:e.unassociateElement)==null||t.call(e,this),xl(this,Ui,null)}}Ui=new WeakMap;mr.shadowRootOptions={mode:"open"};mr.getTemplateHTML=lC;mr.getSlotTemplateHTML=dC;M.customElements.get("media-text-display")||M.customElements.define("media-text-display",mr);var h5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Jp=(i,e,t)=>(h5(i,e,"read from private field"),t?t.call(i):e.get(i)),uC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},cC=(i,e,t,s)=>(h5(i,e,"write to private field"),e.set(i,t),t),Xa;function hC(i,e){return`
    <slot>${ur(e.mediaDuration)}</slot>
  `}class f5 extends mr{constructor(){var e;super(),uC(this,Xa,void 0),cC(this,Xa,this.shadowRoot.querySelector("slot")),Jp(this,Xa).textContent=ur((e=this.mediaDuration)!=null?e:0)}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_DURATION]}attributeChangedCallback(e,t,s){e===_.MEDIA_DURATION&&(Jp(this,Xa).textContent=ur(+s)),super.attributeChangedCallback(e,t,s)}get mediaDuration(){return je(this,_.MEDIA_DURATION)}set mediaDuration(e){rt(this,_.MEDIA_DURATION,e)}}Xa=new WeakMap;f5.getSlotTemplateHTML=hC;M.customElements.get("media-duration-display")||M.customElements.define("media-duration-display",f5);const fC={2:ie("Network Error"),3:ie("Decode Error"),4:ie("Source Not Supported"),5:ie("Encryption Error")},mC={2:ie("A network error caused the media download to fail."),3:ie("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:ie("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:ie("The media is encrypted and there are no keys to decrypt it.")},m5=i=>{var e,t;return i.code===1?null:{title:(e=fC[i.code])!=null?e:`Error ${i.code}`,message:(t=mC[i.code])!=null?t:i.message}};var p5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},pC=(i,e,t)=>(p5(i,e,"read from private field"),t?t.call(i):e.get(i)),gC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},vC=(i,e,t,s)=>(p5(i,e,"write to private field"),e.set(i,t),t),vd;function EC(i){return`
    <style>
      :host {
        background: rgb(20 20 30 / .8);
      }

      #content {
        display: block;
        padding: 1.2em 1.5em;
      }

      h3,
      p {
        margin-block: 0 .3em;
      }
    </style>
    <slot name="error-${i.mediaerrorcode}" id="content">
      ${g5({code:+i.mediaerrorcode,message:i.mediaerrormessage})}
    </slot>
  `}function yC(i){return i.code&&m5(i)!==null}function g5(i){var e;const{title:t,message:s}=(e=m5(i))!=null?e:{};let r="";return t&&(r+=`<slot name="error-${i.code}-title"><h3>${t}</h3></slot>`),s&&(r+=`<slot name="error-${i.code}-message"><p>${s}</p></slot>`),r}const eg=[_.MEDIA_ERROR_CODE,_.MEDIA_ERROR_MESSAGE];class ic extends Zo{constructor(){super(...arguments),gC(this,vd,null)}static get observedAttributes(){return[...super.observedAttributes,...eg]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,t,s){var r;if(super.attributeChangedCallback(e,t,s),!eg.includes(e))return;const n=(r=this.mediaError)!=null?r:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=yC(n),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(n))}get mediaError(){return pC(this,vd)}set mediaError(e){vC(this,vd,e)}get mediaErrorCode(){return je(this,"mediaerrorcode")}set mediaErrorCode(e){rt(this,"mediaerrorcode",e)}get mediaErrorMessage(){return Ye(this,"mediaerrormessage")}set mediaErrorMessage(e){Ze(this,"mediaerrormessage",e)}}vd=new WeakMap;ic.getSlotTemplateHTML=EC;ic.formatErrorMessage=g5;M.customElements.get("media-error-dialog")||M.customElements.define("media-error-dialog",ic);var v5=ic;const bC=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,TC=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`;function _C(i){return`
    <style>
      :host([${_.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${_.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${_.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
      :host(:not([${_.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${bC}</slot>
      <slot name="exit">${TC}</slot>
    </slot>
  `}function AC(){return`
    <slot name="tooltip-enter">${ie("Enter fullscreen mode")}</slot>
    <slot name="tooltip-exit">${ie("Exit fullscreen mode")}</slot>
  `}const tg=i=>{const e=i.mediaIsFullscreen?ie("exit fullscreen mode"):ie("enter fullscreen mode");i.setAttribute("aria-label",e)};class s1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_IS_FULLSCREEN,_.MEDIA_FULLSCREEN_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),tg(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_IS_FULLSCREEN&&tg(this)}get mediaFullscreenUnavailable(){return Ye(this,_.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){Ze(this,_.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return xe(this,_.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){Ie(this,_.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?ee.MEDIA_EXIT_FULLSCREEN_REQUEST:ee.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new M.CustomEvent(e,{composed:!0,bubbles:!0}))}}s1.getSlotTemplateHTML=_C;s1.getTooltipContentHTML=AC;M.customElements.get("media-fullscreen-button")||M.customElements.define("media-fullscreen-button",s1);const{MEDIA_TIME_IS_LIVE:Ed,MEDIA_PAUSED:vo}=_,{MEDIA_SEEK_TO_LIVE_REQUEST:SC,MEDIA_PLAY_REQUEST:CC}=ee,xC='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>';function IC(i){return`
    <style>
      :host { --media-tooltip-display: none; }
      
      slot[name=indicator] > *,
      :host ::slotted([slot=indicator]) {
        
        min-width: auto;
        fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
        color: var(--media-live-button-icon-color, rgb(140, 140, 140));
      }

      :host([${Ed}]:not([${vo}])) slot[name=indicator] > *,
      :host([${Ed}]:not([${vo}])) ::slotted([slot=indicator]) {
        fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
        color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
      }

      :host([${Ed}]:not([${vo}])) {
        cursor: var(--media-cursor, not-allowed);
      }

      slot[name=text]{
        text-transform: uppercase;
      }

    </style>

    <slot name="indicator">${xC}</slot>
    
    <slot name="spacer">&nbsp;</slot><slot name="text">${ie("live")}</slot>
  `}const ig=i=>{const e=i.mediaPaused||!i.mediaTimeIsLive,t=ie(e?"seek to live":"playing live");i.setAttribute("aria-label",t),e?i.removeAttribute("aria-disabled"):i.setAttribute("aria-disabled","true")};class E5 extends Rt{static get observedAttributes(){return[...super.observedAttributes,Ed,vo]}connectedCallback(){super.connectedCallback(),ig(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),ig(this)}get mediaPaused(){return xe(this,_.MEDIA_PAUSED)}set mediaPaused(e){Ie(this,_.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return xe(this,_.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){Ie(this,_.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new M.CustomEvent(SC,{composed:!0,bubbles:!0})),this.hasAttribute(vo)&&this.dispatchEvent(new M.CustomEvent(CC,{composed:!0,bubbles:!0})))}}E5.getSlotTemplateHTML=IC;M.customElements.get("media-live-button")||M.customElements.define("media-live-button",E5);var y5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ra=(i,e,t)=>(y5(i,e,"read from private field"),t?t.call(i):e.get(i)),sg=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ka=(i,e,t,s)=>(y5(i,e,"write to private field"),e.set(i,t),t),$i,yd;const Il={LOADING_DELAY:"loadingdelay",NO_AUTOHIDE:"noautohide"},b5=500,LC=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;function RC(i){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
        vertical-align: middle;
        box-sizing: border-box;
        --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${b5}ms);
      }

      #status {
        color: rgba(0,0,0,0);
        width: 0px;
        height: 0px;
      }

      :host slot[name=icon] > *,
      :host ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 0);
        transition: opacity 0.15s;
      }

      :host([${_.MEDIA_LOADING}]:not([${_.MEDIA_PAUSED}])) slot[name=icon] > *,
      :host([${_.MEDIA_LOADING}]:not([${_.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 1);
        transition: opacity 0.15s var(--_loading-indicator-delay);
      }

      :host #status {
        visibility: var(--media-loading-indicator-opacity, hidden);
        transition: visibility 0.15s;
      }

      :host([${_.MEDIA_LOADING}]:not([${_.MEDIA_PAUSED}])) #status {
        visibility: var(--media-loading-indicator-opacity, visible);
        transition: visibility 0.15s var(--_loading-indicator-delay);
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-loading-indicator-icon-width);
        height: var(--media-loading-indicator-icon-height, 100px);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
      }
    </style>

    <slot name="icon">${LC}</slot>
    <div id="status" role="status" aria-live="polite">${ie("media loading")}</div>
  `}class r1 extends M.HTMLElement{constructor(){if(super(),sg(this,$i,void 0),sg(this,yd,b5),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[we.MEDIA_CONTROLLER,_.MEDIA_PAUSED,_.MEDIA_LOADING,Il.LOADING_DELAY]}attributeChangedCallback(e,t,s){var r,n,a,o,l;e===Il.LOADING_DELAY&&t!==s?this.loadingDelay=Number(s):e===we.MEDIA_CONTROLLER&&(t&&((n=(r=Ra(this,$i))==null?void 0:r.unassociateElement)==null||n.call(r,this),ka(this,$i,null)),s&&this.isConnected&&(ka(this,$i,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=Ra(this,$i))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,s;const r=this.getAttribute(we.MEDIA_CONTROLLER);r&&(ka(this,$i,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(s=(t=Ra(this,$i))==null?void 0:t.associateElement)==null||s.call(t,this))}disconnectedCallback(){var e,t;(t=(e=Ra(this,$i))==null?void 0:e.unassociateElement)==null||t.call(e,this),ka(this,$i,null)}get loadingDelay(){return Ra(this,yd)}set loadingDelay(e){ka(this,yd,e);const{style:t}=ht(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return xe(this,_.MEDIA_PAUSED)}set mediaPaused(e){Ie(this,_.MEDIA_PAUSED,e)}get mediaLoading(){return xe(this,_.MEDIA_LOADING)}set mediaLoading(e){Ie(this,_.MEDIA_LOADING,e)}get mediaController(){return Ye(this,we.MEDIA_CONTROLLER)}set mediaController(e){Ze(this,we.MEDIA_CONTROLLER,e)}get noAutohide(){return xe(this,Il.NO_AUTOHIDE)}set noAutohide(e){Ie(this,Il.NO_AUTOHIDE,e)}}$i=new WeakMap;yd=new WeakMap;r1.shadowRootOptions={mode:"open"};r1.getTemplateHTML=RC;M.customElements.get("media-loading-indicator")||M.customElements.define("media-loading-indicator",r1);const kC=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,rg=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,wC=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`;function DC(i){return`
    <style>
      :host(:not([${_.MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]),
      :host([${_.MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
        display: none !important;
      }

      :host([${_.MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
        display: none !important;
      }

      :host([${_.MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
        display: none !important;
      }

      :host([${_.MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
        display: none !important;
      }

      :host(:not([${_.MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
      :host([${_.MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="off">${kC}</slot>
      <slot name="low">${rg}</slot>
      <slot name="medium">${rg}</slot>
      <slot name="high">${wC}</slot>
    </slot>
  `}function MC(){return`
    <slot name="tooltip-mute">${ie("Mute")}</slot>
    <slot name="tooltip-unmute">${ie("Unmute")}</slot>
  `}const ng=i=>{const e=i.mediaVolumeLevel==="off",t=ie(e?"unmute":"mute");i.setAttribute("aria-label",t)};class n1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_VOLUME_LEVEL]}connectedCallback(){super.connectedCallback(),ng(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_VOLUME_LEVEL&&ng(this)}get mediaVolumeLevel(){return Ye(this,_.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){Ze(this,_.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?ee.MEDIA_UNMUTE_REQUEST:ee.MEDIA_MUTE_REQUEST;this.dispatchEvent(new M.CustomEvent(e,{composed:!0,bubbles:!0}))}}n1.getSlotTemplateHTML=DC;n1.getTooltipContentHTML=MC;M.customElements.get("media-mute-button")||M.customElements.define("media-mute-button",n1);const ag=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`;function PC(i){return`
    <style>
      :host([${_.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      :host(:not([${_.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${_.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
      :host(:not([${_.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${ag}</slot>
      <slot name="exit">${ag}</slot>
    </slot>
  `}function OC(){return`
    <slot name="tooltip-enter">${ie("Enter picture in picture mode")}</slot>
    <slot name="tooltip-exit">${ie("Exit picture in picture mode")}</slot>
  `}const og=i=>{const e=i.mediaIsPip?ie("exit picture in picture mode"):ie("enter picture in picture mode");i.setAttribute("aria-label",e)};class a1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_IS_PIP,_.MEDIA_PIP_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),og(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_IS_PIP&&og(this)}get mediaPipUnavailable(){return Ye(this,_.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){Ze(this,_.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return xe(this,_.MEDIA_IS_PIP)}set mediaIsPip(e){Ie(this,_.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?ee.MEDIA_EXIT_PIP_REQUEST:ee.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new M.CustomEvent(e,{composed:!0,bubbles:!0}))}}a1.getSlotTemplateHTML=PC;a1.getTooltipContentHTML=OC;M.customElements.get("media-pip-button")||M.customElements.define("media-pip-button",a1);var NC=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},pn=(i,e,t)=>(NC(i,e,"read from private field"),t?t.call(i):e.get(i)),FC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Us;const Kc={RATES:"rates"},T5=[1,1.2,1.5,1.7,2],Kn=1;function UC(i){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
    </style>
    <slot name="icon">${i.mediaplaybackrate||Kn}x</slot>
  `}function $C(){return ie("Playback rate")}class o1 extends Rt{constructor(){var e;super(),FC(this,Us,new G0(this,Kc.RATES,{defaultValue:T5})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:Kn}x`}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PLAYBACK_RATE,Kc.RATES]}attributeChangedCallback(e,t,s){if(super.attributeChangedCallback(e,t,s),e===Kc.RATES&&(pn(this,Us).value=s),e===_.MEDIA_PLAYBACK_RATE){const r=s?+s:Number.NaN,n=Number.isNaN(r)?Kn:r;this.container.innerHTML=`${n}x`,this.setAttribute("aria-label",ie("Playback rate {playbackRate}",{playbackRate:n}))}}get rates(){return pn(this,Us)}set rates(e){e?Array.isArray(e)?pn(this,Us).value=e.join(" "):typeof e=="string"&&(pn(this,Us).value=e):pn(this,Us).value=""}get mediaPlaybackRate(){return je(this,_.MEDIA_PLAYBACK_RATE,Kn)}set mediaPlaybackRate(e){rt(this,_.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const s=Array.from(pn(this,Us).values(),a=>+a).sort((a,o)=>a-o),r=(t=(e=s.find(a=>a>this.mediaPlaybackRate))!=null?e:s[0])!=null?t:Kn,n=new M.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(n)}}Us=new WeakMap;o1.getSlotTemplateHTML=UC;o1.getTooltipContentHTML=$C;M.customElements.get("media-playback-rate-button")||M.customElements.define("media-playback-rate-button",o1);const BC=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,HC=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`;function VC(i){return`
    <style>
      :host([${_.MEDIA_PAUSED}]) slot[name=pause],
      :host(:not([${_.MEDIA_PAUSED}])) slot[name=play] {
        display: none !important;
      }

      :host([${_.MEDIA_PAUSED}]) slot[name=tooltip-pause],
      :host(:not([${_.MEDIA_PAUSED}])) slot[name=tooltip-play] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="play">${BC}</slot>
      <slot name="pause">${HC}</slot>
    </slot>
  `}function GC(){return`
    <slot name="tooltip-play">${ie("Play")}</slot>
    <slot name="tooltip-pause">${ie("Pause")}</slot>
  `}const lg=i=>{const e=i.mediaPaused?ie("play"):ie("pause");i.setAttribute("aria-label",e)};class l1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PAUSED,_.MEDIA_ENDED]}connectedCallback(){super.connectedCallback(),lg(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_PAUSED&&lg(this)}get mediaPaused(){return xe(this,_.MEDIA_PAUSED)}set mediaPaused(e){Ie(this,_.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new M.CustomEvent(e,{composed:!0,bubbles:!0}))}}l1.getSlotTemplateHTML=VC;l1.getTooltipContentHTML=GC;M.customElements.get("media-play-button")||M.customElements.define("media-play-button",l1);const ki={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"};function KC(i){return`
    <style>
      :host {
        pointer-events: none;
        display: var(--media-poster-image-display, inline-block);
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        background-repeat: no-repeat;
        background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
        background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, center);
      }
    </style>

    <img part="poster img" aria-hidden="true" id="image"/>
  `}const WC=i=>{i.style.removeProperty("background-image")},qC=(i,e)=>{i.style["background-image"]=`url('${e}')`};class d1 extends M.HTMLElement{static get observedAttributes(){return[ki.PLACEHOLDER_SRC,ki.SRC]}constructor(){if(super(),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,s){e===ki.SRC&&(s==null?this.image.removeAttribute(ki.SRC):this.image.setAttribute(ki.SRC,s)),e===ki.PLACEHOLDER_SRC&&(s==null?WC(this.image):qC(this.image,s))}get placeholderSrc(){return Ye(this,ki.PLACEHOLDER_SRC)}set placeholderSrc(e){Ze(this,ki.SRC,e)}get src(){return Ye(this,ki.SRC)}set src(e){Ze(this,ki.SRC,e)}}d1.shadowRootOptions={mode:"open"};d1.getTemplateHTML=KC;M.customElements.get("media-poster-image")||M.customElements.define("media-poster-image",d1);var _5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},jC=(i,e,t)=>(_5(i,e,"read from private field"),t?t.call(i):e.get(i)),YC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ZC=(i,e,t,s)=>(_5(i,e,"write to private field"),e.set(i,t),t),bd;class zC extends mr{constructor(){super(),YC(this,bd,void 0),ZC(this,bd,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_PREVIEW_CHAPTER&&s!==t&&s!=null&&(jC(this,bd).textContent=s,s!==""?this.setAttribute("aria-valuetext",`chapter: ${s}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return Ye(this,_.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){Ze(this,_.MEDIA_PREVIEW_CHAPTER,e)}}bd=new WeakMap;M.customElements.get("media-preview-chapter-display")||M.customElements.define("media-preview-chapter-display",zC);var A5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ll=(i,e,t)=>(A5(i,e,"read from private field"),t?t.call(i):e.get(i)),QC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Rl=(i,e,t,s)=>(A5(i,e,"write to private field"),e.set(i,t),t),Bi;function XC(i){return`
    <style>
      :host {
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
        overflow: hidden;
      }

      img {
        display: none;
        position: relative;
      }
    </style>
    <img crossorigin loading="eager" decoding="async">
  `}class sc extends M.HTMLElement{constructor(){if(super(),QC(this,Bi,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[we.MEDIA_CONTROLLER,_.MEDIA_PREVIEW_IMAGE,_.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,s;const r=this.getAttribute(we.MEDIA_CONTROLLER);r&&(Rl(this,Bi,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(s=(t=Ll(this,Bi))==null?void 0:t.associateElement)==null||s.call(t,this))}disconnectedCallback(){var e,t;(t=(e=Ll(this,Bi))==null?void 0:e.unassociateElement)==null||t.call(e,this),Rl(this,Bi,null)}attributeChangedCallback(e,t,s){var r,n,a,o,l;[_.MEDIA_PREVIEW_IMAGE,_.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===we.MEDIA_CONTROLLER&&(t&&((n=(r=Ll(this,Bi))==null?void 0:r.unassociateElement)==null||n.call(r,this),Rl(this,Bi,null)),s&&this.isConnected&&(Rl(this,Bi,(a=this.getRootNode())==null?void 0:a.getElementById(s)),(l=(o=Ll(this,Bi))==null?void 0:o.associateElement)==null||l.call(o,this)))}get mediaPreviewImage(){return Ye(this,_.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Ze(this,_.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(_.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(t=>+t)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(_.MEDIA_PREVIEW_COORDS);return}this.setAttribute(_.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!(e&&t))return;const[s,r,n,a]=e,o=t.split("#")[0],l=getComputedStyle(this),{maxWidth:d,maxHeight:u,minWidth:c,minHeight:h}=l,f=Math.min(parseInt(d)/n,parseInt(u)/a),m=Math.max(parseInt(c)/n,parseInt(h)/a),p=f<1,g=p?f:m>1?m:1,{style:v}=ht(this.shadowRoot,":host"),b=ht(this.shadowRoot,"img").style,E=this.shadowRoot.querySelector("img"),T=p?"min":"max";v.setProperty(`${T}-width`,"initial","important"),v.setProperty(`${T}-height`,"initial","important"),v.width=`${n*g}px`,v.height=`${a*g}px`;const x=()=>{b.width=`${this.imgWidth*g}px`,b.height=`${this.imgHeight*g}px`,b.display="block"};E.src!==o&&(E.onload=()=>{this.imgWidth=E.naturalWidth,this.imgHeight=E.naturalHeight,x()},E.src=o,x()),x(),b.transform=`translate(-${s*g}px, -${r*g}px)`}}Bi=new WeakMap;sc.shadowRootOptions={mode:"open"};sc.getTemplateHTML=XC;M.customElements.get("media-preview-thumbnail")||M.customElements.define("media-preview-thumbnail",sc);var dg=sc,S5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},ug=(i,e,t)=>(S5(i,e,"read from private field"),t?t.call(i):e.get(i)),JC=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ex=(i,e,t,s)=>(S5(i,e,"write to private field"),e.set(i,t),t),Ja;class tx extends mr{constructor(){super(),JC(this,Ja,void 0),ex(this,Ja,this.shadowRoot.querySelector("slot")),ug(this,Ja).textContent=ur(0)}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_PREVIEW_TIME&&s!=null&&(ug(this,Ja).textContent=ur(parseFloat(s)))}get mediaPreviewTime(){return je(this,_.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){rt(this,_.MEDIA_PREVIEW_TIME,e)}}Ja=new WeakMap;M.customElements.get("media-preview-time-display")||M.customElements.define("media-preview-time-display",tx);const gn={SEEK_OFFSET:"seekoffset"},Wc=30,ix=i=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(2.18 19.87)">${i}</text>
    <path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/>
  </svg>`;function sx(i,e){return`
    <slot name="icon">${ix(e.seekOffset)}</slot>
  `}function rx(){return ie("Seek backward")}const nx=0;class u1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_CURRENT_TIME,gn.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=je(this,gn.SEEK_OFFSET,Wc)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===gn.SEEK_OFFSET&&(this.seekOffset=je(this,gn.SEEK_OFFSET,Wc))}get seekOffset(){return je(this,gn.SEEK_OFFSET,Wc)}set seekOffset(e){rt(this,gn.SEEK_OFFSET,e),this.setAttribute("aria-label",ie("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),DE(ME(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return je(this,_.MEDIA_CURRENT_TIME,nx)}set mediaCurrentTime(e){rt(this,_.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new M.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}u1.getSlotTemplateHTML=sx;u1.getTooltipContentHTML=rx;M.customElements.get("media-seek-backward-button")||M.customElements.define("media-seek-backward-button",u1);const vn={SEEK_OFFSET:"seekoffset"},qc=30,ax=i=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(8.9 19.87)">${i}</text>
    <path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/>
  </svg>`;function ox(i,e){return`
    <slot name="icon">${ax(e.seekOffset)}</slot>
  `}function lx(){return ie("Seek forward")}const dx=0;class c1 extends Rt{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_CURRENT_TIME,vn.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=je(this,vn.SEEK_OFFSET,qc)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===vn.SEEK_OFFSET&&(this.seekOffset=je(this,vn.SEEK_OFFSET,qc))}get seekOffset(){return je(this,vn.SEEK_OFFSET,qc)}set seekOffset(e){rt(this,vn.SEEK_OFFSET,e),this.setAttribute("aria-label",ie("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),DE(ME(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return je(this,_.MEDIA_CURRENT_TIME,dx)}set mediaCurrentTime(e){rt(this,_.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new M.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}c1.getSlotTemplateHTML=ox;c1.getTooltipContentHTML=lx;M.customElements.get("media-seek-forward-button")||M.customElements.define("media-seek-forward-button",c1);var C5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},jc=(i,e,t)=>(C5(i,e,"read from private field"),t?t.call(i):e.get(i)),ux=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},cx=(i,e,t,s)=>(C5(i,e,"write to private field"),e.set(i,t),t),In;const Lr={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},cg=[...Object.values(Lr),_.MEDIA_CURRENT_TIME,_.MEDIA_DURATION,_.MEDIA_SEEKABLE],hg=["Enter"," "],hx="&nbsp;/&nbsp;",yf=(i,{timesSep:e=hx}={})=>{var t,s;const r=(t=i.mediaCurrentTime)!=null?t:0,[,n]=(s=i.mediaSeekable)!=null?s:[];let a=0;Number.isFinite(i.mediaDuration)?a=i.mediaDuration:Number.isFinite(n)&&(a=n);const o=i.remaining?ur(0-(a-r)):ur(r);return i.showDuration?`${o}${e}${ur(a)}`:o},fx="video not loaded, unknown time.",mx=i=>{var e;const t=i.mediaCurrentTime,[,s]=(e=i.mediaSeekable)!=null?e:[];let r=null;if(Number.isFinite(i.mediaDuration)?r=i.mediaDuration:Number.isFinite(s)&&(r=s),t==null||r===null){i.setAttribute("aria-valuetext",fx);return}const n=i.remaining?po(0-(r-t)):po(t);if(!i.showDuration){i.setAttribute("aria-valuetext",n);return}const a=po(r),o=`${n} of ${a}`;i.setAttribute("aria-valuetext",o)};function px(i,e){return`
    <slot>${yf(e)}</slot>
  `}class x5 extends mr{constructor(){super(),ux(this,In,void 0),cx(this,In,this.shadowRoot.querySelector("slot")),jc(this,In).innerHTML=`${yf(this)}`}static get observedAttributes(){return[...super.observedAttributes,...cg,"disabled"]}connectedCallback(){const{style:e}=ht(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",ie("playback time"));const t=s=>{const{key:r}=s;if(!hg.includes(r)){this.removeEventListener("keyup",t);return}this.toggleTimeDisplay()};this.addEventListener("keydown",s=>{const{metaKey:r,altKey:n,key:a}=s;if(r||n||!hg.includes(a)){this.removeEventListener("keyup",t);return}this.addEventListener("keyup",t)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,s){cg.includes(e)?this.update():e==="disabled"&&s!==t&&(s==null?this.enable():this.disable()),super.attributeChangedCallback(e,t,s)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return xe(this,Lr.REMAINING)}set remaining(e){Ie(this,Lr.REMAINING,e)}get showDuration(){return xe(this,Lr.SHOW_DURATION)}set showDuration(e){Ie(this,Lr.SHOW_DURATION,e)}get noToggle(){return xe(this,Lr.NO_TOGGLE)}set noToggle(e){Ie(this,Lr.NO_TOGGLE,e)}get mediaDuration(){return je(this,_.MEDIA_DURATION)}set mediaDuration(e){rt(this,_.MEDIA_DURATION,e)}get mediaCurrentTime(){return je(this,_.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){rt(this,_.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(_.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(_.MEDIA_SEEKABLE);return}this.setAttribute(_.MEDIA_SEEKABLE,e.join(":"))}update(){const e=yf(this);mx(this),e!==jc(this,In).innerHTML&&(jc(this,In).innerHTML=e)}}In=new WeakMap;x5.getSlotTemplateHTML=px;M.customElements.get("media-time-display")||M.customElements.define("media-time-display",x5);var I5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},St=(i,e,t)=>(I5(i,e,"read from private field"),e.get(i)),wi=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Kt=(i,e,t,s)=>(I5(i,e,"write to private field"),e.set(i,t),t),gx=(i,e,t,s)=>({set _(r){Kt(i,e,r)},get _(){return St(i,e)}}),Ln,Td,Rn,eo,_d,Ad,Sd,kn,Rr,Cd;class vx{constructor(e,t,s){wi(this,Ln,void 0),wi(this,Td,void 0),wi(this,Rn,void 0),wi(this,eo,void 0),wi(this,_d,void 0),wi(this,Ad,void 0),wi(this,Sd,void 0),wi(this,kn,void 0),wi(this,Rr,0),wi(this,Cd,(r=performance.now())=>{Kt(this,Rr,requestAnimationFrame(St(this,Cd))),Kt(this,eo,performance.now()-St(this,Rn));const n=1e3/this.fps;if(St(this,eo)>n){Kt(this,Rn,r-St(this,eo)%n);const a=1e3/((r-St(this,Td))/++gx(this,_d)._),o=(r-St(this,Ad))/1e3/this.duration;let l=St(this,Sd)+o*this.playbackRate;l-St(this,Ln).valueAsNumber>0?Kt(this,kn,this.playbackRate/this.duration/a):(Kt(this,kn,.995*St(this,kn)),l=St(this,Ln).valueAsNumber+St(this,kn)),this.callback(l)}}),Kt(this,Ln,e),this.callback=t,this.fps=s}start(){St(this,Rr)===0&&(Kt(this,Rn,performance.now()),Kt(this,Td,St(this,Rn)),Kt(this,_d,0),St(this,Cd).call(this))}stop(){St(this,Rr)!==0&&(cancelAnimationFrame(St(this,Rr)),Kt(this,Rr,0))}update({start:e,duration:t,playbackRate:s}){const r=e-St(this,Ln).valueAsNumber,n=Math.abs(t-this.duration);(r>0||r<-.03||n>=.5)&&this.callback(e),Kt(this,Sd,e),Kt(this,Ad,performance.now()),this.duration=t,this.playbackRate=s}}Ln=new WeakMap;Td=new WeakMap;Rn=new WeakMap;eo=new WeakMap;_d=new WeakMap;Ad=new WeakMap;Sd=new WeakMap;kn=new WeakMap;Rr=new WeakMap;Cd=new WeakMap;var h1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Et=(i,e,t)=>(h1(i,e,"read from private field"),t?t.call(i):e.get(i)),At=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Hi=(i,e,t,s)=>(h1(i,e,"write to private field"),e.set(i,t),t),Dt=(i,e,t)=>(h1(i,e,"access private method"),t),wn,zr,Tu,Eo,_u,xd,Bo,Ho,Dn,Mn,to,f1,L5,bf,Au,m1,Su,p1,Cu,g1,Tf,R5,Vo,xu,_f,k5;const Ex="video not loaded, unknown time.",yx=i=>{const e=i.range,t=po(+w5(i)),s=po(+i.mediaSeekableEnd),r=t&&s?`${t} of ${s}`:Ex;e.setAttribute("aria-valuetext",r)};function bx(i){return`
    ${ba.getTemplateHTML(i)}
    <style>
      :host {
        --media-box-border-radius: 4px;
        --media-box-padding-left: 10px;
        --media-box-padding-right: 10px;
        --media-preview-border-radius: var(--media-box-border-radius);
        --media-box-arrow-offset: var(--media-box-border-radius);
        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        --_preview-background: var(--media-preview-background, var(--_control-background));

        
        contain: layout;
      }

      #buffered {
        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #preview-rail,
      #current-rail {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 100%;
        pointer-events: none;
        will-change: transform;
      }

      [part~="box"] {
        width: min-content;
        
        position: absolute;
        bottom: 100%;
        flex-direction: column;
        align-items: center;
        transform: translateX(-50%);
      }

      [part~="current-box"] {
        display: var(--media-current-box-display, var(--media-box-display, flex));
        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
        visibility: hidden;
      }

      [part~="preview-box"] {
        display: var(--media-preview-box-display, var(--media-box-display, flex));
        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
        transition-property: var(--media-preview-transition-property, visibility, opacity);
        transition-duration: var(--media-preview-transition-duration-out, .25s);
        transition-delay: var(--media-preview-transition-delay-out, 0s);
        visibility: hidden;
        opacity: 0;
      }

      :host(:is([${_.MEDIA_PREVIEW_IMAGE}], [${_.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }

      @media (hover: hover) {
        :host(:is([${_.MEDIA_PREVIEW_IMAGE}], [${_.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
          transition-duration: var(--media-preview-transition-duration-in, .5s);
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
          opacity: 1;
        }
      }

      media-preview-thumbnail,
      ::slotted(media-preview-thumbnail) {
        visibility: hidden;
        
        transition: visibility 0s .25s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-thumbnail-background, var(--_preview-background));
        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
        max-width: var(--media-preview-thumbnail-max-width, 180px);
        max-height: var(--media-preview-thumbnail-max-height, 160px);
        min-width: var(--media-preview-thumbnail-min-width, 120px);
        min-height: var(--media-preview-thumbnail-min-height, 80px);
        border: var(--media-preview-thumbnail-border);
        border-radius: var(--media-preview-thumbnail-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
      }

      :host([${_.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
      :host([${_.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      @media (hover: hover) {
        :host([${_.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
        :host([${_.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
        }

        :host([${_.MEDIA_PREVIEW_TIME}]:hover) {
          --media-time-range-hover-display: block;
        }
      }

      media-preview-chapter-display,
      ::slotted(media-preview-chapter-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        visibility: hidden;
        
        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-chapter-background, var(--_preview-background));
        border-radius: var(--media-preview-chapter-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-chapter-padding, 3.5px 9px);
        margin: var(--media-preview-chapter-margin, 0 0 5px);
        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      }

      :host([${_.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
      :host([${_.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-chapter-border-radius, 0);
        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
        margin: var(--media-preview-chapter-margin, 0);
        min-width: 100%;
      }

      media-preview-chapter-display[${_.MEDIA_PREVIEW_CHAPTER}],
      ::slotted(media-preview-chapter-display[${_.MEDIA_PREVIEW_CHAPTER}]) {
        visibility: visible;
      }

      media-preview-chapter-display:not([aria-valuetext]),
      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
        display: none;
      }

      media-preview-time-display,
      ::slotted(media-preview-time-display),
      media-time-display,
      ::slotted(media-time-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        
        transition: min-width 0s, border-radius 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-time-background, var(--_preview-background));
        border-radius: var(--media-preview-time-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-time-padding, 3.5px 9px);
        margin: var(--media-preview-time-margin, 0);
        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50%)
        ));
      }

      :host([${_.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
      :host([${_.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-time-border-radius,
          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
        min-width: 100%;
      }

      :host([${_.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }

      [part~="arrow"],
      ::slotted([part~="arrow"]) {
        display: var(--media-box-arrow-display, inline-block);
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
        ));
        
        border-color: transparent;
        border-top-color: var(--media-box-arrow-background, var(--_control-background));
        border-width: var(--media-box-arrow-border-width,
          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
        border-style: solid;
        justify-content: center;
        height: 0;
      }
    </style>
    <div id="preview-rail">
      <slot name="preview" part="box preview-box">
        <media-preview-thumbnail>
          <template shadowrootmode="${dg.shadowRootOptions.mode}">
            ${dg.getTemplateHTML({})}
          </template>
        </media-preview-thumbnail>
        <media-preview-chapter-display></media-preview-chapter-display>
        <media-preview-time-display></media-preview-time-display>
        <slot name="preview-arrow"><div part="arrow"></div></slot>
      </slot>
    </div>
    <div id="current-rail">
      <slot name="current" part="box current-box">
        
      </slot>
    </div>
  `}const kl=(i,e=i.mediaCurrentTime)=>{const t=Number.isFinite(i.mediaSeekableStart)?i.mediaSeekableStart:0,s=Number.isFinite(i.mediaDuration)?i.mediaDuration:i.mediaSeekableEnd;if(Number.isNaN(s))return 0;const r=(e-t)/(s-t);return Math.max(0,Math.min(r,1))},w5=(i,e=i.range.valueAsNumber)=>{const t=Number.isFinite(i.mediaSeekableStart)?i.mediaSeekableStart:0,s=Number.isFinite(i.mediaDuration)?i.mediaDuration:i.mediaSeekableEnd;return Number.isNaN(s)?0:e*(s-t)+t};class v1 extends ba{constructor(){super(),At(this,Mn),At(this,f1),At(this,Au),At(this,Su),At(this,Cu),At(this,Tf),At(this,Vo),At(this,_f),At(this,wn,void 0),At(this,zr,void 0),At(this,Tu,void 0),At(this,Eo,void 0),At(this,_u,void 0),At(this,xd,void 0),At(this,Bo,void 0),At(this,Ho,void 0),At(this,Dn,void 0),At(this,bf,s=>{this.dragging||(U0(s)&&(this.range.valueAsNumber=s),this.updateBar())}),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),Hi(this,Tu,this.shadowRoot.querySelectorAll('[part~="box"]')),Hi(this,_u,this.shadowRoot.querySelector('[part~="preview-box"]')),Hi(this,xd,this.shadowRoot.querySelector('[part~="current-box"]'));const t=getComputedStyle(this);Hi(this,Bo,parseInt(t.getPropertyValue("--media-box-padding-left"))),Hi(this,Ho,parseInt(t.getPropertyValue("--media-box-padding-right"))),Hi(this,zr,new vx(this.range,Et(this,bf),60))}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PAUSED,_.MEDIA_DURATION,_.MEDIA_SEEKABLE,_.MEDIA_CURRENT_TIME,_.MEDIA_PREVIEW_IMAGE,_.MEDIA_PREVIEW_TIME,_.MEDIA_PREVIEW_CHAPTER,_.MEDIA_BUFFERED,_.MEDIA_PLAYBACK_RATE,_.MEDIA_LOADING,_.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",ie("seek")),Dt(this,Mn,to).call(this),Hi(this,wn,this.getRootNode()),(e=Et(this,wn))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),Dt(this,Mn,to).call(this),(e=Et(this,wn))==null||e.removeEventListener("transitionstart",this),Hi(this,wn,null)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),t!=s&&(e===_.MEDIA_CURRENT_TIME||e===_.MEDIA_PAUSED||e===_.MEDIA_ENDED||e===_.MEDIA_LOADING||e===_.MEDIA_DURATION||e===_.MEDIA_SEEKABLE?(Et(this,zr).update({start:kl(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),Dt(this,Mn,to).call(this),yx(this)):e===_.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===_.MEDIA_DURATION||e===_.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=Et(this,Dn),this.updateBar()))}get mediaChaptersCues(){return Et(this,Dn)}set mediaChaptersCues(e){var t;Hi(this,Dn,e),this.updateSegments((t=Et(this,Dn))==null?void 0:t.map(s=>({start:kl(this,s.startTime),end:kl(this,s.endTime)})))}get mediaPaused(){return xe(this,_.MEDIA_PAUSED)}set mediaPaused(e){Ie(this,_.MEDIA_PAUSED,e)}get mediaLoading(){return xe(this,_.MEDIA_LOADING)}set mediaLoading(e){Ie(this,_.MEDIA_LOADING,e)}get mediaDuration(){return je(this,_.MEDIA_DURATION)}set mediaDuration(e){rt(this,_.MEDIA_DURATION,e)}get mediaCurrentTime(){return je(this,_.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){rt(this,_.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return je(this,_.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){rt(this,_.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(_.MEDIA_BUFFERED);return e?e.split(" ").map(t=>t.split(":").map(s=>+s)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(_.MEDIA_BUFFERED);return}const t=e.map(s=>s.join(":")).join(" ");this.setAttribute(_.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(_.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(_.MEDIA_SEEKABLE);return}this.setAttribute(_.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaPreviewImage(){return Ye(this,_.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){Ze(this,_.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return je(this,_.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){rt(this,_.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return xe(this,_.MEDIA_ENDED)}set mediaEnded(e){Ie(this,_.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let s;if(this.mediaEnded)s=1;else{const n=this.mediaCurrentTime,[,a=this.mediaSeekableStart]=(e=t.find(([o,l])=>o<=n&&n<=l))!=null?e:[];s=kl(this,a)}const{style:r}=ht(this.shadowRoot,"#buffered");r.setProperty("width",`${s*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const t=ht(this.shadowRoot,"#current-rail"),s=ht(this.shadowRoot,'[part~="current-box"]'),r=Dt(this,Au,m1).call(this,Et(this,xd)),n=Dt(this,Su,p1).call(this,r,this.range.valueAsNumber),a=Dt(this,Cu,g1).call(this,r,this.range.valueAsNumber);t.style.transform=`translateX(${n})`,t.style.setProperty("--_range-width",`${r.range.width}`),s.style.setProperty("--_box-shift",`${a}`),s.style.setProperty("--_box-width",`${r.box.width}px`),s.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":Dt(this,_f,k5).call(this);break;case"pointermove":Dt(this,Tf,R5).call(this,e);break;case"pointerup":case"pointerleave":Dt(this,Vo,xu).call(this,null);break;case"transitionstart":Cs(e.target,this)&&setTimeout(()=>Dt(this,Mn,to).call(this),0);break}}}wn=new WeakMap;zr=new WeakMap;Tu=new WeakMap;Eo=new WeakMap;_u=new WeakMap;xd=new WeakMap;Bo=new WeakMap;Ho=new WeakMap;Dn=new WeakMap;Mn=new WeakSet;to=function(){Dt(this,f1,L5).call(this)?Et(this,zr).start():Et(this,zr).stop()};f1=new WeakSet;L5=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&PE(this)};bf=new WeakMap;Au=new WeakSet;m1=function(i){var e;const s=((e=this.getAttribute("bounds")?ya(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),r=this.range.getBoundingClientRect(),n=i.offsetWidth,a=-(r.left-s.left-n/2),o=s.right-r.left-n/2;return{box:{width:n,min:a,max:o},bounds:s,range:r}};Su=new WeakSet;p1=function(i,e){let t=`${e*100}%`;const{width:s,min:r,max:n}=i.box;if(!s)return t;if(Number.isNaN(r)||(t=`max(${`calc(1 / var(--_range-width) * 100 * ${r}% + var(--media-box-padding-left))`}, ${t})`),!Number.isNaN(n)){const o=`calc(1 / var(--_range-width) * 100 * ${n}% - var(--media-box-padding-right))`;t=`min(${t}, ${o})`}return t};Cu=new WeakSet;g1=function(i,e){const{width:t,min:s,max:r}=i.box,n=e*i.range.width;if(n<s+Et(this,Bo)){const a=i.range.left-i.bounds.left-Et(this,Bo);return`${n-t/2+a}px`}if(n>r-Et(this,Ho)){const a=i.bounds.right-i.range.right-Et(this,Ho);return`${n+t/2-a-i.range.width}px`}return 0};Tf=new WeakSet;R5=function(i){const e=[...Et(this,Tu)].some(u=>i.composedPath().includes(u));if(!this.dragging&&(e||!i.composedPath().includes(this))){Dt(this,Vo,xu).call(this,null);return}const t=this.mediaSeekableEnd;if(!t)return;const s=ht(this.shadowRoot,"#preview-rail"),r=ht(this.shadowRoot,'[part~="preview-box"]'),n=Dt(this,Au,m1).call(this,Et(this,_u));let a=(i.clientX-n.range.left)/n.range.width;a=Math.max(0,Math.min(1,a));const o=Dt(this,Su,p1).call(this,n,a),l=Dt(this,Cu,g1).call(this,n,a);s.style.transform=`translateX(${o})`,s.style.setProperty("--_range-width",`${n.range.width}`),r.style.setProperty("--_box-shift",`${l}`),r.style.setProperty("--_box-width",`${n.box.width}px`);const d=Math.round(Et(this,Eo))-Math.round(a*t);Math.abs(d)<1&&a>.01&&a<.99||(Hi(this,Eo,a*t),Dt(this,Vo,xu).call(this,Et(this,Eo)))};Vo=new WeakSet;xu=function(i){this.dispatchEvent(new M.CustomEvent(ee.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:i}))};_f=new WeakSet;k5=function(){Et(this,zr).stop();const i=w5(this);this.dispatchEvent(new M.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:i}))};v1.shadowRootOptions={mode:"open"};v1.getTemplateHTML=bx;M.customElements.get("media-time-range")||M.customElements.define("media-time-range",v1);const Tx=1,_x=i=>i.mediaMuted?0:i.mediaVolume,Ax=i=>`${Math.round(i*100)}%`;class Sx extends ba{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_VOLUME,_.MEDIA_MUTED,_.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,t=new M.CustomEvent(ee.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",ie("volume"))}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),(e===_.MEDIA_VOLUME||e===_.MEDIA_MUTED)&&(this.range.valueAsNumber=_x(this),this.range.setAttribute("aria-valuetext",Ax(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return je(this,_.MEDIA_VOLUME,Tx)}set mediaVolume(e){rt(this,_.MEDIA_VOLUME,e)}get mediaMuted(){return xe(this,_.MEDIA_MUTED)}set mediaMuted(e){Ie(this,_.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return Ye(this,_.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){Ze(this,_.MEDIA_VOLUME_UNAVAILABLE,e)}}M.customElements.get("media-volume-range")||M.customElements.define("media-volume-range",Sx);var D5=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},ve=(i,e,t)=>(D5(i,e,"read from private field"),t?t.call(i):e.get(i)),qi=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ys=(i,e,t,s)=>(D5(i,e,"write to private field"),e.set(i,t),t),Pn,Id,kr,io,$s,Bs,Hs,wr,On,Ld,vi;const fg=1,mg=0,Cx=1,xx={processCallback(i,e,t){if(t){for(const[s,r]of e)if(s in t){const n=t[s];typeof n=="boolean"&&r instanceof Ci&&typeof r.element[r.attributeName]=="boolean"?r.booleanValue=n:typeof n=="function"&&r instanceof Ci?r.element[r.attributeName]=n:r.value=n}}}};class rc extends M.DocumentFragment{constructor(e,t,s=xx){var r;super(),qi(this,Pn,void 0),qi(this,Id,void 0),this.append(e.content.cloneNode(!0)),ys(this,Pn,M5(this)),ys(this,Id,s),(r=s.createCallback)==null||r.call(s,this,ve(this,Pn),t),s.processCallback(this,ve(this,Pn),t)}update(e){ve(this,Id).processCallback(this,ve(this,Pn),e)}}Pn=new WeakMap;Id=new WeakMap;const M5=(i,e=[])=>{let t,s;for(const r of i.attributes||[])if(r.value.includes("{{")){const n=new Lx;for([t,s]of gg(r.value))if(!t)n.append(s);else{const a=new Ci(i,r.name,r.namespaceURI);n.append(a),e.push([s,a])}r.value=n.toString()}for(const r of i.childNodes)if(r.nodeType===fg&&!(r instanceof HTMLTemplateElement))M5(r,e);else{const n=r.data;if(r.nodeType===fg||n.includes("{{")){const a=[];if(n)for([t,s]of gg(n))if(!t)a.push(new Text(s));else{const o=new Ta(i);a.push(o),e.push([s,o])}else if(r instanceof HTMLTemplateElement){const o=new N5(i,r);a.push(o),e.push([o.expression,o])}r.replaceWith(...a.flatMap(o=>o.replacementNodes||[o]))}}return e},pg={},gg=i=>{let e="",t=0,s=pg[i],r=0,n;if(s)return s;for(s=[];n=i[r];r++)n==="{"&&i[r+1]==="{"&&i[r-1]!=="\\"&&i[r+2]&&++t==1?(e&&s.push([mg,e]),e="",r++):n==="}"&&i[r+1]==="}"&&i[r-1]!=="\\"&&!--t?(s.push([Cx,e.trim()]),e="",r++):e+=n||"";return e&&s.push([mg,(t>0?"{{":"")+e]),pg[i]=s},Ix=11;class P5{get value(){return""}set value(e){}toString(){return this.value}}const O5=new WeakMap;class Lx{constructor(){qi(this,kr,[])}[Symbol.iterator](){return ve(this,kr).values()}get length(){return ve(this,kr).length}item(e){return ve(this,kr)[e]}append(...e){for(const t of e)t instanceof Ci&&O5.set(t,this),ve(this,kr).push(t)}toString(){return ve(this,kr).join("")}}kr=new WeakMap;class Ci extends P5{constructor(e,t,s){super(),qi(this,wr),qi(this,io,""),qi(this,$s,void 0),qi(this,Bs,void 0),qi(this,Hs,void 0),ys(this,$s,e),ys(this,Bs,t),ys(this,Hs,s)}get attributeName(){return ve(this,Bs)}get attributeNamespace(){return ve(this,Hs)}get element(){return ve(this,$s)}get value(){return ve(this,io)}set value(e){ve(this,io)!==e&&(ys(this,io,e),!ve(this,wr,On)||ve(this,wr,On).length===1?e==null?ve(this,$s).removeAttributeNS(ve(this,Hs),ve(this,Bs)):ve(this,$s).setAttributeNS(ve(this,Hs),ve(this,Bs),e):ve(this,$s).setAttributeNS(ve(this,Hs),ve(this,Bs),ve(this,wr,On).toString()))}get booleanValue(){return ve(this,$s).hasAttributeNS(ve(this,Hs),ve(this,Bs))}set booleanValue(e){if(!ve(this,wr,On)||ve(this,wr,On).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}io=new WeakMap;$s=new WeakMap;Bs=new WeakMap;Hs=new WeakMap;wr=new WeakSet;On=function(){return O5.get(this)};class Ta extends P5{constructor(e,t){super(),qi(this,Ld,void 0),qi(this,vi,void 0),ys(this,Ld,e),ys(this,vi,t?[...t]:[new Text])}get replacementNodes(){return ve(this,vi)}get parentNode(){return ve(this,Ld)}get nextSibling(){return ve(this,vi)[ve(this,vi).length-1].nextSibling}get previousSibling(){return ve(this,vi)[0].previousSibling}get value(){return ve(this,vi).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const t=e.flat().flatMap(s=>s==null?[new Text]:s.forEach?[...s]:s.nodeType===Ix?[...s.childNodes]:s.nodeType?[s]:[new Text(s)]);t.length||t.push(new Text),ys(this,vi,Rx(ve(this,vi)[0].parentNode,ve(this,vi),t,this.nextSibling))}}Ld=new WeakMap;vi=new WeakMap;class N5 extends Ta{constructor(e,t){const s=t.getAttribute("directive")||t.getAttribute("type");let r=t.getAttribute("expression")||t.getAttribute(s)||"";r.startsWith("{{")&&(r=r.trim().slice(2,-2).trim()),super(e),this.expression=r,this.template=t,this.directive=s}}function Rx(i,e,t,s=null){let r=0,n,a,o,l=t.length,d=e.length;for(;r<l&&r<d&&e[r]==t[r];)r++;for(;r<l&&r<d&&t[l-1]==e[d-1];)s=t[--d,--l];if(r==d)for(;r<l;)i.insertBefore(t[r++],s);if(r==l)for(;r<d;)i.removeChild(e[r++]);else{for(n=e[r];r<l;)o=t[r++],a=n?n.nextSibling:s,n==o?n=a:r<l&&t[r]==a?(i.replaceChild(o,n),n=a):i.insertBefore(o,n);for(;n!=s;)a=n.nextSibling,i.removeChild(n),n=a}return t}const vg={string:i=>String(i)};class F5{constructor(e){this.template=e,this.state=void 0}}const Hr=new WeakMap,Vr=new WeakMap,Af={partial:(i,e)=>{e[i.expression]=new F5(i.template)},if:(i,e)=>{var t;if(U5(i.expression,e))if(Hr.get(i)!==i.template){Hr.set(i,i.template);const s=new rc(i.template,e,E1);i.replace(s),Vr.set(i,s)}else(t=Vr.get(i))==null||t.update(e);else i.replace(""),Hr.delete(i),Vr.delete(i)}},kx=Object.keys(Af),E1={processCallback(i,e,t){var s,r;if(t)for(const[n,a]of e){if(a instanceof N5){if(!a.directive){const l=kx.find(d=>a.template.hasAttribute(d));l&&(a.directive=l,a.expression=a.template.getAttribute(l))}(s=Af[a.directive])==null||s.call(Af,a,t);continue}let o=U5(n,t);if(o instanceof F5){Hr.get(a)!==o.template?(Hr.set(a,o.template),o=new rc(o.template,o.state,E1),a.value=o,Vr.set(a,o)):(r=Vr.get(a))==null||r.update(o.state);continue}o?(a instanceof Ci&&a.attributeName.startsWith("aria-")&&(o=String(o)),a instanceof Ci?typeof o=="boolean"?a.booleanValue=o:typeof o=="function"?a.element[a.attributeName]=o:a.value=o:(a.value=o,Hr.delete(a),Vr.delete(a))):a instanceof Ci?a.value=void 0:(a.value=void 0,Hr.delete(a),Vr.delete(a))}}},Eg={"!":i=>!i,"!!":i=>!!i,"==":(i,e)=>i==e,"!=":(i,e)=>i!=e,">":(i,e)=>i>e,">=":(i,e)=>i>=e,"<":(i,e)=>i<e,"<=":(i,e)=>i<=e,"??":(i,e)=>i??e,"|":(i,e)=>{var t;return(t=vg[e])==null?void 0:t.call(vg,i)}};function wx(i){return Dx(i,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function U5(i,e={}){var t,s,r,n,a,o,l;const d=wx(i);if(d.length===0||d.some(({type:u})=>!u))return wa(i);if(((t=d[0])==null?void 0:t.token)===">"){const u=e[(s=d[1])==null?void 0:s.token];if(!u)return wa(i);const c={...e};u.state=c;const h=d.slice(2);for(let f=0;f<h.length;f+=3){const m=(r=h[f])==null?void 0:r.token,p=(n=h[f+1])==null?void 0:n.token,g=(a=h[f+2])==null?void 0:a.token;m&&p==="="&&(c[m]=Da(g,e))}return u}if(d.length===1)return wl(d[0])?Da(d[0].token,e):wa(i);if(d.length===2){const u=(o=d[0])==null?void 0:o.token,c=Eg[u];if(!c||!wl(d[1]))return wa(i);const h=Da(d[1].token,e);return c(h)}if(d.length===3){const u=(l=d[1])==null?void 0:l.token,c=Eg[u];if(!c||!wl(d[0])||!wl(d[2]))return wa(i);const h=Da(d[0].token,e);if(u==="|")return c(h,d[2].token);const f=Da(d[2].token,e);return c(h,f)}}function wa(i){return console.warn(`Warning: invalid expression \`${i}\``),!1}function wl({type:i}){return["number","boolean","string","param"].includes(i)}function Da(i,e){const t=i[0],s=i.slice(-1);return i==="true"||i==="false"?i==="true":t===s&&["'",'"'].includes(t)?i.slice(1,-1):SE(i)?parseFloat(i):e[i]}function Dx(i,e){let t,s,r;const n=[];for(;i;){r=null,t=i.length;for(const a in e)s=e[a].exec(i),s&&s.index<t&&(r={token:s[0],type:a,matches:s.slice(1)},t=s.index);t&&n.push({token:i.substr(0,t),type:void 0}),r&&n.push(r),i=i.substr(t+(r?r.token.length:0))}return n}var y1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Sf=(i,e,t)=>(y1(i,e,"read from private field"),t?t.call(i):e.get(i)),Ma=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Gr=(i,e,t,s)=>(y1(i,e,"write to private field"),e.set(i,t),t),Yc=(i,e,t)=>(y1(i,e,"access private method"),t),Xn,Rd,Jn,Cf,$5,kd,xf;const Zc={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},B5=bt.createElement("template");B5.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class nc extends M.HTMLElement{constructor(){super(),Ma(this,Cf),Ma(this,kd),Ma(this,Xn,void 0),Ma(this,Rd,void 0),Ma(this,Jn,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(t=>{var s;this.mediaController&&!((s=this.mediaController)!=null&&s.breakpointsComputed)||t.some(r=>{const n=r.target;return n===this?!0:n.localName!=="media-controller"?!1:!!(Zc[r.attributeName]||r.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(As.BREAKPOINTS_COMPUTED,this.render),Yc(this,Cf,$5).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=Sf(this,Xn))!=null?e:this.constructor.template}set template(e){Gr(this,Jn,null),Gr(this,Xn,e),this.createRenderer()}get props(){var e,t,s;const r=[...Array.from((t=(e=this.mediaController)==null?void 0:e.attributes)!=null?t:[]).filter(({name:a})=>Zc[a]||a.startsWith("breakpoint")),...Array.from(this.attributes)],n={};for(const a of r){const o=(s=Zc[a.name])!=null?s:qA(a.name);let{value:l}=a;l!=null?(SE(l)&&(l=parseFloat(l)),n[o]=l===""?!0:l):n[o]=!1}return n}attributeChangedCallback(e,t,s){e==="template"&&t!=s&&Yc(this,kd,xf).call(this)}connectedCallback(){Yc(this,kd,xf).call(this)}createRenderer(){this.template&&this.template!==Sf(this,Rd)&&(Gr(this,Rd,this.template),this.renderer=new rc(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(B5.content.cloneNode(!0),this.renderer))}render(){var e;(e=this.renderer)==null||e.update(this.props)}}Xn=new WeakMap;Rd=new WeakMap;Jn=new WeakMap;Cf=new WeakSet;$5=function(i){if(Object.prototype.hasOwnProperty.call(this,i)){const e=this[i];delete this[i],this[i]=e}};kd=new WeakSet;xf=function(){var i;const e=this.getAttribute("template");if(!e||e===Sf(this,Jn))return;const t=this.getRootNode(),s=(i=t==null?void 0:t.getElementById)==null?void 0:i.call(t,e);if(s){Gr(this,Jn,e),Gr(this,Xn,s),this.createRenderer();return}Mx(e)&&(Gr(this,Jn,e),Px(e).then(r=>{const n=bt.createElement("template");n.innerHTML=r,Gr(this,Xn,n),this.createRenderer()}).catch(console.error))};nc.observedAttributes=["template"];nc.processor=E1;function Mx(i){if(!/^(\/|\.\/|https?:\/\/)/.test(i))return!1;const e=/^https?:\/\//.test(i)?void 0:location.origin;try{new URL(i,e)}catch{return!1}return!0}async function Px(i){const e=await fetch(i);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}M.customElements.get("media-theme")||M.customElements.define("media-theme",nc);function Ox({anchor:i,floating:e,placement:t}){const s=Nx({anchor:i,floating:e}),{x:r,y:n}=Ux(s,t);return{x:r,y:n}}function Nx({anchor:i,floating:e}){return{anchor:Fx(i,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function Fx(i,e){var t;const s=i.getBoundingClientRect(),r=(t=e==null?void 0:e.getBoundingClientRect())!=null?t:{x:0,y:0};return{x:s.x-r.x,y:s.y-r.y,width:s.width,height:s.height}}function Ux({anchor:i,floating:e},t){const s=$x(t)==="x"?"y":"x",r=s==="y"?"height":"width",n=H5(t),a=i.x+i.width/2-e.width/2,o=i.y+i.height/2-e.height/2,l=i[r]/2-e[r]/2;let d;switch(n){case"top":d={x:a,y:i.y-e.height};break;case"bottom":d={x:a,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:o};break;case"left":d={x:i.x-e.width,y:o};break;default:d={x:i.x,y:i.y}}switch(t.split("-")[1]){case"start":d[s]-=l;break;case"end":d[s]+=l;break}return d}function H5(i){return i.split("-")[0]}function $x(i){return["top","bottom"].includes(H5(i))?"y":"x"}class b1 extends Event{constructor({action:e="auto",relatedTarget:t,...s}){super("invoke",s),this.action=e,this.relatedTarget=t}}class Bx extends Event{constructor({newState:e,oldState:t,...s}){super("toggle",s),this.newState=e,this.oldState=t}}var T1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Re=(i,e,t)=>(T1(i,e,"read from private field"),t?t.call(i):e.get(i)),$e=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Vi=(i,e,t,s)=>(T1(i,e,"write to private field"),e.set(i,t),t),Ke=(i,e,t)=>(T1(i,e,"access private method"),t),Gi,Qr,fr,wd,Dd,Xr,Go,If,V5,Iu,Md,Lf,Rf,G5,kf,K5,wf,W5,ea,ta,ia,Ko,Lu,_1,Df,q5,A1,j5,Mf,Y5,S1,Z5,Pf,z5,Of,Q5,yo,Ru,Nf,X5,bo,ku,Pd,Ff;function va({type:i,text:e,value:t,checked:s}){const r=bt.createElement("media-chrome-menu-item");r.type=i,r.part.add("menu-item"),r.part.add(i),r.value=t,r.checked=s;const n=bt.createElement("span");return n.textContent=e,r.append(n),r}function Jr(i,e){let t=i.querySelector(`:scope > [slot="${e}"]`);if((t==null?void 0:t.nodeName)=="SLOT"&&(t=t.assignedElements({flatten:!0})[0]),t)return t=t.cloneNode(!0),t;const s=i.shadowRoot.querySelector(`[name="${e}"] > svg`);return s?s.cloneNode(!0):""}function Hx(i){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));
        border-radius: var(--media-menu-border-radius);
        border: var(--media-menu-border, none);
        display: var(--media-menu-display, inline-flex);
        transition: var(--media-menu-transition-in,
          visibility 0s,
          opacity .2s ease-out,
          transform .15s ease-out,
          left .2s ease-in-out,
          min-width .2s ease-in-out,
          min-height .2s ease-in-out
        ) !important;
        
        visibility: var(--media-menu-visibility, visible);
        opacity: var(--media-menu-opacity, 1);
        max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
        transform: var(--media-menu-transform-in, translateY(0) scale(1));
        flex-direction: column;
        
        min-height: 0;
        position: relative;
        bottom: var(--_menu-bottom);
        box-sizing: border-box;
      } 

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([hidden]) {
        transition: var(--media-menu-transition-out,
          visibility .15s ease-in,
          opacity .15s ease-in,
          transform .15s ease-in
        ) !important;
        visibility: var(--media-menu-hidden-visibility, hidden);
        opacity: var(--media-menu-hidden-opacity, 0);
        max-height: var(--media-menu-hidden-max-height,
          var(--media-menu-max-height, var(--_menu-max-height, 300px)));
        transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
        pointer-events: none;
      }

      :host([slot="submenu"]) {
        background: none;
        width: 100%;
        min-height: 100%;
        position: absolute;
        bottom: 0;
        right: -100%;
      }

      #container {
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: transform .2s ease-out;
        transform: translate(0, 0);
      }

      #container.has-expanded {
        transition: transform .2s ease-in;
        transform: translate(-100%, 0);
      }

      button {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        outline: inherit;
        display: inline-flex;
        align-items: center;
      }

      slot[name="header"][hidden] {
        display: none;
      }

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .7em;
        border-bottom: 1px solid rgb(255 255 255 / .25);
        cursor: var(--media-cursor, default);
      }

      slot[name="header"] > button[part~="back"],
      slot[name="header"]::slotted(button[part~="back"]) {
        cursor: var(--media-cursor, pointer);
      }

      svg[part~="back"] {
        height: var(--media-menu-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
        margin-right: .5ch;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap);
        flex-direction: var(--media-menu-flex-direction, column);
        overflow: var(--media-menu-overflow, hidden auto);
        display: flex;
        min-height: 0;
      }

      :host([role="menu"]) slot:not([name]) {
        padding-block: .4em;
      }

      slot:not([name])::slotted([role="menu"]) {
        background: none;
      }

      media-chrome-menu-item > span {
        margin-right: .5ch;
        max-width: var(--media-menu-item-max-width);
        text-overflow: ellipsis;
        overflow: hidden;
      }
    </style>
    <style id="layout-row" media="width:0">

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .5em;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap, .25em);
        flex-direction: var(--media-menu-flex-direction, row);
        padding-inline: .5em;
      }

      media-chrome-menu-item {
        padding: .3em .5em;
      }

      media-chrome-menu-item[aria-checked="true"] {
        background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
      }

      
      media-chrome-menu-item::part(checked-indicator) {
        display: var(--media-menu-item-checked-indicator-display, none);
      }
    </style>
    <div id="container">
      <slot name="header" hidden>
        <button part="back button" aria-label="Back to previous menu">
          <slot name="back-icon">
            <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
              <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
            </svg>
          </slot>
          <slot name="title"></slot>
        </button>
      </slot>
      <slot></slot>
    </div>
    <slot name="checked-indicator" hidden></slot>
  `}const Tr={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class rs extends M.HTMLElement{constructor(){if(super(),$e(this,If),$e(this,Md),$e(this,Rf),$e(this,kf),$e(this,wf),$e(this,ia),$e(this,Lu),$e(this,Df),$e(this,A1),$e(this,Mf),$e(this,S1),$e(this,Pf),$e(this,Of),$e(this,yo),$e(this,Nf),$e(this,bo),$e(this,Pd),$e(this,Gi,null),$e(this,Qr,null),$e(this,fr,null),$e(this,wd,new Set),$e(this,Dd,void 0),$e(this,Xr,!1),$e(this,Go,null),$e(this,Iu,()=>{const e=Re(this,wd),t=new Set(this.items);for(const s of e)t.has(s)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:s}));for(const s of t)e.has(s)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:s}));Vi(this,wd,t)}),$e(this,ea,()=>{Ke(this,ia,Ko).call(this),Ke(this,Lu,_1).call(this,!1)}),$e(this,ta,()=>{Ke(this,ia,Ko).call(this)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Vi(this,Dd,new MutationObserver(Re(this,Iu))),Re(this,Dd).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[Tr.DISABLED,Tr.HIDDEN,Tr.STYLE,Tr.ANCHOR,we.MEDIA_CONTROLLER]}static formatMenuItemText(e,t){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":Ke(this,If,V5).call(this,e);break;case"invoke":Ke(this,Rf,G5).call(this,e);break;case"click":Ke(this,Df,q5).call(this,e);break;case"toggle":Ke(this,Mf,Y5).call(this,e);break;case"focusout":Ke(this,Pf,z5).call(this,e);break;case"keydown":Ke(this,Of,Q5).call(this,e);break}}connectedCallback(){var e,t;Vi(this,Go,OE(this.shadowRoot,":host")),Ke(this,Md,Lf).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Vi(this,Gi,Qh(this)),(t=(e=Re(this,Gi))==null?void 0:e.associateElement)==null||t.call(e,this),this.hidden||(fa(Wo(this),Re(this,ea)),fa(this,Re(this,ta)))}disconnectedCallback(){var e,t;ma(Wo(this),Re(this,ea)),ma(this,Re(this,ta)),this.disable(),(t=(e=Re(this,Gi))==null?void 0:e.unassociateElement)==null||t.call(e,this),Vi(this,Gi,null)}attributeChangedCallback(e,t,s){var r,n,a,o;e===Tr.HIDDEN&&s!==t?(Re(this,Xr)||Vi(this,Xr,!0),this.hidden?Ke(this,wf,W5).call(this):Ke(this,kf,K5).call(this),this.dispatchEvent(new Bx({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===we.MEDIA_CONTROLLER?(t&&((n=(r=Re(this,Gi))==null?void 0:r.unassociateElement)==null||n.call(r,this),Vi(this,Gi,null)),s&&this.isConnected&&(Vi(this,Gi,Qh(this)),(o=(a=Re(this,Gi))==null?void 0:a.associateElement)==null||o.call(a,this))):e===Tr.DISABLED&&s!==t?s==null?this.enable():this.disable():e===Tr.STYLE&&s!==t&&Ke(this,Md,Lf).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=ju(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Vx)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,t;return(t=(e=this.checkedItems[0])==null?void 0:e.value)!=null?t:""}set value(e){const t=this.items.find(s=>s.value===e);t&&Ke(this,Pd,Ff).call(this,t)}focus(){if(Vi(this,Qr,B0()),this.items.length){Ke(this,bo,ku).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e==null||e.focus()}handleSelect(e){var t;const s=Ke(this,yo,Ru).call(this,e);s&&(Ke(this,Pd,Ff).call(this,s,s.type==="checkbox"),Re(this,fr)&&!this.hidden&&((t=Re(this,Qr))==null||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,s;const{key:r}=e,n=this.items,a=(s=(t=Ke(this,yo,Ru).call(this,e))!=null?t:Ke(this,Nf,X5).call(this))!=null?s:n[0],o=n.indexOf(a);let l=Math.max(0,o);r==="ArrowDown"?l++:r==="ArrowUp"?l--:e.key==="Home"?l=0:e.key==="End"&&(l=n.length-1),l<0&&(l=n.length-1),l>n.length-1&&(l=0),Ke(this,bo,ku).call(this,n[l]),n[l].focus()}}Gi=new WeakMap;Qr=new WeakMap;fr=new WeakMap;wd=new WeakMap;Dd=new WeakMap;Xr=new WeakMap;Go=new WeakMap;If=new WeakSet;V5=function(i){const e=i.target;for(const t of e.assignedNodes({flatten:!0}))t.nodeType===3&&t.textContent.trim()===""&&t.remove();if(["header","title"].includes(e.name)){const t=this.shadowRoot.querySelector('slot[name="header"]');t.hidden=e.assignedNodes().length===0}e.name||Re(this,Iu).call(this)};Iu=new WeakMap;Md=new WeakSet;Lf=function(){var i;const e=this.shadowRoot.querySelector("#layout-row"),t=(i=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:i.trim();e.setAttribute("media",t==="row"?"":"width:0")};Rf=new WeakSet;G5=function(i){Vi(this,fr,i.relatedTarget),Cs(this,i.relatedTarget)||(this.hidden=!this.hidden)};kf=new WeakSet;K5=function(){var i;(i=Re(this,fr))==null||i.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),fa(Wo(this),Re(this,ea)),fa(this,Re(this,ta))};wf=new WeakSet;W5=function(){var i;(i=Re(this,fr))==null||i.setAttribute("aria-expanded","false"),ma(Wo(this),Re(this,ea)),ma(this,Re(this,ta))};ea=new WeakMap;ta=new WeakMap;ia=new WeakSet;Ko=function(i){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:t}=Ox({anchor:this.anchorElement,floating:this,placement:"top-start"});i??(i=this.offsetWidth);const r=Wo(this).getBoundingClientRect(),n=r.width-e-i,a=r.height-t-this.offsetHeight,{style:o}=Re(this,Go);o.setProperty("position","absolute"),o.setProperty("right",`${Math.max(0,n)}px`),o.setProperty("--_menu-bottom",`${a}px`);const l=getComputedStyle(this),u=o.getPropertyValue("--_menu-bottom")===l.bottom?a:parseFloat(l.bottom),c=r.height-u-parseFloat(l.marginBottom);this.style.setProperty("--_menu-max-height",`${c}px`)};Lu=new WeakSet;_1=function(i){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),t=e==null?void 0:e.querySelector('[role="menu"]'),{style:s}=Re(this,Go);if(i||s.setProperty("--media-menu-transition-in","none"),t){const r=t.offsetHeight,n=Math.max(t.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${n}px`),this.style.setProperty("min-height",`${r}px`),Ke(this,ia,Ko).call(this,n)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),Ke(this,ia,Ko).call(this);s.removeProperty("--media-menu-transition-in")};Df=new WeakSet;q5=function(i){var e;if(i.stopPropagation(),i.composedPath().includes(Re(this,A1,j5))){(e=Re(this,Qr))==null||e.focus(),this.hidden=!0;return}const t=Ke(this,yo,Ru).call(this,i);!t||t.hasAttribute("disabled")||(Ke(this,bo,ku).call(this,t),this.handleSelect(i))};A1=new WeakSet;j5=function(){var i;return(i=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:i.find(t=>t.matches('button[part~="back"]'))};Mf=new WeakSet;Y5=function(i){if(i.target===this)return;Ke(this,S1,Z5).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const t of e)t.invokeTargetElement!=i.target&&i.newState=="open"&&t.getAttribute("aria-expanded")=="true"&&!t.invokeTargetElement.hidden&&t.invokeTargetElement.dispatchEvent(new b1({relatedTarget:t}));for(const t of e)t.setAttribute("aria-expanded",`${!t.submenuElement.hidden}`);Ke(this,Lu,_1).call(this,!0)};S1=new WeakSet;Z5=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};Pf=new WeakSet;z5=function(i){var e;Cs(this,i.relatedTarget)||(Re(this,Xr)&&((e=Re(this,Qr))==null||e.focus()),Re(this,fr)&&Re(this,fr)!==i.relatedTarget&&!this.hidden&&(this.hidden=!0))};Of=new WeakSet;Q5=function(i){var e,t,s,r,n;const{key:a,ctrlKey:o,altKey:l,metaKey:d}=i;if(!(o||l||d)&&this.keysUsed.includes(a))if(i.preventDefault(),i.stopPropagation(),a==="Tab"){if(Re(this,Xr)){this.hidden=!0;return}i.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(r=(s=this.nextElementSibling)==null?void 0:s.focus)==null||r.call(s),this.blur()}else a==="Escape"?((n=Re(this,Qr))==null||n.focus(),Re(this,Xr)&&(this.hidden=!0)):a==="Enter"||a===" "?this.handleSelect(i):this.handleMove(i)};yo=new WeakSet;Ru=function(i){return i.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};Nf=new WeakSet;X5=function(){return this.items.find(i=>i.tabIndex===0)};bo=new WeakSet;ku=function(i){for(const e of this.items)e.tabIndex=e===i?0:-1};Pd=new WeakSet;Ff=function(i,e){const t=[...this.checkedItems];i.type==="radio"&&this.radioGroupItems.forEach(s=>s.checked=!1),e?i.checked=!i.checked:i.checked=!0,this.checkedItems.some((s,r)=>s!=t[r])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};rs.shadowRootOptions={mode:"open"};rs.getTemplateHTML=Hx;function Vx(i){return["menuitem","menuitemradio","menuitemcheckbox"].includes(i==null?void 0:i.role)}function Wo(i){var e;return(e=i.getAttribute("bounds")?ya(i,`#${i.getAttribute("bounds")}`):hi(i)||i.parentElement)!=null?e:i}M.customElements.get("media-chrome-menu")||M.customElements.define("media-chrome-menu",rs);var C1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Xi=(i,e,t)=>(C1(i,e,"read from private field"),t?t.call(i):e.get(i)),ds=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},zc=(i,e,t,s)=>(C1(i,e,"write to private field"),e.set(i,t),t),ji=(i,e,t)=>(C1(i,e,"access private method"),t),Od,To,Uf,J5,x1,e3,I1,t3,Ji,Ea,qo,$f,i3,Nd,Bf;function Gx(i){return`
    <style>
      :host {
        transition: var(--media-menu-item-transition,
          background .15s linear,
          opacity .2s ease-in-out
        );
        outline: var(--media-menu-item-outline, 0);
        outline-offset: var(--media-menu-item-outline-offset, -1px);
        cursor: var(--media-cursor, pointer);
        display: flex;
        align-items: center;
        align-self: stretch;
        justify-self: stretch;
        white-space: nowrap;
        white-space-collapse: collapse;
        text-wrap: nowrap;
        padding: .4em .8em .4em 1em;
      }

      :host(:focus-visible) {
        box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: var(--media-menu-item-hover-outline, 0);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host(:hover) {
        cursor: var(--media-cursor, pointer);
        background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
        outline: var(--media-menu-item-hover-outline);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host([aria-checked="true"]) {
        background: var(--media-menu-item-checked-background);
      }

      :host([hidden]) {
        display: none;
      }

      :host([disabled]) {
        pointer-events: none;
        color: rgba(255, 255, 255, .3);
      }

      slot:not([name]) {
        width: 100%;
      }

      slot:not([name="submenu"]) {
        display: inline-flex;
        align-items: center;
        transition: inherit;
        opacity: var(--media-menu-item-opacity, 1);
      }

      slot[name="description"] {
        justify-content: end;
      }

      slot[name="description"] > span {
        display: inline-block;
        margin-inline: 1em .2em;
        max-width: var(--media-menu-item-description-max-width, 100px);
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: .8em;
        font-weight: 400;
        text-align: right;
        position: relative;
        top: .04em;
      }

      slot[name="checked-indicator"] {
        display: none;
      }

      :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
        display: var(--media-menu-item-checked-indicator-display, inline-block);
      }

      
      svg, img, ::slotted(svg), ::slotted(img) {
        height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
      }

      
      [part~="indicator"],
      ::slotted([part~="indicator"]) {
        fill: var(--media-menu-item-indicator-fill,
          var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
        height: var(--media-menu-item-indicator-height, 1.25em);
        margin-right: .5ch;
      }

      [part~="checked-indicator"] {
        visibility: hidden;
      }

      :host([aria-checked="true"]) [part~="checked-indicator"] {
        visibility: visible;
      }
    </style>
    <slot name="checked-indicator">
      <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
        <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
      </svg>
    </slot>
    <slot name="prefix"></slot>
    <slot></slot>
    <slot name="description"></slot>
    <slot name="suffix">
      ${this.getSuffixSlotInnerHTML(i)}
    </slot>
    <slot name="submenu"></slot>
  `}function Kx(i){return""}const si={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class _a extends M.HTMLElement{constructor(){if(super(),ds(this,Uf),ds(this,x1),ds(this,I1),ds(this,Ea),ds(this,$f),ds(this,Nd),ds(this,Od,!1),ds(this,To,void 0),ds(this,Ji,()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const s=this.shadowRoot.querySelector('slot[name="description"]'),r=(e=this.submenuElement.checkedItems)==null?void 0:e[0],n=(t=r==null?void 0:r.dataset.description)!=null?t:r==null?void 0:r.text,a=bt.createElement("span");a.textContent=n??"",s.replaceChildren(a)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=Qt(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[si.TYPE,si.DISABLED,si.CHECKED,si.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),Pa(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":ji(this,Uf,J5).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":ji(this,$f,i3).call(this,e);break;case"keyup":ji(this,Ea,qo).call(this,e);break}}attributeChangedCallback(e,t,s){e===si.CHECKED&&Pa(this)&&!Xi(this,Od)?this.setAttribute("aria-checked",s!=null?"true":"false"):e===si.TYPE&&s!==t?this.role="menuitem"+s:e===si.DISABLED&&s!==t&&(s==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(si.DISABLED)||this.enable(),this.role="menuitem"+this.type,zc(this,To,Hf(this,this.parentNode)),ji(this,Nd,Bf).call(this)}disconnectedCallback(){this.disable(),ji(this,Nd,Bf).call(this),zc(this,To,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=ju(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(si.TYPE))!=null?e:""}set type(e){this.setAttribute(si.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(si.VALUE))!=null?e:this.text}set value(e){this.setAttribute(si.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(Pa(this))return this.getAttribute("aria-checked")==="true"}set checked(e){Pa(this)&&(zc(this,Od,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){Pa(this)||this.invokeTargetElement&&Cs(this,e.target)&&this.invokeTargetElement.dispatchEvent(new b1({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}Od=new WeakMap;To=new WeakMap;Uf=new WeakSet;J5=function(i){const e=i.target;if(!(e!=null&&e.name))for(const s of e.assignedNodes({flatten:!0}))s instanceof Text&&s.textContent.trim()===""&&s.remove();e.name==="submenu"&&(this.submenuElement?ji(this,x1,e3).call(this):ji(this,I1,t3).call(this))};x1=new WeakSet;e3=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",Xi(this,Ji)),this.submenuElement.addEventListener("addmenuitem",Xi(this,Ji)),this.submenuElement.addEventListener("removemenuitem",Xi(this,Ji)),Xi(this,Ji).call(this)};I1=new WeakSet;t3=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",Xi(this,Ji)),this.submenuElement.removeEventListener("addmenuitem",Xi(this,Ji)),this.submenuElement.removeEventListener("removemenuitem",Xi(this,Ji)),Xi(this,Ji).call(this)};Ji=new WeakMap;Ea=new WeakSet;qo=function(i){const{key:e}=i;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",ji(this,Ea,qo));return}this.handleClick(i)};$f=new WeakSet;i3=function(i){const{metaKey:e,altKey:t,key:s}=i;if(e||t||!this.keysUsed.includes(s)){this.removeEventListener("keyup",ji(this,Ea,qo));return}this.addEventListener("keyup",ji(this,Ea,qo),{once:!0})};Nd=new WeakSet;Bf=function(){var i;const e=(i=Xi(this,To))==null?void 0:i.radioGroupItems;if(!e)return;let t=e.filter(s=>s.getAttribute("aria-checked")==="true").pop();t||(t=e[0]);for(const s of e)s.setAttribute("aria-checked","false");t==null||t.setAttribute("aria-checked","true")};_a.shadowRootOptions={mode:"open"};_a.getTemplateHTML=Gx;_a.getSuffixSlotInnerHTML=Kx;function Pa(i){return i.type==="radio"||i.type==="checkbox"}function Hf(i,e){if(!i)return null;const{host:t}=i.getRootNode();return!e&&t?Hf(i,t):e!=null&&e.items?e:Hf(e,e==null?void 0:e.parentNode)}M.customElements.get("media-chrome-menu-item")||M.customElements.define("media-chrome-menu-item",_a);function Wx(i){return`
    ${rs.getTemplateHTML(i)}
    <style>
      :host {
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
        min-width: var(--media-settings-menu-min-width, 170px);
        border-radius: 2px 2px 0 0;
        overflow: hidden;
      }

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([role="menu"]) {
        
        justify-content: end;
      }

      slot:not([name]) {
        justify-content: var(--media-settings-menu-justify-content);
        flex-direction: var(--media-settings-menu-flex-direction, column);
        overflow: visible;
      }

      #container.has-expanded {
        --media-settings-menu-item-opacity: 0;
      }
    </style>
  `}class s3 extends rs{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:hi(this).querySelector("media-settings-menu-button")}}s3.getTemplateHTML=Wx;M.customElements.get("media-settings-menu")||M.customElements.define("media-settings-menu",s3);function qx(i){return`
    ${_a.getTemplateHTML.call(this,i)}
    <style>
      slot:not([name="submenu"]) {
        opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
      }

      :host([aria-expanded="true"]:hover) {
        background: transparent;
      }
    </style>
  `}function jx(i){return`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `}class ac extends _a{}ac.shadowRootOptions={mode:"open"};ac.getTemplateHTML=qx;ac.getSuffixSlotInnerHTML=jx;M.customElements.get("media-settings-menu-item")||M.customElements.define("media-settings-menu-item",ac);class Aa extends Rt{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=ju(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new b1({relatedTarget:this}))}}M.customElements.get("media-chrome-menu-button")||M.customElements.define("media-chrome-menu-button",Aa);function Yx(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
      </svg>
    </slot>
  `}function Zx(){return ie("Settings")}class L1 extends Aa{static get observedAttributes(){return[...super.observedAttributes,"target"]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",ie("settings"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:hi(this).querySelector("media-settings-menu")}}L1.getSlotTemplateHTML=Yx;L1.getTooltipContentHTML=Zx;M.customElements.get("media-settings-menu-button")||M.customElements.define("media-settings-menu-button",L1);var R1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},r3=(i,e,t)=>(R1(i,e,"read from private field"),t?t.call(i):e.get(i)),Dl=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Vf=(i,e,t,s)=>(R1(i,e,"write to private field"),e.set(i,t),t),Ml=(i,e,t)=>(R1(i,e,"access private method"),t),so,wu,Fd,Gf,Ud,Kf;class zx extends rs{constructor(){super(...arguments),Dl(this,Fd),Dl(this,Ud),Dl(this,so,[]),Dl(this,wu,void 0)}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_AUDIO_TRACK_LIST,_.MEDIA_AUDIO_TRACK_ENABLED,_.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_AUDIO_TRACK_ENABLED&&t!==s?this.value=s:e===_.MEDIA_AUDIO_TRACK_LIST&&t!==s&&(Vf(this,so,GA(s??"")),Ml(this,Fd,Gf).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ml(this,Ud,Kf))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ml(this,Ud,Kf))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=hi(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return r3(this,so)}set mediaAudioTrackList(e){Vf(this,so,e),Ml(this,Fd,Gf).call(this)}get mediaAudioTrackEnabled(){var e;return(e=Ye(this,_.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Ze(this,_.MEDIA_AUDIO_TRACK_ENABLED,e)}}so=new WeakMap;wu=new WeakMap;Fd=new WeakSet;Gf=function(){if(r3(this,wu)===JSON.stringify(this.mediaAudioTrackList))return;Vf(this,wu,JSON.stringify(this.mediaAudioTrackList));const i=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const e of i){const t=this.formatMenuItemText(e.label,e),s=va({type:"radio",text:t,value:`${e.id}`,checked:e.enabled});s.prepend(Jr(this,"checked-indicator")),this.defaultSlot.append(s)}};Ud=new WeakSet;Kf=function(){if(this.value==null)return;const i=new M.CustomEvent(ee.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(i)};M.customElements.get("media-audio-track-menu")||M.customElements.define("media-audio-track-menu",zx);const Qx=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`;function Xx(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${Qx}</slot>
  `}function Jx(){return ie("Audio")}class k1 extends Aa{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_AUDIO_TRACK_ENABLED,_.MEDIA_AUDIO_TRACK_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",ie("Audio"))}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=hi(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=Ye(this,_.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){Ze(this,_.MEDIA_AUDIO_TRACK_ENABLED,e)}}k1.getSlotTemplateHTML=Xx;k1.getTooltipContentHTML=Jx;M.customElements.get("media-audio-track-menu-button")||M.customElements.define("media-audio-track-menu-button",k1);var w1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},eI=(i,e,t)=>(w1(i,e,"read from private field"),e.get(i)),Qc=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},tI=(i,e,t,s)=>(w1(i,e,"write to private field"),e.set(i,t),t),Xc=(i,e,t)=>(w1(i,e,"access private method"),t),Du,Wf,n3,$d,qf;const iI=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`;function sI(i){return`
    ${rs.getTemplateHTML(i)}
    <slot name="captions-indicator" hidden>${iI}</slot>
  `}class a3 extends rs{constructor(){super(...arguments),Qc(this,Wf),Qc(this,$d),Qc(this,Du,void 0)}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_SUBTITLES_LIST,_.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_SUBTITLES_LIST&&t!==s?Xc(this,Wf,n3).call(this):e===_.MEDIA_SUBTITLES_SHOWING&&t!==s&&(this.value=s)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Xc(this,$d,qf))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Xc(this,$d,qf))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:hi(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return yg(this,_.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){bg(this,_.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return yg(this,_.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){bg(this,_.MEDIA_SUBTITLES_SHOWING,e)}}Du=new WeakMap;Wf=new WeakSet;n3=function(){var i;if(eI(this,Du)===JSON.stringify(this.mediaSubtitlesList))return;tI(this,Du,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const e=!this.value,t=va({type:"radio",text:this.formatMenuItemText(ie("Off")),value:"off",checked:e});t.prepend(Jr(this,"checked-indicator")),this.defaultSlot.append(t);const s=this.mediaSubtitlesList;for(const r of s){const n=va({type:"radio",text:this.formatMenuItemText(r.label,r),value:tf(r),checked:this.value==tf(r)});n.prepend(Jr(this,"checked-indicator")),((i=r.kind)!=null?i:"subs")==="captions"&&n.append(Jr(this,"captions-indicator")),this.defaultSlot.append(n)}};$d=new WeakSet;qf=function(){const i=this.mediaSubtitlesShowing,e=this.getAttribute(_.MEDIA_SUBTITLES_SHOWING),t=this.value!==e;if(i!=null&&i.length&&t&&this.dispatchEvent(new M.CustomEvent(ee.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:i})),!this.value||!t)return;const s=new M.CustomEvent(ee.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(s)};a3.getTemplateHTML=sI;const yg=(i,e)=>{const t=i.getAttribute(e);return t?Xu(t):[]},bg=(i,e,t)=>{if(!(t!=null&&t.length)){i.removeAttribute(e);return}const s=Fo(t);i.getAttribute(e)!==s&&i.setAttribute(e,s)};M.customElements.get("media-captions-menu")||M.customElements.define("media-captions-menu",a3);const rI=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,nI=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function aI(){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${rI}</slot>
      <slot name="off">${nI}</slot>
    </slot>
  `}function oI(){return ie("Captions")}const Tg=i=>{i.setAttribute("aria-checked",WE(i).toString())};class D1 extends Aa{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_SUBTITLES_LIST,_.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",ie("closed captions")),Tg(this)}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_SUBTITLES_SHOWING&&Tg(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=hi(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return _g(this,_.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){Ag(this,_.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return _g(this,_.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){Ag(this,_.MEDIA_SUBTITLES_SHOWING,e)}}D1.getSlotTemplateHTML=aI;D1.getTooltipContentHTML=oI;const _g=(i,e)=>{const t=i.getAttribute(e);return t?Xu(t):[]},Ag=(i,e,t)=>{if(!(t!=null&&t.length)){i.removeAttribute(e);return}const s=Fo(t);i.getAttribute(e)!==s&&i.setAttribute(e,s)};M.customElements.get("media-captions-menu-button")||M.customElements.define("media-captions-menu-button",D1);var o3=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Nn=(i,e,t)=>(o3(i,e,"read from private field"),t?t.call(i):e.get(i)),Jc=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Oa=(i,e,t)=>(o3(i,e,"access private method"),t),Ws,ro,Bd,Hd,jf;const eh={RATES:"rates"};class lI extends rs{constructor(){super(),Jc(this,ro),Jc(this,Hd),Jc(this,Ws,new G0(this,eh.RATES,{defaultValue:T5})),Oa(this,ro,Bd).call(this)}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PLAYBACK_RATE,eh.RATES]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_PLAYBACK_RATE&&t!=s?this.value=s:e===eh.RATES&&t!=s&&(Nn(this,Ws).value=s,Oa(this,ro,Bd).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Oa(this,Hd,jf))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Oa(this,Hd,jf))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:hi(this).querySelector("media-playback-rate-menu-button")}get rates(){return Nn(this,Ws)}set rates(e){e?Array.isArray(e)?Nn(this,Ws).value=e.join(" "):typeof e=="string"&&(Nn(this,Ws).value=e):Nn(this,Ws).value="",Oa(this,ro,Bd).call(this)}get mediaPlaybackRate(){return je(this,_.MEDIA_PLAYBACK_RATE,Kn)}set mediaPlaybackRate(e){rt(this,_.MEDIA_PLAYBACK_RATE,e)}}Ws=new WeakMap;ro=new WeakSet;Bd=function(){this.defaultSlot.textContent="";for(const i of Nn(this,Ws)){const e=va({type:"radio",text:this.formatMenuItemText(`${i}x`,i),value:i,checked:this.mediaPlaybackRate===Number(i)});e.prepend(Jr(this,"checked-indicator")),this.defaultSlot.append(e)}};Hd=new WeakSet;jf=function(){if(!this.value)return;const i=new M.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(i)};M.customElements.get("media-playback-rate-menu")||M.customElements.define("media-playback-rate-menu",lI);const Vd=1;function dI(i){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
      
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${i.mediaplaybackrate||Vd}x</slot>
  `}function uI(){return ie("Playback rate")}class M1 extends Aa{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_PLAYBACK_RATE]}constructor(){var e;super(),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:Vd}x`}attributeChangedCallback(e,t,s){if(super.attributeChangedCallback(e,t,s),e===_.MEDIA_PLAYBACK_RATE){const r=s?+s:Number.NaN,n=Number.isNaN(r)?Vd:r;this.container.innerHTML=`${n}x`,this.setAttribute("aria-label",ie("Playback rate {playbackRate}",{playbackRate:n}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:hi(this).querySelector("media-playback-rate-menu")}get mediaPlaybackRate(){return je(this,_.MEDIA_PLAYBACK_RATE,Vd)}set mediaPlaybackRate(e){rt(this,_.MEDIA_PLAYBACK_RATE,e)}}M1.getSlotTemplateHTML=dI;M1.getTooltipContentHTML=uI;M.customElements.get("media-playback-rate-menu-button")||M.customElements.define("media-playback-rate-menu-button",M1);var P1=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},no=(i,e,t)=>(P1(i,e,"read from private field"),t?t.call(i):e.get(i)),Pl=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},Sg=(i,e,t,s)=>(P1(i,e,"write to private field"),e.set(i,t),t),En=(i,e,t)=>(P1(i,e,"access private method"),t),ao,Wn,Fn,oo,Gd,Yf;class cI extends rs{constructor(){super(...arguments),Pl(this,Fn),Pl(this,Gd),Pl(this,ao,[]),Pl(this,Wn,{})}static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_RENDITION_LIST,_.MEDIA_RENDITION_SELECTED,_.MEDIA_RENDITION_UNAVAILABLE,_.MEDIA_HEIGHT]}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),e===_.MEDIA_RENDITION_SELECTED&&t!==s?(this.value=s??"auto",En(this,Fn,oo).call(this)):e===_.MEDIA_RENDITION_LIST&&t!==s?(Sg(this,ao,$A(s)),En(this,Fn,oo).call(this)):e===_.MEDIA_HEIGHT&&t!==s&&En(this,Fn,oo).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",En(this,Gd,Yf))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",En(this,Gd,Yf))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:hi(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return no(this,ao)}set mediaRenditionList(e){Sg(this,ao,e),En(this,Fn,oo).call(this)}get mediaRenditionSelected(){return Ye(this,_.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Ze(this,_.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return je(this,_.MEDIA_HEIGHT)}set mediaHeight(e){rt(this,_.MEDIA_HEIGHT,e)}}ao=new WeakMap;Wn=new WeakMap;Fn=new WeakSet;oo=function(){if(no(this,Wn).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&no(this,Wn).mediaHeight===this.mediaHeight)return;no(this,Wn).mediaRenditionList=JSON.stringify(this.mediaRenditionList),no(this,Wn).mediaHeight=this.mediaHeight;const i=this.mediaRenditionList.sort((n,a)=>a.height-n.height);for(const n of i)n.selected=n.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const e=!this.mediaRenditionSelected;for(const n of i){const a=this.formatMenuItemText(`${Math.min(n.width,n.height)}p`,n),o=va({type:"radio",text:a,value:`${n.id}`,checked:n.selected&&!e});o.prepend(Jr(this,"checked-indicator")),this.defaultSlot.append(o)}const t=e?this.formatMenuItemText(`${ie("Auto")} (${this.mediaHeight}p)`):this.formatMenuItemText(ie("Auto")),s=va({type:"radio",text:t,value:"auto",checked:e}),r=this.mediaHeight>0?`${ie("Auto")} (${this.mediaHeight}p)`:ie("Auto");s.dataset.description=r,s.prepend(Jr(this,"checked-indicator")),this.defaultSlot.append(s)};Gd=new WeakSet;Yf=function(){if(this.value==null)return;const i=new M.CustomEvent(ee.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(i)};M.customElements.get("media-rendition-menu")||M.customElements.define("media-rendition-menu",cI);const hI=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`;function fI(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${hI}</slot>
  `}function mI(){return ie("Quality")}class O1 extends Aa{static get observedAttributes(){return[...super.observedAttributes,_.MEDIA_RENDITION_SELECTED,_.MEDIA_RENDITION_UNAVAILABLE,_.MEDIA_HEIGHT]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",ie("quality"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:hi(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return Ye(this,_.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){Ze(this,_.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return je(this,_.MEDIA_HEIGHT)}set mediaHeight(e){rt(this,_.MEDIA_HEIGHT,e)}}O1.getSlotTemplateHTML=fI;O1.getTooltipContentHTML=mI;M.customElements.get("media-rendition-menu-button")||M.customElements.define("media-rendition-menu-button",O1);var l3=i=>{throw TypeError(i)},N1=(i,e,t)=>e.has(i)||l3("Cannot "+t),Oe=(i,e,t)=>(N1(i,e,"read from private field"),t?t.call(i):e.get(i)),_i=(i,e,t)=>e.has(i)?l3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ts=(i,e,t,s)=>(N1(i,e,"write to private field"),e.set(i,t),t),ct=(i,e,t)=>(N1(i,e,"access private method"),t),oc=class{addEventListener(){}removeEventListener(){}dispatchEvent(i){return!0}};if(typeof DocumentFragment>"u"){class i extends oc{}globalThis.DocumentFragment=i}var F1=class extends oc{},pI=class extends oc{},gI={get(i){},define(i,e,t){},getName(i){return null},upgrade(i){},whenDefined(i){return Promise.resolve(F1)}},Kd,vI=class{constructor(e,t={}){_i(this,Kd),ts(this,Kd,t==null?void 0:t.detail)}get detail(){return Oe(this,Kd)}initCustomEvent(){}};Kd=new WeakMap;function EI(i,e){return new F1}var d3={document:{createElement:EI},DocumentFragment,customElements:gI,CustomEvent:vI,EventTarget:oc,HTMLElement:F1,HTMLVideoElement:pI},u3=typeof window>"u"||typeof globalThis.customElements>"u",Yi=u3?d3:globalThis,U1=u3?d3.document:globalThis.document;function yI(i){let e="";return Object.entries(i).forEach(([t,s])=>{s!=null&&(e+=`${Zf(t)}: ${s}; `)}),e?e.trim():void 0}function Zf(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function c3(i){return i.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function Wt(i){if(i==null)return;let e=+i;return Number.isNaN(e)?void 0:e}function h3(i){let e=bI(i).toString();return e?"?"+e:""}function bI(i){let e={};for(let t in i)i[t]!=null&&(e[t]=i[t]);return new URLSearchParams(e)}var f3=(i,e)=>!i||!e?!1:i.contains(e)?!0:f3(i,e.getRootNode().host),m3="mux.com",TI=()=>{try{return"3.5.1"}catch{}return"UNKNOWN"},_I=TI(),p3=()=>_I,AI=(i,{token:e,customDomain:t=m3,thumbnailTime:s,programTime:r}={})=>{var n;let a=e==null?s:void 0,{aud:o}=(n=zn(e))!=null?n:{};if(!(e&&o!=="t"))return`https://image.${t}/${i}/thumbnail.webp${h3({token:e,time:a,program_time:r})}`},SI=(i,{token:e,customDomain:t=m3,programStartTime:s,programEndTime:r}={})=>{var n;let{aud:a}=(n=zn(e))!=null?n:{};if(!(e&&a!=="s"))return`https://image.${t}/${i}/storyboard.vtt${h3({token:e,format:"webp",program_start_time:s,program_end_time:r})}`},$1=i=>{if(i){if([Pe.LIVE,Pe.ON_DEMAND].includes(i))return i;if(i!=null&&i.includes("live"))return Pe.LIVE}},CI={crossorigin:"crossOrigin",playsinline:"playsInline"};function xI(i){var e;return(e=CI[i])!=null?e:c3(i)}var Un,$n,Ft,II=class{constructor(e,t){_i(this,Un),_i(this,$n),_i(this,Ft,[]),ts(this,Un,e),ts(this,$n,t)}[Symbol.iterator](){return Oe(this,Ft).values()}get length(){return Oe(this,Ft).length}get value(){var e;return(e=Oe(this,Ft).join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(ts(this,Ft,[]),this.add(...(t=e==null?void 0:e.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return Oe(this,Ft)[e]}values(){return Oe(this,Ft).values()}keys(){return Oe(this,Ft).keys()}forEach(e){Oe(this,Ft).forEach(e)}add(...e){var t,s;e.forEach(r=>{this.contains(r)||Oe(this,Ft).push(r)}),!(this.value===""&&!((t=Oe(this,Un))!=null&&t.hasAttribute(`${Oe(this,$n)}`)))&&((s=Oe(this,Un))==null||s.setAttribute(`${Oe(this,$n)}`,`${this.value}`))}remove(...e){var t;e.forEach(s=>{Oe(this,Ft).splice(Oe(this,Ft).indexOf(s),1)}),(t=Oe(this,Un))==null||t.setAttribute(`${Oe(this,$n)}`,`${this.value}`)}contains(e){return Oe(this,Ft).includes(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};Un=new WeakMap,$n=new WeakMap,Ft=new WeakMap;var g3=`[mux-player ${p3()}]`;function ps(...i){console.warn(g3,...i)}function ai(...i){console.error(g3,...i)}function v3(i){var e;let t=(e=i.message)!=null?e:"";i.context&&(t+=` ${i.context}`),i.file&&(t+=` ${ae("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${i.file}`),ps(t)}var wt={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Dr={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},Cg=Object.freeze({length:0,start(i){let e=i>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(i){let e=i>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),LI=Object.values(wt).filter(i=>wt.PLAYSINLINE!==i),RI=Object.values(Dr),kI=[...LI,...RI],wI=class extends Yi.HTMLElement{static get observedAttributes(){return kI}constructor(){super()}attributeChangedCallback(i,e,t){var s,r;switch(i){case Dr.MUTED:{this.media&&(this.media.muted=t!=null,this.media.defaultMuted=t!=null);return}case Dr.VOLUME:{let n=(s=Wt(t))!=null?s:1;this.media&&(this.media.volume=n);return}case Dr.PLAYBACKRATE:{let n=(r=Wt(t))!=null?r:1;this.media&&(this.media.playbackRate=n,this.media.defaultPlaybackRate=n);return}}}play(){var i,e;return(e=(i=this.media)==null?void 0:i.play())!=null?e:Promise.reject()}pause(){var i;(i=this.media)==null||i.pause()}load(){var i;(i=this.media)==null||i.load()}get media(){var i;return(i=this.shadowRoot)==null?void 0:i.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var i,e;return(e=(i=this.media)==null?void 0:i.paused)!=null?e:!0}get duration(){var i,e;return(e=(i=this.media)==null?void 0:i.duration)!=null?e:NaN}get ended(){var i,e;return(e=(i=this.media)==null?void 0:i.ended)!=null?e:!1}get buffered(){var i,e;return(e=(i=this.media)==null?void 0:i.buffered)!=null?e:Cg}get seekable(){var i,e;return(e=(i=this.media)==null?void 0:i.seekable)!=null?e:Cg}get readyState(){var i,e;return(e=(i=this.media)==null?void 0:i.readyState)!=null?e:0}get videoWidth(){var i,e;return(e=(i=this.media)==null?void 0:i.videoWidth)!=null?e:0}get videoHeight(){var i,e;return(e=(i=this.media)==null?void 0:i.videoHeight)!=null?e:0}get currentSrc(){var i,e;return(e=(i=this.media)==null?void 0:i.currentSrc)!=null?e:""}get currentTime(){var i,e;return(e=(i=this.media)==null?void 0:i.currentTime)!=null?e:0}set currentTime(i){this.media&&(this.media.currentTime=Number(i))}get volume(){var i,e;return(e=(i=this.media)==null?void 0:i.volume)!=null?e:1}set volume(i){this.media&&(this.media.volume=Number(i))}get playbackRate(){var i,e;return(e=(i=this.media)==null?void 0:i.playbackRate)!=null?e:1}set playbackRate(i){this.media&&(this.media.playbackRate=Number(i))}get defaultPlaybackRate(){var i;return(i=Wt(this.getAttribute(Dr.PLAYBACKRATE)))!=null?i:1}set defaultPlaybackRate(i){i!=null?this.setAttribute(Dr.PLAYBACKRATE,`${i}`):this.removeAttribute(Dr.PLAYBACKRATE)}get crossOrigin(){return Na(this,wt.CROSSORIGIN)}set crossOrigin(i){this.setAttribute(wt.CROSSORIGIN,`${i}`)}get autoplay(){return Na(this,wt.AUTOPLAY)!=null}set autoplay(i){i?this.setAttribute(wt.AUTOPLAY,typeof i=="string"?i:""):this.removeAttribute(wt.AUTOPLAY)}get loop(){return Na(this,wt.LOOP)!=null}set loop(i){i?this.setAttribute(wt.LOOP,""):this.removeAttribute(wt.LOOP)}get muted(){var i,e;return(e=(i=this.media)==null?void 0:i.muted)!=null?e:!1}set muted(i){this.media&&(this.media.muted=!!i)}get defaultMuted(){return Na(this,wt.MUTED)!=null}set defaultMuted(i){i?this.setAttribute(wt.MUTED,""):this.removeAttribute(wt.MUTED)}get playsInline(){return Na(this,wt.PLAYSINLINE)!=null}set playsInline(i){ai("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(i){["","none","metadata","auto"].includes(i)?this.setAttribute(wt.PRELOAD,i):this.removeAttribute(wt.PRELOAD)}};function Na(i,e){return i.media?i.media.getAttribute(e):i.getAttribute(e)}var xg=wI,DI=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  line-height: 0;
  width: 100%;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,Fa=new WeakMap,MI=class E3{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let s=Fa.get(this.element);s&&s.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let t=Fa.get(this.element);t&&t.delete(this.type)}}static for(e){Fa.has(e.element)||Fa.set(e.element,new Map);let t=e.attributeName.slice(2),s=Fa.get(e.element);return s&&s.has(t)?s.get(t):new E3(e.element,t)}};function PI(i,e){return i instanceof Ci&&i.attributeName.startsWith("on")?(MI.for(i).set(e),i.element.removeAttributeNS(i.attributeNamespace,i.attributeName),!0):!1}function OI(i,e){return e instanceof y3&&i instanceof Ta?(e.renderInto(i),!0):!1}function NI(i,e){return e instanceof DocumentFragment&&i instanceof Ta?(e.childNodes.length&&i.replace(...e.childNodes),!0):!1}function FI(i,e){if(i instanceof Ci){let t=i.attributeNamespace,s=i.element.getAttributeNS(t,i.attributeName);return String(e)!==s&&(i.value=String(e)),!0}return i.value=String(e),!0}function UI(i,e){if(i instanceof Ci&&e instanceof Element){let t=i.element;return t[i.attributeName]!==e&&(i.element.removeAttributeNS(i.attributeNamespace,i.attributeName),t[i.attributeName]=e),!0}return!1}function $I(i,e){if(typeof e=="boolean"&&i instanceof Ci){let t=i.attributeNamespace,s=i.element.hasAttributeNS(t,i.attributeName);return e!==s&&(i.booleanValue=e),!0}return!1}function BI(i,e){return e===!1&&i instanceof Ta?(i.replace(""),!0):!1}function HI(i,e){UI(i,e)||$I(i,e)||PI(i,e)||BI(i,e)||OI(i,e)||NI(i,e)||FI(i,e)}var th=new Map,Ig=new WeakMap,Lg=new WeakMap,y3=class{constructor(e,t,s){this.strings=e,this.values=t,this.processor=s,this.stringsKey=this.strings.join("")}get template(){if(th.has(this.stringsKey))return th.get(this.stringsKey);{let e=U1.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce((s,r,n)=>s+r+(n<t?`{{ ${n} }}`:""),""),th.set(this.stringsKey,e),e}}renderInto(e){var t;let s=this.template;if(Ig.get(e)!==s){Ig.set(e,s);let n=new rc(s,this.values,this.processor);Lg.set(e,n),e instanceof Ta?e.replace(...n.children):e.appendChild(n);return}let r=Lg.get(e);(t=r==null?void 0:r.update)==null||t.call(r,this.values)}},VI={processCallback(i,e,t){var s;if(t){for(let[r,n]of e)if(r in t){let a=(s=t[r])!=null?s:"";HI(n,a)}}}};function Wd(i,...e){return new y3(i,e,VI)}function GI(i,e){i.renderInto(e)}var KI=i=>{let{tokens:e}=i;return e.drm?":host(:not([cast-receiver])) { --_cast-button-drm-display: none; }":""},WI=i=>Wd`
  <style>
    ${KI(i)}
    ${DI}
  </style>
  ${ZI(i)}
`,qI=i=>{let e=i.hotKeys?`${i.hotKeys}`:"";return $1(i.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},jI={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},YI=Object.values(jI).join(", "),ZI=i=>{var e,t,s,r,n,a,o,l,d,u,c,h,f,m,p,g,v,b,E,T,x,R,I,C,L,S,w,F,G,K,V,q,z,$,re;return Wd`
  <media-theme
    template="${i.themeTemplate||!1}"
    defaultstreamtype="${(e=i.defaultStreamType)!=null?e:!1}"
    hotkeys="${qI(i)||!1}"
    nohotkeys="${i.noHotKeys||!i.hasSrc||!1}"
    noautoseektolive="${!!((t=i.streamType)!=null&&t.includes(Pe.LIVE))&&i.targetLiveWindow!==0}"
    novolumepref="${i.novolumepref||!1}"
    disabled="${!i.hasSrc||i.isDialogOpen}"
    audio="${(s=i.audio)!=null?s:!1}"
    style="${(r=yI({"--media-primary-color":i.primaryColor,"--media-secondary-color":i.secondaryColor,"--media-accent-color":i.accentColor}))!=null?r:!1}"
    defaultsubtitles="${!i.defaultHiddenCaptions}"
    forwardseekoffset="${(n=i.forwardSeekOffset)!=null?n:!1}"
    backwardseekoffset="${(a=i.backwardSeekOffset)!=null?a:!1}"
    playbackrates="${(o=i.playbackRates)!=null?o:!1}"
    defaultshowremainingtime="${(l=i.defaultShowRemainingTime)!=null?l:!1}"
    defaultduration="${(d=i.defaultDuration)!=null?d:!1}"
    hideduration="${(u=i.hideDuration)!=null?u:!1}"
    title="${(c=i.title)!=null?c:!1}"
    videotitle="${(h=i.videoTitle)!=null?h:!1}"
    proudlydisplaymuxbadge="${(f=i.proudlyDisplayMuxBadge)!=null?f:!1}"
    exportparts="${YI}"
    onclose="${i.onCloseErrorDialog}"
    onfocusin="${i.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      target-live-window="${(m=i.targetLiveWindow)!=null?m:!1}"
      stream-type="${(p=$1(i.streamType))!=null?p:!1}"
      crossorigin="${(g=i.crossOrigin)!=null?g:""}"
      playsinline
      autoplay="${(v=i.autoplay)!=null?v:!1}"
      muted="${(b=i.muted)!=null?b:!1}"
      loop="${(E=i.loop)!=null?E:!1}"
      preload="${(T=i.preload)!=null?T:!1}"
      debug="${(x=i.debug)!=null?x:!1}"
      prefer-cmcd="${(R=i.preferCmcd)!=null?R:!1}"
      disable-tracking="${(I=i.disableTracking)!=null?I:!1}"
      disable-cookies="${(C=i.disableCookies)!=null?C:!1}"
      prefer-playback="${(L=i.preferPlayback)!=null?L:!1}"
      start-time="${i.startTime!=null?i.startTime:!1}"
      beacon-collection-domain="${(S=i.beaconCollectionDomain)!=null?S:!1}"
      player-init-time="${(w=i.playerInitTime)!=null?w:!1}"
      player-software-name="${(F=i.playerSoftwareName)!=null?F:!1}"
      player-software-version="${(G=i.playerSoftwareVersion)!=null?G:!1}"
      env-key="${(K=i.envKey)!=null?K:!1}"
      custom-domain="${(V=i.customDomain)!=null?V:!1}"
      src="${i.src?i.src:i.playbackId?Mh(i):!1}"
      cast-src="${i.src?i.src:i.playbackId?Mh(i):!1}"
      cast-receiver="${(q=i.castReceiver)!=null?q:!1}"
      drm-token="${($=(z=i.tokens)==null?void 0:z.drm)!=null?$:!1}"
      exportparts="video"
    >
      ${i.storyboard?Wd`<track label="thumbnails" default kind="metadata" src="${i.storyboard}" />`:Wd``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${i.poster?i.poster:!1}"
        placeholdersrc="${(re=i.placeholder)!=null?re:!1}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},b3=i=>i.charAt(0).toUpperCase()+i.slice(1),zI=(i,e=!1)=>{var t,s;if(i.muxCode){let r=b3((t=i.errorCategory)!=null?t:"video"),n=Vu((s=i.errorCategory)!=null?s:We.VIDEO);if(i.muxCode===de.NETWORK_OFFLINE)return ae("Your device appears to be offline",e);if(i.muxCode===de.NETWORK_TOKEN_EXPIRED)return ae("{category} URL has expired",e).format({category:r});if([de.NETWORK_TOKEN_SUB_MISMATCH,de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING,de.NETWORK_TOKEN_MALFORMED].includes(i.muxCode))return ae("{category} URL is formatted incorrectly",e).format({category:r});if(i.muxCode===de.NETWORK_TOKEN_MISSING)return ae("Invalid {categoryName} URL",e).format({categoryName:n});if(i.muxCode===de.NETWORK_NOT_FOUND)return ae("{category} does not exist",e).format({category:r});if(i.muxCode===de.NETWORK_NOT_READY){let a=i.streamType==="live"?"Live stream":"Video";return ae("{mediaType} is not currently available",e).format({mediaType:a})}}if(i.code){if(i.code===Z.MEDIA_ERR_NETWORK)return ae("Network Error",e);if(i.code===Z.MEDIA_ERR_DECODE)return ae("Media Error",e);if(i.code===Z.MEDIA_ERR_SRC_NOT_SUPPORTED)return ae("Source Not Supported",e)}return ae("Error",e)},QI=(i,e=!1)=>{var t,s;if(i.muxCode){let r=b3((t=i.errorCategory)!=null?t:"video"),n=Vu((s=i.errorCategory)!=null?s:We.VIDEO);return i.muxCode===de.NETWORK_OFFLINE?ae("Check your internet connection and try reloading this video.",e):i.muxCode===de.NETWORK_TOKEN_EXPIRED?ae("The video’s secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:n}):i.muxCode===de.NETWORK_TOKEN_SUB_MISMATCH?ae("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:n}):i.muxCode===de.NETWORK_TOKEN_MALFORMED?ae("{category} URL is formatted incorrectly",e).format({category:r}):[de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING].includes(i.muxCode)?ae("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:n}):[de.NETWORK_TOKEN_MISSING,de.NETWORK_INVALID_URL].includes(i.muxCode)?ae("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:n}):i.muxCode===de.NETWORK_NOT_FOUND?"":i.message}return i.code&&(i.code===Z.MEDIA_ERR_NETWORK||i.code===Z.MEDIA_ERR_DECODE||(i.code,Z.MEDIA_ERR_SRC_NOT_SUPPORTED)),i.message},XI=(i,e=!1)=>{let t=zI(i,e).toString(),s=QI(i,e).toString();return{title:t,message:s}},JI=i=>{if(i.muxCode){if(i.muxCode===de.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(i.muxCode===de.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING].includes(i.muxCode))return"403-incorrect-aud-value.md";if(i.muxCode===de.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(i.muxCode===de.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(i.muxCode===de.NETWORK_NOT_FOUND)return"404-not-found.md";if(i.muxCode===de.NETWORK_NOT_READY)return"412-not-playable.md"}if(i.code){if(i.code===Z.MEDIA_ERR_NETWORK)return"";if(i.code===Z.MEDIA_ERR_DECODE)return"media-decode-error.md";if(i.code===Z.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},Rg=(i,e)=>{let t=JI(i);return{message:i.message,context:i.context,file:t}},eL=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    media-rendition-menu {
      min-width: 140px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps:
        hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%, hsl(0 0% 0% / 0.104) 22.5%,
        hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%, hsl(0 0% 0% / 0.45) 47.1%,
        hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%, hsl(0 0% 0% / 0.825) 71%,
        hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%, hsl(0 0% 0%) 100%;
    }

    :host([title]:not([audio])) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-error-dialog:not([mediaerrorcode]) {
      opacity: 0;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }

    [part='mux-badge'] {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      opacity: 0.6;
      transition:
        opacity 0.2s ease-in-out,
        bottom 0.2s ease-in-out;
    }

    [part='mux-badge']:hover {
      opacity: 1;
    }

    [part='mux-badge'] a {
      font-size: 14px;
      font-family: var(--_font-family);
      color: var(--_primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    [part='mux-badge'] .mux-badge-text {
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    [part='mux-badge'] .mux-badge-logo {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    [part='mux-badge'] .mux-badge-logo svg {
      width: 100%;
      height: 100%;
      fill: white;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'],
    media-controller:not([userinactive]) [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      transition: bottom 0.1s ease-in-out;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      transition: bottom 0.2s ease-in-out 0.62s;
    }

    media-controller:not([userinactive]) [part='mux-badge'] .mux-badge-text,
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] .mux-badge-text {
      opacity: 1;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] .mux-badge-text {
      opacity: 0;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive])[mediahasplayed] [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);
    }
  </style>

  <template partial="TitleDisplay">
    <template if="videotitle">
      <template if="videotitle != true">
        <media-text-display part="top title display" class="title-display">{{videotitle}}</media-text-display>
      </template>
    </template>
    <template if="!videotitle">
      <template if="title">
        <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
      </template>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            opacity: 0;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <template partial="MuxBadge">
    <div part="mux-badge">
      <a href="https://www.mux.com/player" target="_blank">
        <span class="mux-badge-text">Powered by</span>
        <div class="mux-badge-logo">
          <svg
            viewBox="0 0 1600 500"
            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"
          >
            <g>
              <path
                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"
                style="fill-rule: nonzero"
              ></path>
            </g>
          </svg>
        </div>
      </a>
    </div>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>
    <media-error-dialog slot="dialog" noautohide></media-error-dialog>

    <template if="!audio">
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Mux Badge -->
      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,zf=U1.createElement("template");"innerHTML"in zf&&(zf.innerHTML=eL);var kg,wg,T3=class extends nc{};T3.template=(wg=(kg=zf.content)==null?void 0:kg.children)==null?void 0:wg[0];Yi.customElements.get("media-theme-gerwig")||Yi.customElements.define("media-theme-gerwig",T3);var tL="gerwig",cs={SRC:"src",POSTER:"poster"},H={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",VIDEO_TITLE:"video-title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge"},Qf=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","videotitle","novolumepref","proudlydisplaymuxbadge"];function iL(i,e){var t,s;return{src:!i.playbackId&&i.src,playbackId:i.playbackId,hasSrc:!!i.playbackId||!!i.src||!!i.currentSrc,poster:i.poster,storyboard:i.storyboard,storyboardSrc:i.getAttribute(H.STORYBOARD_SRC),placeholder:i.getAttribute("placeholder"),themeTemplate:rL(i),thumbnailTime:!i.tokens.thumbnail&&i.thumbnailTime,autoplay:i.autoplay,crossOrigin:i.crossOrigin,loop:i.loop,noHotKeys:i.hasAttribute(H.NOHOTKEYS),hotKeys:i.getAttribute(H.HOTKEYS),muted:i.muted,paused:i.paused,preload:i.preload,envKey:i.envKey,preferCmcd:i.preferCmcd,debug:i.debug,disableTracking:i.disableTracking,disableCookies:i.disableCookies,tokens:i.tokens,beaconCollectionDomain:i.beaconCollectionDomain,maxResolution:i.maxResolution,minResolution:i.minResolution,programStartTime:i.programStartTime,programEndTime:i.programEndTime,assetStartTime:i.assetStartTime,assetEndTime:i.assetEndTime,renditionOrder:i.renditionOrder,metadata:i.metadata,playerInitTime:i.playerInitTime,playerSoftwareName:i.playerSoftwareName,playerSoftwareVersion:i.playerSoftwareVersion,startTime:i.startTime,preferPlayback:i.preferPlayback,audio:i.audio,defaultStreamType:i.defaultStreamType,targetLiveWindow:i.getAttribute(N.TARGET_LIVE_WINDOW),streamType:$1(i.getAttribute(N.STREAM_TYPE)),primaryColor:i.getAttribute(H.PRIMARY_COLOR),secondaryColor:i.getAttribute(H.SECONDARY_COLOR),accentColor:i.getAttribute(H.ACCENT_COLOR),forwardSeekOffset:i.forwardSeekOffset,backwardSeekOffset:i.backwardSeekOffset,defaultHiddenCaptions:i.defaultHiddenCaptions,defaultDuration:i.defaultDuration,defaultShowRemainingTime:i.defaultShowRemainingTime,hideDuration:nL(i),playbackRates:i.getAttribute(H.PLAYBACK_RATES),customDomain:(t=i.getAttribute(N.CUSTOM_DOMAIN))!=null?t:void 0,title:i.getAttribute(H.TITLE),videoTitle:(s=i.getAttribute(H.VIDEO_TITLE))!=null?s:i.getAttribute(H.TITLE),novolumepref:i.hasAttribute(H.NO_VOLUME_PREF),proudlyDisplayMuxBadge:i.hasAttribute(H.PROUDLY_DISPLAY_MUX_BADGE),castReceiver:i.castReceiver,...e,extraSourceParams:i.extraSourceParams}}var sL=v5.formatErrorMessage;v5.formatErrorMessage=i=>{var e,t;if(i instanceof Z){let s=XI(i,!1);return`
      ${s!=null&&s.title?`<h3>${s.title}</h3>`:""}
      ${s!=null&&s.message||s!=null&&s.linkUrl?`<p>
        ${s==null?void 0:s.message}
        ${s!=null&&s.linkUrl?`<a
              href="${s.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(e=s.linkText)!=null?e:""} ${ae("(opens in a new window)")}"
              >${(t=s.linkText)!=null?t:s.linkUrl}</a
            >`:""}
      </p>`:""}
    `}return sL(i)};function rL(i){var e,t;let s=i.theme;if(s){let r=(t=(e=i.getRootNode())==null?void 0:e.getElementById)==null?void 0:t.call(e,s);if(r&&r instanceof HTMLTemplateElement)return r;s.startsWith("media-theme-")||(s=`media-theme-${s}`);let n=Yi.customElements.get(s);if(n!=null&&n.template)return n.template}}function nL(i){var e;let t=(e=i.mediaController)==null?void 0:e.querySelector("media-time-display");return t&&getComputedStyle(t).getPropertyValue("--media-duration-display-display").trim()==="none"}function Dg(i){let e=i.videoTitle?{video_title:i.videoTitle}:{};return i.getAttributeNames().filter(t=>t.startsWith("metadata-")).reduce((t,s)=>{let r=i.getAttribute(s);return r!==null&&(t[s.replace(/^metadata-/,"").replace(/-/g,"_")]=r),t},e)}var aL=Object.values(N),oL=Object.values(cs),lL=Object.values(H),Mg=p3(),Pg="mux-player",Og={isDialogOpen:!1},dL={redundant_streams:!0},qd,jd,Yd,Mr,Zd,sa,it,Vs,_3,Xf,Pr,Ng,Fg,Ug,$g,uL=class extends xg{constructor(){super(),_i(this,it),_i(this,qd),_i(this,jd,!1),_i(this,Yd,{}),_i(this,Mr,!0),_i(this,Zd,new II(this,"hotkeys")),_i(this,sa,{...Og,onCloseErrorDialog:i=>{var e;((e=i.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&ct(this,it,Xf).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:i=>{var e;((e=i.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&(f3(this,U1.activeElement)||i.preventDefault())}}),ts(this,qd,w0()),this.attachShadow({mode:"open"}),ct(this,it,_3).call(this),this.isConnected&&ct(this,it,Vs).call(this)}static get NAME(){return Pg}static get VERSION(){return Mg}static get observedAttributes(){var i;return[...(i=xg.observedAttributes)!=null?i:[],...oL,...aL,...lL]}get mediaTheme(){var i;return(i=this.shadowRoot)==null?void 0:i.querySelector("media-theme")}get mediaController(){var i,e;return(e=(i=this.mediaTheme)==null?void 0:i.shadowRoot)==null?void 0:e.querySelector("media-controller")}connectedCallback(){let i=this.media;i&&(i.metadata=Dg(this))}attributeChangedCallback(i,e,t){switch(ct(this,it,Vs).call(this),super.attributeChangedCallback(i,e,t),i){case H.HOTKEYS:Oe(this,Zd).value=t;break;case H.THUMBNAIL_TIME:{t!=null&&this.tokens.thumbnail&&ps(ae("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").toString());break}case H.THUMBNAIL_TOKEN:{if(t){let s=zn(t);if(s){let{aud:r}=s,n=mo.THUMBNAIL;r!==n&&ps(ae("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:n,tokenNamePrefix:"thumbnail"}))}}break}case H.STORYBOARD_TOKEN:{if(t){let s=zn(t);if(s){let{aud:r}=s,n=mo.STORYBOARD;r!==n&&ps(ae("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:n,tokenNamePrefix:"storyboard"}))}}break}case H.DRM_TOKEN:{if(t){let s=zn(t);if(s){let{aud:r}=s,n=mo.DRM;r!==n&&ps(ae("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:n,tokenNamePrefix:"drm"}))}}break}case N.PLAYBACK_ID:{t!=null&&t.includes("?token")&&ai(ae("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:t}));break}case N.STREAM_TYPE:t&&![Pe.LIVE,Pe.ON_DEMAND,Pe.UNKNOWN].includes(t)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=t.includes("dvr")?Number.POSITIVE_INFINITY:0:v3({file:"invalid-stream-type.md",message:ae("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):t===Pe.LIVE?this.getAttribute(H.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[N.PLAYBACK_ID,cs.SRC,H.PLAYBACK_TOKEN].includes(i)&&e!==t&&ts(this,sa,{...Oe(this,sa),...Og}),ct(this,it,Pr).call(this,{[xI(i)]:t})}async requestFullscreen(i){var e;if(!(!this.mediaController||this.mediaController.hasAttribute(_.MEDIA_IS_FULLSCREEN)))return(e=this.mediaController)==null||e.dispatchEvent(new Yi.CustomEvent(ee.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((t,s)=>{var r;(r=this.mediaController)==null||r.addEventListener(As.MEDIA_IS_FULLSCREEN,()=>t(),{once:!0})})}async exitFullscreen(){var i;if(!(!this.mediaController||!this.mediaController.hasAttribute(_.MEDIA_IS_FULLSCREEN)))return(i=this.mediaController)==null||i.dispatchEvent(new Yi.CustomEvent(ee.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((e,t)=>{var s;(s=this.mediaController)==null||s.addEventListener(As.MEDIA_IS_FULLSCREEN,()=>e(),{once:!0})})}get preferCmcd(){var i;return(i=this.getAttribute(N.PREFER_CMCD))!=null?i:void 0}set preferCmcd(i){i!==this.preferCmcd&&(i?cu.includes(i)?this.setAttribute(N.PREFER_CMCD,i):ps(`Invalid value for preferCmcd. Must be one of ${cu.join()}`):this.removeAttribute(N.PREFER_CMCD))}get hasPlayed(){var i,e;return(e=(i=this.mediaController)==null?void 0:i.hasAttribute(_.MEDIA_HAS_PLAYED))!=null?e:!1}get inLiveWindow(){var i;return(i=this.mediaController)==null?void 0:i.hasAttribute(_.MEDIA_TIME_IS_LIVE)}get _hls(){var i;return(i=this.media)==null?void 0:i._hls}get mux(){var i;return(i=this.media)==null?void 0:i.mux}get theme(){var i;return(i=this.getAttribute(H.THEME))!=null?i:tL}set theme(i){this.setAttribute(H.THEME,`${i}`)}get themeProps(){let i=this.mediaTheme;if(!i)return;let e={};for(let t of i.getAttributeNames()){if(Qf.includes(t))continue;let s=i.getAttribute(t);e[c3(t)]=s===""?!0:s}return e}set themeProps(i){var e,t;ct(this,it,Vs).call(this);let s={...this.themeProps,...i};for(let r in s){if(Qf.includes(r))continue;let n=i==null?void 0:i[r];typeof n=="boolean"||n==null?(e=this.mediaTheme)==null||e.toggleAttribute(Zf(r),!!n):(t=this.mediaTheme)==null||t.setAttribute(Zf(r),n)}}get playbackId(){var i;return(i=this.getAttribute(N.PLAYBACK_ID))!=null?i:void 0}set playbackId(i){i?this.setAttribute(N.PLAYBACK_ID,i):this.removeAttribute(N.PLAYBACK_ID)}get src(){var i,e;return this.playbackId?(i=_r(this,cs.SRC))!=null?i:void 0:(e=this.getAttribute(cs.SRC))!=null?e:void 0}set src(i){i?this.setAttribute(cs.SRC,i):this.removeAttribute(cs.SRC)}get poster(){var i;let e=this.getAttribute(cs.POSTER);if(e!=null)return e;let{tokens:t}=this;if(t.playback&&!t.thumbnail){ps("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return AI(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(i=this.thumbnailTime)!=null?i:this.startTime,programTime:this.programStartTime,token:t.thumbnail})}set poster(i){i||i===""?this.setAttribute(cs.POSTER,i):this.removeAttribute(cs.POSTER)}get storyboardSrc(){var i;return(i=this.getAttribute(H.STORYBOARD_SRC))!=null?i:void 0}set storyboardSrc(i){i?this.setAttribute(H.STORYBOARD_SRC,i):this.removeAttribute(H.STORYBOARD_SRC)}get storyboard(){let{tokens:i}=this;if(this.storyboardSrc&&!i.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[Pe.LIVE,Pe.UNKNOWN].includes(this.streamType)||i.playback&&!i.storyboard))return SI(this.playbackId,{customDomain:this.customDomain,token:i.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(H.AUDIO)}set audio(i){if(!i){this.removeAttribute(H.AUDIO);return}this.setAttribute(H.AUDIO,"")}get hotkeys(){return Oe(this,Zd)}get nohotkeys(){return this.hasAttribute(H.NOHOTKEYS)}set nohotkeys(i){if(!i){this.removeAttribute(H.NOHOTKEYS);return}this.setAttribute(H.NOHOTKEYS,"")}get thumbnailTime(){return Wt(this.getAttribute(H.THUMBNAIL_TIME))}set thumbnailTime(i){this.setAttribute(H.THUMBNAIL_TIME,`${i}`)}get videoTitle(){var i,e;return(e=(i=this.getAttribute(H.VIDEO_TITLE))!=null?i:this.getAttribute(H.TITLE))!=null?e:""}set videoTitle(i){i!==this.videoTitle&&(i?this.setAttribute(H.VIDEO_TITLE,i):this.removeAttribute(H.VIDEO_TITLE))}get placeholder(){var i;return(i=_r(this,H.PLACEHOLDER))!=null?i:""}set placeholder(i){this.setAttribute(H.PLACEHOLDER,`${i}`)}get primaryColor(){var i,e;let t=this.getAttribute(H.PRIMARY_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(i=Yi.getComputedStyle(this.mediaTheme))==null?void 0:i.getPropertyValue("--_primary-color"))==null?void 0:e.trim(),t))return t}set primaryColor(i){this.setAttribute(H.PRIMARY_COLOR,`${i}`)}get secondaryColor(){var i,e;let t=this.getAttribute(H.SECONDARY_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(i=Yi.getComputedStyle(this.mediaTheme))==null?void 0:i.getPropertyValue("--_secondary-color"))==null?void 0:e.trim(),t))return t}set secondaryColor(i){this.setAttribute(H.SECONDARY_COLOR,`${i}`)}get accentColor(){var i,e;let t=this.getAttribute(H.ACCENT_COLOR);if(t!=null||this.mediaTheme&&(t=(e=(i=Yi.getComputedStyle(this.mediaTheme))==null?void 0:i.getPropertyValue("--_accent-color"))==null?void 0:e.trim(),t))return t}set accentColor(i){this.setAttribute(H.ACCENT_COLOR,`${i}`)}get defaultShowRemainingTime(){return this.hasAttribute(H.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(i){i?this.setAttribute(H.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(H.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(H.PLAYBACK_RATES))return this.getAttribute(H.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(i=>Number(i)).filter(i=>!Number.isNaN(i)).sort((i,e)=>i-e)}set playbackRates(i){if(!i){this.removeAttribute(H.PLAYBACK_RATES);return}this.setAttribute(H.PLAYBACK_RATES,i.join(" "))}get forwardSeekOffset(){var i;return(i=Wt(this.getAttribute(H.FORWARD_SEEK_OFFSET)))!=null?i:10}set forwardSeekOffset(i){this.setAttribute(H.FORWARD_SEEK_OFFSET,`${i}`)}get backwardSeekOffset(){var i;return(i=Wt(this.getAttribute(H.BACKWARD_SEEK_OFFSET)))!=null?i:10}set backwardSeekOffset(i){this.setAttribute(H.BACKWARD_SEEK_OFFSET,`${i}`)}get defaultHiddenCaptions(){return this.hasAttribute(H.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(i){i?this.setAttribute(H.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(H.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return Wt(this.getAttribute(H.DEFAULT_DURATION))}set defaultDuration(i){i==null?this.removeAttribute(H.DEFAULT_DURATION):this.setAttribute(H.DEFAULT_DURATION,`${i}`)}get playerInitTime(){return this.hasAttribute(N.PLAYER_INIT_TIME)?Wt(this.getAttribute(N.PLAYER_INIT_TIME)):Oe(this,qd)}set playerInitTime(i){i!=this.playerInitTime&&(i==null?this.removeAttribute(N.PLAYER_INIT_TIME):this.setAttribute(N.PLAYER_INIT_TIME,`${+i}`))}get playerSoftwareName(){var i;return(i=this.getAttribute(N.PLAYER_SOFTWARE_NAME))!=null?i:Pg}get playerSoftwareVersion(){var i;return(i=this.getAttribute(N.PLAYER_SOFTWARE_VERSION))!=null?i:Mg}get beaconCollectionDomain(){var i;return(i=this.getAttribute(N.BEACON_COLLECTION_DOMAIN))!=null?i:void 0}set beaconCollectionDomain(i){i!==this.beaconCollectionDomain&&(i?this.setAttribute(N.BEACON_COLLECTION_DOMAIN,i):this.removeAttribute(N.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var i;return(i=this.getAttribute(N.MAX_RESOLUTION))!=null?i:void 0}set maxResolution(i){i!==this.maxResolution&&(i?this.setAttribute(N.MAX_RESOLUTION,i):this.removeAttribute(N.MAX_RESOLUTION))}get minResolution(){var i;return(i=this.getAttribute(N.MIN_RESOLUTION))!=null?i:void 0}set minResolution(i){i!==this.minResolution&&(i?this.setAttribute(N.MIN_RESOLUTION,i):this.removeAttribute(N.MIN_RESOLUTION))}get renditionOrder(){var i;return(i=this.getAttribute(N.RENDITION_ORDER))!=null?i:void 0}set renditionOrder(i){i!==this.renditionOrder&&(i?this.setAttribute(N.RENDITION_ORDER,i):this.removeAttribute(N.RENDITION_ORDER))}get programStartTime(){return Wt(this.getAttribute(N.PROGRAM_START_TIME))}set programStartTime(i){i==null?this.removeAttribute(N.PROGRAM_START_TIME):this.setAttribute(N.PROGRAM_START_TIME,`${i}`)}get programEndTime(){return Wt(this.getAttribute(N.PROGRAM_END_TIME))}set programEndTime(i){i==null?this.removeAttribute(N.PROGRAM_END_TIME):this.setAttribute(N.PROGRAM_END_TIME,`${i}`)}get assetStartTime(){return Wt(this.getAttribute(N.ASSET_START_TIME))}set assetStartTime(i){i==null?this.removeAttribute(N.ASSET_START_TIME):this.setAttribute(N.ASSET_START_TIME,`${i}`)}get assetEndTime(){return Wt(this.getAttribute(N.ASSET_END_TIME))}set assetEndTime(i){i==null?this.removeAttribute(N.ASSET_END_TIME):this.setAttribute(N.ASSET_END_TIME,`${i}`)}get extraSourceParams(){return this.hasAttribute(H.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(H.EXTRA_SOURCE_PARAMS)).entries()].reduce((i,[e,t])=>(i[e]=t,i),{}):dL}set extraSourceParams(i){i==null?this.removeAttribute(H.EXTRA_SOURCE_PARAMS):this.setAttribute(H.EXTRA_SOURCE_PARAMS,new URLSearchParams(i).toString())}get customDomain(){var i;return(i=this.getAttribute(N.CUSTOM_DOMAIN))!=null?i:void 0}set customDomain(i){i!==this.customDomain&&(i?this.setAttribute(N.CUSTOM_DOMAIN,i):this.removeAttribute(N.CUSTOM_DOMAIN))}get envKey(){var i;return(i=_r(this,N.ENV_KEY))!=null?i:void 0}set envKey(i){this.setAttribute(N.ENV_KEY,`${i}`)}get noVolumePref(){return this.hasAttribute(H.NO_VOLUME_PREF)}set noVolumePref(i){i?this.setAttribute(H.NO_VOLUME_PREF,""):this.removeAttribute(H.NO_VOLUME_PREF)}get debug(){return _r(this,N.DEBUG)!=null}set debug(i){i?this.setAttribute(N.DEBUG,""):this.removeAttribute(N.DEBUG)}get disableTracking(){return _r(this,N.DISABLE_TRACKING)!=null}set disableTracking(i){this.toggleAttribute(N.DISABLE_TRACKING,!!i)}get disableCookies(){return _r(this,N.DISABLE_COOKIES)!=null}set disableCookies(i){i?this.setAttribute(N.DISABLE_COOKIES,""):this.removeAttribute(N.DISABLE_COOKIES)}get streamType(){var i,e,t;return(t=(e=this.getAttribute(N.STREAM_TYPE))!=null?e:(i=this.media)==null?void 0:i.streamType)!=null?t:Pe.UNKNOWN}set streamType(i){this.setAttribute(N.STREAM_TYPE,`${i}`)}get defaultStreamType(){var i,e,t;return(t=(e=this.getAttribute(H.DEFAULT_STREAM_TYPE))!=null?e:(i=this.mediaController)==null?void 0:i.getAttribute(H.DEFAULT_STREAM_TYPE))!=null?t:Pe.ON_DEMAND}set defaultStreamType(i){i?this.setAttribute(H.DEFAULT_STREAM_TYPE,i):this.removeAttribute(H.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var i,e;return this.hasAttribute(H.TARGET_LIVE_WINDOW)?+this.getAttribute(H.TARGET_LIVE_WINDOW):(e=(i=this.media)==null?void 0:i.targetLiveWindow)!=null?e:Number.NaN}set targetLiveWindow(i){i==this.targetLiveWindow||Number.isNaN(i)&&Number.isNaN(this.targetLiveWindow)||(i==null?this.removeAttribute(H.TARGET_LIVE_WINDOW):this.setAttribute(H.TARGET_LIVE_WINDOW,`${+i}`))}get liveEdgeStart(){var i;return(i=this.media)==null?void 0:i.liveEdgeStart}get startTime(){return Wt(_r(this,N.START_TIME))}set startTime(i){this.setAttribute(N.START_TIME,`${i}`)}get preferPlayback(){let i=this.getAttribute(N.PREFER_PLAYBACK);if(i===Qi.MSE||i===Qi.NATIVE)return i}set preferPlayback(i){i!==this.preferPlayback&&(i===Qi.MSE||i===Qi.NATIVE?this.setAttribute(N.PREFER_PLAYBACK,i):this.removeAttribute(N.PREFER_PLAYBACK))}get metadata(){var i;return(i=this.media)==null?void 0:i.metadata}set metadata(i){if(ct(this,it,Vs).call(this),!this.media){ai("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...Dg(this),...i}}get _hlsConfig(){var i;return(i=this.media)==null?void 0:i._hlsConfig}set _hlsConfig(i){if(ct(this,it,Vs).call(this),!this.media){ai("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=i}async addCuePoints(i){var e;if(ct(this,it,Vs).call(this),!this.media){ai("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(e=this.media)==null?void 0:e.addCuePoints(i)}get activeCuePoint(){var i;return(i=this.media)==null?void 0:i.activeCuePoint}get cuePoints(){var i,e;return(e=(i=this.media)==null?void 0:i.cuePoints)!=null?e:[]}addChapters(i){var e;if(ct(this,it,Vs).call(this),!this.media){ai("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(e=this.media)==null?void 0:e.addChapters(i)}get activeChapter(){var i;return(i=this.media)==null?void 0:i.activeChapter}get chapters(){var i,e;return(e=(i=this.media)==null?void 0:i.chapters)!=null?e:[]}getStartDate(){var i;return(i=this.media)==null?void 0:i.getStartDate()}get currentPdt(){var i;return(i=this.media)==null?void 0:i.currentPdt}get tokens(){let i=this.getAttribute(H.PLAYBACK_TOKEN),e=this.getAttribute(H.DRM_TOKEN),t=this.getAttribute(H.THUMBNAIL_TOKEN),s=this.getAttribute(H.STORYBOARD_TOKEN);return{...Oe(this,Yd),...i!=null?{playback:i}:{},...e!=null?{drm:e}:{},...t!=null?{thumbnail:t}:{},...s!=null?{storyboard:s}:{}}}set tokens(i){ts(this,Yd,i??{})}get playbackToken(){var i;return(i=this.getAttribute(H.PLAYBACK_TOKEN))!=null?i:void 0}set playbackToken(i){this.setAttribute(H.PLAYBACK_TOKEN,`${i}`)}get drmToken(){var i;return(i=this.getAttribute(H.DRM_TOKEN))!=null?i:void 0}set drmToken(i){this.setAttribute(H.DRM_TOKEN,`${i}`)}get thumbnailToken(){var i;return(i=this.getAttribute(H.THUMBNAIL_TOKEN))!=null?i:void 0}set thumbnailToken(i){this.setAttribute(H.THUMBNAIL_TOKEN,`${i}`)}get storyboardToken(){var i;return(i=this.getAttribute(H.STORYBOARD_TOKEN))!=null?i:void 0}set storyboardToken(i){this.setAttribute(H.STORYBOARD_TOKEN,`${i}`)}addTextTrack(i,e,t,s){var r;let n=(r=this.media)==null?void 0:r.nativeEl;if(n)return I0(n,i,e,t,s)}removeTextTrack(i){var e;let t=(e=this.media)==null?void 0:e.nativeEl;if(t)return e7(t,i)}get textTracks(){var i;return(i=this.media)==null?void 0:i.textTracks}get castReceiver(){var i;return(i=this.getAttribute(H.CAST_RECEIVER))!=null?i:void 0}set castReceiver(i){i!==this.castReceiver&&(i?this.setAttribute(H.CAST_RECEIVER,i):this.removeAttribute(H.CAST_RECEIVER))}get castCustomData(){var i;return(i=this.media)==null?void 0:i.castCustomData}set castCustomData(i){if(!this.media){ai("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=i}get noTooltips(){return this.hasAttribute(H.NO_TOOLTIPS)}set noTooltips(i){if(!i){this.removeAttribute(H.NO_TOOLTIPS);return}this.setAttribute(H.NO_TOOLTIPS,"")}get proudlyDisplayMuxBadge(){return this.hasAttribute(H.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(i){i?this.setAttribute(H.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(H.PROUDLY_DISPLAY_MUX_BADGE)}};qd=new WeakMap,jd=new WeakMap,Yd=new WeakMap,Mr=new WeakMap,Zd=new WeakMap,sa=new WeakMap,it=new WeakSet,Vs=function(){var i,e,t,s;if(!Oe(this,jd)){ts(this,jd,!0),ct(this,it,Pr).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Yi.HTMLElement))throw""}catch{ai("<media-theme> failed to upgrade!")}try{customElements.upgrade(this.media)}catch{ai("underlying media element failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof BS))throw""}catch{ai("<media-controller> failed to upgrade!")}ct(this,it,Ng).call(this),ct(this,it,Fg).call(this),ct(this,it,Ug).call(this),ts(this,Mr,(e=(i=this.mediaController)==null?void 0:i.hasAttribute(le.USER_INACTIVE))!=null?e:!0),ct(this,it,$g).call(this),(t=this.media)==null||t.addEventListener("streamtypechange",()=>ct(this,it,Pr).call(this)),(s=this.media)==null||s.addEventListener("loadstart",()=>ct(this,it,Pr).call(this))}},_3=function(){var i,e;try{(i=window==null?void 0:window.CSS)==null||i.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window==null?void 0:window.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},Xf=function(i){Object.assign(Oe(this,sa),i),ct(this,it,Pr).call(this)},Pr=function(i={}){GI(WI(iL(this,{...Oe(this,sa),...i})),this.shadowRoot)},Ng=function(){let i=e=>{var t,s;if(!(e!=null&&e.startsWith("theme-")))return;let r=e.replace(/^theme-/,"");if(Qf.includes(r))return;let n=this.getAttribute(e);n!=null?(t=this.mediaTheme)==null||t.setAttribute(r,n):(s=this.mediaTheme)==null||s.removeAttribute(r)};new MutationObserver(e=>{for(let{attributeName:t}of e)i(t)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(i)},Fg=function(){let i=e=>{var t;let s=(t=this.media)==null?void 0:t.error;if(!(s instanceof Z)){let{message:n,code:a}=s??{};s=new Z(n,a)}if(!(s!=null&&s.fatal)){ps(s),s.data&&ps(`${s.name} data:`,s.data);return}let r=Rg(s);r.message&&v3(r),ai(s),s.data&&ai(`${s.name} data:`,s.data),ct(this,it,Xf).call(this,{isDialogOpen:!0})};this.addEventListener("error",i),this.media&&(this.media.errorTranslator=(e={})=>{var t,s,r;if(!(((t=this.media)==null?void 0:t.error)instanceof Z))return e;let n=Rg((s=this.media)==null?void 0:s.error);return{player_error_code:(r=this.media)==null?void 0:r.error.code,player_error_message:n.message?String(n.message):e.player_error_message,player_error_context:n.context?String(n.context):e.player_error_context}})},Ug=function(){var i,e,t,s;let r=()=>ct(this,it,Pr).call(this);(e=(i=this.media)==null?void 0:i.textTracks)==null||e.addEventListener("addtrack",r),(s=(t=this.media)==null?void 0:t.textTracks)==null||s.addEventListener("removetrack",r)},$g=function(){var i,e;if(!/Firefox/i.test(navigator.userAgent))return;let t,s=new WeakMap,r=()=>this.streamType===Pe.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,n=(l,d,u=!1)=>{r()||Array.from(l&&l.activeCues||[]).forEach(c=>{if(!(!c.snapToLines||c.line<-5||c.line>=0&&c.line<10))if(!d||this.paused){let h=c.text.split(`
`).length,f=-3;this.streamType===Pe.LIVE&&(f=-2);let m=f-h;if(c.line===m&&!u)return;s.has(c)||s.set(c,c.line),c.line=m}else setTimeout(()=>{c.line=s.get(c)||"auto"},500)})},a=()=>{var l,d;n(t,(d=(l=this.mediaController)==null?void 0:l.hasAttribute(le.USER_INACTIVE))!=null?d:!1)},o=()=>{var l,d;let u=Array.from(((d=(l=this.mediaController)==null?void 0:l.media)==null?void 0:d.textTracks)||[]).filter(c=>["subtitles","captions"].includes(c.kind)&&c.mode==="showing")[0];u!==t&&(t==null||t.removeEventListener("cuechange",a)),t=u,t==null||t.addEventListener("cuechange",a),n(t,Oe(this,Mr))};o(),(i=this.textTracks)==null||i.addEventListener("change",o),(e=this.textTracks)==null||e.addEventListener("addtrack",o),this.addEventListener("userinactivechange",()=>{var l,d;let u=(d=(l=this.mediaController)==null?void 0:l.hasAttribute(le.USER_INACTIVE))!=null?d:!0;Oe(this,Mr)!==u&&(ts(this,Mr,u),n(t,Oe(this,Mr)))})};function _r(i,e){return i.media?i.media.getAttribute(e):i.getAttribute(e)}var Bg=uL,A3=class{addEventListener(){}removeEventListener(){}dispatchEvent(i){return!0}};if(typeof DocumentFragment>"u"){class i extends A3{}globalThis.DocumentFragment=i}var cL=class extends A3{},hL={get(i){},define(i,e,t){},getName(i){return null},upgrade(i){},whenDefined(i){return Promise.resolve(cL)}},fL={customElements:hL},mL=typeof window>"u"||typeof globalThis.customElements>"u",ih=mL?fL:globalThis;ih.customElements.get("mux-player")||(ih.customElements.define("mux-player",Bg),ih.MuxPlayerElement=Bg);var S3=parseInt(Ao.version)>=19,Hg={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},pL=i=>i==null,gL=(i,e)=>pL(e)?!1:i in e,vL=i=>i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),EL=(i,e)=>{if(!(!S3&&typeof e=="boolean"&&!e)){if(gL(i,Hg))return Hg[i];if(typeof e<"u")return/[A-Z]/.test(i)?vL(i):i}},yL=(i,e)=>!S3&&typeof i=="boolean"?"":i,bL=(i={})=>{let{ref:e,...t}=i;return Object.entries(t).reduce((s,[r,n])=>{let a=EL(r,n);if(!a)return s;let o=yL(n);return s[a]=o,s},{})};function Vg(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function TL(...i){return e=>{let t=!1,s=i.map(r=>{let n=Vg(r,e);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let r=0;r<s.length;r++){let n=s[r];typeof n=="function"?n():Vg(i[r],null)}}}}function _L(...i){return k.useCallback(TL(...i),i)}var AL=Object.prototype.hasOwnProperty,SL=(i,e)=>{if(Object.is(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;if(Array.isArray(i))return!Array.isArray(e)||i.length!==e.length?!1:i.some((r,n)=>e[n]===r);let t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(!AL.call(e,t[r])||!Object.is(i[t[r]],e[t[r]]))return!1;return!0},C3=(i,e,t)=>!SL(e,i[t]),CL=(i,e,t)=>{i[t]=e},xL=(i,e,t,s=CL,r=C3)=>k.useEffect(()=>{let n=t==null?void 0:t.current;n&&r(n,e,i)&&s(n,e,i)},[t==null?void 0:t.current,e]),Di=xL,IL=()=>{try{return"3.5.1"}catch{}return"UNKNOWN"},LL=IL(),RL=()=>LL,Qe=(i,e,t)=>k.useEffect(()=>{let s=e==null?void 0:e.current;if(!s||!t)return;let r=i,n=t;return s.addEventListener(r,n),()=>{s.removeEventListener(r,n)}},[e==null?void 0:e.current,t,i]),kL=Ao.forwardRef(({children:i,...e},t)=>Ao.createElement("mux-player",{suppressHydrationWarning:!0,...bL(e),ref:t},i)),wL=(i,e)=>{let{onAbort:t,onCanPlay:s,onCanPlayThrough:r,onEmptied:n,onLoadStart:a,onLoadedData:o,onLoadedMetadata:l,onProgress:d,onDurationChange:u,onVolumeChange:c,onRateChange:h,onResize:f,onWaiting:m,onPlay:p,onPlaying:g,onTimeUpdate:v,onPause:b,onSeeking:E,onSeeked:T,onStalled:x,onSuspend:R,onEnded:I,onError:C,onCuePointChange:L,onChapterChange:S,metadata:w,tokens:F,paused:G,playbackId:K,playbackRates:V,currentTime:q,themeProps:z,extraSourceParams:$,castCustomData:re,_hlsConfig:se,...W}=e;return Di("playbackRates",V,i),Di("metadata",w,i),Di("extraSourceParams",$,i),Di("_hlsConfig",se,i),Di("themeProps",z,i),Di("tokens",F,i),Di("playbackId",K,i),Di("castCustomData",re,i),Di("paused",G,i,(B,oe)=>{oe!=null&&(oe?B.pause():B.play())},(B,oe,fe)=>B.hasAttribute("autoplay")&&!B.hasPlayed?!1:C3(B,oe,fe)),Di("currentTime",q,i,(B,oe)=>{oe!=null&&(B.currentTime=oe)}),Qe("abort",i,t),Qe("canplay",i,s),Qe("canplaythrough",i,r),Qe("emptied",i,n),Qe("loadstart",i,a),Qe("loadeddata",i,o),Qe("loadedmetadata",i,l),Qe("progress",i,d),Qe("durationchange",i,u),Qe("volumechange",i,c),Qe("ratechange",i,h),Qe("resize",i,f),Qe("waiting",i,m),Qe("play",i,p),Qe("playing",i,g),Qe("timeupdate",i,v),Qe("pause",i,b),Qe("seeking",i,E),Qe("seeked",i,T),Qe("stalled",i,x),Qe("suspend",i,R),Qe("ended",i,I),Qe("error",i,C),Qe("cuepointchange",i,L),Qe("chapterchange",i,S),[W]},DL=RL(),ML="mux-player-react",PL=Ao.forwardRef((i,e)=>{var t;let s=k.useRef(null),r=_L(s,e),[n]=wL(s,i),[a]=k.useState((t=i.playerInitTime)!=null?t:w0());return Ao.createElement(kL,{ref:r,defaultHiddenCaptions:i.defaultHiddenCaptions,playerSoftwareName:ML,playerSoftwareVersion:DL,playerInitTime:a,...n})}),OL=PL;function NL(){return A.jsx(ce,{sx:{width:"100%",aspectRatio:"16 / 9",borderRadius:3,overflow:"hidden",boxShadow:3},children:A.jsx(OL,{playbackId:"a4nOgmxGWg6gULfcBbAa00gXyfcwPnAFldF8RdsNyk8M",autoPlay:!0,muted:!0,loop:!0,controls:!0,style:{width:"100%",height:"100%"}})})}function FL(){return A.jsx(ce,{className:"promo-video-playback",children:A.jsx(NL,{})})}const UL=[{text:"Custom AI Voice Agent (inbound & outbound)"},{text:"Appointment booking system with reminders"},{text:"Email & SMS campaign automation"},{text:"Team performance dashboards"},{text:"Custom AI Chatbot (Website, WhatsApp, SMS)"},{text:"Invoicing and payment automation"},{text:"Smart follow-ups and lead nurturing"},{text:"Dedicated onboarding and support"},{text:"CRM with pipeline, tasks, and contact management"},{text:"Funnel and landing page builder"},{text:"Missed-call text back + voicemail fallback"}];function $L(){return A.jsx(Ua,{container:!0,className:"advantage",sx:{display:"grid",gap:2,gridTemplateColumns:{xs:"1fr",sm:"1fr 1fr",md:"1fr 1fr 1fr"}},children:UL.map((i,e)=>A.jsxs(ce,{className:"advantage__block",sx:{display:"flex",alignItems:"center",gap:1},children:[A.jsx(ce,{className:"icon",children:A.jsx(Cy,{})}),A.jsx("p",{className:"title",children:i.text})]},e))})}const BL=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{width:20,height:20,rx:3.33333,fill:"#FD9038"}),k.createElement("path",{d:"M5.69133 8.08512V11.9149C5.69133 12.0419 5.6409 12.1636 5.55112 12.2534C5.46134 12.3432 5.33958 12.3936 5.21261 12.3936C5.08564 12.3936 4.96388 12.3432 4.8741 12.2534C4.78432 12.1636 4.73389 12.0419 4.73389 11.9149V8.08512C4.73389 7.95816 4.78432 7.83639 4.8741 7.74661C4.96388 7.65684 5.08564 7.6064 5.21261 7.6064C5.33958 7.6064 5.46134 7.65684 5.55112 7.74661C5.6409 7.83639 5.69133 7.95816 5.69133 8.08512ZM7.60623 3.77661C7.47926 3.77661 7.3575 3.82705 7.26772 3.91683C7.17794 4.0066 7.1275 4.12837 7.1275 4.25533V15.7447C7.1275 15.8717 7.17794 15.9934 7.26772 16.0832C7.3575 16.173 7.47926 16.2234 7.60623 16.2234C7.73319 16.2234 7.85496 16.173 7.94474 16.0832C8.03451 15.9934 8.08495 15.8717 8.08495 15.7447V4.25533C8.08495 4.12837 8.03451 4.0066 7.94474 3.91683C7.85496 3.82705 7.73319 3.77661 7.60623 3.77661ZM9.99984 5.6915C9.87288 5.6915 9.75111 5.74194 9.66134 5.83172C9.57156 5.9215 9.52112 6.04326 9.52112 6.17023V13.8298C9.52112 13.9568 9.57156 14.0785 9.66134 14.1683C9.75111 14.2581 9.87288 14.3085 9.99984 14.3085C10.1268 14.3085 10.2486 14.2581 10.3384 14.1683C10.4281 14.0785 10.4786 13.9568 10.4786 13.8298V6.17023C10.4786 6.04326 10.4281 5.9215 10.3384 5.83172C10.2486 5.74194 10.1268 5.6915 9.99984 5.6915ZM12.3935 7.6064C12.2665 7.6064 12.1447 7.65684 12.055 7.74661C11.9652 7.83639 11.9147 7.95816 11.9147 8.08512V11.9149C11.9147 12.0419 11.9652 12.1636 12.055 12.2534C12.1447 12.3432 12.2665 12.3936 12.3935 12.3936C12.5204 12.3936 12.6422 12.3432 12.732 12.2534C12.8217 12.1636 12.8722 12.0419 12.8722 11.9149V8.08512C12.8722 7.95816 12.8217 7.83639 12.732 7.74661C12.6422 7.65684 12.5204 7.6064 12.3935 7.6064ZM14.7871 6.64895C14.6601 6.64895 14.5383 6.69939 14.4486 6.78917C14.3588 6.87894 14.3084 7.00071 14.3084 7.12768V12.8724C14.3084 12.9993 14.3588 13.1211 14.4486 13.2109C14.5383 13.3006 14.6601 13.3511 14.7871 13.3511C14.914 13.3511 15.0358 13.3006 15.1256 13.2109C15.2154 13.1211 15.2658 12.9993 15.2658 12.8724V7.12768C15.2658 7.00071 15.2154 6.87894 15.1256 6.78917C15.0358 6.69939 14.914 6.64895 14.7871 6.64895Z",fill:"white"})),HL=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{width:20,height:20,rx:3.33333,fill:"#DC2C62"}),k.createElement("path",{d:"M16.2276 13.5162C16.5584 12.8301 16.7207 12.075 16.701 11.3136C16.6814 10.5522 16.4803 9.80648 16.1146 9.13838C15.7489 8.47028 15.229 7.89908 14.5982 7.47225C13.9673 7.04542 13.2438 6.77526 12.4876 6.68423C12.236 6.0992 11.8702 5.57027 11.4116 5.12839C10.953 4.68651 10.4108 4.34057 9.81688 4.11082C9.22293 3.88108 8.58911 3.77215 7.95253 3.79042C7.31596 3.80869 6.68943 3.95379 6.10963 4.21721C5.52983 4.48064 5.00842 4.8571 4.57592 5.32455C4.14343 5.792 3.80855 6.34105 3.5909 6.93953C3.37325 7.53802 3.27719 8.17392 3.30836 8.80999C3.33953 9.44607 3.4973 10.0695 3.77242 10.6439L3.33738 12.1225C3.28874 12.2876 3.28549 12.4627 3.32797 12.6295C3.37045 12.7962 3.45708 12.9485 3.57877 13.0702C3.70045 13.1919 3.85269 13.2785 4.01945 13.321C4.18621 13.3634 4.36134 13.3602 4.52641 13.3116L6.00507 12.8765C6.47986 13.1046 6.9889 13.2532 7.51185 13.3163C7.76592 13.9116 8.13807 14.4492 8.6058 14.8966C9.07352 15.344 9.62712 15.6919 10.2331 15.9193C10.8391 16.1467 11.4849 16.2488 12.1315 16.2195C12.7781 16.1902 13.412 16.0301 13.995 15.7489L15.4736 16.1839C15.6386 16.2325 15.8137 16.2357 15.9804 16.1933C16.1471 16.1508 16.2992 16.0642 16.4209 15.9426C16.5426 15.821 16.6292 15.6689 16.6718 15.5022C16.7143 15.3355 16.7112 15.1605 16.6626 14.9955L16.2276 13.5162ZM15.2552 13.6042L15.7447 15.2659L14.0835 14.777C13.9635 14.7423 13.8347 14.7558 13.7245 14.8147C12.8429 15.2855 11.8124 15.3933 10.8525 15.1151C9.89263 14.837 9.07934 14.195 8.58599 13.3259C9.24146 13.2575 9.87573 13.0544 10.449 12.7293C11.0223 12.4041 11.5222 11.9641 11.9173 11.4366C12.3125 10.9092 12.5944 10.3058 12.7453 9.6643C12.8963 9.02278 12.9131 8.35699 12.7946 7.70869C13.3657 7.84331 13.8982 8.10736 14.3511 8.48046C14.804 8.85355 15.165 9.32572 15.4065 9.86051C15.6479 10.3953 15.7632 10.9784 15.7435 11.5648C15.7238 12.1513 15.5697 12.7253 15.2929 13.2427C15.2333 13.3536 15.2198 13.4834 15.2552 13.6042Z",fill:"white"})),VL=i=>k.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{width:20,height:20,rx:3.33333,fill:"#5BB773"}),k.createElement("path",{d:"M9.52112 5.69158V8.56392C9.52112 8.81785 9.42025 9.06138 9.24069 9.24094C9.06114 9.42049 8.81761 9.52137 8.56367 9.52137H5.69133C5.4374 9.52137 5.19387 9.42049 5.01432 9.24094C4.83476 9.06138 4.73389 8.81785 4.73389 8.56392V5.69158C4.73389 5.43765 4.83476 5.19412 5.01432 5.01456C5.19387 4.835 5.4374 4.73413 5.69133 4.73413H8.56367C8.81761 4.73413 9.06114 4.835 9.24069 5.01456C9.42025 5.19412 9.52112 5.43765 9.52112 5.69158ZM14.3084 4.73413H11.436C11.1821 4.73413 10.9386 4.835 10.759 5.01456C10.5794 5.19412 10.4786 5.43765 10.4786 5.69158V8.56392C10.4786 8.81785 10.5794 9.06138 10.759 9.24094C10.9386 9.42049 11.1821 9.52137 11.436 9.52137H14.3084C14.5623 9.52137 14.8058 9.42049 14.9854 9.24094C15.1649 9.06138 15.2658 8.81785 15.2658 8.56392V5.69158C15.2658 5.43765 15.1649 5.19412 14.9854 5.01456C14.8058 4.835 14.5623 4.73413 14.3084 4.73413ZM8.56367 10.4788H5.69133C5.4374 10.4788 5.19387 10.5797 5.01432 10.7592C4.83476 10.9388 4.73389 11.1823 4.73389 11.4363V14.3086C4.73389 14.5625 4.83476 14.8061 5.01432 14.9856C5.19387 15.1652 5.4374 15.266 5.69133 15.266H8.56367C8.81761 15.266 9.06114 15.1652 9.24069 14.9856C9.42025 14.8061 9.52112 14.5625 9.52112 14.3086V11.4363C9.52112 11.1823 9.42025 10.9388 9.24069 10.7592C9.06114 10.5797 8.81761 10.4788 8.56367 10.4788ZM14.3084 10.4788H11.436C11.1821 10.4788 10.9386 10.5797 10.759 10.7592C10.5794 10.9388 10.4786 11.1823 10.4786 11.4363V14.3086C10.4786 14.5625 10.5794 14.8061 10.759 14.9856C10.9386 15.1652 11.1821 15.266 11.436 15.266H14.3084C14.5623 15.266 14.8058 15.1652 14.9854 14.9856C15.1649 14.8061 15.2658 14.5625 15.2658 14.3086V11.4363C15.2658 11.1823 15.1649 10.9388 14.9854 10.7592C14.8058 10.5797 14.5623 10.4788 14.3084 10.4788Z",fill:"white"})),GL=i=>k.createElement("svg",{width:21,height:20,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{x:.26001,width:20,height:20,rx:3.33333,fill:"#976FF9"}),k.createElement("path",{d:"M16.0047 5.21277H4.51534C4.38838 5.21277 4.26661 5.26321 4.17684 5.35298C4.08706 5.44276 4.03662 5.56453 4.03662 5.69149V13.8298C4.03662 14.0837 4.13749 14.3273 4.31705 14.5068C4.49661 14.6864 4.74014 14.7872 4.99407 14.7872H15.526C15.7799 14.7872 16.0234 14.6864 16.203 14.5068C16.3826 14.3273 16.4834 14.0837 16.4834 13.8298V5.69149C16.4834 5.56453 16.433 5.44276 16.3432 5.35298C16.2534 5.26321 16.1317 5.21277 16.0047 5.21277ZM4.99407 9.04256H7.38768V10.9574H4.99407V9.04256ZM8.34513 9.04256H15.526V10.9574H8.34513V9.04256ZM15.526 6.17022V8.08511H4.99407V6.17022H15.526ZM4.99407 11.9149H7.38768V13.8298H4.99407V11.9149ZM15.526 13.8298H8.34513V11.9149H15.526V13.8298Z",fill:"white"})),KL=i=>k.createElement("svg",{width:21,height:20,viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("rect",{x:.26001,width:20,height:20,rx:3.33333,fill:"#06A0C6"}),k.createElement("path",{d:"M4.27595 10.0001C4.14898 10.0001 4.02722 9.94965 3.93744 9.85987C3.84766 9.7701 3.79722 9.64833 3.79722 9.52137C3.79722 9.3944 3.84766 9.27263 3.93744 9.18286C4.02722 9.09308 4.14898 9.04264 4.27595 9.04264H5.95148C6.07844 9.04264 6.20021 8.99221 6.28999 8.90243C6.37976 8.81265 6.4302 8.69088 6.4302 8.56392C6.4302 8.43695 6.37976 8.31519 6.28999 8.22541C6.20021 8.13563 6.07844 8.08519 5.95148 8.08519H4.99403C4.61314 8.08519 4.24784 7.93388 3.97851 7.66455C3.70917 7.39522 3.55786 7.02992 3.55786 6.64902C3.55786 6.26813 3.70917 5.90283 3.97851 5.6335C4.24784 5.36416 4.61314 5.21285 4.99403 5.21285C4.99403 5.08589 5.04447 4.96412 5.13425 4.87435C5.22402 4.78457 5.34579 4.73413 5.47275 4.73413C5.59972 4.73413 5.72149 4.78457 5.81126 4.87435C5.90104 4.96412 5.95148 5.08589 5.95148 5.21285H6.4302C6.55717 5.21285 6.67893 5.26329 6.76871 5.35307C6.85849 5.44285 6.90893 5.56461 6.90893 5.69158C6.90893 5.81854 6.85849 5.94031 6.76871 6.03009C6.67893 6.11986 6.55717 6.1703 6.4302 6.1703H4.99403C4.86707 6.1703 4.7453 6.22074 4.65552 6.31052C4.56574 6.40029 4.51531 6.52206 4.51531 6.64902C4.51531 6.77599 4.56574 6.89776 4.65552 6.98753C4.7453 7.07731 4.86707 7.12775 4.99403 7.12775H5.95148C6.33237 7.12775 6.69767 7.27906 6.967 7.54839C7.23634 7.81773 7.38765 8.18302 7.38765 8.56392C7.38765 8.94481 7.23634 9.31011 6.967 9.57944C6.69767 9.84878 6.33237 10.0001 5.95148 10.0001C5.95148 10.1271 5.90104 10.2488 5.81126 10.3386C5.72149 10.4284 5.59972 10.4788 5.47275 10.4788C5.34579 10.4788 5.22402 10.4284 5.13425 10.3386C5.04447 10.2488 4.99403 10.1271 4.99403 10.0001H4.27595ZM16.0047 5.21285H8.3451C8.21813 5.21285 8.09636 5.26329 8.00659 5.35307C7.91681 5.44285 7.86637 5.56461 7.86637 5.69158C7.86637 5.81854 7.91681 5.94031 8.00659 6.03009C8.09636 6.11986 8.21813 6.1703 8.3451 6.1703H15.5259V8.08519H8.82382C8.69685 8.08519 8.57509 8.13563 8.48531 8.22541C8.39553 8.31519 8.3451 8.43695 8.3451 8.56392C8.3451 8.69088 8.39553 8.81265 8.48531 8.90243C8.57509 8.99221 8.69685 9.04264 8.82382 9.04264H12.1749V10.9575H7.38765C7.26068 10.9575 7.13892 11.008 7.04914 11.0978C6.95936 11.1875 6.90893 11.3093 6.90893 11.4363C6.90893 11.5632 6.95936 11.685 7.04914 11.7748C7.13892 11.8645 7.26068 11.915 7.38765 11.915H12.1749V13.8299H4.99403V11.4363C4.99403 11.3093 4.94359 11.1875 4.85382 11.0978C4.76404 11.008 4.64227 10.9575 4.51531 10.9575C4.38834 10.9575 4.26658 11.008 4.1768 11.0978C4.08702 11.1875 4.03658 11.3093 4.03658 11.4363V13.8299C4.03658 14.0838 4.13746 14.3273 4.31701 14.5069C4.49657 14.6864 4.7401 14.7873 4.99403 14.7873H15.5259C15.7799 14.7873 16.0234 14.6864 16.203 14.5069C16.3825 14.3273 16.4834 14.0838 16.4834 13.8299V5.69158C16.4834 5.56461 16.433 5.44285 16.3432 5.35307C16.2534 5.26329 16.1316 5.21285 16.0047 5.21285Z",fill:"white"})),WL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.6652 4.92904C9.59447 1.85943 4.40572 1.85943 1.33502 4.92904C0.241266 6.02279 0.136266 7.63552 1.07853 8.85068C1.16043 8.95569 1.26522 9.04062 1.38492 9.099C1.50462 9.15738 1.63606 9.18767 1.76923 9.18755C1.87681 9.18761 1.98346 9.16758 2.08369 9.12849L4.76337 8.17857L4.77923 8.17255C4.91448 8.11846 5.03409 8.03146 5.1272 7.91944C5.22031 7.80742 5.28398 7.67393 5.31244 7.53107L5.63509 5.91669C6.51484 5.61258 7.47088 5.61046 8.35197 5.91068L8.69158 7.53763C8.72103 7.67893 8.78498 7.81074 8.87773 7.92133C8.97047 8.03192 9.08914 8.11785 9.22314 8.17146L9.239 8.17748L11.9187 9.12849C12.0937 9.1963 12.286 9.20601 12.467 9.15618C12.648 9.10635 12.8082 8.99962 12.9238 8.85177C13.8639 7.63552 13.7584 6.02279 12.6652 4.92904ZM12.232 8.31255L12.2156 8.30599L9.5458 7.35826L9.20619 5.73185C9.17537 5.58468 9.10714 5.44794 9.0081 5.33481C8.90905 5.22168 8.78252 5.13599 8.64072 5.08599C7.57086 4.7197 6.40915 4.7222 5.34088 5.0931C5.19797 5.14416 5.07081 5.2315 4.97186 5.34655C4.87291 5.46161 4.80559 5.60042 4.7765 5.74935L4.45384 7.36318L1.78455 8.3049C1.77908 8.3049 1.77525 8.31201 1.76978 8.31419C1.09548 7.44412 1.16822 6.33287 1.95353 5.5481C3.32072 4.18091 5.16095 3.49568 7.00009 3.49568C8.83923 3.49568 10.6789 4.17982 12.0467 5.5481C12.8303 6.33287 12.9063 7.44412 12.232 8.31255ZM12.2495 10.9376C12.2495 11.0536 12.2035 11.1649 12.1214 11.2469C12.0394 11.329 11.9281 11.3751 11.812 11.3751H2.18759C2.07156 11.3751 1.96028 11.329 1.87823 11.2469C1.79619 11.1649 1.75009 11.0536 1.75009 10.9376C1.75009 10.8215 1.79619 10.7102 1.87823 10.6282C1.96028 10.5461 2.07156 10.5001 2.18759 10.5001H11.8126C11.9286 10.5001 12.0399 10.5461 12.122 10.6282C12.204 10.7102 12.2501 10.8215 12.2501 10.9376H12.2495Z",fill:"#5A5F63"})),qL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M11.375 1.75H10.0625V1.3125C10.0625 1.19647 10.0164 1.08519 9.93436 1.00314C9.85231 0.921094 9.74103 0.875 9.625 0.875C9.50897 0.875 9.39769 0.921094 9.31564 1.00314C9.23359 1.08519 9.1875 1.19647 9.1875 1.3125V1.75H4.8125V1.3125C4.8125 1.19647 4.76641 1.08519 4.68436 1.00314C4.60231 0.921094 4.49103 0.875 4.375 0.875C4.25897 0.875 4.14769 0.921094 4.06564 1.00314C3.98359 1.08519 3.9375 1.19647 3.9375 1.3125V1.75H2.625C2.39294 1.75 2.17038 1.84219 2.00628 2.00628C1.84219 2.17038 1.75 2.39294 1.75 2.625V11.375C1.75 11.6071 1.84219 11.8296 2.00628 11.9937C2.17038 12.1578 2.39294 12.25 2.625 12.25H11.375C11.6071 12.25 11.8296 12.1578 11.9937 11.9937C12.1578 11.8296 12.25 11.6071 12.25 11.375V2.625C12.25 2.39294 12.1578 2.17038 11.9937 2.00628C11.8296 1.84219 11.6071 1.75 11.375 1.75ZM3.9375 2.625V3.0625C3.9375 3.17853 3.98359 3.28981 4.06564 3.37186C4.14769 3.45391 4.25897 3.5 4.375 3.5C4.49103 3.5 4.60231 3.45391 4.68436 3.37186C4.76641 3.28981 4.8125 3.17853 4.8125 3.0625V2.625H9.1875V3.0625C9.1875 3.17853 9.23359 3.28981 9.31564 3.37186C9.39769 3.45391 9.50897 3.5 9.625 3.5C9.74103 3.5 9.85231 3.45391 9.93436 3.37186C10.0164 3.28981 10.0625 3.17853 10.0625 3.0625V2.625H11.375V4.375H2.625V2.625H3.9375ZM11.375 11.375H2.625V5.25H11.375V11.375ZM7.65625 7.21875C7.65625 7.34854 7.61776 7.47542 7.54565 7.58334C7.47354 7.69126 7.37105 7.77538 7.25114 7.82505C7.13122 7.87472 6.99927 7.88771 6.87197 7.86239C6.74467 7.83707 6.62774 7.77457 6.53596 7.68279C6.44418 7.59101 6.38168 7.47408 6.35636 7.34678C6.33104 7.21948 6.34403 7.08753 6.3937 6.96761C6.44337 6.8477 6.52749 6.74521 6.63541 6.6731C6.74333 6.60099 6.87021 6.5625 7 6.5625C7.17405 6.5625 7.34097 6.63164 7.46404 6.75471C7.58711 6.87778 7.65625 7.0447 7.65625 7.21875ZM10.0625 7.21875C10.0625 7.34854 10.024 7.47542 9.9519 7.58334C9.87979 7.69126 9.7773 7.77538 9.65739 7.82505C9.53747 7.87472 9.40552 7.88771 9.27822 7.86239C9.15092 7.83707 9.03399 7.77457 8.94221 7.68279C8.85043 7.59101 8.78793 7.47408 8.76261 7.34678C8.73729 7.21948 8.75028 7.08753 8.79995 6.96761C8.84962 6.8477 8.93374 6.74521 9.04166 6.6731C9.14958 6.60099 9.27646 6.5625 9.40625 6.5625C9.5803 6.5625 9.74722 6.63164 9.87029 6.75471C9.99336 6.87778 10.0625 7.0447 10.0625 7.21875ZM5.25 9.40625C5.25 9.53604 5.21151 9.66292 5.1394 9.77084C5.06729 9.87876 4.9648 9.96288 4.84489 10.0125C4.72497 10.0622 4.59302 10.0752 4.46572 10.0499C4.33842 10.0246 4.22149 9.96207 4.12971 9.87029C4.03793 9.77851 3.97543 9.66158 3.95011 9.53428C3.92479 9.40698 3.93778 9.27503 3.98745 9.15511C4.03712 9.0352 4.12124 8.93271 4.22916 8.8606C4.33708 8.78849 4.46396 8.75 4.59375 8.75C4.7678 8.75 4.93472 8.81914 5.05779 8.94221C5.18086 9.06528 5.25 9.2322 5.25 9.40625ZM7.65625 9.40625C7.65625 9.53604 7.61776 9.66292 7.54565 9.77084C7.47354 9.87876 7.37105 9.96288 7.25114 10.0125C7.13122 10.0622 6.99927 10.0752 6.87197 10.0499C6.74467 10.0246 6.62774 9.96207 6.53596 9.87029C6.44418 9.77851 6.38168 9.66158 6.35636 9.53428C6.33104 9.40698 6.34403 9.27503 6.3937 9.15511C6.44337 9.0352 6.52749 8.93271 6.63541 8.8606C6.74333 8.78849 6.87021 8.75 7 8.75C7.17405 8.75 7.34097 8.81914 7.46404 8.94221C7.58711 9.06528 7.65625 9.2322 7.65625 9.40625ZM10.0625 9.40625C10.0625 9.53604 10.024 9.66292 9.9519 9.77084C9.87979 9.87876 9.7773 9.96288 9.65739 10.0125C9.53747 10.0622 9.40552 10.0752 9.27822 10.0499C9.15092 10.0246 9.03399 9.96207 8.94221 9.87029C8.85043 9.77851 8.78793 9.66158 8.76261 9.53428C8.73729 9.40698 8.75028 9.27503 8.79995 9.15511C8.84962 9.0352 8.93374 8.93271 9.04166 8.8606C9.14958 8.78849 9.27646 8.75 9.40625 8.75C9.5803 8.75 9.74722 8.81914 9.87029 8.94221C9.99336 9.06528 10.0625 9.2322 10.0625 9.40625Z",fill:"#5A5F63"})),jL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M1.3126 7C1.31376 5.95606 1.72897 4.95522 2.46715 4.21705C3.20532 3.47887 4.20617 3.06366 5.2501 3.0625H11.1941L10.6281 2.49703C10.546 2.41494 10.4999 2.3036 10.4999 2.1875C10.4999 2.0714 10.546 1.96006 10.6281 1.87797C10.7102 1.79588 10.8215 1.74976 10.9376 1.74976C11.0537 1.74976 11.165 1.79588 11.2471 1.87797L12.5596 3.19047C12.6003 3.2311 12.6326 3.27935 12.6546 3.33246C12.6766 3.38557 12.6879 3.4425 12.6879 3.5C12.6879 3.55749 12.6766 3.61442 12.6546 3.66754C12.6326 3.72065 12.6003 3.7689 12.5596 3.80953L11.2471 5.12203C11.165 5.20412 11.0537 5.25024 10.9376 5.25024C10.8215 5.25024 10.7102 5.20412 10.6281 5.12203C10.546 5.03994 10.4999 4.9286 10.4999 4.8125C10.4999 4.6964 10.546 4.58506 10.6281 4.50297L11.1941 3.9375H5.2501C4.43814 3.93837 3.65969 4.2613 3.08554 4.83544C2.5114 5.40959 2.18847 6.18804 2.1876 7C2.1876 7.11603 2.14151 7.22731 2.05946 7.30936C1.97741 7.39141 1.86613 7.4375 1.7501 7.4375C1.63407 7.4375 1.52279 7.39141 1.44074 7.30936C1.35869 7.22731 1.3126 7.11603 1.3126 7ZM12.2501 6.5625C12.1341 6.5625 12.0228 6.60859 11.9407 6.69064C11.8587 6.77269 11.8126 6.88397 11.8126 7C11.8117 7.81196 11.4888 8.59041 10.9147 9.16456C10.3405 9.7387 9.56206 10.0616 8.7501 10.0625H2.80612L3.37213 9.49703C3.41278 9.45638 3.44502 9.40813 3.46702 9.35502C3.48902 9.30191 3.50034 9.24498 3.50034 9.1875C3.50034 9.13001 3.48902 9.07309 3.46702 9.01998C3.44502 8.96687 3.41278 8.91862 3.37213 8.87797C3.33148 8.83732 3.28323 8.80508 3.23012 8.78308C3.17701 8.76108 3.12009 8.74976 3.0626 8.74976C3.00511 8.74976 2.94819 8.76108 2.89508 8.78308C2.84197 8.80508 2.79372 8.83732 2.75307 8.87797L1.44057 10.1905C1.39989 10.2311 1.36762 10.2794 1.34561 10.3325C1.32359 10.3856 1.31226 10.4425 1.31226 10.5C1.31226 10.5575 1.32359 10.6144 1.34561 10.6675C1.36762 10.7206 1.39989 10.7689 1.44057 10.8095L2.75307 12.122C2.79372 12.1627 2.84197 12.1949 2.89508 12.2169C2.94819 12.2389 3.00511 12.2502 3.0626 12.2502C3.12009 12.2502 3.17701 12.2389 3.23012 12.2169C3.28323 12.1949 3.33148 12.1627 3.37213 12.122C3.41278 12.0814 3.44502 12.0331 3.46702 11.98C3.48902 11.9269 3.50034 11.87 3.50034 11.8125C3.50034 11.755 3.48902 11.6981 3.46702 11.645C3.44502 11.5919 3.41278 11.5436 3.37213 11.503L2.80612 10.9375H8.7501C9.79403 10.9363 10.7949 10.5211 11.5331 9.78295C12.2712 9.04478 12.6864 8.04393 12.6876 7C12.6876 6.88397 12.6415 6.77269 12.5595 6.69064C12.4774 6.60859 12.3661 6.5625 12.2501 6.5625Z",fill:"#5A5F63"})),YL=i=>k.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M10.5 6C10.5 6.09946 10.4605 6.19484 10.3902 6.26516C10.3198 6.33549 10.2245 6.375 10.125 6.375H6.375V10.125C6.375 10.2245 6.33549 10.3198 6.26516 10.3902C6.19484 10.4605 6.09946 10.5 6 10.5C5.90054 10.5 5.80516 10.4605 5.73483 10.3902C5.66451 10.3198 5.625 10.2245 5.625 10.125V6.375H1.875C1.77554 6.375 1.68016 6.33549 1.60984 6.26516C1.53951 6.19484 1.5 6.09946 1.5 6C1.5 5.90054 1.53951 5.80516 1.60984 5.73483C1.68016 5.66451 1.77554 5.625 1.875 5.625H5.625V1.875C5.625 1.77554 5.66451 1.68016 5.73483 1.60984C5.80516 1.53951 5.90054 1.5 6 1.5C6.09946 1.5 6.19484 1.53951 6.26516 1.60984C6.33549 1.68016 6.375 1.77554 6.375 1.875V5.625H10.125C10.2245 5.625 10.3198 5.66451 10.3902 5.73483C10.4605 5.80516 10.5 5.90054 10.5 6Z",fill:"#B7BBC0"})),ZL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6858 5.49211 12.086 4.04649 11.0198 2.98025C9.95352 1.91401 8.50789 1.31424 7 1.3125ZM11.8125 7C11.8129 7.44382 11.7516 7.88555 11.6304 8.3125H9.52438C9.65855 7.44264 9.65855 6.55736 9.52438 5.6875H11.6304C11.7516 6.11445 11.8129 6.55618 11.8125 7ZM5.57813 9.1875H8.42188C8.14172 10.1055 7.65537 10.9472 7 11.6484C6.34489 10.9471 5.85857 10.1054 5.57813 9.1875ZM5.36485 8.3125C5.21464 7.44395 5.21464 6.55605 5.36485 5.6875H8.63953C8.78974 6.55605 8.78974 7.44395 8.63953 8.3125H5.36485ZM2.1875 7C2.18712 6.55618 2.24841 6.11445 2.36961 5.6875H4.47563C4.34146 6.55736 4.34146 7.44264 4.47563 8.3125H2.36961C2.24841 7.88555 2.18712 7.44382 2.1875 7ZM8.42188 4.8125H5.57813C5.85829 3.89452 6.34464 3.05276 7 2.35156C7.65512 3.05294 8.14143 3.89464 8.42188 4.8125ZM11.2837 4.8125H9.33571C9.09019 3.91175 8.67639 3.0656 8.11617 2.31875C8.79305 2.48135 9.42676 2.78839 9.97386 3.21883C10.521 3.64926 10.9685 4.19291 11.2859 4.8125H11.2837ZM5.88383 2.31875C5.32361 3.0656 4.90982 3.91175 4.6643 4.8125H2.71414C3.03148 4.19291 3.47904 3.64926 4.02614 3.21883C4.57325 2.78839 5.20696 2.48135 5.88383 2.31875ZM2.71414 9.1875H4.6643C4.90982 10.0883 5.32361 10.9344 5.88383 11.6813C5.20696 11.5186 4.57325 11.2116 4.02614 10.7812C3.47904 10.3507 3.03148 9.80709 2.71414 9.1875ZM8.11617 11.6813C8.67639 10.9344 9.09019 10.0883 9.33571 9.1875H11.2859C10.9685 9.80709 10.521 10.3507 9.97386 10.7812C9.42676 11.2116 8.79305 11.5186 8.11617 11.6813Z",fill:"#5A5F63"})),zL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6859 5.49207 12.0862 4.04636 11.0199 2.98009C9.95365 1.91382 8.50793 1.31409 7 1.3125ZM11.8125 7C11.813 7.61741 11.6941 8.22909 11.4625 8.80141L9.01797 7.29805C8.91403 7.23391 8.79777 7.19236 8.67672 7.17609L7.42875 7.00766C7.25679 6.98523 7.08203 7.01406 6.92638 7.09052C6.77073 7.16699 6.64111 7.28769 6.55375 7.4375H6.07688L5.86906 7.00766C5.81161 6.88797 5.72753 6.78301 5.62326 6.70083C5.519 6.61865 5.3973 6.56141 5.2675 6.53352L4.83 6.43891L5.25766 5.6875H6.17149C6.31936 5.68721 6.46476 5.64959 6.59422 5.57812L7.26414 5.20844C7.323 5.17563 7.37803 5.13638 7.42821 5.09141L8.89985 3.76031C9.04739 3.62808 9.14546 3.44951 9.17787 3.25406C9.21028 3.0586 9.1751 2.85793 9.07813 2.68516L9.05844 2.64961C9.88192 3.04008 10.5778 3.65607 11.0653 4.42611C11.5527 5.19614 11.8118 6.08863 11.8125 7ZM2.1875 7C2.18677 6.2847 2.34636 5.57832 2.65453 4.93281L3.27469 6.5882C3.32637 6.72526 3.41163 6.84716 3.52266 6.9427C3.63369 7.03825 3.76693 7.1044 3.91016 7.13508L5.08211 7.38719L5.29047 7.82031C5.36278 7.96762 5.47485 8.09178 5.614 8.17875C5.75316 8.26573 5.91387 8.31205 6.07797 8.3125H6.15891L5.76352 9.20008C5.69385 9.35636 5.67154 9.52965 5.69934 9.69848C5.72714 9.86732 5.80383 10.0243 5.91992 10.15L5.92758 10.1577L7 11.2623L6.89391 11.8092C5.6371 11.78 4.44148 11.2607 3.56219 10.3622C2.68291 9.46371 2.18959 8.25715 2.1875 7Z",fill:"#5A5F63"})),QL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.1335 4.54779C12.7406 5.81752 12.8559 7.26713 12.457 8.61685C12.0582 9.96656 11.1735 11.1207 9.97375 11.8565C8.774 12.5923 7.34422 12.8576 5.96036 12.6012C4.5765 12.3448 3.33666 11.5849 2.48013 10.4682C1.62359 9.35143 1.21109 7.95697 1.32223 6.55396C1.43337 5.15095 2.06027 3.83883 3.08195 2.87085C4.10362 1.90287 5.44764 1.34765 6.85461 1.31234C8.26157 1.27703 9.63175 1.76414 10.7007 2.67966L11.9405 1.43935C12.0225 1.35726 12.1339 1.31114 12.25 1.31114C12.3661 1.31114 12.4774 1.35726 12.5595 1.43935C12.6416 1.52144 12.6877 1.63278 12.6877 1.74888C12.6877 1.86498 12.6416 1.97632 12.5595 2.05841L7.30951 7.30841C7.22742 7.3905 7.11608 7.43662 6.99998 7.43662C6.88389 7.43662 6.77254 7.3905 6.69045 7.30841C6.60836 7.22632 6.56224 7.11498 6.56224 6.99888C6.56224 6.88278 6.60836 6.77144 6.69045 6.68935L8.20639 5.17341C7.79555 4.9017 7.30504 4.77659 6.81425 4.81835C6.32346 4.86011 5.86113 5.06628 5.5021 5.40349C5.14307 5.74071 4.90835 6.18922 4.83595 6.67643C4.76355 7.16364 4.8577 7.66103 5.10315 8.08807C5.34861 8.51512 5.73101 8.84682 6.18845 9.02949C6.64588 9.21216 7.15158 9.23509 7.62368 9.09459C8.09578 8.95409 8.50663 8.65836 8.78975 8.2553C9.07286 7.85223 9.21165 7.36541 9.18365 6.87365C9.18042 6.81619 9.18854 6.75866 9.20754 6.70435C9.22654 6.65003 9.25605 6.59999 9.29439 6.55708C9.33273 6.51417 9.37915 6.47923 9.43099 6.45426C9.48284 6.42928 9.53909 6.41477 9.59655 6.41154C9.71258 6.40501 9.82645 6.44484 9.91311 6.52228C9.95602 6.56062 9.99096 6.60703 10.0159 6.65888C10.0409 6.71072 10.0554 6.76697 10.0587 6.82443C10.0985 7.52048 9.89973 8.2093 9.49509 8.77706C9.09045 9.34481 8.5042 9.7575 7.83324 9.94693C7.16227 10.1364 6.44675 10.0912 5.80495 9.81884C5.16314 9.54651 4.63346 9.06335 4.30346 8.4492C3.97346 7.83506 3.86288 7.12669 3.99002 6.44119C4.11715 5.75569 4.47437 5.13408 5.00265 4.67911C5.53093 4.22413 6.19864 3.96303 6.89541 3.93896C7.59219 3.91488 8.27633 4.12927 8.83475 4.54669L10.0789 3.30255C9.16714 2.54557 8.00786 2.15212 6.8237 2.1978C5.63954 2.24347 4.51401 2.72503 3.66327 3.54999C2.81254 4.37496 2.29659 5.48515 2.21452 6.66734C2.13245 7.84954 2.49006 9.02037 3.21865 9.95497C3.94724 10.8896 4.99544 11.522 6.16193 11.7309C7.32842 11.9397 8.53094 11.7102 9.53854 11.0865C10.5461 10.4627 11.2878 9.48872 11.621 8.35149C11.9542 7.21426 11.8555 5.99402 11.3438 4.92513C11.2938 4.82041 11.2874 4.7001 11.326 4.59067C11.3647 4.48124 11.4453 4.39165 11.55 4.34161C11.6547 4.29158 11.775 4.28519 11.8844 4.32385C11.9939 4.36251 12.0835 4.44307 12.1335 4.54779Z",fill:"#5A5F63"})),XL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M10.9375 2.625H7.4375V0.875C7.4375 0.758968 7.39141 0.647688 7.30936 0.565641C7.22731 0.483594 7.11603 0.4375 7 0.4375C6.88397 0.4375 6.77269 0.483594 6.69064 0.565641C6.60859 0.647688 6.5625 0.758968 6.5625 0.875V2.625H3.0625C2.59837 2.625 2.15325 2.80937 1.82506 3.13756C1.49687 3.46575 1.3125 3.91087 1.3125 4.375V10.5C1.3125 10.9641 1.49687 11.4092 1.82506 11.7374C2.15325 12.0656 2.59837 12.25 3.0625 12.25H10.9375C11.4016 12.25 11.8467 12.0656 12.1749 11.7374C12.5031 11.4092 12.6875 10.9641 12.6875 10.5V4.375C12.6875 3.91087 12.5031 3.46575 12.1749 3.13756C11.8467 2.80937 11.4016 2.625 10.9375 2.625ZM11.8125 10.5C11.8125 10.7321 11.7203 10.9546 11.5562 11.1187C11.3921 11.2828 11.1696 11.375 10.9375 11.375H3.0625C2.83044 11.375 2.60788 11.2828 2.44378 11.1187C2.27969 10.9546 2.1875 10.7321 2.1875 10.5V4.375C2.1875 4.14294 2.27969 3.92038 2.44378 3.75628C2.60788 3.59219 2.83044 3.5 3.0625 3.5H10.9375C11.1696 3.5 11.3921 3.59219 11.5562 3.75628C11.7203 3.92038 11.8125 4.14294 11.8125 4.375V10.5ZM8.96875 7.4375H5.03125C4.62514 7.4375 4.23566 7.59883 3.94849 7.88599C3.66133 8.17316 3.5 8.56264 3.5 8.96875C3.5 9.37486 3.66133 9.76434 3.94849 10.0515C4.23566 10.3387 4.62514 10.5 5.03125 10.5H8.96875C9.37486 10.5 9.76434 10.3387 10.0515 10.0515C10.3387 9.76434 10.5 9.37486 10.5 8.96875C10.5 8.56264 10.3387 8.17316 10.0515 7.88599C9.76434 7.59883 9.37486 7.4375 8.96875 7.4375ZM7.65625 8.3125V9.625H6.34375V8.3125H7.65625ZM4.375 8.96875C4.375 8.7947 4.44414 8.62778 4.56721 8.50471C4.69028 8.38164 4.8572 8.3125 5.03125 8.3125H5.46875V9.625H5.03125C4.8572 9.625 4.69028 9.55586 4.56721 9.43279C4.44414 9.30972 4.375 9.1428 4.375 8.96875ZM8.96875 9.625H8.53125V8.3125H8.96875C9.1428 8.3125 9.30972 8.38164 9.43279 8.50471C9.55586 8.62778 9.625 8.7947 9.625 8.96875C9.625 9.1428 9.55586 9.30972 9.43279 9.43279C9.30972 9.55586 9.1428 9.625 8.96875 9.625ZM3.9375 5.90625C3.9375 5.77646 3.97599 5.64958 4.0481 5.54166C4.12021 5.43374 4.2227 5.34962 4.34261 5.29995C4.46253 5.25028 4.59448 5.23729 4.72178 5.26261C4.84908 5.28793 4.96601 5.35043 5.05779 5.44221C5.14957 5.53399 5.21207 5.65092 5.23739 5.77822C5.26271 5.90552 5.24972 6.03747 5.20005 6.15739C5.15038 6.2773 5.06626 6.37979 4.95834 6.4519C4.85042 6.52401 4.72354 6.5625 4.59375 6.5625C4.4197 6.5625 4.25278 6.49336 4.12971 6.37029C4.00664 6.24722 3.9375 6.0803 3.9375 5.90625ZM8.75 5.90625C8.75 5.77646 8.78849 5.64958 8.8606 5.54166C8.93271 5.43374 9.0352 5.34962 9.15511 5.29995C9.27503 5.25028 9.40698 5.23729 9.53428 5.26261C9.66158 5.28793 9.77851 5.35043 9.87029 5.44221C9.96207 5.53399 10.0246 5.65092 10.0499 5.77822C10.0752 5.90552 10.0622 6.03747 10.0125 6.15739C9.96288 6.2773 9.87876 6.37979 9.77084 6.4519C9.66292 6.52401 9.53604 6.5625 9.40625 6.5625C9.2322 6.5625 9.06528 6.49336 8.94221 6.37029C8.81914 6.24722 8.75 6.0803 8.75 5.90625Z",fill:"#5A5F63"})),JL=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M7 1.3125C5.87512 1.3125 4.7755 1.64607 3.8402 2.27102C2.90489 2.89597 2.17591 3.78423 1.74544 4.82349C1.31496 5.86274 1.20233 7.00631 1.42179 8.10958C1.64124 9.21284 2.18292 10.2263 2.97833 11.0217C3.77374 11.8171 4.78716 12.3588 5.89043 12.5782C6.99369 12.7977 8.13726 12.685 9.17651 12.2546C10.2158 11.8241 11.104 11.0951 11.729 10.1598C12.3539 9.2245 12.6875 8.12488 12.6875 7C12.6859 5.49207 12.0862 4.04636 11.0199 2.98009C9.95365 1.91382 8.50793 1.31409 7 1.3125ZM7 11.8125C6.04818 11.8125 5.11773 11.5303 4.32632 11.0014C3.53491 10.4726 2.91808 9.72103 2.55383 8.84166C2.18959 7.9623 2.09428 6.99466 2.27997 6.06113C2.46566 5.12759 2.92401 4.27009 3.59705 3.59705C4.27009 2.92401 5.1276 2.46566 6.06113 2.27997C6.99466 2.09428 7.9623 2.18958 8.84167 2.55383C9.72104 2.91808 10.4726 3.53491 11.0014 4.32632C11.5303 5.11773 11.8125 6.04818 11.8125 7C11.8111 8.27591 11.3036 9.49915 10.4014 10.4014C9.49915 11.3036 8.27591 11.8111 7 11.8125ZM10.5 7C10.5 7.11603 10.4539 7.22731 10.3719 7.30936C10.2898 7.39141 10.1785 7.4375 10.0625 7.4375H7C6.88397 7.4375 6.77269 7.39141 6.69064 7.30936C6.6086 7.22731 6.5625 7.11603 6.5625 7V3.9375C6.5625 3.82147 6.6086 3.71019 6.69064 3.62814C6.77269 3.54609 6.88397 3.5 7 3.5C7.11603 3.5 7.22731 3.54609 7.30936 3.62814C7.39141 3.71019 7.4375 3.82147 7.4375 3.9375V6.5625H10.0625C10.1785 6.5625 10.2898 6.60859 10.3719 6.69064C10.4539 6.77269 10.5 6.88397 10.5 7Z",fill:"#5A5F63"})),eR=i=>k.createElement("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.0461 8.67022C11.9837 8.63087 11.9124 8.60793 11.8388 8.60353C11.7651 8.59914 11.6916 8.61342 11.625 8.64506C11.4583 8.7239 11.2743 8.75931 11.0903 8.748C10.9062 8.73669 10.728 8.67902 10.5722 8.58036C10.4164 8.4817 10.2881 8.34525 10.1992 8.18369C10.1103 8.02214 10.0636 7.84072 10.0636 7.65631C10.0636 7.4719 10.1103 7.29048 10.1992 7.12893C10.2881 6.96737 10.4164 6.83092 10.5722 6.73226C10.728 6.6336 10.9062 6.57593 11.0903 6.56462C11.2743 6.55331 11.4583 6.58872 11.625 6.66756C11.6917 6.69921 11.7653 6.71347 11.839 6.70901C11.9127 6.70455 11.9841 6.68152 12.0464 6.64205C12.1088 6.60259 12.1602 6.54798 12.1958 6.4833C12.2314 6.41863 12.2501 6.346 12.2501 6.27217V3.93756C12.2501 3.7055 12.1579 3.48294 11.9938 3.31884C11.8297 3.15475 11.6071 3.06256 11.3751 3.06256H9.39429C9.40243 2.98993 9.40645 2.9169 9.40632 2.84381C9.40592 2.57493 9.35061 2.30895 9.24378 2.0622C9.13696 1.81545 8.98086 1.59311 8.78507 1.40881C8.51397 1.15419 8.17628 0.981575 7.81113 0.910947C7.44597 0.840319 7.06828 0.87457 6.72178 1.00973C6.37529 1.1449 6.07417 1.37545 5.85329 1.67468C5.63242 1.97391 5.50082 2.32959 5.47374 2.70053C5.46534 2.82119 5.4679 2.94236 5.4814 3.06256H3.50007C3.268 3.06256 3.04544 3.15475 2.88135 3.31884C2.71726 3.48294 2.62507 3.7055 2.62507 3.93756V5.69959C2.55244 5.69145 2.4794 5.68743 2.40632 5.68756C2.13744 5.68799 1.87148 5.74332 1.62473 5.85014C1.37798 5.95697 1.15563 6.11304 0.971318 6.30881C0.785681 6.5049 0.642739 6.73737 0.551526 6.99152C0.460313 7.24568 0.422814 7.51599 0.441397 7.78537C0.472748 8.25972 0.674298 8.7068 1.00898 9.0444C1.34367 9.38199 1.78898 9.58741 2.26304 9.62287C2.38369 9.63155 2.50489 9.62899 2.62507 9.61522V11.3751C2.62507 11.6071 2.71726 11.8297 2.88135 11.9938C3.04544 12.1579 3.268 12.2501 3.50007 12.2501H11.3751C11.6071 12.2501 11.8297 12.1579 11.9938 11.9938C12.1579 11.8297 12.2501 11.6071 12.2501 11.3751V9.04045C12.2501 8.96653 12.2314 8.89381 12.1958 8.82906C12.1601 8.76432 12.1086 8.70967 12.0461 8.67022ZM11.3751 11.3751H3.50007V9.04045C3.50009 8.96663 3.48143 8.89399 3.44583 8.82932C3.41023 8.76465 3.35884 8.71003 3.29645 8.67057C3.23405 8.6311 3.16269 8.60807 3.089 8.60361C3.01531 8.59915 2.94169 8.61341 2.87499 8.64506C2.70828 8.7239 2.52435 8.75931 2.34029 8.748C2.15622 8.73669 1.97801 8.67902 1.82221 8.58036C1.66641 8.4817 1.53809 8.34525 1.44917 8.18369C1.36025 8.02214 1.31363 7.84072 1.31363 7.65631C1.31363 7.4719 1.36025 7.29048 1.44917 7.12893C1.53809 6.96737 1.66641 6.83092 1.82221 6.73226C1.97801 6.6336 2.15622 6.57593 2.34029 6.56462C2.52435 6.55331 2.70828 6.58872 2.87499 6.66756C2.94169 6.69921 3.01531 6.71347 3.089 6.70901C3.16269 6.70455 3.23405 6.68152 3.29645 6.64205C3.35884 6.60259 3.41023 6.54798 3.44583 6.4833C3.48143 6.41863 3.50009 6.346 3.50007 6.27217V3.93756H6.05343C6.12725 3.93758 6.19988 3.91893 6.26456 3.88332C6.32923 3.84772 6.38384 3.79633 6.42331 3.73394C6.46278 3.67155 6.48581 3.60018 6.49027 3.52649C6.49473 3.4528 6.48047 3.37918 6.44882 3.31248C6.36998 3.14578 6.33457 2.96184 6.34588 2.77778C6.35719 2.59372 6.41486 2.4155 6.51352 2.2597C6.61218 2.10391 6.74863 1.97558 6.91019 1.88666C7.07174 1.79775 7.25316 1.75112 7.43757 1.75112C7.62198 1.75112 7.80339 1.79775 7.96495 1.88666C8.12651 1.97558 8.26296 2.10391 8.36162 2.2597C8.46028 2.4155 8.51795 2.59372 8.52926 2.77778C8.54057 2.96184 8.50516 3.14578 8.42632 3.31248C8.39467 3.37918 8.3804 3.4528 8.38486 3.52649C8.38933 3.60018 8.41236 3.67155 8.45183 3.73394C8.49129 3.79633 8.5459 3.84772 8.61058 3.88332C8.67525 3.91893 8.74788 3.93758 8.82171 3.93756H11.3751V5.70014C11.2549 5.68637 11.1337 5.68381 11.013 5.69248C10.5038 5.72854 10.0286 5.96096 9.68746 6.34071C9.34634 6.72047 9.16607 7.21787 9.18465 7.728C9.20324 8.23812 9.41924 8.72109 9.78708 9.07501C10.1549 9.42894 10.6459 9.62616 11.1563 9.62506C11.2294 9.62519 11.3024 9.62117 11.3751 9.61303V11.3751Z",fill:"#5A5F63"})),tR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M5.52411 2.02343C5.49568 1.91141 5.51274 1.79268 5.57155 1.69319C5.63037 1.59369 5.72616 1.52152 5.83802 1.49242C6.77067 1.25188 7.74911 1.25188 8.68177 1.49242C8.78507 1.51887 8.87516 1.58213 8.9351 1.67033C8.99503 1.75852 9.0207 1.86557 9.00727 1.97136C8.99383 2.07714 8.94223 2.17438 8.86215 2.2448C8.78207 2.31521 8.67903 2.35395 8.57239 2.35374C8.53548 2.35355 8.49875 2.34878 8.46302 2.33953C7.67387 2.13577 6.84591 2.13577 6.05677 2.33953C6.00104 2.35381 5.94303 2.35696 5.88608 2.3488C5.82913 2.34064 5.77435 2.32132 5.72487 2.29196C5.6754 2.2626 5.6322 2.22377 5.59775 2.17769C5.5633 2.13161 5.53827 2.07919 5.52411 2.02343ZM2.08372 6.01562C2.13909 6.031 2.19695 6.03532 2.25399 6.02833C2.31103 6.02135 2.36614 6.00319 2.41616 5.97491C2.46618 5.94662 2.51014 5.90875 2.54553 5.86347C2.58091 5.81819 2.60703 5.76639 2.62239 5.71101C2.84037 4.9259 3.25438 4.2091 3.82552 3.62796C3.90029 3.54409 3.93993 3.43466 3.93621 3.32236C3.9325 3.21005 3.88572 3.10349 3.80556 3.02474C3.72541 2.94599 3.61803 2.9011 3.50568 2.89937C3.39332 2.89765 3.28462 2.93922 3.20208 3.01546C2.52734 3.70211 2.03808 4.5489 1.7802 5.4764C1.76472 5.53174 1.76029 5.58958 1.76717 5.64663C1.77404 5.70367 1.79209 5.75881 1.82027 5.80888C1.84846 5.85895 1.88623 5.90298 1.93143 5.93845C1.97663 5.97393 2.02838 6.00015 2.08372 6.01562ZM8.46302 11.6605C7.67387 11.8642 6.84591 11.8642 6.05677 11.6605C5.94512 11.6334 5.82732 11.6514 5.72881 11.7105C5.6303 11.7696 5.55899 11.8651 5.53027 11.9763C5.50155 12.0875 5.51772 12.2056 5.5753 12.305C5.63288 12.4044 5.72724 12.4772 5.83802 12.5076C6.77067 12.7481 7.74911 12.7481 8.68177 12.5076C8.79254 12.4772 8.8869 12.4044 8.94448 12.305C9.00206 12.2056 9.01824 12.0875 8.98952 11.9763C8.96079 11.8651 8.88948 11.7696 8.79097 11.7105C8.69246 11.6514 8.57467 11.6334 8.46302 11.6605ZM11.8974 5.7121C11.9284 5.82393 12.0026 5.91885 12.1036 5.97597C12.2047 6.0331 12.3242 6.04775 12.4361 6.01671C12.5479 5.98567 12.6428 5.91148 12.6999 5.81046C12.7571 5.70944 12.7717 5.58987 12.7407 5.47804C12.4826 4.55062 11.9934 3.70387 11.3188 3.0171C11.2789 2.97452 11.2309 2.94034 11.1777 2.91657C11.1244 2.89281 11.0669 2.87994 11.0086 2.87872C10.9502 2.87751 10.8923 2.88797 10.838 2.90949C10.7838 2.93101 10.7344 2.96316 10.6928 3.00405C10.6512 3.04493 10.6182 3.09373 10.5957 3.14756C10.5732 3.20139 10.5618 3.25918 10.5619 3.31752C10.5621 3.37585 10.574 3.43357 10.5968 3.48726C10.6196 3.54095 10.6529 3.58953 10.6948 3.63015C11.2649 4.21147 11.6784 4.92774 11.8968 5.7121H11.8974ZM12.7418 8.52249C12.4523 9.56601 11.8701 10.5048 11.064 11.2279C11.0141 11.2729 10.9545 11.3058 10.8899 11.3241C10.8253 11.3424 10.7573 11.3455 10.6912 11.3333C10.6252 11.3211 10.5628 11.2938 10.509 11.2537C10.4552 11.2135 10.4114 11.1614 10.3809 11.1016C10.0883 10.5251 9.64187 10.041 9.09098 9.70282C8.54009 9.36464 7.9063 9.18562 7.25989 9.18562C6.61348 9.18562 5.97969 9.36464 5.4288 9.70282C4.87791 10.041 4.43144 10.5251 4.13888 11.1016C4.10844 11.1614 4.06466 11.2134 4.01091 11.2536C3.95716 11.2937 3.89489 11.321 3.82891 11.3333C3.76293 11.3455 3.69502 11.3425 3.63042 11.3243C3.56582 11.3061 3.50627 11.2733 3.45638 11.2284C2.65019 10.5049 2.06799 9.56578 1.77856 8.52195C1.7476 8.41012 1.76232 8.29057 1.8195 8.18961C1.87668 8.08864 1.97162 8.01452 2.08345 7.98355C2.19527 7.95258 2.31482 7.96731 2.41579 8.02448C2.51676 8.08166 2.59088 8.17661 2.62184 8.28843C2.81754 8.99545 3.17304 9.64807 3.66091 10.1959C4.14905 9.48792 4.83604 8.94042 5.63513 8.62257C5.20634 8.28503 4.89341 7.82225 4.73986 7.2986C4.58631 6.77495 4.59977 6.21646 4.77838 5.70082C4.95699 5.18517 5.29186 4.73801 5.73641 4.42153C6.18096 4.10504 6.7131 3.93497 7.2588 3.93497C7.8045 3.93497 8.33663 4.10504 8.78119 4.42153C9.22574 4.73801 9.56061 5.18517 9.73921 5.70082C9.91782 6.21646 9.93129 6.77495 9.77774 7.2986C9.62419 7.82225 9.31125 8.28503 8.88247 8.62257C9.68156 8.94042 10.3685 9.48792 10.8567 10.1959C11.3446 9.64807 11.7001 8.99545 11.8958 8.28843C11.9111 8.23306 11.9372 8.18126 11.9726 8.13599C12.008 8.09071 12.052 8.05285 12.102 8.02456C12.152 7.99628 12.2071 7.97812 12.2642 7.97113C12.3212 7.96414 12.3791 7.96845 12.4344 7.98382C12.4898 7.99919 12.5416 8.02532 12.5869 8.0607C12.6321 8.09609 12.67 8.14005 12.6983 8.19007C12.7266 8.24009 12.7447 8.29519 12.7517 8.35223C12.7587 8.40927 12.7544 8.46712 12.739 8.52249H12.7418ZM7.25989 8.31249C7.60601 8.31249 7.94435 8.20986 8.23214 8.01757C8.51993 7.82527 8.74423 7.55196 8.87668 7.23219C9.00913 6.91242 9.04379 6.56055 8.97627 6.22109C8.90874 5.88162 8.74207 5.5698 8.49733 5.32506C8.25259 5.08032 7.94077 4.91364 7.6013 4.84612C7.26183 4.7786 6.90997 4.81325 6.5902 4.94571C6.27042 5.07816 5.99711 5.30246 5.80482 5.59025C5.61253 5.87803 5.50989 6.21638 5.50989 6.56249C5.50989 7.02662 5.69427 7.47174 6.02245 7.79993C6.35064 8.12812 6.79576 8.31249 7.25989 8.31249Z",fill:"#5A5F63"})),iR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M12.51 10.9375H12.0725V2.1875C12.0725 2.07147 12.0264 1.96019 11.9444 1.87814C11.8623 1.79609 11.751 1.75 11.635 1.75H8.57251C8.45648 1.75 8.3452 1.79609 8.26315 1.87814C8.1811 1.96019 8.13501 2.07147 8.13501 2.1875V4.375H5.51001C5.39398 4.375 5.2827 4.42109 5.20065 4.50314C5.1186 4.58519 5.07251 4.69647 5.07251 4.8125V7H2.88501C2.76898 7 2.6577 7.04609 2.57565 7.12814C2.4936 7.21019 2.44751 7.32147 2.44751 7.4375V10.9375H2.01001C1.89398 10.9375 1.7827 10.9836 1.70065 11.0656C1.6186 11.1477 1.57251 11.259 1.57251 11.375C1.57251 11.491 1.6186 11.6023 1.70065 11.6844C1.7827 11.7664 1.89398 11.8125 2.01001 11.8125H12.51C12.626 11.8125 12.7373 11.7664 12.8194 11.6844C12.9014 11.6023 12.9475 11.491 12.9475 11.375C12.9475 11.259 12.9014 11.1477 12.8194 11.0656C12.7373 10.9836 12.626 10.9375 12.51 10.9375ZM9.01001 2.625H11.1975V10.9375H9.01001V2.625ZM5.94751 5.25H8.13501V10.9375H5.94751V5.25ZM3.32251 7.875H5.07251V10.9375H3.32251V7.875Z",fill:"#5A5F63"})),sR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M9.88501 0.875H4.63501C4.28691 0.875 3.95307 1.01328 3.70693 1.25942C3.46079 1.50556 3.32251 1.8394 3.32251 2.1875V11.8125C3.32251 12.1606 3.46079 12.4944 3.70693 12.7406C3.95307 12.9867 4.28691 13.125 4.63501 13.125H9.88501C10.2331 13.125 10.5669 12.9867 10.8131 12.7406C11.0592 12.4944 11.1975 12.1606 11.1975 11.8125V2.1875C11.1975 1.8394 11.0592 1.50556 10.8131 1.25942C10.5669 1.01328 10.2331 0.875 9.88501 0.875ZM10.3225 11.8125C10.3225 11.9285 10.2764 12.0398 10.1944 12.1219C10.1123 12.2039 10.001 12.25 9.88501 12.25H4.63501C4.51898 12.25 4.4077 12.2039 4.32565 12.1219C4.2436 12.0398 4.19751 11.9285 4.19751 11.8125V2.1875C4.19751 2.07147 4.2436 1.96019 4.32565 1.87814C4.4077 1.79609 4.51898 1.75 4.63501 1.75H9.88501C10.001 1.75 10.1123 1.79609 10.1944 1.87814C10.2764 1.96019 10.3225 2.07147 10.3225 2.1875V11.8125ZM7.91626 3.28125C7.91626 3.41104 7.87777 3.53792 7.80566 3.64584C7.73355 3.75376 7.63106 3.83788 7.51115 3.88755C7.39123 3.93722 7.25928 3.95021 7.13198 3.92489C7.00468 3.89957 6.88775 3.83707 6.79597 3.74529C6.70419 3.65351 6.64169 3.53658 6.61637 3.40928C6.59105 3.28198 6.60404 3.15003 6.65371 3.03011C6.70338 2.9102 6.7875 2.80771 6.89542 2.7356C7.00334 2.66349 7.13022 2.625 7.26001 2.625C7.43406 2.625 7.60098 2.69414 7.72405 2.81721C7.84712 2.94028 7.91626 3.1072 7.91626 3.28125Z",fill:"#5A5F63"})),rR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M4.63501 3.5C4.63501 3.38397 4.6811 3.27269 4.76315 3.19064C4.8452 3.10859 4.95648 3.0625 5.07251 3.0625H12.0725C12.1885 3.0625 12.2998 3.10859 12.3819 3.19064C12.4639 3.27269 12.51 3.38397 12.51 3.5C12.51 3.61603 12.4639 3.72731 12.3819 3.80936C12.2998 3.89141 12.1885 3.9375 12.0725 3.9375H5.07251C4.95648 3.9375 4.8452 3.89141 4.76315 3.80936C4.6811 3.72731 4.63501 3.61603 4.63501 3.5ZM12.0725 6.5625H5.07251C4.95648 6.5625 4.8452 6.60859 4.76315 6.69064C4.6811 6.77269 4.63501 6.88397 4.63501 7C4.63501 7.11603 4.6811 7.22731 4.76315 7.30936C4.8452 7.39141 4.95648 7.4375 5.07251 7.4375H12.0725C12.1885 7.4375 12.2998 7.39141 12.3819 7.30936C12.4639 7.22731 12.51 7.11603 12.51 7C12.51 6.88397 12.4639 6.77269 12.3819 6.69064C12.2998 6.60859 12.1885 6.5625 12.0725 6.5625ZM12.0725 10.0625H5.07251C4.95648 10.0625 4.8452 10.1086 4.76315 10.1906C4.6811 10.2727 4.63501 10.384 4.63501 10.5C4.63501 10.616 4.6811 10.7273 4.76315 10.8094C4.8452 10.8914 4.95648 10.9375 5.07251 10.9375H12.0725C12.1885 10.9375 12.2998 10.8914 12.3819 10.8094C12.4639 10.7273 12.51 10.616 12.51 10.5C12.51 10.384 12.4639 10.2727 12.3819 10.1906C12.2998 10.1086 12.1885 10.0625 12.0725 10.0625ZM2.66626 2.84375C2.53647 2.84375 2.40959 2.88224 2.30167 2.95435C2.19375 3.02646 2.10963 3.12895 2.05996 3.24886C2.01029 3.36878 1.9973 3.50073 2.02262 3.62803C2.04794 3.75533 2.11044 3.87226 2.20222 3.96404C2.294 4.05582 2.41093 4.11832 2.53823 4.14364C2.66553 4.16896 2.79748 4.15597 2.9174 4.1063C3.03731 4.05663 3.1398 3.97251 3.21191 3.86459C3.28402 3.75667 3.32251 3.62979 3.32251 3.5C3.32251 3.32595 3.25337 3.15903 3.1303 3.03596C3.00723 2.91289 2.84031 2.84375 2.66626 2.84375ZM2.66626 6.34375C2.53647 6.34375 2.40959 6.38224 2.30167 6.45435C2.19375 6.52646 2.10963 6.62895 2.05996 6.74886C2.01029 6.86878 1.9973 7.00073 2.02262 7.12803C2.04794 7.25533 2.11044 7.37226 2.20222 7.46404C2.294 7.55582 2.41093 7.61832 2.53823 7.64364C2.66553 7.66896 2.79748 7.65597 2.9174 7.6063C3.03731 7.55663 3.1398 7.47251 3.21191 7.36459C3.28402 7.25667 3.32251 7.12979 3.32251 7C3.32251 6.82595 3.25337 6.65903 3.1303 6.53596C3.00723 6.41289 2.84031 6.34375 2.66626 6.34375ZM2.66626 9.84375C2.53647 9.84375 2.40959 9.88224 2.30167 9.95435C2.19375 10.0265 2.10963 10.129 2.05996 10.2489C2.01029 10.3688 1.9973 10.5007 2.02262 10.628C2.04794 10.7553 2.11044 10.8723 2.20222 10.964C2.294 11.0558 2.41093 11.1183 2.53823 11.1436C2.66553 11.169 2.79748 11.156 2.9174 11.1063C3.03731 11.0566 3.1398 10.9725 3.21191 10.8646C3.28402 10.7567 3.32251 10.6298 3.32251 10.5C3.32251 10.326 3.25337 10.159 3.1303 10.036C3.00723 9.91289 2.84031 9.84375 2.66626 9.84375Z",fill:"#5A5F63"})),nR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M11.635 2.625H2.88501C2.53691 2.625 2.20307 2.76328 1.95693 3.00942C1.71079 3.25556 1.57251 3.5894 1.57251 3.9375V10.0625C1.57251 10.4106 1.71079 10.7444 1.95693 10.9906C2.20307 11.2367 2.53691 11.375 2.88501 11.375H11.635C11.9831 11.375 12.3169 11.2367 12.5631 10.9906C12.8092 10.7444 12.9475 10.4106 12.9475 10.0625V3.9375C12.9475 3.5894 12.8092 3.25556 12.5631 3.00942C12.3169 2.76328 11.9831 2.625 11.635 2.625ZM2.44751 5.25H12.0725V6.125H9.01001C8.89398 6.125 8.7827 6.17109 8.70065 6.25314C8.6186 6.33519 8.57251 6.44647 8.57251 6.5625C8.57251 6.9106 8.43423 7.24444 8.18809 7.49058C7.94195 7.73672 7.60811 7.875 7.26001 7.875C6.91191 7.875 6.57807 7.73672 6.33193 7.49058C6.08579 7.24444 5.94751 6.9106 5.94751 6.5625C5.94751 6.44647 5.90142 6.33519 5.81937 6.25314C5.73732 6.17109 5.62604 6.125 5.51001 6.125H2.44751V5.25ZM2.88501 3.5H11.635C11.751 3.5 11.8623 3.54609 11.9444 3.62814C12.0264 3.71019 12.0725 3.82147 12.0725 3.9375V4.375H2.44751V3.9375C2.44751 3.82147 2.4936 3.71019 2.57565 3.62814C2.6577 3.54609 2.76898 3.5 2.88501 3.5ZM11.635 10.5H2.88501C2.76898 10.5 2.6577 10.4539 2.57565 10.3719C2.4936 10.2898 2.44751 10.1785 2.44751 10.0625V7H5.11626C5.21667 7.4945 5.48495 7.93908 5.87565 8.25842C6.26634 8.57775 6.75542 8.75219 7.26001 8.75219C7.7646 8.75219 8.25368 8.57775 8.64437 8.25842C9.03507 7.93908 9.30335 7.4945 9.40376 7H12.0725V10.0625C12.0725 10.1785 12.0264 10.2898 11.9444 10.3719C11.8623 10.4539 11.751 10.5 11.635 10.5Z",fill:"#5A5F63"})),aR=i=>k.createElement("svg",{width:15,height:14,viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M8.57251 6.5625H7.69751V3.0625H8.13501C8.59914 3.0625 9.04426 3.24687 9.37245 3.57506C9.70063 3.90325 9.88501 4.34837 9.88501 4.8125C9.88501 4.92853 9.9311 5.03981 10.0132 5.12186C10.0952 5.20391 10.2065 5.25 10.3225 5.25C10.4385 5.25 10.5498 5.20391 10.6319 5.12186C10.7139 5.03981 10.76 4.92853 10.76 4.8125C10.7593 4.11653 10.4825 3.44927 9.99037 2.95714C9.49824 2.46502 8.83098 2.18822 8.13501 2.1875H7.69751V1.3125C7.69751 1.19647 7.65142 1.08519 7.56937 1.00314C7.48732 0.921094 7.37604 0.875 7.26001 0.875C7.14398 0.875 7.0327 0.921094 6.95065 1.00314C6.8686 1.08519 6.82251 1.19647 6.82251 1.3125V2.1875H6.38501C5.68882 2.1875 5.02114 2.46406 4.52885 2.95634C4.03657 3.44863 3.76001 4.11631 3.76001 4.8125C3.76001 5.50869 4.03657 6.17637 4.52885 6.66866C5.02114 7.16094 5.68882 7.4375 6.38501 7.4375H6.82251V10.9375H5.94751C5.48338 10.9375 5.03826 10.7531 4.71007 10.4249C4.38188 10.0967 4.19751 9.65163 4.19751 9.1875C4.19751 9.07147 4.15142 8.96019 4.06937 8.87814C3.98732 8.79609 3.87604 8.75 3.76001 8.75C3.64398 8.75 3.5327 8.79609 3.45065 8.87814C3.3686 8.96019 3.32251 9.07147 3.32251 9.1875C3.32323 9.88347 3.60003 10.5507 4.09215 11.0429C4.58428 11.535 5.25154 11.8118 5.94751 11.8125H6.82251V12.6875C6.82251 12.8035 6.8686 12.9148 6.95065 12.9969C7.0327 13.0789 7.14398 13.125 7.26001 13.125C7.37604 13.125 7.48732 13.0789 7.56937 12.9969C7.65142 12.9148 7.69751 12.8035 7.69751 12.6875V11.8125H8.57251C9.2687 11.8125 9.93638 11.5359 10.4287 11.0437C10.9209 10.5514 11.1975 9.88369 11.1975 9.1875C11.1975 8.49131 10.9209 7.82363 10.4287 7.33134C9.93638 6.83906 9.2687 6.5625 8.57251 6.5625ZM6.38501 6.5625C5.92088 6.5625 5.47576 6.37813 5.14757 6.04994C4.81938 5.72175 4.63501 5.27663 4.63501 4.8125C4.63501 4.34837 4.81938 3.90325 5.14757 3.57506C5.47576 3.24687 5.92088 3.0625 6.38501 3.0625H6.82251V6.5625H6.38501ZM8.57251 10.9375H7.69751V7.4375H8.57251C9.03664 7.4375 9.48176 7.62187 9.80995 7.95006C10.1381 8.27825 10.3225 8.72337 10.3225 9.1875C10.3225 9.65163 10.1381 10.0967 9.80995 10.4249C9.48176 10.7531 9.03664 10.9375 8.57251 10.9375Z",fill:"#5A5F63"})),oR=i=>k.createElement("svg",{width:16,height:40,viewBox:"0 0 16 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M3 37C6.72753 37 8.5913 37 10.0615 36.391C12.0217 35.5791 13.5791 34.0217 14.391 32.0615C15 30.5913 15 28.7275 15 25L15 15C15 11.2725 15 9.4087 14.391 7.93853C13.5791 5.97831 12.0217 4.42091 10.0615 3.60896C8.5913 3 6.72753 3 3 3",stroke:"#CED1D5"}),k.createElement("path",{d:"M3 18C4.10457 18 5 18.8954 5 20C5 21.1046 4.10457 22 3 22C1.89543 22 1 21.1046 1 20C1 18.8954 1.89543 18 3 18Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M3 35C4.10457 35 5 35.8954 5 37C5 38.1046 4.10457 39 3 39C1.89543 39 1 38.1046 1 37C1 35.8954 1.89543 35 3 35Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M3 1C4.10457 1 5 1.89543 5 3C5 4.10457 4.10457 5 3 5C1.89543 5 1 4.10457 1 3C1 1.89543 1.89543 1 3 1Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2})),Bn=i=>k.createElement("svg",{width:40,height:16,viewBox:"0 0 40 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M37 13C37 9.27247 37 7.4087 36.391 5.93853C35.5791 3.97831 34.0217 2.42091 32.0615 1.60896C30.5913 1 28.7275 1 25 1L15 0.999999C11.2725 0.999999 9.4087 0.999998 7.9385 1.60896C5.9783 2.42091 4.4209 3.9783 3.609 5.93853C3 7.4087 3 9.27246 3 13",stroke:"#CED1D5"}),k.createElement("path",{d:"M18 13C18 11.8954 18.8954 11 20 11C21.1046 11 22 11.8954 22 13C22 14.1046 21.1046 15 20 15C18.8954 15 18 14.1046 18 13Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M35 13C35 11.8954 35.8954 11 37 11C38.1046 11 39 11.8954 39 13C39 14.1046 38.1046 15 37 15C35.8954 15 35 14.1046 35 13Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M1 13C1 11.8954 1.89543 11 3 11C4.10457 11 5 11.8954 5 13C5 14.1046 4.10457 15 3 15C1.89543 15 1 14.1046 1 13Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2})),lR=i=>k.createElement("svg",{width:16,height:40,viewBox:"0 0 16 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M13 3C9.27247 3 7.4087 3 5.93853 3.609C3.97831 4.4209 2.42092 5.9783 1.60896 7.9385C1 9.4087 1 11.2725 1 15L1 25C1 28.7275 1 30.5913 1.60896 32.0615C2.42092 34.0217 3.97831 35.5791 5.93853 36.391C7.4087 37 9.27247 37 13 37",stroke:"#CED1D5"}),k.createElement("path",{d:"M13 22C11.8954 22 11 21.1046 11 20C11 18.8954 11.8954 18 13 18C14.1046 18 15 18.8954 15 20C15 21.1046 14.1046 22 13 22Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M13 5C11.8954 5 11 4.10457 11 3C11 1.89543 11.8954 1 13 1C14.1046 1 15 1.89543 15 3C15 4.10457 14.1046 5 13 5Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M13 39C11.8954 39 11 38.1046 11 37C11 35.8954 11.8954 35 13 35C14.1046 35 15 35.8954 15 37C15 38.1046 14.1046 39 13 39Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2})),gs=i=>k.createElement("svg",{width:40,height:16,viewBox:"0 0 40 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M22 3C22 4.10457 21.1046 5 20 5C18.8954 5 18 4.10457 18 3C18 1.89543 18.8954 1 20 1C21.1046 1 22 1.89543 22 3Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2})),zd=i=>k.createElement("svg",{width:40,height:16,viewBox:"0 0 40 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M3 3C3 6.72753 3 8.5913 3.60896 10.0615C4.42091 12.0217 5.97831 13.5791 7.93853 14.391C9.4087 15 11.2725 15 15 15L25 15C28.7275 15 30.5913 15 32.0615 14.391C34.0217 13.5791 35.5791 12.0217 36.391 10.0615C37 8.5913 37 6.72754 37 3",stroke:"#CED1D5"}),k.createElement("path",{d:"M22 3C22 4.10457 21.1046 5 20 5C18.8954 5 18 4.10457 18 3C18 1.89543 18.8954 1 20 1C21.1046 1 22 1.89543 22 3Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M5 3C5 4.10457 4.10457 5 3 5C1.89543 5 1 4.10457 1 3C1 1.89543 1.89543 1 3 1C4.10457 1 5 1.89543 5 3Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}),k.createElement("path",{d:"M39 3C39 4.10457 38.1046 5 37 5C35.8954 5 35 4.10457 35 3C35 1.89543 35.8954 1 37 1C38.1046 1 39 1.89543 39 3Z",fill:"#CED1D5",stroke:"#CED1D5",strokeWidth:2}));function dR({aiData:i}){var e;return A.jsxs(ce,{className:U3("ai-block",i.className),children:[A.jsxs(ce,{className:"ai-block__header",children:[i.icon,A.jsx("h2",{children:i.title}),i.tag]}),A.jsx(ce,{className:"ai-block__content",children:(e=i==null?void 0:i.list)==null?void 0:e.map((t,s)=>A.jsxs(ce,{className:"item",children:[A.jsx(ce,{className:"item__icon",children:t.icon}),A.jsx("p",{className:"item__title",children:t.title})]},s))}),A.jsx(Ps,{condition:!!i.bottomPoint,children:A.jsx("div",{className:"bottom-points",children:A.jsx(gs,{})})}),A.jsx(Ps,{condition:!!i.rightPoints,children:A.jsx("div",{className:"right-points",children:A.jsx(oR,{})})}),A.jsx(Ps,{condition:!!i.rightPoint,children:A.jsx("div",{className:"right-point",children:A.jsx(gs,{})})}),A.jsx(Ps,{condition:!!i.leftPoints,children:A.jsx("div",{className:"left-points",children:A.jsx(lR,{})})}),A.jsx(Ps,{condition:!!i.topPoint,children:A.jsx("div",{className:"top-point",children:A.jsx(gs,{})})}),A.jsx(Ps,{condition:!!i.topPoints,children:A.jsx("div",{className:"top-points",children:A.jsx(Bn,{})})}),A.jsx(Ps,{condition:!!i.bottomPoints,children:A.jsx("div",{className:"bottom-points",children:A.jsx(zd,{})})})]})}const uR=i=>k.createElement("svg",{width:80,height:87,viewBox:"0 0 80 87",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M0.5 0V62C0.5 75.2548 11.2452 86 24.5 86H80",stroke:"#CED1D5"})),cR=i=>k.createElement("svg",{width:631,height:99,viewBox:"0 0 631 99",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M0 1H28.5C39.8218 1 49 10.1782 49 21.5V21.5C49 32.8218 58.1782 42 69.5 42H605.76C619.015 42 629.76 52.7452 629.76 66V99",stroke:"#CED1D5"})),hR=i=>k.createElement("svg",{width:58,height:57,viewBox:"0 0 58 57",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M0.5 57V46C0.5 32.7452 11.2452 22 24.5 22H34.6847C46.7569 22 56.5434 12.2136 56.5434 0.141357V0.141357",stroke:"#CED1D5"})),sh=i=>k.createElement("svg",{width:63,height:2,viewBox:"0 0 63 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M0 1H63",stroke:"#CED1D5"})),fR=i=>k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:99,height:111,fill:"none",...i},k.createElement("rect",{id:"backgroundrect",width:"100%",height:"100%",x:0,y:0,fill:"none",stroke:"none",className:"",style:{}}),k.createElement("g",{className:"currentLayer",style:{}},k.createElement("title",null,"Layer 1"),k.createElement("path",{d:"M-4.685044399890899,109.45054942369461 L71.14461560010909,109.45054942369461 C84.3994156001091,109.45054942369461 95.1446156001091,98.70534942369461 95.1446156001091,85.45054942369461 L95.1446156001091,-0.5494505763053893 ",stroke:"#CED1D5",id:"svg_1",className:""}))),mR=i=>k.createElement("svg",{width:344,height:53,viewBox:"0 0 344 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M343.26 1H24.8528C11.5979 1 0.852783 11.7452 0.852783 25V52.7537",stroke:"#CED1D5"})),pR=i=>k.createElement("svg",{width:114,height:62,viewBox:"0 0 114 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M1 0.749756L1 6.00002C1 19.2548 11.7452 30 25 30H89C102.255 30 113 40.7452 113 54V62",stroke:"#CED1D5"})),gR=i=>k.createElement("svg",{width:141,height:61,viewBox:"0 0 141 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M140 0V5C140 18.2548 129.255 29 116 29H25C11.7452 29 1 39.7452 1 53V61",stroke:"#CED1D5"})),vR=i=>k.createElement("svg",{width:200,height:32,viewBox:"0 0 200 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M0.550781 1H80C88 1 95 8 95 16C95 24 102 31 110 31H199.5",stroke:"#CED1D5"})),ER=i=>k.createElement("svg",{width:314,height:58,viewBox:"0 0 314 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M1 0V0C1 11.598 10.402 21 22 21H289C302.255 21 313 31.7452 313 45V57.4497",stroke:"#CED1D5"})),yR=i=>k.createElement("svg",{width:102,height:100,viewBox:"0 0 102 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},k.createElement("path",{d:"M51 0.680664V99.3511",stroke:"#CED1D5"})),rh=[{id:"1",data:{title:"Ai Voice Agent",rightPoints:!0,className:"ai-01",icon:A.jsx(BL,{}),tag:A.jsx(Or,{text:"Custom",bgColor:"#E6F6F9",color:"#03586D",border:"1px solid #B2E2ED"}),list:[{icon:A.jsx(WL,{}),title:"Inbound/Outbound Calls"},{icon:A.jsx(qL,{}),title:"Appointment Setter"},{icon:A.jsx(jL,{}),title:"24/7 Availability"},{icon:A.jsx(YL,{}),title:"10 More Attributes"}]}},{id:"2",data:{title:"AI Chat Bot Agent",className:"ai-02",leftPoints:!0,rightPoint:!0,icon:A.jsx(HL,{}),tag:A.jsx(Or,{text:"Custom",bgColor:"#E6F6F9",color:"#03586D",border:"1px solid #B2E2ED"}),list:[{icon:A.jsx(ZL,{}),title:"Website Integration"},{icon:A.jsx(zL,{}),title:"Multi-language Support"},{icon:A.jsx(QL,{}),title:"Lead Qualification"}]}},{id:"3",data:{title:"Automated",className:"ai-03",leftPoints:!0,rightPoint:!0,icon:A.jsx(VL,{}),tag:A.jsx(Or,{text:"Standart",bgColor:"#EFF0F1",color:"#363B41",border:"1px solid #CED1D5"}),list:[{icon:A.jsx(XL,{}),title:"Task Automation"},{icon:A.jsx(JL,{}),title:"Deadline Management"},{icon:A.jsx(eR,{}),title:"Integration Capabilities"}]}},{id:"4",data:{title:"Automated CRM",leftPoints:!0,rightPoint:!0,className:"ai-04",icon:A.jsx(GL,{}),tag:A.jsx(Or,{text:"Standart",bgColor:"#EFF0F1",color:"#363B41",border:"1px solid #CED1D5"}),list:[{icon:A.jsx(tR,{}),title:"Contact Management"},{icon:A.jsx(iR,{}),title:"Performance Analytics"},{icon:A.jsx(sR,{}),title:"Mobile Access"}]}},{id:"5",data:{title:"Invoices & Billing",bottomPoints:!0,leftPoints:!0,className:"ai-05",icon:A.jsx(KL,{}),tag:A.jsx(Or,{text:"Standart",bgColor:"#EFF0F1",color:"#363B41",border:"1px solid #CED1D5"}),list:[{icon:A.jsx(rR,{}),title:"Automated Billing"},{icon:A.jsx(nR,{}),title:"Payment Tracking"},{icon:A.jsx(aR,{}),title:"Currency Options"}]}}];function bR(){return A.jsx(A.Fragment,{children:A.jsxs("div",{className:"ai-container",children:[rh==null?void 0:rh.map((i,e)=>A.jsx(dR,{aiData:i.data},e)),A.jsxs("div",{className:"desktop-block",children:[A.jsxs(ce,{className:"block1",children:[A.jsx(ce,{sx:{position:"absolute",left:"-19.2px"},children:A.jsx(gs,{})}),A.jsx(ce,{sx:{position:"absolute",left:"",top:"2.2%"},children:A.jsx(uR,{})})]}),A.jsxs(ce,{className:"block2",children:[A.jsx(ce,{children:A.jsx(cR,{})}),A.jsx(ce,{sx:{position:"absolute",top:"86px",left:"610px"},children:A.jsx(Bn,{})})]}),A.jsxs(ce,{className:"block3",children:[A.jsx(ce,{children:A.jsx(hR,{})}),A.jsx(ce,{sx:{position:"absolute",top:"55px",left:"-19.5px"},children:A.jsx(gs,{})})]}),A.jsx(ce,{className:"block4",children:A.jsx(sh,{})}),A.jsx(ce,{className:"block5",children:A.jsx(sh,{})}),A.jsx(ce,{className:"block6",children:A.jsx(fR,{})}),A.jsx(ce,{className:"block7",children:A.jsx(ce,{children:A.jsx(mR,{})})})]}),A.jsxs("div",{className:"tablet-block",children:[A.jsxs(ce,{className:"tablet-block-1",children:[A.jsx(ce,{sx:{position:"absolute",top:"-9px"},children:A.jsx(zd,{})}),A.jsx(ce,{sx:{transform:"rotate(90deg)",position:"absolute",left:"-7px",top:"15px"},children:A.jsx(sh,{})}),A.jsx(ce,{sx:{position:"absolute",bottom:"39px"},children:A.jsx(Bn,{})})]}),A.jsxs(ce,{className:"tablet-block-2",children:[A.jsx(ce,{sx:{position:"absolute",left:"-15px",top:"10px"},children:A.jsx(gs,{})}),A.jsx(ce,{sx:{position:"absolute",top:"10px",left:"4px"},children:A.jsx(pR,{})}),A.jsx(ce,{sx:{position:"absolute",top:"60px",left:"97px"},children:A.jsx(Bn,{})})]}),A.jsxs(ce,{className:"tablet-block-3",children:[A.jsx(ce,{sx:{position:"absolute",left:"-19px",top:"59px"},children:A.jsx(Bn,{})}),A.jsx(ce,{sx:{position:"absolute",left:"0px",top:"12px"},children:A.jsx(gR,{})}),A.jsx(ce,{sx:{position:"absolute",top:"10px",left:"120px"},children:A.jsx(zd,{})})]}),A.jsxs(ce,{className:"tablet-block-4",children:[A.jsx(ce,{sx:{position:"absolute",left:"-20px",top:"-2px"},children:A.jsx(gs,{})}),A.jsx(ce,{children:A.jsx(vR,{})})]}),A.jsxs(ce,{className:"tablet-block-5",children:[A.jsx(ce,{sx:{position:"absolute",top:"17px",left:"-19px"},children:A.jsx(zd,{})}),A.jsx(ce,{sx:{position:"absolute",top:"20px"},children:A.jsx(ER,{})}),A.jsx(ce,{sx:{position:"absolute",left:"293px",top:"65px"},children:A.jsx(Bn,{})})]}),A.jsxs(ce,{className:"tablet-block-6",children:[A.jsx(ce,{sx:{position:"absolute",top:"-16px",left:"31px"},children:A.jsx(gs,{})}),A.jsx(ce,{sx:{position:"absolute",top:"-16px"},children:A.jsx(yR,{})}),A.jsx(ce,{sx:{position:"absolute",top:"80px",left:"31px"},children:A.jsx(gs,{})})]})]})]})})}function KR(){return A.jsxs(A.Fragment,{children:[A.jsxs(Is,{className:"section main-section",children:[A.jsx(Or,{bgColor:"#ffffff",color:"#464D54",text:"Powered by advanced AI technology",border:"1px solid #818992"}),A.jsx(gr,{title:"Everything you need to automate your business with AI",subTitle:"From CRM to AI agents, Elevanto AI combines a powerful platform with custom automation and intelligent assistants—purpose-built for service-focused teams."}),A.jsx($3,{sx:{marginTop:"32px"}}),A.jsx(bR,{})]}),A.jsx(vr,{children:A.jsxs(Is,{className:"section",children:[A.jsx(gr,{size:20,title:A.jsxs("div",{className:"tag-title",children:[A.jsx("span",{style:{color:tl.colors.secondary},children:"Trusted by"})," top-tier teams worldwide"]})}),A.jsx(yy,{})]})}),A.jsx(vr,{children:A.jsxs(Is,{className:"section offer-section",children:[A.jsx(gr,{size:36,subTitle:"We combine a white-label automation platform with AI-powered services tailored to your business.",title:A.jsxs("div",{className:"tag-title",children:["What ",A.jsx("span",{style:{color:tl.colors.secondary},children:"We Offer"})]})}),A.jsx(my,{})]})}),A.jsx(vr,{children:A.jsxs(Is,{className:"section advantage-section",children:[A.jsx(gr,{size:36,title:"Elevanto One",subTitle:"Built to scale. Powered by AI."}),A.jsx(Or,{bgColor:"#ffffff",color:"#464D54",text:"Powered by advanced AI technology",border:"1px solid #818992"}),A.jsx($L,{}),A.jsxs("div",{className:"advantage-section__footer",children:[A.jsx(Gg,{variant:"contained",children:"Start for free"}),A.jsx("p",{children:"We'll guide you through every step."})]})]})}),A.jsx(vr,{children:A.jsxs(Is,{className:"section customer-section",children:[A.jsx(gr,{size:36,subTitle:"Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.",title:A.jsxs("div",{className:"tag-title",children:["Our customers ",A.jsx("span",{style:{color:tl.colors.secondary},children:"love us!"})]})}),A.jsx(uy,{})]})}),A.jsx(vr,{children:A.jsxs(Is,{className:"section promo-video",children:[A.jsx(gr,{size:36,title:"Promo video title",subTitle:"Lorem ipsum dolor sit amet consectetur adipiscing eli mattis sit phasellus mollis sit aliquam sit nullam neque"}),A.jsx(FL,{})]})}),A.jsx(vr,{children:A.jsxs(Is,{className:"section question-section",children:[A.jsx(gr,{size:36,title:A.jsxs("div",{className:"tag-title",children:[A.jsx("span",{style:{color:tl.colors.secondary},children:"Your questions"}),", we answered"]})}),A.jsx(Iy,{})]})}),A.jsx(vr,{children:A.jsx(Is,{className:"section ready-business-section",children:A.jsx(B3,{})})})]})}export{KR as default};
